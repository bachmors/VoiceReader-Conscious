var Lo=Object.defineProperty;var Io=(s,e,o)=>e in s?Lo(s,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[e]=o;var fr=(s,e,o)=>(Io(s,typeof e!="symbol"?e+"":e,o),o),ls=(s,e,o)=>{if(!e.has(s))throw TypeError("Cannot "+o)};var bt=(s,e,o)=>(ls(s,e,"read from private field"),o?o.call(s):e.get(s)),Yt=(s,e,o)=>{if(e.has(s))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(s):e.set(s,o)},yn=(s,e,o,a)=>(ls(s,e,"write to private field"),a?a.call(s,o):e.set(s,o),o);var Lr=(s,e,o,a)=>({set _(c){yn(s,e,c,o)},get _(){return bt(s,e,a)}}),an=(s,e,o)=>(ls(s,e,"access private method"),o);function _mergeNamespaces(s,e){for(var o=0;o<e.length;o++){const a=e[o];if(typeof a!="string"&&!Array.isArray(a)){for(const c in a)if(c!=="default"&&!(c in s)){const h=Object.getOwnPropertyDescriptor(a,c);h&&Object.defineProperty(s,c,h.get?h:{enumerable:!0,get:()=>a[c]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const h of c)if(h.type==="childList")for(const g of h.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&a(g)}).observe(document,{childList:!0,subtree:!0});function o(c){const h={};return c.integrity&&(h.integrity=c.integrity),c.referrerPolicy&&(h.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?h.credentials="include":c.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function a(c){if(c.ep)return;c.ep=!0;const h=o(c);fetch(c.href,h)}})();function getDefaultExportFromCjs(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function getAugmentedNamespace(s){if(s.__esModule)return s;var e=s.default;if(typeof e=="function"){var o=function a(){return this instanceof a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};o.prototype=e.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(s).forEach(function(a){var c=Object.getOwnPropertyDescriptor(s,a);Object.defineProperty(o,a,c.get?c:{enumerable:!0,get:function(){return s[a]}})}),o}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$1=Symbol.for("react.element"),n$1=Symbol.for("react.portal"),p$2=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$1=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$1(s){return s===null||typeof s!="object"?null:(s=z$1&&s[z$1]||s["@@iterator"],typeof s=="function"?s:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$1={};function E$1(s,e,o){this.props=s,this.context=e,this.refs=D$1,this.updater=o||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(s,e){if(typeof s!="object"&&typeof s!="function"&&s!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,s,e,"setState")};E$1.prototype.forceUpdate=function(s){this.updater.enqueueForceUpdate(this,s,"forceUpdate")};function F(){}F.prototype=E$1.prototype;function G$1(s,e,o){this.props=s,this.context=e,this.refs=D$1,this.updater=o||B$1}var H$1=G$1.prototype=new F;H$1.constructor=G$1;C$1(H$1,E$1.prototype);H$1.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$1(s,e,o){var a,c={},h=null,g=null;if(e!=null)for(a in e.ref!==void 0&&(g=e.ref),e.key!==void 0&&(h=""+e.key),e)J.call(e,a)&&!L$1.hasOwnProperty(a)&&(c[a]=e[a]);var b=arguments.length-2;if(b===1)c.children=o;else if(1<b){for(var _=Array(b),j=0;j<b;j++)_[j]=arguments[j+2];c.children=_}if(s&&s.defaultProps)for(a in b=s.defaultProps,b)c[a]===void 0&&(c[a]=b[a]);return{$$typeof:l$1,type:s,key:h,ref:g,props:c,_owner:K$1.current}}function N$1(s,e){return{$$typeof:l$1,type:s.type,key:e,ref:s.ref,props:s.props,_owner:s._owner}}function O$1(s){return typeof s=="object"&&s!==null&&s.$$typeof===l$1}function escape$1(s){var e={"=":"=0",":":"=2"};return"$"+s.replace(/[=:]/g,function(o){return e[o]})}var P$1=/\/+/g;function Q$1(s,e){return typeof s=="object"&&s!==null&&s.key!=null?escape$1(""+s.key):e.toString(36)}function R$1(s,e,o,a,c){var h=typeof s;(h==="undefined"||h==="boolean")&&(s=null);var g=!1;if(s===null)g=!0;else switch(h){case"string":case"number":g=!0;break;case"object":switch(s.$$typeof){case l$1:case n$1:g=!0}}if(g)return g=s,c=c(g),s=a===""?"."+Q$1(g,0):a,I$1(c)?(o="",s!=null&&(o=s.replace(P$1,"$&/")+"/"),R$1(c,e,o,"",function(j){return j})):c!=null&&(O$1(c)&&(c=N$1(c,o+(!c.key||g&&g.key===c.key?"":(""+c.key).replace(P$1,"$&/")+"/")+s)),e.push(c)),1;if(g=0,a=a===""?".":a+":",I$1(s))for(var b=0;b<s.length;b++){h=s[b];var _=a+Q$1(h,b);g+=R$1(h,e,o,_,c)}else if(_=A$1(s),typeof _=="function")for(s=_.call(s),b=0;!(h=s.next()).done;)h=h.value,_=a+Q$1(h,b++),g+=R$1(h,e,o,_,c);else if(h==="object")throw e=String(s),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return g}function S$1(s,e,o){if(s==null)return s;var a=[],c=0;return R$1(s,a,"","",function(h){return e.call(o,h,c++)}),a}function T$1(s){if(s._status===-1){var e=s._result;e=e(),e.then(function(o){(s._status===0||s._status===-1)&&(s._status=1,s._result=o)},function(o){(s._status===0||s._status===-1)&&(s._status=2,s._result=o)}),s._status===-1&&(s._status=0,s._result=e)}if(s._status===1)return s._result.default;throw s._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};function X$1(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$1,forEach:function(s,e,o){S$1(s,function(){e.apply(this,arguments)},o)},count:function(s){var e=0;return S$1(s,function(){e++}),e},toArray:function(s){return S$1(s,function(e){return e})||[]},only:function(s){if(!O$1(s))throw Error("React.Children.only expected to receive a single React element child.");return s}};react_production_min.Component=E$1;react_production_min.Fragment=p$2;react_production_min.Profiler=r;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$1;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.act=X$1;react_production_min.cloneElement=function(s,e,o){if(s==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+s+".");var a=C$1({},s.props),c=s.key,h=s.ref,g=s._owner;if(e!=null){if(e.ref!==void 0&&(h=e.ref,g=K$1.current),e.key!==void 0&&(c=""+e.key),s.type&&s.type.defaultProps)var b=s.type.defaultProps;for(_ in e)J.call(e,_)&&!L$1.hasOwnProperty(_)&&(a[_]=e[_]===void 0&&b!==void 0?b[_]:e[_])}var _=arguments.length-2;if(_===1)a.children=o;else if(1<_){b=Array(_);for(var j=0;j<_;j++)b[j]=arguments[j+2];a.children=b}return{$$typeof:l$1,type:s.type,key:c,ref:h,props:a,_owner:g}};react_production_min.createContext=function(s){return s={$$typeof:u,_currentValue:s,_currentValue2:s,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},s.Provider={$$typeof:t,_context:s},s.Consumer=s};react_production_min.createElement=M$1;react_production_min.createFactory=function(s){var e=M$1.bind(null,s);return e.type=s,e};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(s){return{$$typeof:v$1,render:s}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(s){return{$$typeof:y,_payload:{_status:-1,_result:s},_init:T$1}};react_production_min.memo=function(s,e){return{$$typeof:x,type:s,compare:e===void 0?null:e}};react_production_min.startTransition=function(s){var e=V$1.transition;V$1.transition={};try{s()}finally{V$1.transition=e}};react_production_min.unstable_act=X$1;react_production_min.useCallback=function(s,e){return U$1.current.useCallback(s,e)};react_production_min.useContext=function(s){return U$1.current.useContext(s)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(s){return U$1.current.useDeferredValue(s)};react_production_min.useEffect=function(s,e){return U$1.current.useEffect(s,e)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(s,e,o){return U$1.current.useImperativeHandle(s,e,o)};react_production_min.useInsertionEffect=function(s,e){return U$1.current.useInsertionEffect(s,e)};react_production_min.useLayoutEffect=function(s,e){return U$1.current.useLayoutEffect(s,e)};react_production_min.useMemo=function(s,e){return U$1.current.useMemo(s,e)};react_production_min.useReducer=function(s,e,o){return U$1.current.useReducer(s,e,o)};react_production_min.useRef=function(s){return U$1.current.useRef(s)};react_production_min.useState=function(s){return U$1.current.useState(s)};react_production_min.useSyncExternalStore=function(s,e,o){return U$1.current.useSyncExternalStore(s,e,o)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=reactExports,k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$1={key:!0,ref:!0,__self:!0,__source:!0};function q(s,e,o){var a,c={},h=null,g=null;o!==void 0&&(h=""+o),e.key!==void 0&&(h=""+e.key),e.ref!==void 0&&(g=e.ref);for(a in e)m$1.call(e,a)&&!p$1.hasOwnProperty(a)&&(c[a]=e[a]);if(s&&s.defaultProps)for(a in e=s.defaultProps,e)c[a]===void 0&&(c[a]=e[a]);return{$$typeof:k,type:s,key:h,ref:g,props:c,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(s){function e(It,Jt){var fn=It.length;It.push(Jt);e:for(;0<fn;){var _n=fn-1>>>1,xn=It[_n];if(0<c(xn,Jt))It[_n]=Jt,It[fn]=xn,fn=_n;else break e}}function o(It){return It.length===0?null:It[0]}function a(It){if(It.length===0)return null;var Jt=It[0],fn=It.pop();if(fn!==Jt){It[0]=fn;e:for(var _n=0,xn=It.length,Mt=xn>>>1;_n<Mt;){var xt=2*(_n+1)-1,At=It[xt],wt=xt+1,kt=It[wt];if(0>c(At,fn))wt<xn&&0>c(kt,At)?(It[_n]=kt,It[wt]=fn,_n=wt):(It[_n]=At,It[xt]=fn,_n=xt);else if(wt<xn&&0>c(kt,fn))It[_n]=kt,It[wt]=fn,_n=wt;else break e}}return Jt}function c(It,Jt){var fn=It.sortIndex-Jt.sortIndex;return fn!==0?fn:It.id-Jt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;s.unstable_now=function(){return h.now()}}else{var g=Date,b=g.now();s.unstable_now=function(){return g.now()-b}}var _=[],j=[],$=1,_e=null,tt=3,et=!1,ut=!1,ht=!1,st=typeof setTimeout=="function"?setTimeout:null,nt=typeof clearTimeout=="function"?clearTimeout:null,rt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function at(It){for(var Jt=o(j);Jt!==null;){if(Jt.callback===null)a(j);else if(Jt.startTime<=It)a(j),Jt.sortIndex=Jt.expirationTime,e(_,Jt);else break;Jt=o(j)}}function dt(It){if(ht=!1,at(It),!ut)if(o(_)!==null)ut=!0,Vt(ot);else{var Jt=o(j);Jt!==null&&Zt(dt,Jt.startTime-It)}}function ot(It,Jt){ut=!1,ht&&(ht=!1,nt(mt),mt=-1),et=!0;var fn=tt;try{for(at(Jt),_e=o(_);_e!==null&&(!(_e.expirationTime>Jt)||It&&!Ct());){var _n=_e.callback;if(typeof _n=="function"){_e.callback=null,tt=_e.priorityLevel;var xn=_n(_e.expirationTime<=Jt);Jt=s.unstable_now(),typeof xn=="function"?_e.callback=xn:_e===o(_)&&a(_),at(Jt)}else a(_);_e=o(_)}if(_e!==null)var Mt=!0;else{var xt=o(j);xt!==null&&Zt(dt,xt.startTime-Jt),Mt=!1}return Mt}finally{_e=null,tt=fn,et=!1}}var ct=!1,vt=null,mt=-1,pt=5,Et=-1;function Ct(){return!(s.unstable_now()-Et<pt)}function Nt(){if(vt!==null){var It=s.unstable_now();Et=It;var Jt=!0;try{Jt=vt(!0,It)}finally{Jt?Ut():(ct=!1,vt=null)}}else ct=!1}var Ut;if(typeof rt=="function")Ut=function(){rt(Nt)};else if(typeof MessageChannel<"u"){var Tt=new MessageChannel,qt=Tt.port2;Tt.port1.onmessage=Nt,Ut=function(){qt.postMessage(null)}}else Ut=function(){st(Nt,0)};function Vt(It){vt=It,ct||(ct=!0,Ut())}function Zt(It,Jt){mt=st(function(){It(s.unstable_now())},Jt)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(It){It.callback=null},s.unstable_continueExecution=function(){ut||et||(ut=!0,Vt(ot))},s.unstable_forceFrameRate=function(It){0>It||125<It?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):pt=0<It?Math.floor(1e3/It):5},s.unstable_getCurrentPriorityLevel=function(){return tt},s.unstable_getFirstCallbackNode=function(){return o(_)},s.unstable_next=function(It){switch(tt){case 1:case 2:case 3:var Jt=3;break;default:Jt=tt}var fn=tt;tt=Jt;try{return It()}finally{tt=fn}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(It,Jt){switch(It){case 1:case 2:case 3:case 4:case 5:break;default:It=3}var fn=tt;tt=It;try{return Jt()}finally{tt=fn}},s.unstable_scheduleCallback=function(It,Jt,fn){var _n=s.unstable_now();switch(typeof fn=="object"&&fn!==null?(fn=fn.delay,fn=typeof fn=="number"&&0<fn?_n+fn:_n):fn=_n,It){case 1:var xn=-1;break;case 2:xn=250;break;case 5:xn=1073741823;break;case 4:xn=1e4;break;default:xn=5e3}return xn=fn+xn,It={id:$++,callback:Jt,priorityLevel:It,startTime:fn,expirationTime:xn,sortIndex:-1},fn>_n?(It.sortIndex=fn,e(j,It),o(_)===null&&It===o(j)&&(ht?(nt(mt),mt=-1):ht=!0,Zt(dt,fn-_n))):(It.sortIndex=xn,e(_,It),ut||et||(ut=!0,Vt(ot))),It},s.unstable_shouldYield=Ct,s.unstable_wrapCallback=function(It){var Jt=tt;return function(){var fn=tt;tt=Jt;try{return It.apply(this,arguments)}finally{tt=fn}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p(s){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+s,o=1;o<arguments.length;o++)e+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+s+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(s,e){ha(s,e),ha(s+"Capture",e)}function ha(s,e){for(ea[s]=e,s=0;s<e.length;s++)da.add(e[s])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(s){return ja.call(ma,s)?!0:ja.call(la,s)?!1:ka.test(s)?ma[s]=!0:(la[s]=!0,!1)}function pa(s,e,o,a){if(o!==null&&o.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return a?!1:o!==null?!o.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function qa(s,e,o,a){if(e===null||typeof e>"u"||pa(s,e,o,a))return!0;if(a)return!1;if(o!==null)switch(o.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function v(s,e,o,a,c,h,g){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=a,this.attributeNamespace=c,this.mustUseProperty=o,this.propertyName=s,this.type=e,this.sanitizeURL=h,this.removeEmptyString=g}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){z[s]=new v(s,0,!1,s,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var e=s[0];z[e]=new v(e,1,!1,s[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(s){z[s]=new v(s,2,!1,s.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){z[s]=new v(s,2,!1,s,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){z[s]=new v(s,3,!1,s.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(s){z[s]=new v(s,3,!0,s,null,!1,!1)});["capture","download"].forEach(function(s){z[s]=new v(s,4,!1,s,null,!1,!1)});["cols","rows","size","span"].forEach(function(s){z[s]=new v(s,6,!1,s,null,!1,!1)});["rowSpan","start"].forEach(function(s){z[s]=new v(s,5,!1,s.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var e=s.replace(ra,sa);z[e]=new v(e,1,!1,s,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var e=s.replace(ra,sa);z[e]=new v(e,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(s){var e=s.replace(ra,sa);z[e]=new v(e,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(s){z[s]=new v(s,1,!1,s.toLowerCase(),null,!1,!1)});z.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(s){z[s]=new v(s,1,!1,s.toLowerCase(),null,!0,!0)});function ta(s,e,o,a){var c=z.hasOwnProperty(e)?z[e]:null;(c!==null?c.type!==0:a||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qa(e,o,c,a)&&(o=null),a||c===null?oa(e)&&(o===null?s.removeAttribute(e):s.setAttribute(e,""+o)):c.mustUseProperty?s[c.propertyName]=o===null?c.type===3?!1:"":o:(e=c.attributeName,a=c.attributeNamespace,o===null?s.removeAttribute(e):(c=c.type,o=c===3||c===4&&o===!0?"":""+o,a?s.setAttributeNS(a,e,o):s.setAttribute(e,o))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(s){return s===null||typeof s!="object"?null:(s=Ja&&s[Ja]||s["@@iterator"],typeof s=="function"?s:null)}var A=Object.assign,La;function Ma(s){if(La===void 0)try{throw Error()}catch(o){var e=o.stack.trim().match(/\n( *(at )?)/);La=e&&e[1]||""}return`
`+La+s}var Na=!1;function Oa(s,e){if(!s||Na)return"";Na=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(j){var a=j}Reflect.construct(s,[],e)}else{try{e.call()}catch(j){a=j}s.call(e.prototype)}else{try{throw Error()}catch(j){a=j}s()}}catch(j){if(j&&a&&typeof j.stack=="string"){for(var c=j.stack.split(`
`),h=a.stack.split(`
`),g=c.length-1,b=h.length-1;1<=g&&0<=b&&c[g]!==h[b];)b--;for(;1<=g&&0<=b;g--,b--)if(c[g]!==h[b]){if(g!==1||b!==1)do if(g--,b--,0>b||c[g]!==h[b]){var _=`
`+c[g].replace(" at new "," at ");return s.displayName&&_.includes("<anonymous>")&&(_=_.replace("<anonymous>",s.displayName)),_}while(1<=g&&0<=b);break}}}finally{Na=!1,Error.prepareStackTrace=o}return(s=s?s.displayName||s.name:"")?Ma(s):""}function Pa(s){switch(s.tag){case 5:return Ma(s.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return s=Oa(s.type,!1),s;case 11:return s=Oa(s.type.render,!1),s;case 1:return s=Oa(s.type,!0),s;default:return""}}function Qa(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case Ca:return(s.displayName||"Context")+".Consumer";case Ba:return(s._context.displayName||"Context")+".Provider";case Da:var e=s.render;return s=s.displayName,s||(s=e.displayName||e.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Ga:return e=s.displayName||null,e!==null?e:Qa(s.type)||"Memo";case Ha:e=s._payload,s=s._init;try{return Qa(s(e))}catch{}}return null}function Ra(s){var e=s.type;switch(s.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=e.render,s=s.displayName||s.name||"",e.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(e);case 8:return e===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sa(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ta(s){var e=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ua(s){var e=Ta(s)?"checked":"value",o=Object.getOwnPropertyDescriptor(s.constructor.prototype,e),a=""+s[e];if(!s.hasOwnProperty(e)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var c=o.get,h=o.set;return Object.defineProperty(s,e,{configurable:!0,get:function(){return c.call(this)},set:function(g){a=""+g,h.call(this,g)}}),Object.defineProperty(s,e,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(g){a=""+g},stopTracking:function(){s._valueTracker=null,delete s[e]}}}}function Va(s){s._valueTracker||(s._valueTracker=Ua(s))}function Wa(s){if(!s)return!1;var e=s._valueTracker;if(!e)return!0;var o=e.getValue(),a="";return s&&(a=Ta(s)?s.checked?"true":"false":s.value),s=a,s!==o?(e.setValue(s),!0):!1}function Xa(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Ya(s,e){var o=e.checked;return A({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??s._wrapperState.initialChecked})}function Za(s,e){var o=e.defaultValue==null?"":e.defaultValue,a=e.checked!=null?e.checked:e.defaultChecked;o=Sa(e.value!=null?e.value:o),s._wrapperState={initialChecked:a,initialValue:o,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ab(s,e){e=e.checked,e!=null&&ta(s,"checked",e,!1)}function bb(s,e){ab(s,e);var o=Sa(e.value),a=e.type;if(o!=null)a==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+o):s.value!==""+o&&(s.value=""+o);else if(a==="submit"||a==="reset"){s.removeAttribute("value");return}e.hasOwnProperty("value")?cb(s,e.type,o):e.hasOwnProperty("defaultValue")&&cb(s,e.type,Sa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(s.defaultChecked=!!e.defaultChecked)}function db(s,e,o){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var a=e.type;if(!(a!=="submit"&&a!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+s._wrapperState.initialValue,o||e===s.value||(s.value=e),s.defaultValue=e}o=s.name,o!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,o!==""&&(s.name=o)}function cb(s,e,o){(e!=="number"||Xa(s.ownerDocument)!==s)&&(o==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+o&&(s.defaultValue=""+o))}var eb=Array.isArray;function fb(s,e,o,a){if(s=s.options,e){e={};for(var c=0;c<o.length;c++)e["$"+o[c]]=!0;for(o=0;o<s.length;o++)c=e.hasOwnProperty("$"+s[o].value),s[o].selected!==c&&(s[o].selected=c),c&&a&&(s[o].defaultSelected=!0)}else{for(o=""+Sa(o),e=null,c=0;c<s.length;c++){if(s[c].value===o){s[c].selected=!0,a&&(s[c].defaultSelected=!0);return}e!==null||s[c].disabled||(e=s[c])}e!==null&&(e.selected=!0)}}function gb(s,e){if(e.dangerouslySetInnerHTML!=null)throw Error(p(91));return A({},e,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function hb(s,e){var o=e.value;if(o==null){if(o=e.children,e=e.defaultValue,o!=null){if(e!=null)throw Error(p(92));if(eb(o)){if(1<o.length)throw Error(p(93));o=o[0]}e=o}e==null&&(e=""),o=e}s._wrapperState={initialValue:Sa(o)}}function ib(s,e){var o=Sa(e.value),a=Sa(e.defaultValue);o!=null&&(o=""+o,o!==s.value&&(s.value=o),e.defaultValue==null&&s.defaultValue!==o&&(s.defaultValue=o)),a!=null&&(s.defaultValue=""+a)}function jb(s){var e=s.textContent;e===s._wrapperState.initialValue&&e!==""&&e!==null&&(s.value=e)}function kb(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(s,e){return s==null||s==="http://www.w3.org/1999/xhtml"?kb(e):s==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var mb,nb=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,o,a,c){MSApp.execUnsafeLocalFunction(function(){return s(e,o,a,c)})}:s}(function(s,e){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=e;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mb.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;e.firstChild;)s.appendChild(e.firstChild)}});function ob(s,e){if(e){var o=s.firstChild;if(o&&o===s.lastChild&&o.nodeType===3){o.nodeValue=e;return}}s.textContent=e}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(s){qb.forEach(function(e){e=e+s.charAt(0).toUpperCase()+s.substring(1),pb[e]=pb[s]})});function rb(s,e,o){return e==null||typeof e=="boolean"||e===""?"":o||typeof e!="number"||e===0||pb.hasOwnProperty(s)&&pb[s]?(""+e).trim():e+"px"}function sb(s,e){s=s.style;for(var o in e)if(e.hasOwnProperty(o)){var a=o.indexOf("--")===0,c=rb(o,e[o],a);o==="float"&&(o="cssFloat"),a?s.setProperty(o,c):s[o]=c}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(s,e){if(e){if(tb[s]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(p(137,s));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(p(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(p(61))}if(e.style!=null&&typeof e.style!="object")throw Error(p(62))}}function vb(s,e){if(s.indexOf("-")===-1)return typeof e.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var yb=null,zb=null,Ab=null;function Bb(s){if(s=Cb(s)){if(typeof yb!="function")throw Error(p(280));var e=s.stateNode;e&&(e=Db(e),yb(s.stateNode,s.type,e))}}function Eb(s){zb?Ab?Ab.push(s):Ab=[s]:zb=s}function Fb(){if(zb){var s=zb,e=Ab;if(Ab=zb=null,Bb(s),e)for(s=0;s<e.length;s++)Bb(e[s])}}function Gb(s,e){return s(e)}function Hb(){}var Ib=!1;function Jb(s,e,o){if(Ib)return s(e,o);Ib=!0;try{return Gb(s,e,o)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(s,e){var o=s.stateNode;if(o===null)return null;var a=Db(o);if(a===null)return null;o=a[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(s=s.type,a=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!a;break e;default:s=!1}if(s)return null;if(o&&typeof o!="function")throw Error(p(231,e,typeof o));return o}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(s,e,o,a,c,h,g,b,_){var j=Array.prototype.slice.call(arguments,3);try{e.apply(o,j)}catch($){this.onError($)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(s){Ob=!0,Pb=s}};function Tb(s,e,o,a,c,h,g,b,_){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(s,e,o,a,c,h,g,b,_){if(Tb.apply(this,arguments),Ob){if(Ob){var j=Pb;Ob=!1,Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=j)}}function Vb(s){var e=s,o=s;if(s.alternate)for(;e.return;)e=e.return;else{s=e;do e=s,e.flags&4098&&(o=e.return),s=e.return;while(s)}return e.tag===3?o:null}function Wb(s){if(s.tag===13){var e=s.memoizedState;if(e===null&&(s=s.alternate,s!==null&&(e=s.memoizedState)),e!==null)return e.dehydrated}return null}function Xb(s){if(Vb(s)!==s)throw Error(p(188))}function Yb(s){var e=s.alternate;if(!e){if(e=Vb(s),e===null)throw Error(p(188));return e!==s?null:s}for(var o=s,a=e;;){var c=o.return;if(c===null)break;var h=c.alternate;if(h===null){if(a=c.return,a!==null){o=a;continue}break}if(c.child===h.child){for(h=c.child;h;){if(h===o)return Xb(c),s;if(h===a)return Xb(c),e;h=h.sibling}throw Error(p(188))}if(o.return!==a.return)o=c,a=h;else{for(var g=!1,b=c.child;b;){if(b===o){g=!0,o=c,a=h;break}if(b===a){g=!0,a=c,o=h;break}b=b.sibling}if(!g){for(b=h.child;b;){if(b===o){g=!0,o=h,a=c;break}if(b===a){g=!0,a=h,o=c;break}b=b.sibling}if(!g)throw Error(p(189))}}if(o.alternate!==a)throw Error(p(190))}if(o.tag!==3)throw Error(p(188));return o.stateNode.current===o?s:e}function Zb(s){return s=Yb(s),s!==null?$b(s):null}function $b(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var e=$b(s);if(e!==null)return e;s=s.sibling}return null}var ac$1=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic$1=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(s){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,s,void 0,(s.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(s){return s>>>=0,s===0?32:31-(pc(s)/qc|0)|0}var rc=64,sc$1=4194304;function tc(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function uc(s,e){var o=s.pendingLanes;if(o===0)return 0;var a=0,c=s.suspendedLanes,h=s.pingedLanes,g=o&268435455;if(g!==0){var b=g&~c;b!==0?a=tc(b):(h&=g,h!==0&&(a=tc(h)))}else g=o&~c,g!==0?a=tc(g):h!==0&&(a=tc(h));if(a===0)return 0;if(e!==0&&e!==a&&!(e&c)&&(c=a&-a,h=e&-e,c>=h||c===16&&(h&4194240)!==0))return e;if(a&4&&(a|=o&16),e=s.entangledLanes,e!==0)for(s=s.entanglements,e&=a;0<e;)o=31-oc(e),c=1<<o,a|=s[o],e&=~c;return a}function vc(s,e){switch(s){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(s,e){for(var o=s.suspendedLanes,a=s.pingedLanes,c=s.expirationTimes,h=s.pendingLanes;0<h;){var g=31-oc(h),b=1<<g,_=c[g];_===-1?(!(b&o)||b&a)&&(c[g]=vc(b,e)):_<=e&&(s.expiredLanes|=b),h&=~b}}function xc(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function yc(){var s=rc;return rc<<=1,!(rc&4194240)&&(rc=64),s}function zc(s){for(var e=[],o=0;31>o;o++)e.push(s);return e}function Ac(s,e,o){s.pendingLanes|=e,e!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,e=31-oc(e),s[e]=o}function Bc(s,e){var o=s.pendingLanes&~e;s.pendingLanes=e,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=e,s.mutableReadLanes&=e,s.entangledLanes&=e,e=s.entanglements;var a=s.eventTimes;for(s=s.expirationTimes;0<o;){var c=31-oc(o),h=1<<c;e[c]=0,a[c]=-1,s[c]=-1,o&=~h}}function Cc(s,e){var o=s.entangledLanes|=e;for(s=s.entanglements;o;){var a=31-oc(o),c=1<<a;c&e|s[a]&e&&(s[a]|=e),o&=~c}}var C=0;function Dc(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc$1(s,e){switch(s){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(e.pointerId)}}function Tc(s,e,o,a,c,h){return s===null||s.nativeEvent!==h?(s={blockedOn:e,domEventName:o,eventSystemFlags:a,nativeEvent:h,targetContainers:[c]},e!==null&&(e=Cb(e),e!==null&&Fc(e)),s):(s.eventSystemFlags|=a,e=s.targetContainers,c!==null&&e.indexOf(c)===-1&&e.push(c),s)}function Uc(s,e,o,a,c){switch(e){case"focusin":return Lc=Tc(Lc,s,e,o,a,c),!0;case"dragenter":return Mc=Tc(Mc,s,e,o,a,c),!0;case"mouseover":return Nc=Tc(Nc,s,e,o,a,c),!0;case"pointerover":var h=c.pointerId;return Oc.set(h,Tc(Oc.get(h)||null,s,e,o,a,c)),!0;case"gotpointercapture":return h=c.pointerId,Pc.set(h,Tc(Pc.get(h)||null,s,e,o,a,c)),!0}return!1}function Vc(s){var e=Wc(s.target);if(e!==null){var o=Vb(e);if(o!==null){if(e=o.tag,e===13){if(e=Wb(o),e!==null){s.blockedOn=e,Ic(s.priority,function(){Gc(o)});return}}else if(e===3&&o.stateNode.current.memoizedState.isDehydrated){s.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Xc(s){if(s.blockedOn!==null)return!1;for(var e=s.targetContainers;0<e.length;){var o=Yc(s.domEventName,s.eventSystemFlags,e[0],s.nativeEvent);if(o===null){o=s.nativeEvent;var a=new o.constructor(o.type,o);wb=a,o.target.dispatchEvent(a),wb=null}else return e=Cb(o),e!==null&&Fc(e),s.blockedOn=o,!1;e.shift()}return!0}function Zc(s,e,o){Xc(s)&&o.delete(e)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(s,e){s.blockedOn===e&&(s.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(s){function e(c){return ad(c,s)}if(0<Kc.length){ad(Kc[0],s);for(var o=1;o<Kc.length;o++){var a=Kc[o];a.blockedOn===s&&(a.blockedOn=null)}}for(Lc!==null&&ad(Lc,s),Mc!==null&&ad(Mc,s),Nc!==null&&ad(Nc,s),Oc.forEach(e),Pc.forEach(e),o=0;o<Qc.length;o++)a=Qc[o],a.blockedOn===s&&(a.blockedOn=null);for(;0<Qc.length&&(o=Qc[0],o.blockedOn===null);)Vc(o),o.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd$1=!0;function ed(s,e,o,a){var c=C,h=cd.transition;cd.transition=null;try{C=1,fd(s,e,o,a)}finally{C=c,cd.transition=h}}function gd(s,e,o,a){var c=C,h=cd.transition;cd.transition=null;try{C=4,fd(s,e,o,a)}finally{C=c,cd.transition=h}}function fd(s,e,o,a){if(dd$1){var c=Yc(s,e,o,a);if(c===null)hd(s,e,a,id$2,o),Sc$1(s,a);else if(Uc(c,s,e,o,a))a.stopPropagation();else if(Sc$1(s,a),e&4&&-1<Rc.indexOf(s)){for(;c!==null;){var h=Cb(c);if(h!==null&&Ec(h),h=Yc(s,e,o,a),h===null&&hd(s,e,a,id$2,o),h===c)break;c=h}c!==null&&a.stopPropagation()}else hd(s,e,a,null,o)}}var id$2=null;function Yc(s,e,o,a){if(id$2=null,s=xb(a),s=Wc(s),s!==null)if(e=Vb(s),e===null)s=null;else if(o=e.tag,o===13){if(s=Wb(e),s!==null)return s;s=null}else if(o===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;s=null}else e!==s&&(s=null);return id$2=s,null}function jd(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic$1:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var s,e=ld,o=e.length,a,c="value"in kd?kd.value:kd.textContent,h=c.length;for(s=0;s<o&&e[s]===c[s];s++);var g=o-s;for(a=1;a<=g&&e[o-a]===c[h-a];a++);return md=c.slice(s,1<a?1-a:void 0)}function od(s){var e=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&e===13&&(s=13)):s=e,s===10&&(s=13),32<=s||s===13?s:0}function pd(){return!0}function qd(){return!1}function rd(s){function e(o,a,c,h,g){this._reactName=o,this._targetInst=c,this.type=a,this.nativeEvent=h,this.target=g,this.currentTarget=null;for(var b in s)s.hasOwnProperty(b)&&(o=s[b],this[b]=o?o(h):h[b]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),e}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==yd&&(yd&&s.type==="mousemove"?(wd=s.screenX-yd.screenX,xd=s.screenY-yd.screenY):xd=wd=0,yd=s),wd)},movementY:function(s){return"movementY"in s?s.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(s){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(s):(s=Od[s])?!!e[s]:!1}function zd(){return Pd}var Qd=A({},ud,{key:function(s){if(s.key){var e=Md[s.key]||s.key;if(e!=="Unidentified")return e}return s.type==="keypress"?(s=od(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Nd[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(s){return s.type==="keypress"?od(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?od(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee$1=String.fromCharCode(32),fe=!1;function ge$1(s,e){switch(s){case"keyup":return $d.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ie=!1;function je(s,e){switch(s){case"compositionend":return he(e);case"keypress":return e.which!==32?null:(fe=!0,ee$1);case"textInput":return s=e.data,s===ee$1&&fe?null:s;default:return null}}function ke(s,e){if(ie)return s==="compositionend"||!ae&&ge$1(s,e)?(s=nd(),md=ld=kd=null,ie=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return de&&e.locale!=="ko"?null:e.data;default:return null}}var le$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(s){var e=s&&s.nodeName&&s.nodeName.toLowerCase();return e==="input"?!!le$1[s.type]:e==="textarea"}function ne$1(s,e,o,a){Eb(a),e=oe(e,"onChange"),0<e.length&&(o=new td("onChange","change",null,o,a),s.push({event:o,listeners:e}))}var pe=null,qe=null;function re$1(s){se(s,0)}function te(s){var e=ue(s);if(Wa(e))return s}function ve(s,e){if(s==="change")return e}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(s){if(s.propertyName==="value"&&te(qe)){var e=[];ne$1(e,qe,s,xb(s)),Jb(re$1,e)}}function Ce(s,e,o){s==="focusin"?(Ae(),pe=e,qe=o,pe.attachEvent("onpropertychange",Be)):s==="focusout"&&Ae()}function De(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return te(qe)}function Ee(s,e){if(s==="click")return te(e)}function Fe(s,e){if(s==="input"||s==="change")return te(e)}function Ge(s,e){return s===e&&(s!==0||1/s===1/e)||s!==s&&e!==e}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(s,e){if(He(s,e))return!0;if(typeof s!="object"||s===null||typeof e!="object"||e===null)return!1;var o=Object.keys(s),a=Object.keys(e);if(o.length!==a.length)return!1;for(a=0;a<o.length;a++){var c=o[a];if(!ja.call(e,c)||!He(s[c],e[c]))return!1}return!0}function Je(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Ke(s,e){var o=Je(s);s=0;for(var a;o;){if(o.nodeType===3){if(a=s+o.textContent.length,s<=e&&a>=e)return{node:o,offset:e-s};s=a}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Je(o)}}function Le(s,e){return s&&e?s===e?!0:s&&s.nodeType===3?!1:e&&e.nodeType===3?Le(s,e.parentNode):"contains"in s?s.contains(e):s.compareDocumentPosition?!!(s.compareDocumentPosition(e)&16):!1:!1}function Me(){for(var s=window,e=Xa();e instanceof s.HTMLIFrameElement;){try{var o=typeof e.contentWindow.location.href=="string"}catch{o=!1}if(o)s=e.contentWindow;else break;e=Xa(s.document)}return e}function Ne(s){var e=s&&s.nodeName&&s.nodeName.toLowerCase();return e&&(e==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||e==="textarea"||s.contentEditable==="true")}function Oe(s){var e=Me(),o=s.focusedElem,a=s.selectionRange;if(e!==o&&o&&o.ownerDocument&&Le(o.ownerDocument.documentElement,o)){if(a!==null&&Ne(o)){if(e=a.start,s=a.end,s===void 0&&(s=e),"selectionStart"in o)o.selectionStart=e,o.selectionEnd=Math.min(s,o.value.length);else if(s=(e=o.ownerDocument||document)&&e.defaultView||window,s.getSelection){s=s.getSelection();var c=o.textContent.length,h=Math.min(a.start,c);a=a.end===void 0?h:Math.min(a.end,c),!s.extend&&h>a&&(c=a,a=h,h=c),c=Ke(o,h);var g=Ke(o,a);c&&g&&(s.rangeCount!==1||s.anchorNode!==c.node||s.anchorOffset!==c.offset||s.focusNode!==g.node||s.focusOffset!==g.offset)&&(e=e.createRange(),e.setStart(c.node,c.offset),s.removeAllRanges(),h>a?(s.addRange(e),s.extend(g.node,g.offset)):(e.setEnd(g.node,g.offset),s.addRange(e)))}}for(e=[],s=o;s=s.parentNode;)s.nodeType===1&&e.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<e.length;o++)s=e[o],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re$1=null,Se=null,Te=!1;function Ue(s,e,o){var a=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Te||Qe==null||Qe!==Xa(a)||(a=Qe,"selectionStart"in a&&Ne(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Se&&Ie(Se,a)||(Se=a,a=oe(Re$1,"onSelect"),0<a.length&&(e=new td("onSelect","select",null,e,o),s.push({event:e,listeners:a}),e.target=Qe)))}function Ve(s,e){var o={};return o[s.toLowerCase()]=e.toLowerCase(),o["Webkit"+s]="webkit"+e,o["Moz"+s]="moz"+e,o}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(s){if(Xe[s])return Xe[s];if(!We[s])return s;var e=We[s],o;for(o in e)if(e.hasOwnProperty(o)&&o in Ye)return Xe[s]=e[o];return s}var $e=Ze("animationend"),af$1=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(s,e){df.set(s,e),fa(e,[s])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af$1,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(s,e,o){var a=s.type||"unknown-event";s.currentTarget=o,Ub(a,e,void 0,s),s.currentTarget=null}function se(s,e){e=(e&4)!==0;for(var o=0;o<s.length;o++){var a=s[o],c=a.event;a=a.listeners;e:{var h=void 0;if(e)for(var g=a.length-1;0<=g;g--){var b=a[g],_=b.instance,j=b.currentTarget;if(b=b.listener,_!==h&&c.isPropagationStopped())break e;nf(c,b,j),h=_}else for(g=0;g<a.length;g++){if(b=a[g],_=b.instance,j=b.currentTarget,b=b.listener,_!==h&&c.isPropagationStopped())break e;nf(c,b,j),h=_}}}if(Qb)throw s=Rb,Qb=!1,Rb=null,s}function D(s,e){var o=e[of];o===void 0&&(o=e[of]=new Set);var a=s+"__bubble";o.has(a)||(pf(e,s,2,!1),o.add(a))}function qf(s,e,o){var a=0;e&&(a|=4),pf(o,s,a,e)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(s){if(!s[rf]){s[rf]=!0,da.forEach(function(o){o!=="selectionchange"&&(mf.has(o)||qf(o,!1,s),qf(o,!0,s))});var e=s.nodeType===9?s:s.ownerDocument;e===null||e[rf]||(e[rf]=!0,qf("selectionchange",!1,e))}}function pf(s,e,o,a){switch(jd(e)){case 1:var c=ed;break;case 4:c=gd;break;default:c=fd}o=c.bind(null,e,o,s),c=void 0,!Lb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(c=!0),a?c!==void 0?s.addEventListener(e,o,{capture:!0,passive:c}):s.addEventListener(e,o,!0):c!==void 0?s.addEventListener(e,o,{passive:c}):s.addEventListener(e,o,!1)}function hd(s,e,o,a,c){var h=a;if(!(e&1)&&!(e&2)&&a!==null)e:for(;;){if(a===null)return;var g=a.tag;if(g===3||g===4){var b=a.stateNode.containerInfo;if(b===c||b.nodeType===8&&b.parentNode===c)break;if(g===4)for(g=a.return;g!==null;){var _=g.tag;if((_===3||_===4)&&(_=g.stateNode.containerInfo,_===c||_.nodeType===8&&_.parentNode===c))return;g=g.return}for(;b!==null;){if(g=Wc(b),g===null)return;if(_=g.tag,_===5||_===6){a=h=g;continue e}b=b.parentNode}}a=a.return}Jb(function(){var j=h,$=xb(o),_e=[];e:{var tt=df.get(s);if(tt!==void 0){var et=td,ut=s;switch(s){case"keypress":if(od(o)===0)break e;case"keydown":case"keyup":et=Rd;break;case"focusin":ut="focus",et=Fd;break;case"focusout":ut="blur",et=Fd;break;case"beforeblur":case"afterblur":et=Fd;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":et=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":et=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":et=Vd;break;case $e:case af$1:case bf:et=Hd;break;case cf:et=Xd;break;case"scroll":et=vd;break;case"wheel":et=Zd;break;case"copy":case"cut":case"paste":et=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":et=Td}var ht=(e&4)!==0,st=!ht&&s==="scroll",nt=ht?tt!==null?tt+"Capture":null:tt;ht=[];for(var rt=j,at;rt!==null;){at=rt;var dt=at.stateNode;if(at.tag===5&&dt!==null&&(at=dt,nt!==null&&(dt=Kb(rt,nt),dt!=null&&ht.push(tf(rt,dt,at)))),st)break;rt=rt.return}0<ht.length&&(tt=new et(tt,ut,null,o,$),_e.push({event:tt,listeners:ht}))}}if(!(e&7)){e:{if(tt=s==="mouseover"||s==="pointerover",et=s==="mouseout"||s==="pointerout",tt&&o!==wb&&(ut=o.relatedTarget||o.fromElement)&&(Wc(ut)||ut[uf]))break e;if((et||tt)&&(tt=$.window===$?$:(tt=$.ownerDocument)?tt.defaultView||tt.parentWindow:window,et?(ut=o.relatedTarget||o.toElement,et=j,ut=ut?Wc(ut):null,ut!==null&&(st=Vb(ut),ut!==st||ut.tag!==5&&ut.tag!==6)&&(ut=null)):(et=null,ut=j),et!==ut)){if(ht=Bd,dt="onMouseLeave",nt="onMouseEnter",rt="mouse",(s==="pointerout"||s==="pointerover")&&(ht=Td,dt="onPointerLeave",nt="onPointerEnter",rt="pointer"),st=et==null?tt:ue(et),at=ut==null?tt:ue(ut),tt=new ht(dt,rt+"leave",et,o,$),tt.target=st,tt.relatedTarget=at,dt=null,Wc($)===j&&(ht=new ht(nt,rt+"enter",ut,o,$),ht.target=at,ht.relatedTarget=st,dt=ht),st=dt,et&&ut)t:{for(ht=et,nt=ut,rt=0,at=ht;at;at=vf(at))rt++;for(at=0,dt=nt;dt;dt=vf(dt))at++;for(;0<rt-at;)ht=vf(ht),rt--;for(;0<at-rt;)nt=vf(nt),at--;for(;rt--;){if(ht===nt||nt!==null&&ht===nt.alternate)break t;ht=vf(ht),nt=vf(nt)}ht=null}else ht=null;et!==null&&wf(_e,tt,et,ht,!1),ut!==null&&st!==null&&wf(_e,st,ut,ht,!0)}}e:{if(tt=j?ue(j):window,et=tt.nodeName&&tt.nodeName.toLowerCase(),et==="select"||et==="input"&&tt.type==="file")var ot=ve;else if(me(tt))if(we)ot=Fe;else{ot=De;var ct=Ce}else(et=tt.nodeName)&&et.toLowerCase()==="input"&&(tt.type==="checkbox"||tt.type==="radio")&&(ot=Ee);if(ot&&(ot=ot(s,j))){ne$1(_e,ot,o,$);break e}ct&&ct(s,tt,j),s==="focusout"&&(ct=tt._wrapperState)&&ct.controlled&&tt.type==="number"&&cb(tt,"number",tt.value)}switch(ct=j?ue(j):window,s){case"focusin":(me(ct)||ct.contentEditable==="true")&&(Qe=ct,Re$1=j,Se=null);break;case"focusout":Se=Re$1=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(_e,o,$);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(_e,o,$)}var vt;if(ae)e:{switch(s){case"compositionstart":var mt="onCompositionStart";break e;case"compositionend":mt="onCompositionEnd";break e;case"compositionupdate":mt="onCompositionUpdate";break e}mt=void 0}else ie?ge$1(s,o)&&(mt="onCompositionEnd"):s==="keydown"&&o.keyCode===229&&(mt="onCompositionStart");mt&&(de&&o.locale!=="ko"&&(ie||mt!=="onCompositionStart"?mt==="onCompositionEnd"&&ie&&(vt=nd()):(kd=$,ld="value"in kd?kd.value:kd.textContent,ie=!0)),ct=oe(j,mt),0<ct.length&&(mt=new Ld(mt,s,null,o,$),_e.push({event:mt,listeners:ct}),vt?mt.data=vt:(vt=he(o),vt!==null&&(mt.data=vt)))),(vt=ce?je(s,o):ke(s,o))&&(j=oe(j,"onBeforeInput"),0<j.length&&($=new Ld("onBeforeInput","beforeinput",null,o,$),_e.push({event:$,listeners:j}),$.data=vt))}se(_e,e)})}function tf(s,e,o){return{instance:s,listener:e,currentTarget:o}}function oe(s,e){for(var o=e+"Capture",a=[];s!==null;){var c=s,h=c.stateNode;c.tag===5&&h!==null&&(c=h,h=Kb(s,o),h!=null&&a.unshift(tf(s,h,c)),h=Kb(s,e),h!=null&&a.push(tf(s,h,c))),s=s.return}return a}function vf(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function wf(s,e,o,a,c){for(var h=e._reactName,g=[];o!==null&&o!==a;){var b=o,_=b.alternate,j=b.stateNode;if(_!==null&&_===a)break;b.tag===5&&j!==null&&(b=j,c?(_=Kb(o,h),_!=null&&g.unshift(tf(o,_,b))):c||(_=Kb(o,h),_!=null&&g.push(tf(o,_,b)))),o=o.return}g.length!==0&&s.push({event:e,listeners:g})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(s){return(typeof s=="string"?s:""+s).replace(xf,`
`).replace(yf,"")}function Af(s,e,o){if(e=zf(e),zf(s)!==e&&o)throw Error(p(425))}function Bf(){}var Cf=null,Df=null;function Ef(s,e){return s==="textarea"||s==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(s){return Hf.resolve(null).then(s).catch(If)}:Ff;function If(s){setTimeout(function(){throw s})}function Kf(s,e){var o=e,a=0;do{var c=o.nextSibling;if(s.removeChild(o),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(a===0){s.removeChild(c),bd(e);return}a--}else o!=="$"&&o!=="$?"&&o!=="$!"||a++;o=c}while(o);bd(e)}function Lf(s){for(;s!=null;s=s.nextSibling){var e=s.nodeType;if(e===1||e===3)break;if(e===8){if(e=s.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return s}function Mf(s){s=s.previousSibling;for(var e=0;s;){if(s.nodeType===8){var o=s.data;if(o==="$"||o==="$!"||o==="$?"){if(e===0)return s;e--}else o==="/$"&&e++}s=s.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(s){var e=s[Of];if(e)return e;for(var o=s.parentNode;o;){if(e=o[uf]||o[Of]){if(o=e.alternate,e.child!==null||o!==null&&o.child!==null)for(s=Mf(s);s!==null;){if(o=s[Of])return o;s=Mf(s)}return e}s=o,o=s.parentNode}return null}function Cb(s){return s=s[Of]||s[uf],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function ue(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(p(33))}function Db(s){return s[Pf]||null}var Sf=[],Tf=-1;function Uf(s){return{current:s}}function E(s){0>Tf||(s.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(s,e){Tf++,Sf[Tf]=s.current,s.current=e}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(s,e){var o=s.type.contextTypes;if(!o)return Vf;var a=s.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===e)return a.__reactInternalMemoizedMaskedChildContext;var c={},h;for(h in o)c[h]=e[h];return a&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=e,s.__reactInternalMemoizedMaskedChildContext=c),c}function Zf(s){return s=s.childContextTypes,s!=null}function $f(){E(Wf),E(H)}function ag(s,e,o){if(H.current!==Vf)throw Error(p(168));G(H,e),G(Wf,o)}function bg(s,e,o){var a=s.stateNode;if(e=e.childContextTypes,typeof a.getChildContext!="function")return o;a=a.getChildContext();for(var c in a)if(!(c in e))throw Error(p(108,Ra(s)||"Unknown",c));return A({},o,a)}function cg(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,s),G(Wf,Wf.current),!0}function dg(s,e,o){var a=s.stateNode;if(!a)throw Error(p(169));o?(s=bg(s,e,Xf),a.__reactInternalMemoizedMergedChildContext=s,E(Wf),E(H),G(H,s)):E(Wf),G(Wf,o)}var eg$1=null,fg=!1,gg$1=!1;function hg(s){eg$1===null?eg$1=[s]:eg$1.push(s)}function ig(s){fg=!0,hg(s)}function jg(){if(!gg$1&&eg$1!==null){gg$1=!0;var s=0,e=C;try{var o=eg$1;for(C=1;s<o.length;s++){var a=o[s];do a=a(!0);while(a!==null)}eg$1=null,fg=!1}catch(c){throw eg$1!==null&&(eg$1=eg$1.slice(s+1)),ac$1(fc,jg),c}finally{C=e,gg$1=!1}}return null}var kg=[],lg$1=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(s,e){kg[lg$1++]=ng,kg[lg$1++]=mg,mg=s,ng=e}function ug(s,e,o){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=s;var a=rg;s=sg;var c=32-oc(a)-1;a&=~(1<<c),o+=1;var h=32-oc(e)+c;if(30<h){var g=c-c%5;h=(a&(1<<g)-1).toString(32),a>>=g,c-=g,rg=1<<32-oc(e)+c|o<<c|a,sg=h+s}else rg=1<<h|o<<c|a,sg=s}function vg(s){s.return!==null&&(tg(s,1),ug(s,1,0))}function wg(s){for(;s===mg;)mg=kg[--lg$1],kg[lg$1]=null,ng=kg[--lg$1],kg[lg$1]=null;for(;s===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(s,e){var o=Bg(5,null,null,0);o.elementType="DELETED",o.stateNode=e,o.return=s,e=s.deletions,e===null?(s.deletions=[o],s.flags|=16):e.push(o)}function Cg(s,e){switch(s.tag){case 5:var o=s.type;return e=e.nodeType!==1||o.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(s.stateNode=e,xg=s,yg=Lf(e.firstChild),!0):!1;case 6:return e=s.pendingProps===""||e.nodeType!==3?null:e,e!==null?(s.stateNode=e,xg=s,yg=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(o=qg!==null?{id:rg,overflow:sg}:null,s.memoizedState={dehydrated:e,treeContext:o,retryLane:1073741824},o=Bg(18,null,null,0),o.stateNode=e,o.return=s,s.child=o,xg=s,yg=null,!0):!1;default:return!1}}function Dg(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Eg(s){if(I){var e=yg;if(e){var o=e;if(!Cg(s,e)){if(Dg(s))throw Error(p(418));e=Lf(o.nextSibling);var a=xg;e&&Cg(s,e)?Ag(a,o):(s.flags=s.flags&-4097|2,I=!1,xg=s)}}else{if(Dg(s))throw Error(p(418));s.flags=s.flags&-4097|2,I=!1,xg=s}}}function Fg(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;xg=s}function Gg$1(s){if(s!==xg)return!1;if(!I)return Fg(s),I=!0,!1;var e;if((e=s.tag!==3)&&!(e=s.tag!==5)&&(e=s.type,e=e!=="head"&&e!=="body"&&!Ef(s.type,s.memoizedProps)),e&&(e=yg)){if(Dg(s))throw Hg(),Error(p(418));for(;e;)Ag(s,e),e=Lf(e.nextSibling)}if(Fg(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(p(317));e:{for(s=s.nextSibling,e=0;s;){if(s.nodeType===8){var o=s.data;if(o==="/$"){if(e===0){yg=Lf(s.nextSibling);break e}e--}else o!=="$"&&o!=="$!"&&o!=="$?"||e++}s=s.nextSibling}yg=null}}else yg=xg?Lf(s.stateNode.nextSibling):null;return!0}function Hg(){for(var s=yg;s;)s=Lf(s.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(s){zg===null?zg=[s]:zg.push(s)}var Kg=ua.ReactCurrentBatchConfig;function Lg(s,e,o){if(s=o.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(p(309));var a=o.stateNode}if(!a)throw Error(p(147,s));var c=a,h=""+s;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===h?e.ref:(e=function(g){var b=c.refs;g===null?delete b[h]:b[h]=g},e._stringRef=h,e)}if(typeof s!="string")throw Error(p(284));if(!o._owner)throw Error(p(290,s))}return s}function Mg(s,e){throw s=Object.prototype.toString.call(e),Error(p(31,s==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":s))}function Ng(s){var e=s._init;return e(s._payload)}function Og(s){function e(nt,rt){if(s){var at=nt.deletions;at===null?(nt.deletions=[rt],nt.flags|=16):at.push(rt)}}function o(nt,rt){if(!s)return null;for(;rt!==null;)e(nt,rt),rt=rt.sibling;return null}function a(nt,rt){for(nt=new Map;rt!==null;)rt.key!==null?nt.set(rt.key,rt):nt.set(rt.index,rt),rt=rt.sibling;return nt}function c(nt,rt){return nt=Pg(nt,rt),nt.index=0,nt.sibling=null,nt}function h(nt,rt,at){return nt.index=at,s?(at=nt.alternate,at!==null?(at=at.index,at<rt?(nt.flags|=2,rt):at):(nt.flags|=2,rt)):(nt.flags|=1048576,rt)}function g(nt){return s&&nt.alternate===null&&(nt.flags|=2),nt}function b(nt,rt,at,dt){return rt===null||rt.tag!==6?(rt=Qg(at,nt.mode,dt),rt.return=nt,rt):(rt=c(rt,at),rt.return=nt,rt)}function _(nt,rt,at,dt){var ot=at.type;return ot===ya?$(nt,rt,at.props.children,dt,at.key):rt!==null&&(rt.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===Ha&&Ng(ot)===rt.type)?(dt=c(rt,at.props),dt.ref=Lg(nt,rt,at),dt.return=nt,dt):(dt=Rg(at.type,at.key,at.props,null,nt.mode,dt),dt.ref=Lg(nt,rt,at),dt.return=nt,dt)}function j(nt,rt,at,dt){return rt===null||rt.tag!==4||rt.stateNode.containerInfo!==at.containerInfo||rt.stateNode.implementation!==at.implementation?(rt=Sg(at,nt.mode,dt),rt.return=nt,rt):(rt=c(rt,at.children||[]),rt.return=nt,rt)}function $(nt,rt,at,dt,ot){return rt===null||rt.tag!==7?(rt=Tg(at,nt.mode,dt,ot),rt.return=nt,rt):(rt=c(rt,at),rt.return=nt,rt)}function _e(nt,rt,at){if(typeof rt=="string"&&rt!==""||typeof rt=="number")return rt=Qg(""+rt,nt.mode,at),rt.return=nt,rt;if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case va:return at=Rg(rt.type,rt.key,rt.props,null,nt.mode,at),at.ref=Lg(nt,null,rt),at.return=nt,at;case wa:return rt=Sg(rt,nt.mode,at),rt.return=nt,rt;case Ha:var dt=rt._init;return _e(nt,dt(rt._payload),at)}if(eb(rt)||Ka(rt))return rt=Tg(rt,nt.mode,at,null),rt.return=nt,rt;Mg(nt,rt)}return null}function tt(nt,rt,at,dt){var ot=rt!==null?rt.key:null;if(typeof at=="string"&&at!==""||typeof at=="number")return ot!==null?null:b(nt,rt,""+at,dt);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case va:return at.key===ot?_(nt,rt,at,dt):null;case wa:return at.key===ot?j(nt,rt,at,dt):null;case Ha:return ot=at._init,tt(nt,rt,ot(at._payload),dt)}if(eb(at)||Ka(at))return ot!==null?null:$(nt,rt,at,dt,null);Mg(nt,at)}return null}function et(nt,rt,at,dt,ot){if(typeof dt=="string"&&dt!==""||typeof dt=="number")return nt=nt.get(at)||null,b(rt,nt,""+dt,ot);if(typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case va:return nt=nt.get(dt.key===null?at:dt.key)||null,_(rt,nt,dt,ot);case wa:return nt=nt.get(dt.key===null?at:dt.key)||null,j(rt,nt,dt,ot);case Ha:var ct=dt._init;return et(nt,rt,at,ct(dt._payload),ot)}if(eb(dt)||Ka(dt))return nt=nt.get(at)||null,$(rt,nt,dt,ot,null);Mg(rt,dt)}return null}function ut(nt,rt,at,dt){for(var ot=null,ct=null,vt=rt,mt=rt=0,pt=null;vt!==null&&mt<at.length;mt++){vt.index>mt?(pt=vt,vt=null):pt=vt.sibling;var Et=tt(nt,vt,at[mt],dt);if(Et===null){vt===null&&(vt=pt);break}s&&vt&&Et.alternate===null&&e(nt,vt),rt=h(Et,rt,mt),ct===null?ot=Et:ct.sibling=Et,ct=Et,vt=pt}if(mt===at.length)return o(nt,vt),I&&tg(nt,mt),ot;if(vt===null){for(;mt<at.length;mt++)vt=_e(nt,at[mt],dt),vt!==null&&(rt=h(vt,rt,mt),ct===null?ot=vt:ct.sibling=vt,ct=vt);return I&&tg(nt,mt),ot}for(vt=a(nt,vt);mt<at.length;mt++)pt=et(vt,nt,mt,at[mt],dt),pt!==null&&(s&&pt.alternate!==null&&vt.delete(pt.key===null?mt:pt.key),rt=h(pt,rt,mt),ct===null?ot=pt:ct.sibling=pt,ct=pt);return s&&vt.forEach(function(Ct){return e(nt,Ct)}),I&&tg(nt,mt),ot}function ht(nt,rt,at,dt){var ot=Ka(at);if(typeof ot!="function")throw Error(p(150));if(at=ot.call(at),at==null)throw Error(p(151));for(var ct=ot=null,vt=rt,mt=rt=0,pt=null,Et=at.next();vt!==null&&!Et.done;mt++,Et=at.next()){vt.index>mt?(pt=vt,vt=null):pt=vt.sibling;var Ct=tt(nt,vt,Et.value,dt);if(Ct===null){vt===null&&(vt=pt);break}s&&vt&&Ct.alternate===null&&e(nt,vt),rt=h(Ct,rt,mt),ct===null?ot=Ct:ct.sibling=Ct,ct=Ct,vt=pt}if(Et.done)return o(nt,vt),I&&tg(nt,mt),ot;if(vt===null){for(;!Et.done;mt++,Et=at.next())Et=_e(nt,Et.value,dt),Et!==null&&(rt=h(Et,rt,mt),ct===null?ot=Et:ct.sibling=Et,ct=Et);return I&&tg(nt,mt),ot}for(vt=a(nt,vt);!Et.done;mt++,Et=at.next())Et=et(vt,nt,mt,Et.value,dt),Et!==null&&(s&&Et.alternate!==null&&vt.delete(Et.key===null?mt:Et.key),rt=h(Et,rt,mt),ct===null?ot=Et:ct.sibling=Et,ct=Et);return s&&vt.forEach(function(Nt){return e(nt,Nt)}),I&&tg(nt,mt),ot}function st(nt,rt,at,dt){if(typeof at=="object"&&at!==null&&at.type===ya&&at.key===null&&(at=at.props.children),typeof at=="object"&&at!==null){switch(at.$$typeof){case va:e:{for(var ot=at.key,ct=rt;ct!==null;){if(ct.key===ot){if(ot=at.type,ot===ya){if(ct.tag===7){o(nt,ct.sibling),rt=c(ct,at.props.children),rt.return=nt,nt=rt;break e}}else if(ct.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===Ha&&Ng(ot)===ct.type){o(nt,ct.sibling),rt=c(ct,at.props),rt.ref=Lg(nt,ct,at),rt.return=nt,nt=rt;break e}o(nt,ct);break}else e(nt,ct);ct=ct.sibling}at.type===ya?(rt=Tg(at.props.children,nt.mode,dt,at.key),rt.return=nt,nt=rt):(dt=Rg(at.type,at.key,at.props,null,nt.mode,dt),dt.ref=Lg(nt,rt,at),dt.return=nt,nt=dt)}return g(nt);case wa:e:{for(ct=at.key;rt!==null;){if(rt.key===ct)if(rt.tag===4&&rt.stateNode.containerInfo===at.containerInfo&&rt.stateNode.implementation===at.implementation){o(nt,rt.sibling),rt=c(rt,at.children||[]),rt.return=nt,nt=rt;break e}else{o(nt,rt);break}else e(nt,rt);rt=rt.sibling}rt=Sg(at,nt.mode,dt),rt.return=nt,nt=rt}return g(nt);case Ha:return ct=at._init,st(nt,rt,ct(at._payload),dt)}if(eb(at))return ut(nt,rt,at,dt);if(Ka(at))return ht(nt,rt,at,dt);Mg(nt,at)}return typeof at=="string"&&at!==""||typeof at=="number"?(at=""+at,rt!==null&&rt.tag===6?(o(nt,rt.sibling),rt=c(rt,at),rt.return=nt,nt=rt):(o(nt,rt),rt=Qg(at,nt.mode,dt),rt.return=nt,nt=rt),g(nt)):o(nt,rt)}return st}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(s){var e=Wg.current;E(Wg),s._currentValue=e}function bh(s,e,o){for(;s!==null;){var a=s.alternate;if((s.childLanes&e)!==e?(s.childLanes|=e,a!==null&&(a.childLanes|=e)):a!==null&&(a.childLanes&e)!==e&&(a.childLanes|=e),s===o)break;s=s.return}}function ch(s,e){Xg=s,Zg=Yg=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&e&&(dh=!0),s.firstContext=null)}function eh(s){var e=s._currentValue;if(Zg!==s)if(s={context:s,memoizedValue:e,next:null},Yg===null){if(Xg===null)throw Error(p(308));Yg=s,Xg.dependencies={lanes:0,firstContext:s}}else Yg=Yg.next=s;return e}var fh=null;function gh(s){fh===null?fh=[s]:fh.push(s)}function hh(s,e,o,a){var c=e.interleaved;return c===null?(o.next=o,gh(e)):(o.next=c.next,c.next=o),e.interleaved=o,ih(s,a)}function ih(s,e){s.lanes|=e;var o=s.alternate;for(o!==null&&(o.lanes|=e),o=s,s=s.return;s!==null;)s.childLanes|=e,o=s.alternate,o!==null&&(o.childLanes|=e),o=s,s=s.return;return o.tag===3?o.stateNode:null}var jh=!1;function kh(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(s,e){s=s.updateQueue,e.updateQueue===s&&(e.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function mh(s,e){return{eventTime:s,lane:e,tag:0,payload:null,callback:null,next:null}}function nh(s,e,o){var a=s.updateQueue;if(a===null)return null;if(a=a.shared,K&2){var c=a.pending;return c===null?e.next=e:(e.next=c.next,c.next=e),a.pending=e,ih(s,o)}return c=a.interleaved,c===null?(e.next=e,gh(a)):(e.next=c.next,c.next=e),a.interleaved=e,ih(s,o)}function oh(s,e,o){if(e=e.updateQueue,e!==null&&(e=e.shared,(o&4194240)!==0)){var a=e.lanes;a&=s.pendingLanes,o|=a,e.lanes=o,Cc(s,o)}}function ph(s,e){var o=s.updateQueue,a=s.alternate;if(a!==null&&(a=a.updateQueue,o===a)){var c=null,h=null;if(o=o.firstBaseUpdate,o!==null){do{var g={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};h===null?c=h=g:h=h.next=g,o=o.next}while(o!==null);h===null?c=h=e:h=h.next=e}else c=h=e;o={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:h,shared:a.shared,effects:a.effects},s.updateQueue=o;return}s=o.lastBaseUpdate,s===null?o.firstBaseUpdate=e:s.next=e,o.lastBaseUpdate=e}function qh(s,e,o,a){var c=s.updateQueue;jh=!1;var h=c.firstBaseUpdate,g=c.lastBaseUpdate,b=c.shared.pending;if(b!==null){c.shared.pending=null;var _=b,j=_.next;_.next=null,g===null?h=j:g.next=j,g=_;var $=s.alternate;$!==null&&($=$.updateQueue,b=$.lastBaseUpdate,b!==g&&(b===null?$.firstBaseUpdate=j:b.next=j,$.lastBaseUpdate=_))}if(h!==null){var _e=c.baseState;g=0,$=j=_=null,b=h;do{var tt=b.lane,et=b.eventTime;if((a&tt)===tt){$!==null&&($=$.next={eventTime:et,lane:0,tag:b.tag,payload:b.payload,callback:b.callback,next:null});e:{var ut=s,ht=b;switch(tt=e,et=o,ht.tag){case 1:if(ut=ht.payload,typeof ut=="function"){_e=ut.call(et,_e,tt);break e}_e=ut;break e;case 3:ut.flags=ut.flags&-65537|128;case 0:if(ut=ht.payload,tt=typeof ut=="function"?ut.call(et,_e,tt):ut,tt==null)break e;_e=A({},_e,tt);break e;case 2:jh=!0}}b.callback!==null&&b.lane!==0&&(s.flags|=64,tt=c.effects,tt===null?c.effects=[b]:tt.push(b))}else et={eventTime:et,lane:tt,tag:b.tag,payload:b.payload,callback:b.callback,next:null},$===null?(j=$=et,_=_e):$=$.next=et,g|=tt;if(b=b.next,b===null){if(b=c.shared.pending,b===null)break;tt=b,b=tt.next,tt.next=null,c.lastBaseUpdate=tt,c.shared.pending=null}}while(1);if($===null&&(_=_e),c.baseState=_,c.firstBaseUpdate=j,c.lastBaseUpdate=$,e=c.shared.interleaved,e!==null){c=e;do g|=c.lane,c=c.next;while(c!==e)}else h===null&&(c.shared.lanes=0);rh|=g,s.lanes=g,s.memoizedState=_e}}function sh(s,e,o){if(s=e.effects,e.effects=null,s!==null)for(e=0;e<s.length;e++){var a=s[e],c=a.callback;if(c!==null){if(a.callback=null,a=o,typeof c!="function")throw Error(p(191,c));c.call(a)}}}var th={},uh=Uf(th),vh$1=Uf(th),wh=Uf(th);function xh(s){if(s===th)throw Error(p(174));return s}function yh(s,e){switch(G(wh,e),G(vh$1,s),G(uh,th),s=e.nodeType,s){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lb(null,"");break;default:s=s===8?e.parentNode:e,e=s.namespaceURI||null,s=s.tagName,e=lb(e,s)}E(uh),G(uh,e)}function zh(){E(uh),E(vh$1),E(wh)}function Ah(s){xh(wh.current);var e=xh(uh.current),o=lb(e,s.type);e!==o&&(G(vh$1,s),G(uh,o))}function Bh(s){vh$1.current===s&&(E(uh),E(vh$1))}var L=Uf(0);function Ch(s){for(var e=s;e!==null;){if(e.tag===13){var o=e.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break;for(;e.sibling===null;){if(e.return===null||e.return===s)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Dh=[];function Eh(){for(var s=0;s<Dh.length;s++)Dh[s]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M=null,N=null,O=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P(){throw Error(p(321))}function Mh(s,e){if(e===null)return!1;for(var o=0;o<e.length&&o<s.length;o++)if(!He(s[o],e[o]))return!1;return!0}function Nh(s,e,o,a,c,h){if(Hh=h,M=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fh.current=s===null||s.memoizedState===null?Oh:Ph,s=o(a,c),Jh){h=0;do{if(Jh=!1,Kh=0,25<=h)throw Error(p(301));h+=1,O=N=null,e.updateQueue=null,Fh.current=Qh,s=o(a,c)}while(Jh)}if(Fh.current=Rh,e=N!==null&&N.next!==null,Hh=0,O=N=M=null,Ih=!1,e)throw Error(p(300));return s}function Sh(){var s=Kh!==0;return Kh=0,s}function Th(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O===null?M.memoizedState=O=s:O=O.next=s,O}function Uh(){if(N===null){var s=M.alternate;s=s!==null?s.memoizedState:null}else s=N.next;var e=O===null?M.memoizedState:O.next;if(e!==null)O=e,N=s;else{if(s===null)throw Error(p(310));N=s,s={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null},O===null?M.memoizedState=O=s:O=O.next=s}return O}function Vh(s,e){return typeof e=="function"?e(s):e}function Wh(s){var e=Uh(),o=e.queue;if(o===null)throw Error(p(311));o.lastRenderedReducer=s;var a=N,c=a.baseQueue,h=o.pending;if(h!==null){if(c!==null){var g=c.next;c.next=h.next,h.next=g}a.baseQueue=c=h,o.pending=null}if(c!==null){h=c.next,a=a.baseState;var b=g=null,_=null,j=h;do{var $=j.lane;if((Hh&$)===$)_!==null&&(_=_.next={lane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),a=j.hasEagerState?j.eagerState:s(a,j.action);else{var _e={lane:$,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null};_===null?(b=_=_e,g=a):_=_.next=_e,M.lanes|=$,rh|=$}j=j.next}while(j!==null&&j!==h);_===null?g=a:_.next=b,He(a,e.memoizedState)||(dh=!0),e.memoizedState=a,e.baseState=g,e.baseQueue=_,o.lastRenderedState=a}if(s=o.interleaved,s!==null){c=s;do h=c.lane,M.lanes|=h,rh|=h,c=c.next;while(c!==s)}else c===null&&(o.lanes=0);return[e.memoizedState,o.dispatch]}function Xh(s){var e=Uh(),o=e.queue;if(o===null)throw Error(p(311));o.lastRenderedReducer=s;var a=o.dispatch,c=o.pending,h=e.memoizedState;if(c!==null){o.pending=null;var g=c=c.next;do h=s(h,g.action),g=g.next;while(g!==c);He(h,e.memoizedState)||(dh=!0),e.memoizedState=h,e.baseQueue===null&&(e.baseState=h),o.lastRenderedState=h}return[h,a]}function Yh(){}function Zh(s,e){var o=M,a=Uh(),c=e(),h=!He(a.memoizedState,c);if(h&&(a.memoizedState=c,dh=!0),a=a.queue,$h(ai.bind(null,o,a,s),[s]),a.getSnapshot!==e||h||O!==null&&O.memoizedState.tag&1){if(o.flags|=2048,bi(9,ci.bind(null,o,a,c,e),void 0,null),Q===null)throw Error(p(349));Hh&30||di(o,e,c)}return c}function di(s,e,o){s.flags|=16384,s={getSnapshot:e,value:o},e=M.updateQueue,e===null?(e={lastEffect:null,stores:null},M.updateQueue=e,e.stores=[s]):(o=e.stores,o===null?e.stores=[s]:o.push(s))}function ci(s,e,o,a){e.value=o,e.getSnapshot=a,ei(e)&&fi(s)}function ai(s,e,o){return o(function(){ei(e)&&fi(s)})}function ei(s){var e=s.getSnapshot;s=s.value;try{var o=e();return!He(s,o)}catch{return!0}}function fi(s){var e=ih(s,1);e!==null&&gi(e,s,1,-1)}function hi(s){var e=Th();return typeof s=="function"&&(s=s()),e.memoizedState=e.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:s},e.queue=s,s=s.dispatch=ii$1.bind(null,M,s),[e.memoizedState,s]}function bi(s,e,o,a){return s={tag:s,create:e,destroy:o,deps:a,next:null},e=M.updateQueue,e===null?(e={lastEffect:null,stores:null},M.updateQueue=e,e.lastEffect=s.next=s):(o=e.lastEffect,o===null?e.lastEffect=s.next=s:(a=o.next,o.next=s,s.next=a,e.lastEffect=s)),s}function ji(){return Uh().memoizedState}function ki(s,e,o,a){var c=Th();M.flags|=s,c.memoizedState=bi(1|e,o,void 0,a===void 0?null:a)}function li(s,e,o,a){var c=Uh();a=a===void 0?null:a;var h=void 0;if(N!==null){var g=N.memoizedState;if(h=g.destroy,a!==null&&Mh(a,g.deps)){c.memoizedState=bi(e,o,h,a);return}}M.flags|=s,c.memoizedState=bi(1|e,o,h,a)}function mi(s,e){return ki(8390656,8,s,e)}function $h(s,e){return li(2048,8,s,e)}function ni$1(s,e){return li(4,2,s,e)}function oi(s,e){return li(4,4,s,e)}function pi$1(s,e){if(typeof e=="function")return s=s(),e(s),function(){e(null)};if(e!=null)return s=s(),e.current=s,function(){e.current=null}}function qi(s,e,o){return o=o!=null?o.concat([s]):null,li(4,4,pi$1.bind(null,e,s),o)}function ri(){}function si(s,e){var o=Uh();e=e===void 0?null:e;var a=o.memoizedState;return a!==null&&e!==null&&Mh(e,a[1])?a[0]:(o.memoizedState=[s,e],s)}function ti(s,e){var o=Uh();e=e===void 0?null:e;var a=o.memoizedState;return a!==null&&e!==null&&Mh(e,a[1])?a[0]:(s=s(),o.memoizedState=[s,e],s)}function ui(s,e,o){return Hh&21?(He(o,e)||(o=yc(),M.lanes|=o,rh|=o,s.baseState=!0),e):(s.baseState&&(s.baseState=!1,dh=!0),s.memoizedState=o)}function vi(s,e){var o=C;C=o!==0&&4>o?o:4,s(!0);var a=Gh.transition;Gh.transition={};try{s(!1),e()}finally{C=o,Gh.transition=a}}function wi(){return Uh().memoizedState}function xi$1(s,e,o){var a=yi(s);if(o={lane:a,action:o,hasEagerState:!1,eagerState:null,next:null},zi(s))Ai(e,o);else if(o=hh(s,e,o,a),o!==null){var c=R();gi(o,s,a,c),Bi(o,e,a)}}function ii$1(s,e,o){var a=yi(s),c={lane:a,action:o,hasEagerState:!1,eagerState:null,next:null};if(zi(s))Ai(e,c);else{var h=s.alternate;if(s.lanes===0&&(h===null||h.lanes===0)&&(h=e.lastRenderedReducer,h!==null))try{var g=e.lastRenderedState,b=h(g,o);if(c.hasEagerState=!0,c.eagerState=b,He(b,g)){var _=e.interleaved;_===null?(c.next=c,gh(e)):(c.next=_.next,_.next=c),e.interleaved=c;return}}catch{}finally{}o=hh(s,e,c,a),o!==null&&(c=R(),gi(o,s,a,c),Bi(o,e,a))}}function zi(s){var e=s.alternate;return s===M||e!==null&&e===M}function Ai(s,e){Jh=Ih=!0;var o=s.pending;o===null?e.next=e:(e.next=o.next,o.next=e),s.pending=e}function Bi(s,e,o){if(o&4194240){var a=e.lanes;a&=s.pendingLanes,o|=a,e.lanes=o,Cc(s,o)}}var Rh={readContext:eh,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(s,e){return Th().memoizedState=[s,e===void 0?null:e],s},useContext:eh,useEffect:mi,useImperativeHandle:function(s,e,o){return o=o!=null?o.concat([s]):null,ki(4194308,4,pi$1.bind(null,e,s),o)},useLayoutEffect:function(s,e){return ki(4194308,4,s,e)},useInsertionEffect:function(s,e){return ki(4,2,s,e)},useMemo:function(s,e){var o=Th();return e=e===void 0?null:e,s=s(),o.memoizedState=[s,e],s},useReducer:function(s,e,o){var a=Th();return e=o!==void 0?o(e):e,a.memoizedState=a.baseState=e,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:e},a.queue=s,s=s.dispatch=xi$1.bind(null,M,s),[a.memoizedState,s]},useRef:function(s){var e=Th();return s={current:s},e.memoizedState=s},useState:hi,useDebugValue:ri,useDeferredValue:function(s){return Th().memoizedState=s},useTransition:function(){var s=hi(!1),e=s[0];return s=vi.bind(null,s[1]),Th().memoizedState=s,[e,s]},useMutableSource:function(){},useSyncExternalStore:function(s,e,o){var a=M,c=Th();if(I){if(o===void 0)throw Error(p(407));o=o()}else{if(o=e(),Q===null)throw Error(p(349));Hh&30||di(a,e,o)}c.memoizedState=o;var h={value:o,getSnapshot:e};return c.queue=h,mi(ai.bind(null,a,h,s),[s]),a.flags|=2048,bi(9,ci.bind(null,a,h,o,e),void 0,null),o},useId:function(){var s=Th(),e=Q.identifierPrefix;if(I){var o=sg,a=rg;o=(a&~(1<<32-oc(a)-1)).toString(32)+o,e=":"+e+"R"+o,o=Kh++,0<o&&(e+="H"+o.toString(32)),e+=":"}else o=Lh++,e=":"+e+"r"+o.toString(32)+":";return s.memoizedState=e},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni$1,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(s){var e=Uh();return ui(e,N.memoizedState,s)},useTransition:function(){var s=Wh(Vh)[0],e=Uh().memoizedState;return[s,e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni$1,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(s){var e=Uh();return N===null?e.memoizedState=s:ui(e,N.memoizedState,s)},useTransition:function(){var s=Xh(Vh)[0],e=Uh().memoizedState;return[s,e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(s,e){if(s&&s.defaultProps){e=A({},e),s=s.defaultProps;for(var o in s)e[o]===void 0&&(e[o]=s[o]);return e}return e}function Di(s,e,o,a){e=s.memoizedState,o=o(a,e),o=o==null?e:A({},e,o),s.memoizedState=o,s.lanes===0&&(s.updateQueue.baseState=o)}var Ei={isMounted:function(s){return(s=s._reactInternals)?Vb(s)===s:!1},enqueueSetState:function(s,e,o){s=s._reactInternals;var a=R(),c=yi(s),h=mh(a,c);h.payload=e,o!=null&&(h.callback=o),e=nh(s,h,c),e!==null&&(gi(e,s,c,a),oh(e,s,c))},enqueueReplaceState:function(s,e,o){s=s._reactInternals;var a=R(),c=yi(s),h=mh(a,c);h.tag=1,h.payload=e,o!=null&&(h.callback=o),e=nh(s,h,c),e!==null&&(gi(e,s,c,a),oh(e,s,c))},enqueueForceUpdate:function(s,e){s=s._reactInternals;var o=R(),a=yi(s),c=mh(o,a);c.tag=2,e!=null&&(c.callback=e),e=nh(s,c,a),e!==null&&(gi(e,s,a,o),oh(e,s,a))}};function Fi(s,e,o,a,c,h,g){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(a,h,g):e.prototype&&e.prototype.isPureReactComponent?!Ie(o,a)||!Ie(c,h):!0}function Gi(s,e,o){var a=!1,c=Vf,h=e.contextType;return typeof h=="object"&&h!==null?h=eh(h):(c=Zf(e)?Xf:H.current,a=e.contextTypes,h=(a=a!=null)?Yf(s,c):Vf),e=new e(o,h),s.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ei,s.stateNode=e,e._reactInternals=s,a&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=c,s.__reactInternalMemoizedMaskedChildContext=h),e}function Hi(s,e,o,a){s=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(o,a),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(o,a),e.state!==s&&Ei.enqueueReplaceState(e,e.state,null)}function Ii(s,e,o,a){var c=s.stateNode;c.props=o,c.state=s.memoizedState,c.refs={},kh(s);var h=e.contextType;typeof h=="object"&&h!==null?c.context=eh(h):(h=Zf(e)?Xf:H.current,c.context=Yf(s,h)),c.state=s.memoizedState,h=e.getDerivedStateFromProps,typeof h=="function"&&(Di(s,e,h,o),c.state=s.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(e=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),e!==c.state&&Ei.enqueueReplaceState(c,c.state,null),qh(s,o,c,a),c.state=s.memoizedState),typeof c.componentDidMount=="function"&&(s.flags|=4194308)}function Ji(s,e){try{var o="",a=e;do o+=Pa(a),a=a.return;while(a);var c=o}catch(h){c=`
Error generating stack: `+h.message+`
`+h.stack}return{value:s,source:e,stack:c,digest:null}}function Ki(s,e,o){return{value:s,source:null,stack:o??null,digest:e??null}}function Li(s,e){try{console.error(e.value)}catch(o){setTimeout(function(){throw o})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(s,e,o){o=mh(-1,o),o.tag=3,o.payload={element:null};var a=e.value;return o.callback=function(){Oi||(Oi=!0,Pi$1=a),Li(s,e)},o}function Qi(s,e,o){o=mh(-1,o),o.tag=3;var a=s.type.getDerivedStateFromError;if(typeof a=="function"){var c=e.value;o.payload=function(){return a(c)},o.callback=function(){Li(s,e)}}var h=s.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(o.callback=function(){Li(s,e),typeof a!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var g=e.stack;this.componentDidCatch(e.value,{componentStack:g!==null?g:""})}),o}function Si(s,e,o){var a=s.pingCache;if(a===null){a=s.pingCache=new Mi;var c=new Set;a.set(e,c)}else c=a.get(e),c===void 0&&(c=new Set,a.set(e,c));c.has(o)||(c.add(o),s=Ti.bind(null,s,e,o),e.then(s,s))}function Ui(s){do{var e;if((e=s.tag===13)&&(e=s.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return s;s=s.return}while(s!==null);return null}function Vi(s,e,o,a,c){return s.mode&1?(s.flags|=65536,s.lanes=c,s):(s===e?s.flags|=65536:(s.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(e=mh(-1,1),e.tag=2,nh(o,e,1))),o.lanes|=1),s)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi$1(s,e,o,a){e.child=s===null?Vg(e,null,o,a):Ug(e,s.child,o,a)}function Yi(s,e,o,a,c){o=o.render;var h=e.ref;return ch(e,c),a=Nh(s,e,o,a,h,c),o=Sh(),s!==null&&!dh?(e.updateQueue=s.updateQueue,e.flags&=-2053,s.lanes&=~c,Zi(s,e,c)):(I&&o&&vg(e),e.flags|=1,Xi$1(s,e,a,c),e.child)}function $i(s,e,o,a,c){if(s===null){var h=o.type;return typeof h=="function"&&!aj(h)&&h.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(e.tag=15,e.type=h,bj(s,e,h,a,c)):(s=Rg(o.type,null,a,e,e.mode,c),s.ref=e.ref,s.return=e,e.child=s)}if(h=s.child,!(s.lanes&c)){var g=h.memoizedProps;if(o=o.compare,o=o!==null?o:Ie,o(g,a)&&s.ref===e.ref)return Zi(s,e,c)}return e.flags|=1,s=Pg(h,a),s.ref=e.ref,s.return=e,e.child=s}function bj(s,e,o,a,c){if(s!==null){var h=s.memoizedProps;if(Ie(h,a)&&s.ref===e.ref)if(dh=!1,e.pendingProps=a=h,(s.lanes&c)!==0)s.flags&131072&&(dh=!0);else return e.lanes=s.lanes,Zi(s,e,c)}return cj(s,e,o,a,c)}function dj(s,e,o){var a=e.pendingProps,c=a.children,h=s!==null?s.memoizedState:null;if(a.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=o;else{if(!(o&1073741824))return s=h!==null?h.baseLanes|o:o,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:s,cachePool:null,transitions:null},e.updateQueue=null,G(ej,fj),fj|=s,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=h!==null?h.baseLanes:o,G(ej,fj),fj|=a}else h!==null?(a=h.baseLanes|o,e.memoizedState=null):a=o,G(ej,fj),fj|=a;return Xi$1(s,e,c,o),e.child}function gj(s,e){var o=e.ref;(s===null&&o!==null||s!==null&&s.ref!==o)&&(e.flags|=512,e.flags|=2097152)}function cj(s,e,o,a,c){var h=Zf(o)?Xf:H.current;return h=Yf(e,h),ch(e,c),o=Nh(s,e,o,a,h,c),a=Sh(),s!==null&&!dh?(e.updateQueue=s.updateQueue,e.flags&=-2053,s.lanes&=~c,Zi(s,e,c)):(I&&a&&vg(e),e.flags|=1,Xi$1(s,e,o,c),e.child)}function hj(s,e,o,a,c){if(Zf(o)){var h=!0;cg(e)}else h=!1;if(ch(e,c),e.stateNode===null)ij(s,e),Gi(e,o,a),Ii(e,o,a,c),a=!0;else if(s===null){var g=e.stateNode,b=e.memoizedProps;g.props=b;var _=g.context,j=o.contextType;typeof j=="object"&&j!==null?j=eh(j):(j=Zf(o)?Xf:H.current,j=Yf(e,j));var $=o.getDerivedStateFromProps,_e=typeof $=="function"||typeof g.getSnapshotBeforeUpdate=="function";_e||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(b!==a||_!==j)&&Hi(e,g,a,j),jh=!1;var tt=e.memoizedState;g.state=tt,qh(e,a,g,c),_=e.memoizedState,b!==a||tt!==_||Wf.current||jh?(typeof $=="function"&&(Di(e,o,$,a),_=e.memoizedState),(b=jh||Fi(e,o,b,a,tt,_,j))?(_e||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(e.flags|=4194308)):(typeof g.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=a,e.memoizedState=_),g.props=a,g.state=_,g.context=j,a=b):(typeof g.componentDidMount=="function"&&(e.flags|=4194308),a=!1)}else{g=e.stateNode,lh(s,e),b=e.memoizedProps,j=e.type===e.elementType?b:Ci(e.type,b),g.props=j,_e=e.pendingProps,tt=g.context,_=o.contextType,typeof _=="object"&&_!==null?_=eh(_):(_=Zf(o)?Xf:H.current,_=Yf(e,_));var et=o.getDerivedStateFromProps;($=typeof et=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(b!==_e||tt!==_)&&Hi(e,g,a,_),jh=!1,tt=e.memoizedState,g.state=tt,qh(e,a,g,c);var ut=e.memoizedState;b!==_e||tt!==ut||Wf.current||jh?(typeof et=="function"&&(Di(e,o,et,a),ut=e.memoizedState),(j=jh||Fi(e,o,j,a,tt,ut,_)||!1)?($||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(a,ut,_),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(a,ut,_)),typeof g.componentDidUpdate=="function"&&(e.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof g.componentDidUpdate!="function"||b===s.memoizedProps&&tt===s.memoizedState||(e.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===s.memoizedProps&&tt===s.memoizedState||(e.flags|=1024),e.memoizedProps=a,e.memoizedState=ut),g.props=a,g.state=ut,g.context=_,a=j):(typeof g.componentDidUpdate!="function"||b===s.memoizedProps&&tt===s.memoizedState||(e.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===s.memoizedProps&&tt===s.memoizedState||(e.flags|=1024),a=!1)}return jj(s,e,o,a,h,c)}function jj(s,e,o,a,c,h){gj(s,e);var g=(e.flags&128)!==0;if(!a&&!g)return c&&dg(e,o,!1),Zi(s,e,h);a=e.stateNode,Wi.current=e;var b=g&&typeof o.getDerivedStateFromError!="function"?null:a.render();return e.flags|=1,s!==null&&g?(e.child=Ug(e,s.child,null,h),e.child=Ug(e,null,b,h)):Xi$1(s,e,b,h),e.memoizedState=a.state,c&&dg(e,o,!0),e.child}function kj(s){var e=s.stateNode;e.pendingContext?ag(s,e.pendingContext,e.pendingContext!==e.context):e.context&&ag(s,e.context,!1),yh(s,e.containerInfo)}function lj(s,e,o,a,c){return Ig(),Jg(c),e.flags|=256,Xi$1(s,e,o,a),e.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(s){return{baseLanes:s,cachePool:null,transitions:null}}function oj(s,e,o){var a=e.pendingProps,c=L.current,h=!1,g=(e.flags&128)!==0,b;if((b=g)||(b=s!==null&&s.memoizedState===null?!1:(c&2)!==0),b?(h=!0,e.flags&=-129):(s===null||s.memoizedState!==null)&&(c|=1),G(L,c&1),s===null)return Eg(e),s=e.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(e.mode&1?s.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(g=a.children,s=a.fallback,h?(a=e.mode,h=e.child,g={mode:"hidden",children:g},!(a&1)&&h!==null?(h.childLanes=0,h.pendingProps=g):h=pj(g,a,0,null),s=Tg(s,a,o,null),h.return=e,s.return=e,h.sibling=s,e.child=h,e.child.memoizedState=nj(o),e.memoizedState=mj,s):qj(e,g));if(c=s.memoizedState,c!==null&&(b=c.dehydrated,b!==null))return rj(s,e,g,a,b,c,o);if(h){h=a.fallback,g=e.mode,c=s.child,b=c.sibling;var _={mode:"hidden",children:a.children};return!(g&1)&&e.child!==c?(a=e.child,a.childLanes=0,a.pendingProps=_,e.deletions=null):(a=Pg(c,_),a.subtreeFlags=c.subtreeFlags&14680064),b!==null?h=Pg(b,h):(h=Tg(h,g,o,null),h.flags|=2),h.return=e,a.return=e,a.sibling=h,e.child=a,a=h,h=e.child,g=s.child.memoizedState,g=g===null?nj(o):{baseLanes:g.baseLanes|o,cachePool:null,transitions:g.transitions},h.memoizedState=g,h.childLanes=s.childLanes&~o,e.memoizedState=mj,a}return h=s.child,s=h.sibling,a=Pg(h,{mode:"visible",children:a.children}),!(e.mode&1)&&(a.lanes=o),a.return=e,a.sibling=null,s!==null&&(o=e.deletions,o===null?(e.deletions=[s],e.flags|=16):o.push(s)),e.child=a,e.memoizedState=null,a}function qj(s,e){return e=pj({mode:"visible",children:e},s.mode,0,null),e.return=s,s.child=e}function sj(s,e,o,a){return a!==null&&Jg(a),Ug(e,s.child,null,o),s=qj(e,e.pendingProps.children),s.flags|=2,e.memoizedState=null,s}function rj(s,e,o,a,c,h,g){if(o)return e.flags&256?(e.flags&=-257,a=Ki(Error(p(422))),sj(s,e,g,a)):e.memoizedState!==null?(e.child=s.child,e.flags|=128,null):(h=a.fallback,c=e.mode,a=pj({mode:"visible",children:a.children},c,0,null),h=Tg(h,c,g,null),h.flags|=2,a.return=e,h.return=e,a.sibling=h,e.child=a,e.mode&1&&Ug(e,s.child,null,g),e.child.memoizedState=nj(g),e.memoizedState=mj,h);if(!(e.mode&1))return sj(s,e,g,null);if(c.data==="$!"){if(a=c.nextSibling&&c.nextSibling.dataset,a)var b=a.dgst;return a=b,h=Error(p(419)),a=Ki(h,a,void 0),sj(s,e,g,a)}if(b=(g&s.childLanes)!==0,dh||b){if(a=Q,a!==null){switch(g&-g){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(a.suspendedLanes|g)?0:c,c!==0&&c!==h.retryLane&&(h.retryLane=c,ih(s,c),gi(a,s,c,-1))}return tj(),a=Ki(Error(p(421))),sj(s,e,g,a)}return c.data==="$?"?(e.flags|=128,e.child=s.child,e=uj.bind(null,s),c._reactRetry=e,null):(s=h.treeContext,yg=Lf(c.nextSibling),xg=e,I=!0,zg=null,s!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=s.id,sg=s.overflow,qg=e),e=qj(e,a.children),e.flags|=4096,e)}function vj(s,e,o){s.lanes|=e;var a=s.alternate;a!==null&&(a.lanes|=e),bh(s.return,e,o)}function wj(s,e,o,a,c){var h=s.memoizedState;h===null?s.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:a,tail:o,tailMode:c}:(h.isBackwards=e,h.rendering=null,h.renderingStartTime=0,h.last=a,h.tail=o,h.tailMode=c)}function xj(s,e,o){var a=e.pendingProps,c=a.revealOrder,h=a.tail;if(Xi$1(s,e,a.children,o),a=L.current,a&2)a=a&1|2,e.flags|=128;else{if(s!==null&&s.flags&128)e:for(s=e.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&vj(s,o,e);else if(s.tag===19)vj(s,o,e);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;s.sibling===null;){if(s.return===null||s.return===e)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}a&=1}if(G(L,a),!(e.mode&1))e.memoizedState=null;else switch(c){case"forwards":for(o=e.child,c=null;o!==null;)s=o.alternate,s!==null&&Ch(s)===null&&(c=o),o=o.sibling;o=c,o===null?(c=e.child,e.child=null):(c=o.sibling,o.sibling=null),wj(e,!1,c,o,h);break;case"backwards":for(o=null,c=e.child,e.child=null;c!==null;){if(s=c.alternate,s!==null&&Ch(s)===null){e.child=c;break}s=c.sibling,c.sibling=o,o=c,c=s}wj(e,!0,o,null,h);break;case"together":wj(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ij(s,e){!(e.mode&1)&&s!==null&&(s.alternate=null,e.alternate=null,e.flags|=2)}function Zi(s,e,o){if(s!==null&&(e.dependencies=s.dependencies),rh|=e.lanes,!(o&e.childLanes))return null;if(s!==null&&e.child!==s.child)throw Error(p(153));if(e.child!==null){for(s=e.child,o=Pg(s,s.pendingProps),e.child=o,o.return=e;s.sibling!==null;)s=s.sibling,o=o.sibling=Pg(s,s.pendingProps),o.return=e;o.sibling=null}return e.child}function yj(s,e,o){switch(e.tag){case 3:kj(e),Ig();break;case 5:Ah(e);break;case 1:Zf(e.type)&&cg(e);break;case 4:yh(e,e.stateNode.containerInfo);break;case 10:var a=e.type._context,c=e.memoizedProps.value;G(Wg,a._currentValue),a._currentValue=c;break;case 13:if(a=e.memoizedState,a!==null)return a.dehydrated!==null?(G(L,L.current&1),e.flags|=128,null):o&e.child.childLanes?oj(s,e,o):(G(L,L.current&1),s=Zi(s,e,o),s!==null?s.sibling:null);G(L,L.current&1);break;case 19:if(a=(o&e.childLanes)!==0,s.flags&128){if(a)return xj(s,e,o);e.flags|=128}if(c=e.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),G(L,L.current),a)break;return null;case 22:case 23:return e.lanes=0,dj(s,e,o)}return Zi(s,e,o)}var zj,Aj,Bj,Cj;zj=function(s,e){for(var o=e.child;o!==null;){if(o.tag===5||o.tag===6)s.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===e)break;for(;o.sibling===null;){if(o.return===null||o.return===e)return;o=o.return}o.sibling.return=o.return,o=o.sibling}};Aj=function(){};Bj=function(s,e,o,a){var c=s.memoizedProps;if(c!==a){s=e.stateNode,xh(uh.current);var h=null;switch(o){case"input":c=Ya(s,c),a=Ya(s,a),h=[];break;case"select":c=A({},c,{value:void 0}),a=A({},a,{value:void 0}),h=[];break;case"textarea":c=gb(s,c),a=gb(s,a),h=[];break;default:typeof c.onClick!="function"&&typeof a.onClick=="function"&&(s.onclick=Bf)}ub(o,a);var g;o=null;for(j in c)if(!a.hasOwnProperty(j)&&c.hasOwnProperty(j)&&c[j]!=null)if(j==="style"){var b=c[j];for(g in b)b.hasOwnProperty(g)&&(o||(o={}),o[g]="")}else j!=="dangerouslySetInnerHTML"&&j!=="children"&&j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(ea.hasOwnProperty(j)?h||(h=[]):(h=h||[]).push(j,null));for(j in a){var _=a[j];if(b=c!=null?c[j]:void 0,a.hasOwnProperty(j)&&_!==b&&(_!=null||b!=null))if(j==="style")if(b){for(g in b)!b.hasOwnProperty(g)||_&&_.hasOwnProperty(g)||(o||(o={}),o[g]="");for(g in _)_.hasOwnProperty(g)&&b[g]!==_[g]&&(o||(o={}),o[g]=_[g])}else o||(h||(h=[]),h.push(j,o)),o=_;else j==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,b=b?b.__html:void 0,_!=null&&b!==_&&(h=h||[]).push(j,_)):j==="children"?typeof _!="string"&&typeof _!="number"||(h=h||[]).push(j,""+_):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&(ea.hasOwnProperty(j)?(_!=null&&j==="onScroll"&&D("scroll",s),h||b===_||(h=[])):(h=h||[]).push(j,_))}o&&(h=h||[]).push("style",o);var j=h;(e.updateQueue=j)&&(e.flags|=4)}};Cj=function(s,e,o,a){o!==a&&(e.flags|=4)};function Dj(s,e){if(!I)switch(s.tailMode){case"hidden":e=s.tail;for(var o=null;e!==null;)e.alternate!==null&&(o=e),e=e.sibling;o===null?s.tail=null:o.sibling=null;break;case"collapsed":o=s.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?e||s.tail===null?s.tail=null:s.tail.sibling=null:a.sibling=null}}function S(s){var e=s.alternate!==null&&s.alternate.child===s.child,o=0,a=0;if(e)for(var c=s.child;c!==null;)o|=c.lanes|c.childLanes,a|=c.subtreeFlags&14680064,a|=c.flags&14680064,c.return=s,c=c.sibling;else for(c=s.child;c!==null;)o|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=s,c=c.sibling;return s.subtreeFlags|=a,s.childLanes=o,e}function Ej(s,e,o){var a=e.pendingProps;switch(wg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(e),null;case 1:return Zf(e.type)&&$f(),S(e),null;case 3:return a=e.stateNode,zh(),E(Wf),E(H),Eh(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(s===null||s.child===null)&&(Gg$1(e)?e.flags|=4:s===null||s.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(s,e),S(e),null;case 5:Bh(e);var c=xh(wh.current);if(o=e.type,s!==null&&e.stateNode!=null)Bj(s,e,o,a,c),s.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!a){if(e.stateNode===null)throw Error(p(166));return S(e),null}if(s=xh(uh.current),Gg$1(e)){a=e.stateNode,o=e.type;var h=e.memoizedProps;switch(a[Of]=e,a[Pf]=h,s=(e.mode&1)!==0,o){case"dialog":D("cancel",a),D("close",a);break;case"iframe":case"object":case"embed":D("load",a);break;case"video":case"audio":for(c=0;c<lf.length;c++)D(lf[c],a);break;case"source":D("error",a);break;case"img":case"image":case"link":D("error",a),D("load",a);break;case"details":D("toggle",a);break;case"input":Za(a,h),D("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!h.multiple},D("invalid",a);break;case"textarea":hb(a,h),D("invalid",a)}ub(o,h),c=null;for(var g in h)if(h.hasOwnProperty(g)){var b=h[g];g==="children"?typeof b=="string"?a.textContent!==b&&(h.suppressHydrationWarning!==!0&&Af(a.textContent,b,s),c=["children",b]):typeof b=="number"&&a.textContent!==""+b&&(h.suppressHydrationWarning!==!0&&Af(a.textContent,b,s),c=["children",""+b]):ea.hasOwnProperty(g)&&b!=null&&g==="onScroll"&&D("scroll",a)}switch(o){case"input":Va(a),db(a,h,!0);break;case"textarea":Va(a),jb(a);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(a.onclick=Bf)}a=c,e.updateQueue=a,a!==null&&(e.flags|=4)}else{g=c.nodeType===9?c:c.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=kb(o)),s==="http://www.w3.org/1999/xhtml"?o==="script"?(s=g.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof a.is=="string"?s=g.createElement(o,{is:a.is}):(s=g.createElement(o),o==="select"&&(g=s,a.multiple?g.multiple=!0:a.size&&(g.size=a.size))):s=g.createElementNS(s,o),s[Of]=e,s[Pf]=a,zj(s,e,!1,!1),e.stateNode=s;e:{switch(g=vb(o,a),o){case"dialog":D("cancel",s),D("close",s),c=a;break;case"iframe":case"object":case"embed":D("load",s),c=a;break;case"video":case"audio":for(c=0;c<lf.length;c++)D(lf[c],s);c=a;break;case"source":D("error",s),c=a;break;case"img":case"image":case"link":D("error",s),D("load",s),c=a;break;case"details":D("toggle",s),c=a;break;case"input":Za(s,a),c=Ya(s,a),D("invalid",s);break;case"option":c=a;break;case"select":s._wrapperState={wasMultiple:!!a.multiple},c=A({},a,{value:void 0}),D("invalid",s);break;case"textarea":hb(s,a),c=gb(s,a),D("invalid",s);break;default:c=a}ub(o,c),b=c;for(h in b)if(b.hasOwnProperty(h)){var _=b[h];h==="style"?sb(s,_):h==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,_!=null&&nb(s,_)):h==="children"?typeof _=="string"?(o!=="textarea"||_!=="")&&ob(s,_):typeof _=="number"&&ob(s,""+_):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(ea.hasOwnProperty(h)?_!=null&&h==="onScroll"&&D("scroll",s):_!=null&&ta(s,h,_,g))}switch(o){case"input":Va(s),db(s,a,!1);break;case"textarea":Va(s),jb(s);break;case"option":a.value!=null&&s.setAttribute("value",""+Sa(a.value));break;case"select":s.multiple=!!a.multiple,h=a.value,h!=null?fb(s,!!a.multiple,h,!1):a.defaultValue!=null&&fb(s,!!a.multiple,a.defaultValue,!0);break;default:typeof c.onClick=="function"&&(s.onclick=Bf)}switch(o){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return S(e),null;case 6:if(s&&e.stateNode!=null)Cj(s,e,s.memoizedProps,a);else{if(typeof a!="string"&&e.stateNode===null)throw Error(p(166));if(o=xh(wh.current),xh(uh.current),Gg$1(e)){if(a=e.stateNode,o=e.memoizedProps,a[Of]=e,(h=a.nodeValue!==o)&&(s=xg,s!==null))switch(s.tag){case 3:Af(a.nodeValue,o,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Af(a.nodeValue,o,(s.mode&1)!==0)}h&&(e.flags|=4)}else a=(o.nodeType===9?o:o.ownerDocument).createTextNode(a),a[Of]=e,e.stateNode=a}return S(e),null;case 13:if(E(L),a=e.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(I&&yg!==null&&e.mode&1&&!(e.flags&128))Hg(),Ig(),e.flags|=98560,h=!1;else if(h=Gg$1(e),a!==null&&a.dehydrated!==null){if(s===null){if(!h)throw Error(p(318));if(h=e.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(p(317));h[Of]=e}else Ig(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;S(e),h=!1}else zg!==null&&(Fj(zg),zg=null),h=!0;if(!h)return e.flags&65536?e:null}return e.flags&128?(e.lanes=o,e):(a=a!==null,a!==(s!==null&&s.memoizedState!==null)&&a&&(e.child.flags|=8192,e.mode&1&&(s===null||L.current&1?T===0&&(T=3):tj())),e.updateQueue!==null&&(e.flags|=4),S(e),null);case 4:return zh(),Aj(s,e),s===null&&sf(e.stateNode.containerInfo),S(e),null;case 10:return ah(e.type._context),S(e),null;case 17:return Zf(e.type)&&$f(),S(e),null;case 19:if(E(L),h=e.memoizedState,h===null)return S(e),null;if(a=(e.flags&128)!==0,g=h.rendering,g===null)if(a)Dj(h,!1);else{if(T!==0||s!==null&&s.flags&128)for(s=e.child;s!==null;){if(g=Ch(s),g!==null){for(e.flags|=128,Dj(h,!1),a=g.updateQueue,a!==null&&(e.updateQueue=a,e.flags|=4),e.subtreeFlags=0,a=o,o=e.child;o!==null;)h=o,s=a,h.flags&=14680066,g=h.alternate,g===null?(h.childLanes=0,h.lanes=s,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=g.childLanes,h.lanes=g.lanes,h.child=g.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=g.memoizedProps,h.memoizedState=g.memoizedState,h.updateQueue=g.updateQueue,h.type=g.type,s=g.dependencies,h.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),o=o.sibling;return G(L,L.current&1|2),e.child}s=s.sibling}h.tail!==null&&B()>Gj&&(e.flags|=128,a=!0,Dj(h,!1),e.lanes=4194304)}else{if(!a)if(s=Ch(g),s!==null){if(e.flags|=128,a=!0,o=s.updateQueue,o!==null&&(e.updateQueue=o,e.flags|=4),Dj(h,!0),h.tail===null&&h.tailMode==="hidden"&&!g.alternate&&!I)return S(e),null}else 2*B()-h.renderingStartTime>Gj&&o!==1073741824&&(e.flags|=128,a=!0,Dj(h,!1),e.lanes=4194304);h.isBackwards?(g.sibling=e.child,e.child=g):(o=h.last,o!==null?o.sibling=g:e.child=g,h.last=g)}return h.tail!==null?(e=h.tail,h.rendering=e,h.tail=e.sibling,h.renderingStartTime=B(),e.sibling=null,o=L.current,G(L,a?o&1|2:o&1),e):(S(e),null);case 22:case 23:return Hj(),a=e.memoizedState!==null,s!==null&&s.memoizedState!==null!==a&&(e.flags|=8192),a&&e.mode&1?fj&1073741824&&(S(e),e.subtreeFlags&6&&(e.flags|=8192)):S(e),null;case 24:return null;case 25:return null}throw Error(p(156,e.tag))}function Ij(s,e){switch(wg(e),e.tag){case 1:return Zf(e.type)&&$f(),s=e.flags,s&65536?(e.flags=s&-65537|128,e):null;case 3:return zh(),E(Wf),E(H),Eh(),s=e.flags,s&65536&&!(s&128)?(e.flags=s&-65537|128,e):null;case 5:return Bh(e),null;case 13:if(E(L),s=e.memoizedState,s!==null&&s.dehydrated!==null){if(e.alternate===null)throw Error(p(340));Ig()}return s=e.flags,s&65536?(e.flags=s&-65537|128,e):null;case 19:return E(L),null;case 4:return zh(),null;case 10:return ah(e.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Lj(s,e){var o=s.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(a){W(s,e,a)}else o.current=null}function Mj(s,e,o){try{o()}catch(a){W(s,e,a)}}var Nj=!1;function Oj(s,e){if(Cf=dd$1,s=Me(),Ne(s)){if("selectionStart"in s)var o={start:s.selectionStart,end:s.selectionEnd};else e:{o=(o=s.ownerDocument)&&o.defaultView||window;var a=o.getSelection&&o.getSelection();if(a&&a.rangeCount!==0){o=a.anchorNode;var c=a.anchorOffset,h=a.focusNode;a=a.focusOffset;try{o.nodeType,h.nodeType}catch{o=null;break e}var g=0,b=-1,_=-1,j=0,$=0,_e=s,tt=null;t:for(;;){for(var et;_e!==o||c!==0&&_e.nodeType!==3||(b=g+c),_e!==h||a!==0&&_e.nodeType!==3||(_=g+a),_e.nodeType===3&&(g+=_e.nodeValue.length),(et=_e.firstChild)!==null;)tt=_e,_e=et;for(;;){if(_e===s)break t;if(tt===o&&++j===c&&(b=g),tt===h&&++$===a&&(_=g),(et=_e.nextSibling)!==null)break;_e=tt,tt=_e.parentNode}_e=et}o=b===-1||_===-1?null:{start:b,end:_}}else o=null}o=o||{start:0,end:0}}else o=null;for(Df={focusedElem:s,selectionRange:o},dd$1=!1,V=e;V!==null;)if(e=V,s=e.child,(e.subtreeFlags&1028)!==0&&s!==null)s.return=e,V=s;else for(;V!==null;){e=V;try{var ut=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(ut!==null){var ht=ut.memoizedProps,st=ut.memoizedState,nt=e.stateNode,rt=nt.getSnapshotBeforeUpdate(e.elementType===e.type?ht:Ci(e.type,ht),st);nt.__reactInternalSnapshotBeforeUpdate=rt}break;case 3:var at=e.stateNode.containerInfo;at.nodeType===1?at.textContent="":at.nodeType===9&&at.documentElement&&at.removeChild(at.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch(dt){W(e,e.return,dt)}if(s=e.sibling,s!==null){s.return=e.return,V=s;break}V=e.return}return ut=Nj,Nj=!1,ut}function Pj(s,e,o){var a=e.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&s)===s){var h=c.destroy;c.destroy=void 0,h!==void 0&&Mj(e,o,h)}c=c.next}while(c!==a)}}function Qj(s,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var o=e=e.next;do{if((o.tag&s)===s){var a=o.create;o.destroy=a()}o=o.next}while(o!==e)}}function Rj(s){var e=s.ref;if(e!==null){var o=s.stateNode;switch(s.tag){case 5:s=o;break;default:s=o}typeof e=="function"?e(s):e.current=s}}function Sj(s){var e=s.alternate;e!==null&&(s.alternate=null,Sj(e)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(e=s.stateNode,e!==null&&(delete e[Of],delete e[Pf],delete e[of],delete e[Qf],delete e[Rf])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function Tj(s){return s.tag===5||s.tag===3||s.tag===4}function Uj(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Tj(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Vj(s,e,o){var a=s.tag;if(a===5||a===6)s=s.stateNode,e?o.nodeType===8?o.parentNode.insertBefore(s,e):o.insertBefore(s,e):(o.nodeType===8?(e=o.parentNode,e.insertBefore(s,o)):(e=o,e.appendChild(s)),o=o._reactRootContainer,o!=null||e.onclick!==null||(e.onclick=Bf));else if(a!==4&&(s=s.child,s!==null))for(Vj(s,e,o),s=s.sibling;s!==null;)Vj(s,e,o),s=s.sibling}function Wj(s,e,o){var a=s.tag;if(a===5||a===6)s=s.stateNode,e?o.insertBefore(s,e):o.appendChild(s);else if(a!==4&&(s=s.child,s!==null))for(Wj(s,e,o),s=s.sibling;s!==null;)Wj(s,e,o),s=s.sibling}var X=null,Xj=!1;function Yj(s,e,o){for(o=o.child;o!==null;)Zj(s,e,o),o=o.sibling}function Zj(s,e,o){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,o)}catch{}switch(o.tag){case 5:U||Lj(o,e);case 6:var a=X,c=Xj;X=null,Yj(s,e,o),X=a,Xj=c,X!==null&&(Xj?(s=X,o=o.stateNode,s.nodeType===8?s.parentNode.removeChild(o):s.removeChild(o)):X.removeChild(o.stateNode));break;case 18:X!==null&&(Xj?(s=X,o=o.stateNode,s.nodeType===8?Kf(s.parentNode,o):s.nodeType===1&&Kf(s,o),bd(s)):Kf(X,o.stateNode));break;case 4:a=X,c=Xj,X=o.stateNode.containerInfo,Xj=!0,Yj(s,e,o),X=a,Xj=c;break;case 0:case 11:case 14:case 15:if(!U&&(a=o.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){c=a=a.next;do{var h=c,g=h.destroy;h=h.tag,g!==void 0&&(h&2||h&4)&&Mj(o,e,g),c=c.next}while(c!==a)}Yj(s,e,o);break;case 1:if(!U&&(Lj(o,e),a=o.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=o.memoizedProps,a.state=o.memoizedState,a.componentWillUnmount()}catch(b){W(o,e,b)}Yj(s,e,o);break;case 21:Yj(s,e,o);break;case 22:o.mode&1?(U=(a=U)||o.memoizedState!==null,Yj(s,e,o),U=a):Yj(s,e,o);break;default:Yj(s,e,o)}}function ak(s){var e=s.updateQueue;if(e!==null){s.updateQueue=null;var o=s.stateNode;o===null&&(o=s.stateNode=new Kj),e.forEach(function(a){var c=bk.bind(null,s,a);o.has(a)||(o.add(a),a.then(c,c))})}}function ck(s,e){var o=e.deletions;if(o!==null)for(var a=0;a<o.length;a++){var c=o[a];try{var h=s,g=e,b=g;e:for(;b!==null;){switch(b.tag){case 5:X=b.stateNode,Xj=!1;break e;case 3:X=b.stateNode.containerInfo,Xj=!0;break e;case 4:X=b.stateNode.containerInfo,Xj=!0;break e}b=b.return}if(X===null)throw Error(p(160));Zj(h,g,c),X=null,Xj=!1;var _=c.alternate;_!==null&&(_.return=null),c.return=null}catch(j){W(c,e,j)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)dk(e,s),e=e.sibling}function dk(s,e){var o=s.alternate,a=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(ck(e,s),ek(s),a&4){try{Pj(3,s,s.return),Qj(3,s)}catch(ht){W(s,s.return,ht)}try{Pj(5,s,s.return)}catch(ht){W(s,s.return,ht)}}break;case 1:ck(e,s),ek(s),a&512&&o!==null&&Lj(o,o.return);break;case 5:if(ck(e,s),ek(s),a&512&&o!==null&&Lj(o,o.return),s.flags&32){var c=s.stateNode;try{ob(c,"")}catch(ht){W(s,s.return,ht)}}if(a&4&&(c=s.stateNode,c!=null)){var h=s.memoizedProps,g=o!==null?o.memoizedProps:h,b=s.type,_=s.updateQueue;if(s.updateQueue=null,_!==null)try{b==="input"&&h.type==="radio"&&h.name!=null&&ab(c,h),vb(b,g);var j=vb(b,h);for(g=0;g<_.length;g+=2){var $=_[g],_e=_[g+1];$==="style"?sb(c,_e):$==="dangerouslySetInnerHTML"?nb(c,_e):$==="children"?ob(c,_e):ta(c,$,_e,j)}switch(b){case"input":bb(c,h);break;case"textarea":ib(c,h);break;case"select":var tt=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!h.multiple;var et=h.value;et!=null?fb(c,!!h.multiple,et,!1):tt!==!!h.multiple&&(h.defaultValue!=null?fb(c,!!h.multiple,h.defaultValue,!0):fb(c,!!h.multiple,h.multiple?[]:"",!1))}c[Pf]=h}catch(ht){W(s,s.return,ht)}}break;case 6:if(ck(e,s),ek(s),a&4){if(s.stateNode===null)throw Error(p(162));c=s.stateNode,h=s.memoizedProps;try{c.nodeValue=h}catch(ht){W(s,s.return,ht)}}break;case 3:if(ck(e,s),ek(s),a&4&&o!==null&&o.memoizedState.isDehydrated)try{bd(e.containerInfo)}catch(ht){W(s,s.return,ht)}break;case 4:ck(e,s),ek(s);break;case 13:ck(e,s),ek(s),c=s.child,c.flags&8192&&(h=c.memoizedState!==null,c.stateNode.isHidden=h,!h||c.alternate!==null&&c.alternate.memoizedState!==null||(fk=B())),a&4&&ak(s);break;case 22:if($=o!==null&&o.memoizedState!==null,s.mode&1?(U=(j=U)||$,ck(e,s),U=j):ck(e,s),ek(s),a&8192){if(j=s.memoizedState!==null,(s.stateNode.isHidden=j)&&!$&&s.mode&1)for(V=s,$=s.child;$!==null;){for(_e=V=$;V!==null;){switch(tt=V,et=tt.child,tt.tag){case 0:case 11:case 14:case 15:Pj(4,tt,tt.return);break;case 1:Lj(tt,tt.return);var ut=tt.stateNode;if(typeof ut.componentWillUnmount=="function"){a=tt,o=tt.return;try{e=a,ut.props=e.memoizedProps,ut.state=e.memoizedState,ut.componentWillUnmount()}catch(ht){W(a,o,ht)}}break;case 5:Lj(tt,tt.return);break;case 22:if(tt.memoizedState!==null){gk(_e);continue}}et!==null?(et.return=tt,V=et):gk(_e)}$=$.sibling}e:for($=null,_e=s;;){if(_e.tag===5){if($===null){$=_e;try{c=_e.stateNode,j?(h=c.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(b=_e.stateNode,_=_e.memoizedProps.style,g=_!=null&&_.hasOwnProperty("display")?_.display:null,b.style.display=rb("display",g))}catch(ht){W(s,s.return,ht)}}}else if(_e.tag===6){if($===null)try{_e.stateNode.nodeValue=j?"":_e.memoizedProps}catch(ht){W(s,s.return,ht)}}else if((_e.tag!==22&&_e.tag!==23||_e.memoizedState===null||_e===s)&&_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===s)break e;for(;_e.sibling===null;){if(_e.return===null||_e.return===s)break e;$===_e&&($=null),_e=_e.return}$===_e&&($=null),_e.sibling.return=_e.return,_e=_e.sibling}}break;case 19:ck(e,s),ek(s),a&4&&ak(s);break;case 21:break;default:ck(e,s),ek(s)}}function ek(s){var e=s.flags;if(e&2){try{e:{for(var o=s.return;o!==null;){if(Tj(o)){var a=o;break e}o=o.return}throw Error(p(160))}switch(a.tag){case 5:var c=a.stateNode;a.flags&32&&(ob(c,""),a.flags&=-33);var h=Uj(s);Wj(s,h,c);break;case 3:case 4:var g=a.stateNode.containerInfo,b=Uj(s);Vj(s,b,g);break;default:throw Error(p(161))}}catch(_){W(s,s.return,_)}s.flags&=-3}e&4096&&(s.flags&=-4097)}function hk(s,e,o){V=s,ik(s)}function ik(s,e,o){for(var a=(s.mode&1)!==0;V!==null;){var c=V,h=c.child;if(c.tag===22&&a){var g=c.memoizedState!==null||Jj;if(!g){var b=c.alternate,_=b!==null&&b.memoizedState!==null||U;b=Jj;var j=U;if(Jj=g,(U=_)&&!j)for(V=c;V!==null;)g=V,_=g.child,g.tag===22&&g.memoizedState!==null?jk(c):_!==null?(_.return=g,V=_):jk(c);for(;h!==null;)V=h,ik(h),h=h.sibling;V=c,Jj=b,U=j}kk(s)}else c.subtreeFlags&8772&&h!==null?(h.return=c,V=h):kk(s)}}function kk(s){for(;V!==null;){var e=V;if(e.flags&8772){var o=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:U||Qj(5,e);break;case 1:var a=e.stateNode;if(e.flags&4&&!U)if(o===null)a.componentDidMount();else{var c=e.elementType===e.type?o.memoizedProps:Ci(e.type,o.memoizedProps);a.componentDidUpdate(c,o.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var h=e.updateQueue;h!==null&&sh(e,h,a);break;case 3:var g=e.updateQueue;if(g!==null){if(o=null,e.child!==null)switch(e.child.tag){case 5:o=e.child.stateNode;break;case 1:o=e.child.stateNode}sh(e,g,o)}break;case 5:var b=e.stateNode;if(o===null&&e.flags&4){o=b;var _=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":_.autoFocus&&o.focus();break;case"img":_.src&&(o.src=_.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var j=e.alternate;if(j!==null){var $=j.memoizedState;if($!==null){var _e=$.dehydrated;_e!==null&&bd(_e)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p(163))}U||e.flags&512&&Rj(e)}catch(tt){W(e,e.return,tt)}}if(e===s){V=null;break}if(o=e.sibling,o!==null){o.return=e.return,V=o;break}V=e.return}}function gk(s){for(;V!==null;){var e=V;if(e===s){V=null;break}var o=e.sibling;if(o!==null){o.return=e.return,V=o;break}V=e.return}}function jk(s){for(;V!==null;){var e=V;try{switch(e.tag){case 0:case 11:case 15:var o=e.return;try{Qj(4,e)}catch(_){W(e,o,_)}break;case 1:var a=e.stateNode;if(typeof a.componentDidMount=="function"){var c=e.return;try{a.componentDidMount()}catch(_){W(e,c,_)}}var h=e.return;try{Rj(e)}catch(_){W(e,h,_)}break;case 5:var g=e.return;try{Rj(e)}catch(_){W(e,g,_)}}}catch(_){W(e,e.return,_)}if(e===s){V=null;break}var b=e.sibling;if(b!==null){b.return=e.return,V=b;break}V=e.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K=0,Q=null,Y=null,Z=0,fj=0,ej=Uf(0),T=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi$1=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R(){return K&6?B():Ak!==-1?Ak:Ak=B()}function yi(s){return s.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(s=C,s!==0||(s=window.event,s=s===void 0?16:jd(s.type)),s):1}function gi(s,e,o,a){if(50<yk)throw yk=0,zk=null,Error(p(185));Ac(s,o,a),(!(K&2)||s!==Q)&&(s===Q&&(!(K&2)&&(qk|=o),T===4&&Ck(s,Z)),Dk(s,a),o===1&&K===0&&!(e.mode&1)&&(Gj=B()+500,fg&&jg()))}function Dk(s,e){var o=s.callbackNode;wc(s,e);var a=uc(s,s===Q?Z:0);if(a===0)o!==null&&bc(o),s.callbackNode=null,s.callbackPriority=0;else if(e=a&-a,s.callbackPriority!==e){if(o!=null&&bc(o),e===1)s.tag===0?ig(Ek.bind(null,s)):hg(Ek.bind(null,s)),Jf(function(){!(K&6)&&jg()}),o=null;else{switch(Dc(a)){case 1:o=fc;break;case 4:o=gc;break;case 16:o=hc;break;case 536870912:o=jc;break;default:o=hc}o=Fk(o,Gk.bind(null,s))}s.callbackPriority=e,s.callbackNode=o}}function Gk(s,e){if(Ak=-1,Bk=0,K&6)throw Error(p(327));var o=s.callbackNode;if(Hk()&&s.callbackNode!==o)return null;var a=uc(s,s===Q?Z:0);if(a===0)return null;if(a&30||a&s.expiredLanes||e)e=Ik(s,a);else{e=a;var c=K;K|=2;var h=Jk();(Q!==s||Z!==e)&&(uk=null,Gj=B()+500,Kk(s,e));do try{Lk();break}catch(b){Mk(s,b)}while(1);$g(),mk.current=h,K=c,Y!==null?e=0:(Q=null,Z=0,e=T)}if(e!==0){if(e===2&&(c=xc(s),c!==0&&(a=c,e=Nk(s,c))),e===1)throw o=pk,Kk(s,0),Ck(s,a),Dk(s,B()),o;if(e===6)Ck(s,a);else{if(c=s.current.alternate,!(a&30)&&!Ok(c)&&(e=Ik(s,a),e===2&&(h=xc(s),h!==0&&(a=h,e=Nk(s,h))),e===1))throw o=pk,Kk(s,0),Ck(s,a),Dk(s,B()),o;switch(s.finishedWork=c,s.finishedLanes=a,e){case 0:case 1:throw Error(p(345));case 2:Pk(s,tk,uk);break;case 3:if(Ck(s,a),(a&130023424)===a&&(e=fk+500-B(),10<e)){if(uc(s,0)!==0)break;if(c=s.suspendedLanes,(c&a)!==a){R(),s.pingedLanes|=s.suspendedLanes&c;break}s.timeoutHandle=Ff(Pk.bind(null,s,tk,uk),e);break}Pk(s,tk,uk);break;case 4:if(Ck(s,a),(a&4194240)===a)break;for(e=s.eventTimes,c=-1;0<a;){var g=31-oc(a);h=1<<g,g=e[g],g>c&&(c=g),a&=~h}if(a=c,a=B()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*lk(a/1960))-a,10<a){s.timeoutHandle=Ff(Pk.bind(null,s,tk,uk),a);break}Pk(s,tk,uk);break;case 5:Pk(s,tk,uk);break;default:throw Error(p(329))}}}return Dk(s,B()),s.callbackNode===o?Gk.bind(null,s):null}function Nk(s,e){var o=sk;return s.current.memoizedState.isDehydrated&&(Kk(s,e).flags|=256),s=Ik(s,e),s!==2&&(e=tk,tk=o,e!==null&&Fj(e)),s}function Fj(s){tk===null?tk=s:tk.push.apply(tk,s)}function Ok(s){for(var e=s;;){if(e.flags&16384){var o=e.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var a=0;a<o.length;a++){var c=o[a],h=c.getSnapshot;c=c.value;try{if(!He(h(),c))return!1}catch{return!1}}}if(o=e.child,e.subtreeFlags&16384&&o!==null)o.return=e,e=o;else{if(e===s)break;for(;e.sibling===null;){if(e.return===null||e.return===s)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ck(s,e){for(e&=~rk,e&=~qk,s.suspendedLanes|=e,s.pingedLanes&=~e,s=s.expirationTimes;0<e;){var o=31-oc(e),a=1<<o;s[o]=-1,e&=~a}}function Ek(s){if(K&6)throw Error(p(327));Hk();var e=uc(s,0);if(!(e&1))return Dk(s,B()),null;var o=Ik(s,e);if(s.tag!==0&&o===2){var a=xc(s);a!==0&&(e=a,o=Nk(s,a))}if(o===1)throw o=pk,Kk(s,0),Ck(s,e),Dk(s,B()),o;if(o===6)throw Error(p(345));return s.finishedWork=s.current.alternate,s.finishedLanes=e,Pk(s,tk,uk),Dk(s,B()),null}function Qk(s,e){var o=K;K|=1;try{return s(e)}finally{K=o,K===0&&(Gj=B()+500,fg&&jg())}}function Rk(s){wk!==null&&wk.tag===0&&!(K&6)&&Hk();var e=K;K|=1;var o=ok.transition,a=C;try{if(ok.transition=null,C=1,s)return s()}finally{C=a,ok.transition=o,K=e,!(K&6)&&jg()}}function Hj(){fj=ej.current,E(ej)}function Kk(s,e){s.finishedWork=null,s.finishedLanes=0;var o=s.timeoutHandle;if(o!==-1&&(s.timeoutHandle=-1,Gf(o)),Y!==null)for(o=Y.return;o!==null;){var a=o;switch(wg(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&$f();break;case 3:zh(),E(Wf),E(H),Eh();break;case 5:Bh(a);break;case 4:zh();break;case 13:E(L);break;case 19:E(L);break;case 10:ah(a.type._context);break;case 22:case 23:Hj()}o=o.return}if(Q=s,Y=s=Pg(s.current,null),Z=fj=e,T=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(e=0;e<fh.length;e++)if(o=fh[e],a=o.interleaved,a!==null){o.interleaved=null;var c=a.next,h=o.pending;if(h!==null){var g=h.next;h.next=c,a.next=g}o.pending=a}fh=null}return s}function Mk(s,e){do{var o=Y;try{if($g(),Fh.current=Rh,Ih){for(var a=M.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}Ih=!1}if(Hh=0,O=N=M=null,Jh=!1,Kh=0,nk.current=null,o===null||o.return===null){T=1,pk=e,Y=null;break}e:{var h=s,g=o.return,b=o,_=e;if(e=Z,b.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){var j=_,$=b,_e=$.tag;if(!($.mode&1)&&(_e===0||_e===11||_e===15)){var tt=$.alternate;tt?($.updateQueue=tt.updateQueue,$.memoizedState=tt.memoizedState,$.lanes=tt.lanes):($.updateQueue=null,$.memoizedState=null)}var et=Ui(g);if(et!==null){et.flags&=-257,Vi(et,g,b,h,e),et.mode&1&&Si(h,j,e),e=et,_=j;var ut=e.updateQueue;if(ut===null){var ht=new Set;ht.add(_),e.updateQueue=ht}else ut.add(_);break e}else{if(!(e&1)){Si(h,j,e),tj();break e}_=Error(p(426))}}else if(I&&b.mode&1){var st=Ui(g);if(st!==null){!(st.flags&65536)&&(st.flags|=256),Vi(st,g,b,h,e),Jg(Ji(_,b));break e}}h=_=Ji(_,b),T!==4&&(T=2),sk===null?sk=[h]:sk.push(h),h=g;do{switch(h.tag){case 3:h.flags|=65536,e&=-e,h.lanes|=e;var nt=Ni(h,_,e);ph(h,nt);break e;case 1:b=_;var rt=h.type,at=h.stateNode;if(!(h.flags&128)&&(typeof rt.getDerivedStateFromError=="function"||at!==null&&typeof at.componentDidCatch=="function"&&(Ri===null||!Ri.has(at)))){h.flags|=65536,e&=-e,h.lanes|=e;var dt=Qi(h,b,e);ph(h,dt);break e}}h=h.return}while(h!==null)}Sk(o)}catch(ot){e=ot,Y===o&&o!==null&&(Y=o=o.return);continue}break}while(1)}function Jk(){var s=mk.current;return mk.current=Rh,s===null?Rh:s}function tj(){(T===0||T===3||T===2)&&(T=4),Q===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q,Z)}function Ik(s,e){var o=K;K|=2;var a=Jk();(Q!==s||Z!==e)&&(uk=null,Kk(s,e));do try{Tk();break}catch(c){Mk(s,c)}while(1);if($g(),K=o,mk.current=a,Y!==null)throw Error(p(261));return Q=null,Z=0,T}function Tk(){for(;Y!==null;)Uk(Y)}function Lk(){for(;Y!==null&&!cc();)Uk(Y)}function Uk(s){var e=Vk(s.alternate,s,fj);s.memoizedProps=s.pendingProps,e===null?Sk(s):Y=e,nk.current=null}function Sk(s){var e=s;do{var o=e.alternate;if(s=e.return,e.flags&32768){if(o=Ij(o,e),o!==null){o.flags&=32767,Y=o;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{T=6,Y=null;return}}else if(o=Ej(o,e,fj),o!==null){Y=o;return}if(e=e.sibling,e!==null){Y=e;return}Y=e=s}while(e!==null);T===0&&(T=5)}function Pk(s,e,o){var a=C,c=ok.transition;try{ok.transition=null,C=1,Wk(s,e,o,a)}finally{ok.transition=c,C=a}return null}function Wk(s,e,o,a){do Hk();while(wk!==null);if(K&6)throw Error(p(327));o=s.finishedWork;var c=s.finishedLanes;if(o===null)return null;if(s.finishedWork=null,s.finishedLanes=0,o===s.current)throw Error(p(177));s.callbackNode=null,s.callbackPriority=0;var h=o.lanes|o.childLanes;if(Bc(s,h),s===Q&&(Y=Q=null,Z=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),h=(o.flags&15990)!==0,o.subtreeFlags&15990||h){h=ok.transition,ok.transition=null;var g=C;C=1;var b=K;K|=4,nk.current=null,Oj(s,o),dk(o,s),Oe(Df),dd$1=!!Cf,Df=Cf=null,s.current=o,hk(o),dc(),K=b,C=g,ok.transition=h}else s.current=o;if(vk&&(vk=!1,wk=s,xk=c),h=s.pendingLanes,h===0&&(Ri=null),mc(o.stateNode),Dk(s,B()),e!==null)for(a=s.onRecoverableError,o=0;o<e.length;o++)c=e[o],a(c.value,{componentStack:c.stack,digest:c.digest});if(Oi)throw Oi=!1,s=Pi$1,Pi$1=null,s;return xk&1&&s.tag!==0&&Hk(),h=s.pendingLanes,h&1?s===zk?yk++:(yk=0,zk=s):yk=0,jg(),null}function Hk(){if(wk!==null){var s=Dc(xk),e=ok.transition,o=C;try{if(ok.transition=null,C=16>s?16:s,wk===null)var a=!1;else{if(s=wk,wk=null,xk=0,K&6)throw Error(p(331));var c=K;for(K|=4,V=s.current;V!==null;){var h=V,g=h.child;if(V.flags&16){var b=h.deletions;if(b!==null){for(var _=0;_<b.length;_++){var j=b[_];for(V=j;V!==null;){var $=V;switch($.tag){case 0:case 11:case 15:Pj(8,$,h)}var _e=$.child;if(_e!==null)_e.return=$,V=_e;else for(;V!==null;){$=V;var tt=$.sibling,et=$.return;if(Sj($),$===j){V=null;break}if(tt!==null){tt.return=et,V=tt;break}V=et}}}var ut=h.alternate;if(ut!==null){var ht=ut.child;if(ht!==null){ut.child=null;do{var st=ht.sibling;ht.sibling=null,ht=st}while(ht!==null)}}V=h}}if(h.subtreeFlags&2064&&g!==null)g.return=h,V=g;else e:for(;V!==null;){if(h=V,h.flags&2048)switch(h.tag){case 0:case 11:case 15:Pj(9,h,h.return)}var nt=h.sibling;if(nt!==null){nt.return=h.return,V=nt;break e}V=h.return}}var rt=s.current;for(V=rt;V!==null;){g=V;var at=g.child;if(g.subtreeFlags&2064&&at!==null)at.return=g,V=at;else e:for(g=rt;V!==null;){if(b=V,b.flags&2048)try{switch(b.tag){case 0:case 11:case 15:Qj(9,b)}}catch(ot){W(b,b.return,ot)}if(b===g){V=null;break e}var dt=b.sibling;if(dt!==null){dt.return=b.return,V=dt;break e}V=b.return}}if(K=c,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,s)}catch{}a=!0}return a}finally{C=o,ok.transition=e}}return!1}function Xk(s,e,o){e=Ji(o,e),e=Ni(s,e,1),s=nh(s,e,1),e=R(),s!==null&&(Ac(s,1,e),Dk(s,e))}function W(s,e,o){if(s.tag===3)Xk(s,s,o);else for(;e!==null;){if(e.tag===3){Xk(e,s,o);break}else if(e.tag===1){var a=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Ri===null||!Ri.has(a))){s=Ji(o,s),s=Qi(e,s,1),e=nh(e,s,1),s=R(),e!==null&&(Ac(e,1,s),Dk(e,s));break}}e=e.return}}function Ti(s,e,o){var a=s.pingCache;a!==null&&a.delete(e),e=R(),s.pingedLanes|=s.suspendedLanes&o,Q===s&&(Z&o)===o&&(T===4||T===3&&(Z&130023424)===Z&&500>B()-fk?Kk(s,0):rk|=o),Dk(s,e)}function Yk(s,e){e===0&&(s.mode&1?(e=sc$1,sc$1<<=1,!(sc$1&130023424)&&(sc$1=4194304)):e=1);var o=R();s=ih(s,e),s!==null&&(Ac(s,e,o),Dk(s,o))}function uj(s){var e=s.memoizedState,o=0;e!==null&&(o=e.retryLane),Yk(s,o)}function bk(s,e){var o=0;switch(s.tag){case 13:var a=s.stateNode,c=s.memoizedState;c!==null&&(o=c.retryLane);break;case 19:a=s.stateNode;break;default:throw Error(p(314))}a!==null&&a.delete(e),Yk(s,o)}var Vk;Vk=function(s,e,o){if(s!==null)if(s.memoizedProps!==e.pendingProps||Wf.current)dh=!0;else{if(!(s.lanes&o)&&!(e.flags&128))return dh=!1,yj(s,e,o);dh=!!(s.flags&131072)}else dh=!1,I&&e.flags&1048576&&ug(e,ng,e.index);switch(e.lanes=0,e.tag){case 2:var a=e.type;ij(s,e),s=e.pendingProps;var c=Yf(e,H.current);ch(e,o),c=Nh(null,e,a,s,c,o);var h=Sh();return e.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zf(a)?(h=!0,cg(e)):h=!1,e.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,kh(e),c.updater=Ei,e.stateNode=c,c._reactInternals=e,Ii(e,a,s,o),e=jj(null,e,a,!0,h,o)):(e.tag=0,I&&h&&vg(e),Xi$1(null,e,c,o),e=e.child),e;case 16:a=e.elementType;e:{switch(ij(s,e),s=e.pendingProps,c=a._init,a=c(a._payload),e.type=a,c=e.tag=Zk(a),s=Ci(a,s),c){case 0:e=cj(null,e,a,s,o);break e;case 1:e=hj(null,e,a,s,o);break e;case 11:e=Yi(null,e,a,s,o);break e;case 14:e=$i(null,e,a,Ci(a.type,s),o);break e}throw Error(p(306,a,""))}return e;case 0:return a=e.type,c=e.pendingProps,c=e.elementType===a?c:Ci(a,c),cj(s,e,a,c,o);case 1:return a=e.type,c=e.pendingProps,c=e.elementType===a?c:Ci(a,c),hj(s,e,a,c,o);case 3:e:{if(kj(e),s===null)throw Error(p(387));a=e.pendingProps,h=e.memoizedState,c=h.element,lh(s,e),qh(e,a,null,o);var g=e.memoizedState;if(a=g.element,h.isDehydrated)if(h={element:a,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},e.updateQueue.baseState=h,e.memoizedState=h,e.flags&256){c=Ji(Error(p(423)),e),e=lj(s,e,a,o,c);break e}else if(a!==c){c=Ji(Error(p(424)),e),e=lj(s,e,a,o,c);break e}else for(yg=Lf(e.stateNode.containerInfo.firstChild),xg=e,I=!0,zg=null,o=Vg(e,null,a,o),e.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Ig(),a===c){e=Zi(s,e,o);break e}Xi$1(s,e,a,o)}e=e.child}return e;case 5:return Ah(e),s===null&&Eg(e),a=e.type,c=e.pendingProps,h=s!==null?s.memoizedProps:null,g=c.children,Ef(a,c)?g=null:h!==null&&Ef(a,h)&&(e.flags|=32),gj(s,e),Xi$1(s,e,g,o),e.child;case 6:return s===null&&Eg(e),null;case 13:return oj(s,e,o);case 4:return yh(e,e.stateNode.containerInfo),a=e.pendingProps,s===null?e.child=Ug(e,null,a,o):Xi$1(s,e,a,o),e.child;case 11:return a=e.type,c=e.pendingProps,c=e.elementType===a?c:Ci(a,c),Yi(s,e,a,c,o);case 7:return Xi$1(s,e,e.pendingProps,o),e.child;case 8:return Xi$1(s,e,e.pendingProps.children,o),e.child;case 12:return Xi$1(s,e,e.pendingProps.children,o),e.child;case 10:e:{if(a=e.type._context,c=e.pendingProps,h=e.memoizedProps,g=c.value,G(Wg,a._currentValue),a._currentValue=g,h!==null)if(He(h.value,g)){if(h.children===c.children&&!Wf.current){e=Zi(s,e,o);break e}}else for(h=e.child,h!==null&&(h.return=e);h!==null;){var b=h.dependencies;if(b!==null){g=h.child;for(var _=b.firstContext;_!==null;){if(_.context===a){if(h.tag===1){_=mh(-1,o&-o),_.tag=2;var j=h.updateQueue;if(j!==null){j=j.shared;var $=j.pending;$===null?_.next=_:(_.next=$.next,$.next=_),j.pending=_}}h.lanes|=o,_=h.alternate,_!==null&&(_.lanes|=o),bh(h.return,o,e),b.lanes|=o;break}_=_.next}}else if(h.tag===10)g=h.type===e.type?null:h.child;else if(h.tag===18){if(g=h.return,g===null)throw Error(p(341));g.lanes|=o,b=g.alternate,b!==null&&(b.lanes|=o),bh(g,o,e),g=h.sibling}else g=h.child;if(g!==null)g.return=h;else for(g=h;g!==null;){if(g===e){g=null;break}if(h=g.sibling,h!==null){h.return=g.return,g=h;break}g=g.return}h=g}Xi$1(s,e,c.children,o),e=e.child}return e;case 9:return c=e.type,a=e.pendingProps.children,ch(e,o),c=eh(c),a=a(c),e.flags|=1,Xi$1(s,e,a,o),e.child;case 14:return a=e.type,c=Ci(a,e.pendingProps),c=Ci(a.type,c),$i(s,e,a,c,o);case 15:return bj(s,e,e.type,e.pendingProps,o);case 17:return a=e.type,c=e.pendingProps,c=e.elementType===a?c:Ci(a,c),ij(s,e),e.tag=1,Zf(a)?(s=!0,cg(e)):s=!1,ch(e,o),Gi(e,a,c),Ii(e,a,c,o),jj(null,e,a,!0,s,o);case 19:return xj(s,e,o);case 22:return dj(s,e,o)}throw Error(p(156,e.tag))};function Fk(s,e){return ac$1(s,e)}function $k(s,e,o,a){this.tag=s,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(s,e,o,a){return new $k(s,e,o,a)}function aj(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Zk(s){if(typeof s=="function")return aj(s)?1:0;if(s!=null){if(s=s.$$typeof,s===Da)return 11;if(s===Ga)return 14}return 2}function Pg(s,e){var o=s.alternate;return o===null?(o=Bg(s.tag,e,s.key,s.mode),o.elementType=s.elementType,o.type=s.type,o.stateNode=s.stateNode,o.alternate=s,s.alternate=o):(o.pendingProps=e,o.type=s.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=s.flags&14680064,o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,e=s.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},o.sibling=s.sibling,o.index=s.index,o.ref=s.ref,o}function Rg(s,e,o,a,c,h){var g=2;if(a=s,typeof s=="function")aj(s)&&(g=1);else if(typeof s=="string")g=5;else e:switch(s){case ya:return Tg(o.children,c,h,e);case za:g=8,c|=8;break;case Aa:return s=Bg(12,o,e,c|2),s.elementType=Aa,s.lanes=h,s;case Ea:return s=Bg(13,o,e,c),s.elementType=Ea,s.lanes=h,s;case Fa:return s=Bg(19,o,e,c),s.elementType=Fa,s.lanes=h,s;case Ia:return pj(o,c,h,e);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Ba:g=10;break e;case Ca:g=9;break e;case Da:g=11;break e;case Ga:g=14;break e;case Ha:g=16,a=null;break e}throw Error(p(130,s==null?s:typeof s,""))}return e=Bg(g,o,e,c),e.elementType=s,e.type=a,e.lanes=h,e}function Tg(s,e,o,a){return s=Bg(7,s,a,e),s.lanes=o,s}function pj(s,e,o,a){return s=Bg(22,s,a,e),s.elementType=Ia,s.lanes=o,s.stateNode={isHidden:!1},s}function Qg(s,e,o){return s=Bg(6,s,null,e),s.lanes=o,s}function Sg(s,e,o){return e=Bg(4,s.children!==null?s.children:[],s.key,e),e.lanes=o,e.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},e}function al(s,e,o,a,c){this.tag=e,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=a,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function bl(s,e,o,a,c,h,g,b,_){return s=new al(s,e,o,b,_),e===1?(e=1,h===!0&&(e|=8)):e=0,h=Bg(3,null,null,e),s.current=h,h.stateNode=s,h.memoizedState={element:a,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(h),s}function cl(s,e,o){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:a==null?null:""+a,children:s,containerInfo:e,implementation:o}}function dl(s){if(!s)return Vf;s=s._reactInternals;e:{if(Vb(s)!==s||s.tag!==1)throw Error(p(170));var e=s;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zf(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(p(171))}if(s.tag===1){var o=s.type;if(Zf(o))return bg(s,o,e)}return e}function el$1(s,e,o,a,c,h,g,b,_){return s=bl(o,a,!0,s,c,h,g,b,_),s.context=dl(null),o=s.current,a=R(),c=yi(o),h=mh(a,c),h.callback=e??null,nh(o,h,c),s.current.lanes=c,Ac(s,c,a),Dk(s,a),s}function fl(s,e,o,a){var c=e.current,h=R(),g=yi(c);return o=dl(o),e.context===null?e.context=o:e.pendingContext=o,e=mh(h,g),e.payload={element:s},a=a===void 0?null:a,a!==null&&(e.callback=a),s=nh(c,e,g),s!==null&&(gi(s,c,g,h),oh(s,c,g)),g}function gl$1(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function hl(s,e){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var o=s.retryLane;s.retryLane=o!==0&&o<e?o:e}}function il(s,e){hl(s,e),(s=s.alternate)&&hl(s,e)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(s){console.error(s)};function ll$1(s){this._internalRoot=s}ml.prototype.render=ll$1.prototype.render=function(s){var e=this._internalRoot;if(e===null)throw Error(p(409));fl(s,e,null,null)};ml.prototype.unmount=ll$1.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var e=s.containerInfo;Rk(function(){fl(null,s,null,null)}),e[uf]=null}};function ml(s){this._internalRoot=s}ml.prototype.unstable_scheduleHydration=function(s){if(s){var e=Hc();s={blockedOn:null,target:s,priority:e};for(var o=0;o<Qc.length&&e!==0&&e<Qc[o].priority;o++);Qc.splice(o,0,s),o===0&&Vc(s)}};function nl(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function ol(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(s,e,o,a,c){if(c){if(typeof a=="function"){var h=a;a=function(){var j=gl$1(g);h.call(j)}}var g=el$1(e,a,s,0,null,!1,!1,"",pl);return s._reactRootContainer=g,s[uf]=g.current,sf(s.nodeType===8?s.parentNode:s),Rk(),g}for(;c=s.lastChild;)s.removeChild(c);if(typeof a=="function"){var b=a;a=function(){var j=gl$1(_);b.call(j)}}var _=bl(s,0,!1,null,null,!1,!1,"",pl);return s._reactRootContainer=_,s[uf]=_.current,sf(s.nodeType===8?s.parentNode:s),Rk(function(){fl(e,_,o,a)}),_}function rl(s,e,o,a,c){var h=o._reactRootContainer;if(h){var g=h;if(typeof c=="function"){var b=c;c=function(){var _=gl$1(g);b.call(_)}}fl(e,g,s,c)}else g=ql(o,e,s,c,a);return gl$1(g)}Ec=function(s){switch(s.tag){case 3:var e=s.stateNode;if(e.current.memoizedState.isDehydrated){var o=tc(e.pendingLanes);o!==0&&(Cc(e,o|1),Dk(e,B()),!(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var a=ih(s,1);if(a!==null){var c=R();gi(a,s,1,c)}}),il(s,1)}};Fc=function(s){if(s.tag===13){var e=ih(s,134217728);if(e!==null){var o=R();gi(e,s,134217728,o)}il(s,134217728)}};Gc=function(s){if(s.tag===13){var e=yi(s),o=ih(s,e);if(o!==null){var a=R();gi(o,s,e,a)}il(s,e)}};Hc=function(){return C};Ic=function(s,e){var o=C;try{return C=s,e()}finally{C=o}};yb=function(s,e,o){switch(e){case"input":if(bb(s,o),e=o.name,o.type==="radio"&&e!=null){for(o=s;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<o.length;e++){var a=o[e];if(a!==s&&a.form===s.form){var c=Db(a);if(!c)throw Error(p(90));Wa(a),bb(a,c)}}}break;case"textarea":ib(s,o);break;case"select":e=o.value,e!=null&&fb(s,!!o.multiple,e,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Zb(s),s===null?null:s.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(s,e){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(e))throw Error(p(200));return cl(s,e,null,o)};reactDom_production_min.createRoot=function(s,e){if(!nl(s))throw Error(p(299));var o=!1,a="",c=kl;return e!=null&&(e.unstable_strictMode===!0&&(o=!0),e.identifierPrefix!==void 0&&(a=e.identifierPrefix),e.onRecoverableError!==void 0&&(c=e.onRecoverableError)),e=bl(s,1,!1,null,null,o,!1,a,c),s[uf]=e.current,sf(s.nodeType===8?s.parentNode:s),new ll$1(e)};reactDom_production_min.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var e=s._reactInternals;if(e===void 0)throw typeof s.render=="function"?Error(p(188)):(s=Object.keys(s).join(","),Error(p(268,s)));return s=Zb(e),s=s===null?null:s.stateNode,s};reactDom_production_min.flushSync=function(s){return Rk(s)};reactDom_production_min.hydrate=function(s,e,o){if(!ol(e))throw Error(p(200));return rl(null,s,e,!0,o)};reactDom_production_min.hydrateRoot=function(s,e,o){if(!nl(s))throw Error(p(405));var a=o!=null&&o.hydratedSources||null,c=!1,h="",g=kl;if(o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onRecoverableError!==void 0&&(g=o.onRecoverableError)),e=el$1(e,null,s,1,o??null,c,!1,h,g),s[uf]=e.current,sf(s),a)for(s=0;s<a.length;s++)o=a[s],c=o._getVersion,c=c(o._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[o,c]:e.mutableSourceEagerHydrationData.push(o,c);return new ml(e)};reactDom_production_min.render=function(s,e,o){if(!ol(e))throw Error(p(200));return rl(null,s,e,!1,o)};reactDom_production_min.unmountComponentAtNode=function(s){if(!ol(s))throw Error(p(40));return s._reactRootContainer?(Rk(function(){rl(null,null,s,!1,function(){s._reactRootContainer=null,s[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(s,e,o,a){if(!ol(o))throw Error(p(200));if(s==null||s._reactInternals===void 0)throw Error(p(38));return rl(s,e,o,!1,a)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(s){console.error(s)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,m=reactDomExports;client.createRoot=m.createRoot,client.hydrateRoot=m.hydrateRoot;const MotionConfigContext=reactExports.createContext({transformPagePoint:s=>s,isStatic:!1,reducedMotion:"never"}),MotionContext=reactExports.createContext({}),PresenceContext=reactExports.createContext(null),isBrowser$1=typeof document<"u",useIsomorphicLayoutEffect=isBrowser$1?reactExports.useLayoutEffect:reactExports.useEffect,LazyContext=reactExports.createContext({strict:!1}),camelToDash=s=>s.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId);function useVisualElement(s,e,o,a){const{visualElement:c}=reactExports.useContext(MotionContext),h=reactExports.useContext(LazyContext),g=reactExports.useContext(PresenceContext),b=reactExports.useContext(MotionConfigContext).reducedMotion,_=reactExports.useRef();a=a||h.renderer,!_.current&&a&&(_.current=a(s,{visualState:e,parent:c,props:o,presenceContext:g,blockInitialAnimation:g?g.initial===!1:!1,reducedMotionConfig:b}));const j=_.current;reactExports.useInsertionEffect(()=>{j&&j.update(o,g)});const $=reactExports.useRef(!!(o[optimizedAppearDataAttribute]&&!window.HandoffComplete));return useIsomorphicLayoutEffect(()=>{j&&(j.render(),$.current&&j.animationState&&j.animationState.animateChanges())}),reactExports.useEffect(()=>{j&&(j.updateFeatures(),!$.current&&j.animationState&&j.animationState.animateChanges(),$.current&&($.current=!1,window.HandoffComplete=!0))}),j}function isRefObject(s){return s&&typeof s=="object"&&Object.prototype.hasOwnProperty.call(s,"current")}function useMotionRef(s,e,o){return reactExports.useCallback(a=>{a&&s.mount&&s.mount(a),e&&(a?e.mount(a):e.unmount()),o&&(typeof o=="function"?o(a):isRefObject(o)&&(o.current=a))},[e])}function isVariantLabel(s){return typeof s=="string"||Array.isArray(s)}function isAnimationControls(s){return s!==null&&typeof s=="object"&&typeof s.start=="function"}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder];function isControllingVariants(s){return isAnimationControls(s.animate)||variantProps.some(e=>isVariantLabel(s[e]))}function isVariantNode(s){return!!(isControllingVariants(s)||s.variants)}function getCurrentTreeVariants(s,e){if(isControllingVariants(s)){const{initial:o,animate:a}=s;return{initial:o===!1||isVariantLabel(o)?o:void 0,animate:isVariantLabel(a)?a:void 0}}return s.inherit!==!1?e:{}}function useCreateMotionContext(s){const{initial:e,animate:o}=getCurrentTreeVariants(s,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:e,animate:o}),[variantLabelsAsDependency(e),variantLabelsAsDependency(o)])}function variantLabelsAsDependency(s){return Array.isArray(s)?s.join(" "):s}const featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},featureDefinitions={};for(const s in featureProps)featureDefinitions[s]={isEnabled:e=>featureProps[s].some(o=>!!e[o])};function loadFeatures(s){for(const e in s)featureDefinitions[e]={...featureDefinitions[e],...s[e]}}const LayoutGroupContext=reactExports.createContext({}),SwitchLayoutGroupContext=reactExports.createContext({}),motionComponentSymbol=Symbol.for("motionComponentSymbol");function createMotionComponent({preloadedFeatures:s,createVisualElement:e,useRender:o,useVisualState:a,Component:c}){s&&loadFeatures(s);function h(b,_){let j;const $={...reactExports.useContext(MotionConfigContext),...b,layoutId:useLayoutId(b)},{isStatic:_e}=$,tt=useCreateMotionContext(b),et=a(b,_e);if(!_e&&isBrowser$1){tt.visualElement=useVisualElement(c,et,$,e);const ut=reactExports.useContext(SwitchLayoutGroupContext),ht=reactExports.useContext(LazyContext).strict;tt.visualElement&&(j=tt.visualElement.loadFeatures($,ht,s,ut))}return reactExports.createElement(MotionContext.Provider,{value:tt},j&&tt.visualElement?reactExports.createElement(j,{visualElement:tt.visualElement,...$}):null,o(c,b,useMotionRef(et,tt.visualElement,_),et,_e,tt.visualElement))}const g=reactExports.forwardRef(h);return g[motionComponentSymbol]=c,g}function useLayoutId({layoutId:s}){const e=reactExports.useContext(LayoutGroupContext).id;return e&&s!==void 0?e+"-"+s:s}function createMotionProxy(s){function e(a,c={}){return createMotionComponent(s(a,c))}if(typeof Proxy>"u")return e;const o=new Map;return new Proxy(e,{get:(a,c)=>(o.has(c)||o.set(c,e(c)),o.get(c))})}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(s){return typeof s!="string"||s.includes("-")?!1:!!(lowercaseSVGElements.indexOf(s)>-1||/[A-Z]/.test(s))}const scaleCorrectors={};function addScaleCorrector(s){Object.assign(scaleCorrectors,s)}const transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder);function isForcedMotionValue(s,{layout:e,layoutId:o}){return transformProps.has(s)||s.startsWith("origin")||(e||o!==void 0)&&(!!scaleCorrectors[s]||s==="opacity")}const isMotionValue=s=>!!(s&&s.getVelocity),translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(s,{enableHardwareAcceleration:e=!0,allowTransformNone:o=!0},a,c){let h="";for(let g=0;g<numTransforms;g++){const b=transformPropOrder[g];if(s[b]!==void 0){const _=translateAlias[b]||b;h+=`${_}(${s[b]}) `}}return e&&!s.z&&(h+="translateZ(0)"),h=h.trim(),c?h=c(s,a?"":h):o&&a&&(h="none"),h}const checkStringStartsWith=s=>e=>typeof e=="string"&&e.startsWith(s),isCSSVariableName=checkStringStartsWith("--"),isCSSVariableToken=checkStringStartsWith("var(--"),cssVariableRegex=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,getValueAsType=(s,e)=>e&&typeof s=="number"?e.transform(s):s,clamp=(s,e,o)=>Math.min(Math.max(o,s),e),number={test:s=>typeof s=="number",parse:parseFloat,transform:s=>s},alpha$1={...number,transform:s=>clamp(0,1,s)},scale={...number,default:1},sanitize=s=>Math.round(s*1e5)/1e5,floatRegex=/(-)?([\d]*\.?[\d])+/g,colorRegex=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,singleColorRegex=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function isString$1(s){return typeof s=="string"}const createUnitType=s=>({test:e=>isString$1(e)&&e.endsWith(s)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${s}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:s=>percent.parse(s)/100,transform:s=>percent.transform(s*100)},int$1={...number,transform:Math.round},numberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,size:px,top:px,right:px,bottom:px,left:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha$1,originX:progressPercentage,originY:progressPercentage,originZ:px,zIndex:int$1,fillOpacity:alpha$1,strokeOpacity:alpha$1,numOctaves:int$1};function buildHTMLStyles(s,e,o,a){const{style:c,vars:h,transform:g,transformOrigin:b}=s;let _=!1,j=!1,$=!0;for(const _e in e){const tt=e[_e];if(isCSSVariableName(_e)){h[_e]=tt;continue}const et=numberValueTypes[_e],ut=getValueAsType(tt,et);if(transformProps.has(_e)){if(_=!0,g[_e]=ut,!$)continue;tt!==(et.default||0)&&($=!1)}else _e.startsWith("origin")?(j=!0,b[_e]=ut):c[_e]=ut}if(e.transform||(_||a?c.transform=buildTransform(s.transform,o,$,a):c.transform&&(c.transform="none")),j){const{originX:_e="50%",originY:tt="50%",originZ:et=0}=b;c.transformOrigin=`${_e} ${tt} ${et}`}}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function copyRawValuesOnly(s,e,o){for(const a in e)!isMotionValue(e[a])&&!isForcedMotionValue(a,o)&&(s[a]=e[a])}function useInitialMotionValues({transformTemplate:s},e,o){return reactExports.useMemo(()=>{const a=createHtmlRenderState();return buildHTMLStyles(a,e,{enableHardwareAcceleration:!o},s),Object.assign({},a.vars,a.style)},[e])}function useStyle(s,e,o){const a=s.style||{},c={};return copyRawValuesOnly(c,a,s),Object.assign(c,useInitialMotionValues(s,e,o)),s.transformValues?s.transformValues(c):c}function useHTMLProps(s,e,o){const a={},c=useStyle(s,e,o);return s.drag&&s.dragListener!==!1&&(a.draggable=!1,c.userSelect=c.WebkitUserSelect=c.WebkitTouchCallout="none",c.touchAction=s.drag===!0?"none":`pan-${s.drag==="x"?"y":"x"}`),s.tabIndex===void 0&&(s.onTap||s.onTapStart||s.whileTap)&&(a.tabIndex=0),a.style=c,a}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(s){return s.startsWith("while")||s.startsWith("drag")&&s!=="draggable"||s.startsWith("layout")||s.startsWith("onTap")||s.startsWith("onPan")||s.startsWith("onLayout")||validMotionProps.has(s)}let shouldForward=s=>!isValidMotionProp(s);function loadExternalIsValidProp(s){s&&(shouldForward=e=>e.startsWith("on")?!isValidMotionProp(e):s(e))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(s,e,o){const a={};for(const c in s)c==="values"&&typeof s.values=="object"||(shouldForward(c)||o===!0&&isValidMotionProp(c)||!e&&!isValidMotionProp(c)||s.draggable&&c.startsWith("onDrag"))&&(a[c]=s[c]);return a}function calcOrigin$1(s,e,o){return typeof s=="string"?s:px.transform(e+o*s)}function calcSVGTransformOrigin(s,e,o){const a=calcOrigin$1(e,s.x,s.width),c=calcOrigin$1(o,s.y,s.height);return`${a} ${c}`}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(s,e,o=1,a=0,c=!0){s.pathLength=1;const h=c?dashKeys:camelKeys;s[h.offset]=px.transform(-a);const g=px.transform(e),b=px.transform(o);s[h.array]=`${g} ${b}`}function buildSVGAttrs(s,{attrX:e,attrY:o,attrScale:a,originX:c,originY:h,pathLength:g,pathSpacing:b=1,pathOffset:_=0,...j},$,_e,tt){if(buildHTMLStyles(s,j,$,tt),_e){s.style.viewBox&&(s.attrs.viewBox=s.style.viewBox);return}s.attrs=s.style,s.style={};const{attrs:et,style:ut,dimensions:ht}=s;et.transform&&(ht&&(ut.transform=et.transform),delete et.transform),ht&&(c!==void 0||h!==void 0||ut.transform)&&(ut.transformOrigin=calcSVGTransformOrigin(ht,c!==void 0?c:.5,h!==void 0?h:.5)),e!==void 0&&(et.x=e),o!==void 0&&(et.y=o),a!==void 0&&(et.scale=a),g!==void 0&&buildSVGPath(et,g,b,_,!1)}const createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}}),isSVGTag=s=>typeof s=="string"&&s.toLowerCase()==="svg";function useSVGProps(s,e,o,a){const c=reactExports.useMemo(()=>{const h=createSvgRenderState();return buildSVGAttrs(h,e,{enableHardwareAcceleration:!1},isSVGTag(a),s.transformTemplate),{...h.attrs,style:{...h.style}}},[e]);if(s.style){const h={};copyRawValuesOnly(h,s.style,s),c.style={...h,...c.style}}return c}function createUseRender(s=!1){return(o,a,c,{latestValues:h},g)=>{const _=(isSVGComponent(o)?useSVGProps:useHTMLProps)(a,h,g,o),$={...filterProps(a,typeof o=="string",s),..._,ref:c},{children:_e}=a,tt=reactExports.useMemo(()=>isMotionValue(_e)?_e.get():_e,[_e]);return reactExports.createElement(o,{...$,children:tt})}}function renderHTML(s,{style:e,vars:o},a,c){Object.assign(s.style,e,c&&c.getProjectionStyles(a));for(const h in o)s.style.setProperty(h,o[h])}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function renderSVG(s,e,o,a){renderHTML(s,e,void 0,a);for(const c in e.attrs)s.setAttribute(camelCaseAttributes.has(c)?c:camelToDash(c),e.attrs[c])}function scrapeMotionValuesFromProps$1(s,e){const{style:o}=s,a={};for(const c in o)(isMotionValue(o[c])||e.style&&isMotionValue(e.style[c])||isForcedMotionValue(c,s))&&(a[c]=o[c]);return a}function scrapeMotionValuesFromProps(s,e){const o=scrapeMotionValuesFromProps$1(s,e);for(const a in s)if(isMotionValue(s[a])||isMotionValue(e[a])){const c=transformPropOrder.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;o[c]=s[a]}return o}function resolveVariantFromProps(s,e,o,a={},c={}){return typeof e=="function"&&(e=e(o!==void 0?o:s.custom,a,c)),typeof e=="string"&&(e=s.variants&&s.variants[e]),typeof e=="function"&&(e=e(o!==void 0?o:s.custom,a,c)),e}function useConstant(s){const e=reactExports.useRef(null);return e.current===null&&(e.current=s()),e.current}const isKeyframesTarget=s=>Array.isArray(s),isCustomValue=s=>!!(s&&typeof s=="object"&&s.mix&&s.toValue),resolveFinalValueInKeyframes=s=>isKeyframesTarget(s)?s[s.length-1]||0:s;function resolveMotionValue(s){const e=isMotionValue(s)?s.get():s;return isCustomValue(e)?e.toValue():e}function makeState({scrapeMotionValuesFromProps:s,createRenderState:e,onMount:o},a,c,h){const g={latestValues:makeLatestValues(a,c,h,s),renderState:e()};return o&&(g.mount=b=>o(a,b,g)),g}const makeUseVisualState=s=>(e,o)=>{const a=reactExports.useContext(MotionContext),c=reactExports.useContext(PresenceContext),h=()=>makeState(s,e,a,c);return o?h():useConstant(h)};function makeLatestValues(s,e,o,a){const c={},h=a(s,{});for(const tt in h)c[tt]=resolveMotionValue(h[tt]);let{initial:g,animate:b}=s;const _=isControllingVariants(s),j=isVariantNode(s);e&&j&&!_&&s.inherit!==!1&&(g===void 0&&(g=e.initial),b===void 0&&(b=e.animate));let $=o?o.initial===!1:!1;$=$||g===!1;const _e=$?b:g;return _e&&typeof _e!="boolean"&&!isAnimationControls(_e)&&(Array.isArray(_e)?_e:[_e]).forEach(et=>{const ut=resolveVariantFromProps(s,et);if(!ut)return;const{transitionEnd:ht,transition:st,...nt}=ut;for(const rt in nt){let at=nt[rt];if(Array.isArray(at)){const dt=$?at.length-1:0;at=at[dt]}at!==null&&(c[rt]=at)}for(const rt in ht)c[rt]=ht[rt]}),c}const noop$1=s=>s;let Queue$1=class{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const o=this.order.indexOf(e);o!==-1&&(this.order.splice(o,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}};function createRenderStep(s){let e=new Queue$1,o=new Queue$1,a=0,c=!1,h=!1;const g=new WeakSet,b={schedule:(_,j=!1,$=!1)=>{const _e=$&&c,tt=_e?e:o;return j&&g.add(_),tt.add(_)&&_e&&c&&(a=e.order.length),_},cancel:_=>{o.remove(_),g.delete(_)},process:_=>{if(c){h=!0;return}if(c=!0,[e,o]=[o,e],o.clear(),a=e.order.length,a)for(let j=0;j<a;j++){const $=e.order[j];$(_),g.has($)&&(b.schedule($),s())}c=!1,h&&(h=!1,b.process(_))}};return b}const stepsOrder=["prepare","read","update","preRender","render","postRender"],maxElapsed=40;function createRenderBatcher(s,e){let o=!1,a=!0;const c={delta:0,timestamp:0,isProcessing:!1},h=stepsOrder.reduce((_e,tt)=>(_e[tt]=createRenderStep(()=>o=!0),_e),{}),g=_e=>h[_e].process(c),b=()=>{const _e=performance.now();o=!1,c.delta=a?1e3/60:Math.max(Math.min(_e-c.timestamp,maxElapsed),1),c.timestamp=_e,c.isProcessing=!0,stepsOrder.forEach(g),c.isProcessing=!1,o&&e&&(a=!1,s(b))},_=()=>{o=!0,a=!0,c.isProcessing||s(b)};return{schedule:stepsOrder.reduce((_e,tt)=>{const et=h[tt];return _e[tt]=(ut,ht=!1,st=!1)=>(o||_(),et.schedule(ut,ht,st)),_e},{}),cancel:_e=>stepsOrder.forEach(tt=>h[tt].cancel(_e)),state:c,steps:h}}const{schedule:frame,cancel:cancelFrame,state:frameData,steps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop$1,!0),svgMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState,onMount:(s,e,{renderState:o,latestValues:a})=>{frame.read(()=>{try{o.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{o.dimensions={x:0,y:0,width:0,height:0}}}),frame.render(()=>{buildSVGAttrs(o,a,{enableHardwareAcceleration:!1},isSVGTag(e.tagName),s.transformTemplate),renderSVG(e,o)})}})},htmlMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState})};function createDomMotionConfig(s,{forwardMotionProps:e=!1},o,a){return{...isSVGComponent(s)?svgMotionConfig:htmlMotionConfig,preloadedFeatures:o,useRender:createUseRender(e),createVisualElement:a,Component:s}}function addDomEvent(s,e,o,a={passive:!0}){return s.addEventListener(e,o,a),()=>s.removeEventListener(e,o)}const isPrimaryPointer=s=>s.pointerType==="mouse"?typeof s.button!="number"||s.button<=0:s.isPrimary!==!1;function extractEventInfo(s,e="page"){return{point:{x:s[e+"X"],y:s[e+"Y"]}}}const addPointerInfo=s=>e=>isPrimaryPointer(e)&&s(e,extractEventInfo(e));function addPointerEvent(s,e,o,a){return addDomEvent(s,e,addPointerInfo(o),a)}const combineFunctions=(s,e)=>o=>e(s(o)),pipe=(...s)=>s.reduce(combineFunctions);function createLock(s){let e=null;return()=>{const o=()=>{e=null};return e===null?(e=s,o):!1}}const globalHorizontalLock=createLock("dragHorizontal"),globalVerticalLock=createLock("dragVertical");function getGlobalLock(s){let e=!1;if(s==="y")e=globalVerticalLock();else if(s==="x")e=globalHorizontalLock();else{const o=globalHorizontalLock(),a=globalVerticalLock();o&&a?e=()=>{o(),a()}:(o&&o(),a&&a())}return e}function isDragActive(){const s=getGlobalLock(!0);return s?(s(),!1):!0}class Feature{constructor(e){this.isMounted=!1,this.node=e}update(){}}function addHoverEvent(s,e){const o="pointer"+(e?"enter":"leave"),a="onHover"+(e?"Start":"End"),c=(h,g)=>{if(h.pointerType==="touch"||isDragActive())return;const b=s.getProps();s.animationState&&b.whileHover&&s.animationState.setActive("whileHover",e),b[a]&&frame.update(()=>b[a](h,g))};return addPointerEvent(s.current,o,c,{passive:!s.getProps()[a]})}class HoverGesture extends Feature{mount(){this.unmount=pipe(addHoverEvent(this.node,!0),addHoverEvent(this.node,!1))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const isNodeOrChild=(s,e)=>e?s===e?!0:isNodeOrChild(s,e.parentElement):!1;function fireSyntheticPointerEvent(s,e){if(!e)return;const o=new PointerEvent("pointer"+s);e(o,extractEventInfo(o))}class PressGesture extends Feature{constructor(){super(...arguments),this.removeStartListeners=noop$1,this.removeEndListeners=noop$1,this.removeAccessibleListeners=noop$1,this.startPointerPress=(e,o)=>{if(this.isPressing)return;this.removeEndListeners();const a=this.node.getProps(),h=addPointerEvent(window,"pointerup",(b,_)=>{if(!this.checkPressEnd())return;const{onTap:j,onTapCancel:$,globalTapTarget:_e}=this.node.getProps();frame.update(()=>{!_e&&!isNodeOrChild(this.node.current,b.target)?$&&$(b,_):j&&j(b,_)})},{passive:!(a.onTap||a.onPointerUp)}),g=addPointerEvent(window,"pointercancel",(b,_)=>this.cancelPress(b,_),{passive:!(a.onTapCancel||a.onPointerCancel)});this.removeEndListeners=pipe(h,g),this.startPress(e,o)},this.startAccessiblePress=()=>{const e=h=>{if(h.key!=="Enter"||this.isPressing)return;const g=b=>{b.key!=="Enter"||!this.checkPressEnd()||fireSyntheticPointerEvent("up",(_,j)=>{const{onTap:$}=this.node.getProps();$&&frame.update(()=>$(_,j))})};this.removeEndListeners(),this.removeEndListeners=addDomEvent(this.node.current,"keyup",g),fireSyntheticPointerEvent("down",(b,_)=>{this.startPress(b,_)})},o=addDomEvent(this.node.current,"keydown",e),a=()=>{this.isPressing&&fireSyntheticPointerEvent("cancel",(h,g)=>this.cancelPress(h,g))},c=addDomEvent(this.node.current,"blur",a);this.removeAccessibleListeners=pipe(o,c)}}startPress(e,o){this.isPressing=!0;const{onTapStart:a,whileTap:c}=this.node.getProps();c&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),a&&frame.update(()=>a(e,o))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!isDragActive()}cancelPress(e,o){if(!this.checkPressEnd())return;const{onTapCancel:a}=this.node.getProps();a&&frame.update(()=>a(e,o))}mount(){const e=this.node.getProps(),o=addPointerEvent(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),a=addDomEvent(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=pipe(o,a)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=s=>{const e=observerCallbacks.get(s.target);e&&e(s)},fireAllObserverCallbacks=s=>{s.forEach(fireObserverCallback)};function initIntersectionObserver({root:s,...e}){const o=s||document;observers.has(o)||observers.set(o,{});const a=observers.get(o),c=JSON.stringify(e);return a[c]||(a[c]=new IntersectionObserver(fireAllObserverCallbacks,{root:s,...e})),a[c]}function observeIntersection(s,e,o){const a=initIntersectionObserver(e);return observerCallbacks.set(s,o),a.observe(s),()=>{observerCallbacks.delete(s),a.unobserve(s)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:o,margin:a,amount:c="some",once:h}=e,g={root:o?o.current:void 0,rootMargin:a,threshold:typeof c=="number"?c:thresholdNames[c]},b=_=>{const{isIntersecting:j}=_;if(this.isInView===j||(this.isInView=j,h&&!j&&this.hasEnteredView))return;j&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",j);const{onViewportEnter:$,onViewportLeave:_e}=this.node.getProps(),tt=j?$:_e;tt&&tt(_)};return observeIntersection(this.node.current,g,b)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:o}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(e,o))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:s={}},{viewport:e={}}={}){return o=>s[o]!==e[o]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}};function shallowCompare(s,e){if(!Array.isArray(e))return!1;const o=e.length;if(o!==s.length)return!1;for(let a=0;a<o;a++)if(e[a]!==s[a])return!1;return!0}function getCurrent(s){const e={};return s.values.forEach((o,a)=>e[a]=o.get()),e}function getVelocity$1(s){const e={};return s.values.forEach((o,a)=>e[a]=o.getVelocity()),e}function resolveVariant(s,e,o){const a=s.getProps();return resolveVariantFromProps(a,e,o!==void 0?o:a.custom,getCurrent(s),getVelocity$1(s))}let warning$2=noop$1,invariant=noop$1;const secondsToMilliseconds=s=>s*1e3,millisecondsToSeconds=s=>s/1e3,instantAnimationState={current:!1},isBezierDefinition=s=>Array.isArray(s)&&typeof s[0]=="number";function isWaapiSupportedEasing(s){return!!(!s||typeof s=="string"&&supportedWaapiEasing[s]||isBezierDefinition(s)||Array.isArray(s)&&s.every(isWaapiSupportedEasing))}const cubicBezierAsString=([s,e,o,a])=>`cubic-bezier(${s}, ${e}, ${o}, ${a})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(s){if(s)return isBezierDefinition(s)?cubicBezierAsString(s):Array.isArray(s)?s.map(mapEasingToNativeEasing):supportedWaapiEasing[s]}function animateStyle(s,e,o,{delay:a=0,duration:c,repeat:h=0,repeatType:g="loop",ease:b,times:_}={}){const j={[e]:o};_&&(j.offset=_);const $=mapEasingToNativeEasing(b);return Array.isArray($)&&(j.easing=$),s.animate(j,{delay:a,duration:c,easing:Array.isArray($)?"linear":$,fill:"both",iterations:h+1,direction:g==="reverse"?"alternate":"normal"})}function getFinalKeyframe(s,{repeat:e,repeatType:o="loop"}){const a=e&&o!=="loop"&&e%2===1?0:s.length-1;return s[a]}const calcBezier=(s,e,o)=>(((1-3*o+3*e)*s+(3*o-6*e))*s+3*e)*s,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(s,e,o,a,c){let h,g,b=0;do g=e+(o-e)/2,h=calcBezier(g,a,c)-s,h>0?o=g:e=g;while(Math.abs(h)>subdivisionPrecision&&++b<subdivisionMaxIterations);return g}function cubicBezier(s,e,o,a){if(s===e&&o===a)return noop$1;const c=h=>binarySubdivide(h,0,1,s,o);return h=>h===0||h===1?h:calcBezier(c(h),e,a)}const easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=s=>Array.isArray(s)&&typeof s[0]!="number",mirrorEasing=s=>e=>e<=.5?s(2*e)/2:(2-s(2*(1-e)))/2,reverseEasing=s=>e=>1-s(1-e),circIn=s=>1-Math.sin(Math.acos(s)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=s=>(s*=2)<1?.5*backIn(s):.5*(2-Math.pow(2,-10*(s-1))),easingLookup={linear:noop$1,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},easingDefinitionToFunction=s=>{if(Array.isArray(s)){invariant(s.length===4);const[e,o,a,c]=s;return cubicBezier(e,o,a,c)}else if(typeof s=="string")return easingLookup[s];return s},isColorString=(s,e)=>o=>!!(isString$1(o)&&singleColorRegex.test(o)&&o.startsWith(s)||e&&Object.prototype.hasOwnProperty.call(o,e)),splitColor=(s,e,o)=>a=>{if(!isString$1(a))return a;const[c,h,g,b]=a.match(floatRegex);return{[s]:parseFloat(c),[e]:parseFloat(h),[o]:parseFloat(g),alpha:b!==void 0?parseFloat(b):1}},clampRgbUnit=s=>clamp(0,255,s),rgbUnit={...number,transform:s=>Math.round(clampRgbUnit(s))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:s,green:e,blue:o,alpha:a=1})=>"rgba("+rgbUnit.transform(s)+", "+rgbUnit.transform(e)+", "+rgbUnit.transform(o)+", "+sanitize(alpha$1.transform(a))+")"};function parseHex(s){let e="",o="",a="",c="";return s.length>5?(e=s.substring(1,3),o=s.substring(3,5),a=s.substring(5,7),c=s.substring(7,9)):(e=s.substring(1,2),o=s.substring(2,3),a=s.substring(3,4),c=s.substring(4,5),e+=e,o+=o,a+=a,c+=c),{red:parseInt(e,16),green:parseInt(o,16),blue:parseInt(a,16),alpha:c?parseInt(c,16)/255:1}}const hex={test:isColorString("#"),parse:parseHex,transform:rgba.transform},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:s,saturation:e,lightness:o,alpha:a=1})=>"hsla("+Math.round(s)+", "+percent.transform(sanitize(e))+", "+percent.transform(sanitize(o))+", "+sanitize(alpha$1.transform(a))+")"},color={test:s=>rgba.test(s)||hex.test(s)||hsla.test(s),parse:s=>rgba.test(s)?rgba.parse(s):hsla.test(s)?hsla.parse(s):hex.parse(s),transform:s=>isString$1(s)?s:s.hasOwnProperty("red")?rgba.transform(s):hsla.transform(s)},mix=(s,e,o)=>-o*s+o*e+s;function hueToRgb(s,e,o){return o<0&&(o+=1),o>1&&(o-=1),o<1/6?s+(e-s)*6*o:o<1/2?e:o<2/3?s+(e-s)*(2/3-o)*6:s}function hslaToRgba({hue:s,saturation:e,lightness:o,alpha:a}){s/=360,e/=100,o/=100;let c=0,h=0,g=0;if(!e)c=h=g=o;else{const b=o<.5?o*(1+e):o+e-o*e,_=2*o-b;c=hueToRgb(_,b,s+1/3),h=hueToRgb(_,b,s),g=hueToRgb(_,b,s-1/3)}return{red:Math.round(c*255),green:Math.round(h*255),blue:Math.round(g*255),alpha:a}}const mixLinearColor=(s,e,o)=>{const a=s*s;return Math.sqrt(Math.max(0,o*(e*e-a)+a))},colorTypes=[hex,rgba,hsla],getColorType=s=>colorTypes.find(e=>e.test(s));function asRGBA(s){const e=getColorType(s);let o=e.parse(s);return e===hsla&&(o=hslaToRgba(o)),o}const mixColor=(s,e)=>{const o=asRGBA(s),a=asRGBA(e),c={...o};return h=>(c.red=mixLinearColor(o.red,a.red,h),c.green=mixLinearColor(o.green,a.green,h),c.blue=mixLinearColor(o.blue,a.blue,h),c.alpha=mix(o.alpha,a.alpha,h),rgba.transform(c))};function test(s){var e,o;return isNaN(s)&&isString$1(s)&&(((e=s.match(floatRegex))===null||e===void 0?void 0:e.length)||0)+(((o=s.match(colorRegex))===null||o===void 0?void 0:o.length)||0)>0}const cssVarTokeniser={regex:cssVariableRegex,countKey:"Vars",token:"${v}",parse:noop$1},colorTokeniser={regex:colorRegex,countKey:"Colors",token:"${c}",parse:color.parse},numberTokeniser={regex:floatRegex,countKey:"Numbers",token:"${n}",parse:number.parse};function tokenise(s,{regex:e,countKey:o,token:a,parse:c}){const h=s.tokenised.match(e);h&&(s["num"+o]=h.length,s.tokenised=s.tokenised.replace(e,a),s.values.push(...h.map(c)))}function analyseComplexValue(s){const e=s.toString(),o={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return o.value.includes("var(--")&&tokenise(o,cssVarTokeniser),tokenise(o,colorTokeniser),tokenise(o,numberTokeniser),o}function parseComplexValue(s){return analyseComplexValue(s).values}function createTransformer(s){const{values:e,numColors:o,numVars:a,tokenised:c}=analyseComplexValue(s),h=e.length;return g=>{let b=c;for(let _=0;_<h;_++)_<a?b=b.replace(cssVarTokeniser.token,g[_]):_<a+o?b=b.replace(colorTokeniser.token,color.transform(g[_])):b=b.replace(numberTokeniser.token,sanitize(g[_]));return b}}const convertNumbersToZero=s=>typeof s=="number"?0:s;function getAnimatableNone$1(s){const e=parseComplexValue(s);return createTransformer(s)(e.map(convertNumbersToZero))}const complex={test,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1},mixImmediate=(s,e)=>o=>`${o>0?e:s}`;function getMixer(s,e){return typeof s=="number"?o=>mix(s,e,o):color.test(s)?mixColor(s,e):s.startsWith("var(")?mixImmediate(s,e):mixComplex(s,e)}const mixArray=(s,e)=>{const o=[...s],a=o.length,c=s.map((h,g)=>getMixer(h,e[g]));return h=>{for(let g=0;g<a;g++)o[g]=c[g](h);return o}},mixObject=(s,e)=>{const o={...s,...e},a={};for(const c in o)s[c]!==void 0&&e[c]!==void 0&&(a[c]=getMixer(s[c],e[c]));return c=>{for(const h in a)o[h]=a[h](c);return o}},mixComplex=(s,e)=>{const o=complex.createTransformer(e),a=analyseComplexValue(s),c=analyseComplexValue(e);return a.numVars===c.numVars&&a.numColors===c.numColors&&a.numNumbers>=c.numNumbers?pipe(mixArray(a.values,c.values),o):mixImmediate(s,e)},progress=(s,e,o)=>{const a=e-s;return a===0?1:(o-s)/a},mixNumber=(s,e)=>o=>mix(s,e,o);function detectMixerFactory(s){return typeof s=="number"?mixNumber:typeof s=="string"?color.test(s)?mixColor:mixComplex:Array.isArray(s)?mixArray:typeof s=="object"?mixObject:mixNumber}function createMixers(s,e,o){const a=[],c=o||detectMixerFactory(s[0]),h=s.length-1;for(let g=0;g<h;g++){let b=c(s[g],s[g+1]);if(e){const _=Array.isArray(e)?e[g]||noop$1:e;b=pipe(_,b)}a.push(b)}return a}function interpolate(s,e,{clamp:o=!0,ease:a,mixer:c}={}){const h=s.length;if(invariant(h===e.length),h===1)return()=>e[0];s[0]>s[h-1]&&(s=[...s].reverse(),e=[...e].reverse());const g=createMixers(e,a,c),b=g.length,_=j=>{let $=0;if(b>1)for(;$<s.length-2&&!(j<s[$+1]);$++);const _e=progress(s[$],s[$+1],j);return g[$](_e)};return o?j=>_(clamp(s[0],s[h-1],j)):_}function fillOffset(s,e){const o=s[s.length-1];for(let a=1;a<=e;a++){const c=progress(0,e,a);s.push(mix(o,1,c))}}function defaultOffset(s){const e=[0];return fillOffset(e,s.length-1),e}function convertOffsetToTimes(s,e){return s.map(o=>o*e)}function defaultEasing(s,e){return s.map(()=>e||easeInOut).splice(0,s.length-1)}function keyframes({duration:s=300,keyframes:e,times:o,ease:a="easeInOut"}){const c=isEasingArray(a)?a.map(easingDefinitionToFunction):easingDefinitionToFunction(a),h={done:!1,value:e[0]},g=convertOffsetToTimes(o&&o.length===e.length?o:defaultOffset(e),s),b=interpolate(g,e,{ease:Array.isArray(c)?c:defaultEasing(e,c)});return{calculatedDuration:s,next:_=>(h.value=b(_),h.done=_>=s,h)}}function velocityPerSecond(s,e){return e?s*(1e3/e):0}const velocitySampleDuration=5;function calcGeneratorVelocity(s,e,o){const a=Math.max(e-velocitySampleDuration,0);return velocityPerSecond(o-s(a),e-a)}const safeMin=.001,minDuration=.01,maxDuration$1=10,minDamping=.05,maxDamping=1;function findSpring({duration:s=800,bounce:e=.25,velocity:o=0,mass:a=1}){let c,h;warning$2(s<=secondsToMilliseconds(maxDuration$1));let g=1-e;g=clamp(minDamping,maxDamping,g),s=clamp(minDuration,maxDuration$1,millisecondsToSeconds(s)),g<1?(c=j=>{const $=j*g,_e=$*s,tt=$-o,et=calcAngularFreq(j,g),ut=Math.exp(-_e);return safeMin-tt/et*ut},h=j=>{const _e=j*g*s,tt=_e*o+o,et=Math.pow(g,2)*Math.pow(j,2)*s,ut=Math.exp(-_e),ht=calcAngularFreq(Math.pow(j,2),g);return(-c(j)+safeMin>0?-1:1)*((tt-et)*ut)/ht}):(c=j=>{const $=Math.exp(-j*s),_e=(j-o)*s+1;return-safeMin+$*_e},h=j=>{const $=Math.exp(-j*s),_e=(o-j)*(s*s);return $*_e});const b=5/s,_=approximateRoot(c,h,b);if(s=secondsToMilliseconds(s),isNaN(_))return{stiffness:100,damping:10,duration:s};{const j=Math.pow(_,2)*a;return{stiffness:j,damping:g*2*Math.sqrt(a*j),duration:s}}}const rootIterations=12;function approximateRoot(s,e,o){let a=o;for(let c=1;c<rootIterations;c++)a=a-s(a)/e(a);return a}function calcAngularFreq(s,e){return s*Math.sqrt(1-e*e)}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(s,e){return e.some(o=>s[o]!==void 0)}function getSpringOptions(s){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...s};if(!isSpringType(s,physicsKeys)&&isSpringType(s,durationKeys)){const o=findSpring(s);e={...e,...o,mass:1},e.isResolvedFromDuration=!0}return e}function spring({keyframes:s,restDelta:e,restSpeed:o,...a}){const c=s[0],h=s[s.length-1],g={done:!1,value:c},{stiffness:b,damping:_,mass:j,duration:$,velocity:_e,isResolvedFromDuration:tt}=getSpringOptions({...a,velocity:-millisecondsToSeconds(a.velocity||0)}),et=_e||0,ut=_/(2*Math.sqrt(b*j)),ht=h-c,st=millisecondsToSeconds(Math.sqrt(b/j)),nt=Math.abs(ht)<5;o||(o=nt?.01:2),e||(e=nt?.005:.5);let rt;if(ut<1){const at=calcAngularFreq(st,ut);rt=dt=>{const ot=Math.exp(-ut*st*dt);return h-ot*((et+ut*st*ht)/at*Math.sin(at*dt)+ht*Math.cos(at*dt))}}else if(ut===1)rt=at=>h-Math.exp(-st*at)*(ht+(et+st*ht)*at);else{const at=st*Math.sqrt(ut*ut-1);rt=dt=>{const ot=Math.exp(-ut*st*dt),ct=Math.min(at*dt,300);return h-ot*((et+ut*st*ht)*Math.sinh(ct)+at*ht*Math.cosh(ct))/at}}return{calculatedDuration:tt&&$||null,next:at=>{const dt=rt(at);if(tt)g.done=at>=$;else{let ot=et;at!==0&&(ut<1?ot=calcGeneratorVelocity(rt,at,dt):ot=0);const ct=Math.abs(ot)<=o,vt=Math.abs(h-dt)<=e;g.done=ct&&vt}return g.value=g.done?h:dt,g}}}function inertia({keyframes:s,velocity:e=0,power:o=.8,timeConstant:a=325,bounceDamping:c=10,bounceStiffness:h=500,modifyTarget:g,min:b,max:_,restDelta:j=.5,restSpeed:$}){const _e=s[0],tt={done:!1,value:_e},et=mt=>b!==void 0&&mt<b||_!==void 0&&mt>_,ut=mt=>b===void 0?_:_===void 0||Math.abs(b-mt)<Math.abs(_-mt)?b:_;let ht=o*e;const st=_e+ht,nt=g===void 0?st:g(st);nt!==st&&(ht=nt-_e);const rt=mt=>-ht*Math.exp(-mt/a),at=mt=>nt+rt(mt),dt=mt=>{const pt=rt(mt),Et=at(mt);tt.done=Math.abs(pt)<=j,tt.value=tt.done?nt:Et};let ot,ct;const vt=mt=>{et(tt.value)&&(ot=mt,ct=spring({keyframes:[tt.value,ut(tt.value)],velocity:calcGeneratorVelocity(at,mt,tt.value),damping:c,stiffness:h,restDelta:j,restSpeed:$}))};return vt(0),{calculatedDuration:null,next:mt=>{let pt=!1;return!ct&&ot===void 0&&(pt=!0,dt(mt),vt(mt)),ot!==void 0&&mt>ot?ct.next(mt-ot):(!pt&&dt(mt),tt)}}}const frameloopDriver=s=>{const e=({timestamp:o})=>s(o);return{start:()=>frame.update(e,!0),stop:()=>cancelFrame(e),now:()=>frameData.isProcessing?frameData.timestamp:performance.now()}},maxGeneratorDuration=2e4;function calcGeneratorDuration(s){let e=0;const o=50;let a=s.next(e);for(;!a.done&&e<maxGeneratorDuration;)e+=o,a=s.next(e);return e>=maxGeneratorDuration?1/0:e}const types={decay:inertia,inertia,tween:keyframes,keyframes,spring};function animateValue({autoplay:s=!0,delay:e=0,driver:o=frameloopDriver,keyframes:a,type:c="keyframes",repeat:h=0,repeatDelay:g=0,repeatType:b="loop",onPlay:_,onStop:j,onComplete:$,onUpdate:_e,...tt}){let et=1,ut=!1,ht,st;const nt=()=>{st=new Promise(_n=>{ht=_n})};nt();let rt;const at=types[c]||keyframes;let dt;at!==keyframes&&typeof a[0]!="number"&&(dt=interpolate([0,100],a,{clamp:!1}),a=[0,100]);const ot=at({...tt,keyframes:a});let ct;b==="mirror"&&(ct=at({...tt,keyframes:[...a].reverse(),velocity:-(tt.velocity||0)}));let vt="idle",mt=null,pt=null,Et=null;ot.calculatedDuration===null&&h&&(ot.calculatedDuration=calcGeneratorDuration(ot));const{calculatedDuration:Ct}=ot;let Nt=1/0,Ut=1/0;Ct!==null&&(Nt=Ct+g,Ut=Nt*(h+1)-g);let Tt=0;const qt=_n=>{if(pt===null)return;et>0&&(pt=Math.min(pt,_n)),et<0&&(pt=Math.min(_n-Ut/et,pt)),mt!==null?Tt=mt:Tt=Math.round(_n-pt)*et;const xn=Tt-e*(et>=0?1:-1),Mt=et>=0?xn<0:xn>Ut;Tt=Math.max(xn,0),vt==="finished"&&mt===null&&(Tt=Ut);let xt=Tt,At=ot;if(h){const Ft=Math.min(Tt,Ut)/Nt;let $t=Math.floor(Ft),Wt=Ft%1;!Wt&&Ft>=1&&(Wt=1),Wt===1&&$t--,$t=Math.min($t,h+1),!!($t%2)&&(b==="reverse"?(Wt=1-Wt,g&&(Wt-=g/Nt)):b==="mirror"&&(At=ct)),xt=clamp(0,1,Wt)*Nt}const wt=Mt?{done:!1,value:a[0]}:At.next(xt);dt&&(wt.value=dt(wt.value));let{done:kt}=wt;!Mt&&Ct!==null&&(kt=et>=0?Tt>=Ut:Tt<=0);const Dt=mt===null&&(vt==="finished"||vt==="running"&&kt);return _e&&_e(wt.value),Dt&&It(),wt},Vt=()=>{rt&&rt.stop(),rt=void 0},Zt=()=>{vt="idle",Vt(),ht(),nt(),pt=Et=null},It=()=>{vt="finished",$&&$(),Vt(),ht()},Jt=()=>{if(ut)return;rt||(rt=o(qt));const _n=rt.now();_&&_(),mt!==null?pt=_n-mt:(!pt||vt==="finished")&&(pt=_n),vt==="finished"&&nt(),Et=pt,mt=null,vt="running",rt.start()};s&&Jt();const fn={then(_n,xn){return st.then(_n,xn)},get time(){return millisecondsToSeconds(Tt)},set time(_n){_n=secondsToMilliseconds(_n),Tt=_n,mt!==null||!rt||et===0?mt=_n:pt=rt.now()-_n/et},get duration(){const _n=ot.calculatedDuration===null?calcGeneratorDuration(ot):ot.calculatedDuration;return millisecondsToSeconds(_n)},get speed(){return et},set speed(_n){_n===et||!rt||(et=_n,fn.time=millisecondsToSeconds(Tt))},get state(){return vt},play:Jt,pause:()=>{vt="paused",mt=Tt},stop:()=>{ut=!0,vt!=="idle"&&(vt="idle",j&&j(),Zt())},cancel:()=>{Et!==null&&qt(Et),Zt()},complete:()=>{vt="finished"},sample:_n=>(pt=0,qt(_n))};return fn}function memo(s){let e;return()=>(e===void 0&&(e=s()),e)}const supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),acceleratedValues=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),sampleDelta=10,maxDuration=2e4,requiresPregeneratedKeyframes=(s,e)=>e.type==="spring"||s==="backgroundColor"||!isWaapiSupportedEasing(e.ease);function createAcceleratedAnimation(s,e,{onUpdate:o,onComplete:a,...c}){if(!(supportsWaapi()&&acceleratedValues.has(e)&&!c.repeatDelay&&c.repeatType!=="mirror"&&c.damping!==0&&c.type!=="inertia"))return!1;let g=!1,b,_,j=!1;const $=()=>{_=new Promise(at=>{b=at})};$();let{keyframes:_e,duration:tt=300,ease:et,times:ut}=c;if(requiresPregeneratedKeyframes(e,c)){const at=animateValue({...c,repeat:0,delay:0});let dt={done:!1,value:_e[0]};const ot=[];let ct=0;for(;!dt.done&&ct<maxDuration;)dt=at.sample(ct),ot.push(dt.value),ct+=sampleDelta;ut=void 0,_e=ot,tt=ct-sampleDelta,et="linear"}const ht=animateStyle(s.owner.current,e,_e,{...c,duration:tt,ease:et,times:ut}),st=()=>{j=!1,ht.cancel()},nt=()=>{j=!0,frame.update(st),b(),$()};return ht.onfinish=()=>{j||(s.set(getFinalKeyframe(_e,c)),a&&a(),nt())},{then(at,dt){return _.then(at,dt)},attachTimeline(at){return ht.timeline=at,ht.onfinish=null,noop$1},get time(){return millisecondsToSeconds(ht.currentTime||0)},set time(at){ht.currentTime=secondsToMilliseconds(at)},get speed(){return ht.playbackRate},set speed(at){ht.playbackRate=at},get duration(){return millisecondsToSeconds(tt)},play:()=>{g||(ht.play(),cancelFrame(st))},pause:()=>ht.pause(),stop:()=>{if(g=!0,ht.playState==="idle")return;const{currentTime:at}=ht;if(at){const dt=animateValue({...c,autoplay:!1});s.setWithVelocity(dt.sample(at-sampleDelta).value,dt.sample(at).value,sampleDelta)}nt()},complete:()=>{j||ht.finish()},cancel:nt}}function createInstantAnimation({keyframes:s,delay:e,onUpdate:o,onComplete:a}){const c=()=>(o&&o(s[s.length-1]),a&&a(),{time:0,speed:1,duration:0,play:noop$1,pause:noop$1,stop:noop$1,then:h=>(h(),Promise.resolve()),cancel:noop$1,complete:noop$1});return e?animateValue({keyframes:[0,1],duration:0,delay:e,onComplete:c}):c()}const underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=s=>({type:"spring",stiffness:550,damping:s===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(s,{keyframes:e})=>e.length>2?keyframesTransition:transformProps.has(s)?s.startsWith("scale")?criticallyDampedSpring(e[1]):underDampedSpring:ease,isAnimatable=(s,e)=>s==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(complex.test(e)||e==="0")&&!e.startsWith("url(")),maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(s){const[e,o]=s.slice(0,-1).split("(");if(e==="drop-shadow")return s;const[a]=o.match(floatRegex)||[];if(!a)return s;const c=o.replace(a,"");let h=maxDefaults.has(e)?1:0;return a!==o&&(h*=100),e+"("+h+c+")"}const functionRegex=/([a-z-]*)\(.*?\)/g,filter={...complex,getAnimatableNone:s=>{const e=s.match(functionRegex);return e?e.map(applyDefaultFilter).join(" "):s}},defaultValueTypes={...numberValueTypes,color,backgroundColor:color,outlineColor:color,fill:color,stroke:color,borderColor:color,borderTopColor:color,borderRightColor:color,borderBottomColor:color,borderLeftColor:color,filter,WebkitFilter:filter},getDefaultValueType=s=>defaultValueTypes[s];function getAnimatableNone(s,e){let o=getDefaultValueType(s);return o!==filter&&(o=complex),o.getAnimatableNone?o.getAnimatableNone(e):void 0}const isZeroValueString=s=>/^0[^.\s]+$/.test(s);function isNone(s){if(typeof s=="number")return s===0;if(s!==null)return s==="none"||s==="0"||isZeroValueString(s)}function getKeyframes(s,e,o,a){const c=isAnimatable(e,o);let h;Array.isArray(o)?h=[...o]:h=[null,o];const g=a.from!==void 0?a.from:s.get();let b;const _=[];for(let j=0;j<h.length;j++)h[j]===null&&(h[j]=j===0?g:h[j-1]),isNone(h[j])&&_.push(j),typeof h[j]=="string"&&h[j]!=="none"&&h[j]!=="0"&&(b=h[j]);if(c&&_.length&&b)for(let j=0;j<_.length;j++){const $=_[j];h[$]=getAnimatableNone(e,b)}return h}function isTransitionDefined({when:s,delay:e,delayChildren:o,staggerChildren:a,staggerDirection:c,repeat:h,repeatType:g,repeatDelay:b,from:_,elapsed:j,...$}){return!!Object.keys($).length}function getValueTransition(s,e){return s[e]||s.default||s}const MotionGlobalConfig={skipAnimations:!1},animateMotionValue=(s,e,o,a={})=>c=>{const h=getValueTransition(a,s)||{},g=h.delay||a.delay||0;let{elapsed:b=0}=a;b=b-secondsToMilliseconds(g);const _=getKeyframes(e,s,o,h),j=_[0],$=_[_.length-1],_e=isAnimatable(s,j),tt=isAnimatable(s,$);let et={keyframes:_,velocity:e.getVelocity(),ease:"easeOut",...h,delay:-b,onUpdate:ut=>{e.set(ut),h.onUpdate&&h.onUpdate(ut)},onComplete:()=>{c(),h.onComplete&&h.onComplete()}};if(isTransitionDefined(h)||(et={...et,...getDefaultTransition(s,et)}),et.duration&&(et.duration=secondsToMilliseconds(et.duration)),et.repeatDelay&&(et.repeatDelay=secondsToMilliseconds(et.repeatDelay)),!_e||!tt||instantAnimationState.current||h.type===!1||MotionGlobalConfig.skipAnimations)return createInstantAnimation(et);if(!a.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const ut=createAcceleratedAnimation(e,s,et);if(ut)return ut}return animateValue(et)};function isWillChangeMotionValue(s){return!!(isMotionValue(s)&&s.add)}const isNumericalString=s=>/^\-?\d*\.?\d+$/.test(s);function addUniqueItem(s,e){s.indexOf(e)===-1&&s.push(e)}function removeItem(s,e){const o=s.indexOf(e);o>-1&&s.splice(o,1)}class SubscriptionManager{constructor(){this.subscriptions=[]}add(e){return addUniqueItem(this.subscriptions,e),()=>removeItem(this.subscriptions,e)}notify(e,o,a){const c=this.subscriptions.length;if(c)if(c===1)this.subscriptions[0](e,o,a);else for(let h=0;h<c;h++){const g=this.subscriptions[h];g&&g(e,o,a)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const isFloat$1=s=>!isNaN(parseFloat(s));class MotionValue{constructor(e,o={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(a,c=!0)=>{this.prev=this.current,this.current=a;const{delta:h,timestamp:g}=frameData;this.lastUpdated!==g&&(this.timeDelta=h,this.lastUpdated=g,frame.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),c&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>frame.postRender(this.velocityCheck),this.velocityCheck=({timestamp:a})=>{a!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=isFloat$1(this.current),this.owner=o.owner}onChange(e){return this.on("change",e)}on(e,o){this.events[e]||(this.events[e]=new SubscriptionManager);const a=this.events[e].add(o);return e==="change"?()=>{a(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:a}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,o){this.passiveEffect=e,this.stopPassiveEffect=o}set(e,o=!0){!o||!this.passiveEffect?this.updateAndNotify(e,o):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,o,a){this.set(o),this.prev=e,this.timeDelta=a}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?velocityPerSecond(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(o=>{this.hasAnimated=!0,this.animation=e(o),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(s,e){return new MotionValue(s,e)}const testValueType=s=>e=>e.test(s),auto={test:s=>s==="auto",parse:s=>s},dimensionValueTypes=[number,px,percent,degrees,vw,vh,auto],findDimensionValueType=s=>dimensionValueTypes.find(testValueType(s)),valueTypes=[...dimensionValueTypes,color,complex],findValueType=s=>valueTypes.find(testValueType(s));function setMotionValue(s,e,o){s.hasValue(e)?s.getValue(e).set(o):s.addValue(e,motionValue(o))}function setTarget(s,e){const o=resolveVariant(s,e);let{transitionEnd:a={},transition:c={},...h}=o?s.makeTargetAnimatable(o,!1):{};h={...h,...a};for(const g in h){const b=resolveFinalValueInKeyframes(h[g]);setMotionValue(s,g,b)}}function checkTargetForNewValues(s,e,o){var a,c;const h=Object.keys(e).filter(b=>!s.hasValue(b)),g=h.length;if(g)for(let b=0;b<g;b++){const _=h[b],j=e[_];let $=null;Array.isArray(j)&&($=j[0]),$===null&&($=(c=(a=o[_])!==null&&a!==void 0?a:s.readValue(_))!==null&&c!==void 0?c:e[_]),$!=null&&(typeof $=="string"&&(isNumericalString($)||isZeroValueString($))?$=parseFloat($):!findValueType($)&&complex.test(j)&&($=getAnimatableNone(_,j)),s.addValue(_,motionValue($,{owner:s})),o[_]===void 0&&(o[_]=$),$!==null&&s.setBaseTarget(_,$))}}function getOriginFromTransition(s,e){return e?(e[s]||e.default||e).from:void 0}function getOrigin(s,e,o){const a={};for(const c in s){const h=getOriginFromTransition(c,e);if(h!==void 0)a[c]=h;else{const g=o.getValue(c);g&&(a[c]=g.get())}}return a}function shouldBlockAnimation({protectedKeys:s,needsAnimating:e},o){const a=s.hasOwnProperty(o)&&e[o]!==!0;return e[o]=!1,a}function hasKeyframesChanged(s,e){const o=s.get();if(Array.isArray(e)){for(let a=0;a<e.length;a++)if(e[a]!==o)return!0}else return o!==e}function animateTarget(s,e,{delay:o=0,transitionOverride:a,type:c}={}){let{transition:h=s.getDefaultTransition(),transitionEnd:g,...b}=s.makeTargetAnimatable(e);const _=s.getValue("willChange");a&&(h=a);const j=[],$=c&&s.animationState&&s.animationState.getState()[c];for(const _e in b){const tt=s.getValue(_e),et=b[_e];if(!tt||et===void 0||$&&shouldBlockAnimation($,_e))continue;const ut={delay:o,elapsed:0,...getValueTransition(h||{},_e)};if(window.HandoffAppearAnimations){const nt=s.getProps()[optimizedAppearDataAttribute];if(nt){const rt=window.HandoffAppearAnimations(nt,_e,tt,frame);rt!==null&&(ut.elapsed=rt,ut.isHandoff=!0)}}let ht=!ut.isHandoff&&!hasKeyframesChanged(tt,et);if(ut.type==="spring"&&(tt.getVelocity()||ut.velocity)&&(ht=!1),tt.animation&&(ht=!1),ht)continue;tt.start(animateMotionValue(_e,tt,et,s.shouldReduceMotion&&transformProps.has(_e)?{type:!1}:ut));const st=tt.animation;isWillChangeMotionValue(_)&&(_.add(_e),st.then(()=>_.remove(_e))),j.push(st)}return g&&Promise.all(j).then(()=>{g&&setTarget(s,g)}),j}function animateVariant(s,e,o={}){const a=resolveVariant(s,e,o.custom);let{transition:c=s.getDefaultTransition()||{}}=a||{};o.transitionOverride&&(c=o.transitionOverride);const h=a?()=>Promise.all(animateTarget(s,a,o)):()=>Promise.resolve(),g=s.variantChildren&&s.variantChildren.size?(_=0)=>{const{delayChildren:j=0,staggerChildren:$,staggerDirection:_e}=c;return animateChildren(s,e,j+_,$,_e,o)}:()=>Promise.resolve(),{when:b}=c;if(b){const[_,j]=b==="beforeChildren"?[h,g]:[g,h];return _().then(()=>j())}else return Promise.all([h(),g(o.delay)])}function animateChildren(s,e,o=0,a=0,c=1,h){const g=[],b=(s.variantChildren.size-1)*a,_=c===1?(j=0)=>j*a:(j=0)=>b-j*a;return Array.from(s.variantChildren).sort(sortByTreeOrder).forEach((j,$)=>{j.notify("AnimationStart",e),g.push(animateVariant(j,e,{...h,delay:o+_($)}).then(()=>j.notify("AnimationComplete",e)))}),Promise.all(g)}function sortByTreeOrder(s,e){return s.sortNodePosition(e)}function animateVisualElement(s,e,o={}){s.notify("AnimationStart",e);let a;if(Array.isArray(e)){const c=e.map(h=>animateVariant(s,h,o));a=Promise.all(c)}else if(typeof e=="string")a=animateVariant(s,e,o);else{const c=typeof e=="function"?resolveVariant(s,e,o.custom):e;a=Promise.all(animateTarget(s,c,o))}return a.then(()=>s.notify("AnimationComplete",e))}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function animateList(s){return e=>Promise.all(e.map(({animation:o,options:a})=>animateVisualElement(s,o,a)))}function createAnimationState(s){let e=animateList(s);const o=createState();let a=!0;const c=(_,j)=>{const $=resolveVariant(s,j);if($){const{transition:_e,transitionEnd:tt,...et}=$;_={..._,...et,...tt}}return _};function h(_){e=_(s)}function g(_,j){const $=s.getProps(),_e=s.getVariantContext(!0)||{},tt=[],et=new Set;let ut={},ht=1/0;for(let nt=0;nt<numAnimationTypes;nt++){const rt=reversePriorityOrder[nt],at=o[rt],dt=$[rt]!==void 0?$[rt]:_e[rt],ot=isVariantLabel(dt),ct=rt===j?at.isActive:null;ct===!1&&(ht=nt);let vt=dt===_e[rt]&&dt!==$[rt]&&ot;if(vt&&a&&s.manuallyAnimateOnMount&&(vt=!1),at.protectedKeys={...ut},!at.isActive&&ct===null||!dt&&!at.prevProp||isAnimationControls(dt)||typeof dt=="boolean")continue;let pt=checkVariantsDidChange(at.prevProp,dt)||rt===j&&at.isActive&&!vt&&ot||nt>ht&&ot,Et=!1;const Ct=Array.isArray(dt)?dt:[dt];let Nt=Ct.reduce(c,{});ct===!1&&(Nt={});const{prevResolvedValues:Ut={}}=at,Tt={...Ut,...Nt},qt=Vt=>{pt=!0,et.has(Vt)&&(Et=!0,et.delete(Vt)),at.needsAnimating[Vt]=!0};for(const Vt in Tt){const Zt=Nt[Vt],It=Ut[Vt];if(ut.hasOwnProperty(Vt))continue;let Jt=!1;isKeyframesTarget(Zt)&&isKeyframesTarget(It)?Jt=!shallowCompare(Zt,It):Jt=Zt!==It,Jt?Zt!==void 0?qt(Vt):et.add(Vt):Zt!==void 0&&et.has(Vt)?qt(Vt):at.protectedKeys[Vt]=!0}at.prevProp=dt,at.prevResolvedValues=Nt,at.isActive&&(ut={...ut,...Nt}),a&&s.blockInitialAnimation&&(pt=!1),pt&&(!vt||Et)&&tt.push(...Ct.map(Vt=>({animation:Vt,options:{type:rt,..._}})))}if(et.size){const nt={};et.forEach(rt=>{const at=s.getBaseTarget(rt);at!==void 0&&(nt[rt]=at)}),tt.push({animation:nt})}let st=!!tt.length;return a&&($.initial===!1||$.initial===$.animate)&&!s.manuallyAnimateOnMount&&(st=!1),a=!1,st?e(tt):Promise.resolve()}function b(_,j,$){var _e;if(o[_].isActive===j)return Promise.resolve();(_e=s.variantChildren)===null||_e===void 0||_e.forEach(et=>{var ut;return(ut=et.animationState)===null||ut===void 0?void 0:ut.setActive(_,j)}),o[_].isActive=j;const tt=g($,_);for(const et in o)o[et].protectedKeys={};return tt}return{animateChanges:g,setActive:b,setAnimateFunction:h,getState:()=>o}}function checkVariantsDidChange(s,e){return typeof e=="string"?e!==s:Array.isArray(e)?!shallowCompare(e,s):!1}function createTypeState(s=!1){return{isActive:s,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}class AnimationFeature extends Feature{constructor(e){super(e),e.animationState||(e.animationState=createAnimationState(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),isAnimationControls(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:o}=this.node.prevProps||{};e!==o&&this.updateAnimationControlsSubscription()}unmount(){}}let id$1=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id$1++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:o,custom:a}=this.node.presenceContext,{isPresent:c}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===c)return;const h=this.node.animationState.setActive("exit",!e,{custom:a??this.node.getProps().custom});o&&!e&&h.then(()=>o(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}},distance=(s,e)=>Math.abs(s-e);function distance2D(s,e){const o=distance(s.x,e.x),a=distance(s.y,e.y);return Math.sqrt(o**2+a**2)}class PanSession{constructor(e,o,{transformPagePoint:a,contextWindow:c,dragSnapToOrigin:h=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _e=getPanInfo(this.lastMoveEventInfo,this.history),tt=this.startEvent!==null,et=distance2D(_e.offset,{x:0,y:0})>=3;if(!tt&&!et)return;const{point:ut}=_e,{timestamp:ht}=frameData;this.history.push({...ut,timestamp:ht});const{onStart:st,onMove:nt}=this.handlers;tt||(st&&st(this.lastMoveEvent,_e),this.startEvent=this.lastMoveEvent),nt&&nt(this.lastMoveEvent,_e)},this.handlePointerMove=(_e,tt)=>{this.lastMoveEvent=_e,this.lastMoveEventInfo=transformPoint(tt,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(_e,tt)=>{this.end();const{onEnd:et,onSessionEnd:ut,resumeAnimation:ht}=this.handlers;if(this.dragSnapToOrigin&&ht&&ht(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const st=getPanInfo(_e.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(tt,this.transformPagePoint),this.history);this.startEvent&&et&&et(_e,st),ut&&ut(_e,st)},!isPrimaryPointer(e))return;this.dragSnapToOrigin=h,this.handlers=o,this.transformPagePoint=a,this.contextWindow=c||window;const g=extractEventInfo(e),b=transformPoint(g,this.transformPagePoint),{point:_}=b,{timestamp:j}=frameData;this.history=[{..._,timestamp:j}];const{onSessionStart:$}=o;$&&$(e,getPanInfo(b,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),cancelFrame(this.updatePoint)}}function transformPoint(s,e){return e?{point:e(s.point)}:s}function subtractPoint(s,e){return{x:s.x-e.x,y:s.y-e.y}}function getPanInfo({point:s},e){return{point:s,delta:subtractPoint(s,lastDevicePoint(e)),offset:subtractPoint(s,startDevicePoint(e)),velocity:getVelocity(e,.1)}}function startDevicePoint(s){return s[0]}function lastDevicePoint(s){return s[s.length-1]}function getVelocity(s,e){if(s.length<2)return{x:0,y:0};let o=s.length-1,a=null;const c=lastDevicePoint(s);for(;o>=0&&(a=s[o],!(c.timestamp-a.timestamp>secondsToMilliseconds(e)));)o--;if(!a)return{x:0,y:0};const h=millisecondsToSeconds(c.timestamp-a.timestamp);if(h===0)return{x:0,y:0};const g={x:(c.x-a.x)/h,y:(c.y-a.y)/h};return g.x===1/0&&(g.x=0),g.y===1/0&&(g.y=0),g}function calcLength(s){return s.max-s.min}function isNear(s,e=0,o=.01){return Math.abs(s-e)<=o}function calcAxisDelta(s,e,o,a=.5){s.origin=a,s.originPoint=mix(e.min,e.max,s.origin),s.scale=calcLength(o)/calcLength(e),(isNear(s.scale,1,1e-4)||isNaN(s.scale))&&(s.scale=1),s.translate=mix(o.min,o.max,s.origin)-s.originPoint,(isNear(s.translate)||isNaN(s.translate))&&(s.translate=0)}function calcBoxDelta(s,e,o,a){calcAxisDelta(s.x,e.x,o.x,a?a.originX:void 0),calcAxisDelta(s.y,e.y,o.y,a?a.originY:void 0)}function calcRelativeAxis(s,e,o){s.min=o.min+e.min,s.max=s.min+calcLength(e)}function calcRelativeBox(s,e,o){calcRelativeAxis(s.x,e.x,o.x),calcRelativeAxis(s.y,e.y,o.y)}function calcRelativeAxisPosition(s,e,o){s.min=e.min-o.min,s.max=s.min+calcLength(e)}function calcRelativePosition(s,e,o){calcRelativeAxisPosition(s.x,e.x,o.x),calcRelativeAxisPosition(s.y,e.y,o.y)}function applyConstraints(s,{min:e,max:o},a){return e!==void 0&&s<e?s=a?mix(e,s,a.min):Math.max(s,e):o!==void 0&&s>o&&(s=a?mix(o,s,a.max):Math.min(s,o)),s}function calcRelativeAxisConstraints(s,e,o){return{min:e!==void 0?s.min+e:void 0,max:o!==void 0?s.max+o-(s.max-s.min):void 0}}function calcRelativeConstraints(s,{top:e,left:o,bottom:a,right:c}){return{x:calcRelativeAxisConstraints(s.x,o,c),y:calcRelativeAxisConstraints(s.y,e,a)}}function calcViewportAxisConstraints(s,e){let o=e.min-s.min,a=e.max-s.max;return e.max-e.min<s.max-s.min&&([o,a]=[a,o]),{min:o,max:a}}function calcViewportConstraints(s,e){return{x:calcViewportAxisConstraints(s.x,e.x),y:calcViewportAxisConstraints(s.y,e.y)}}function calcOrigin(s,e){let o=.5;const a=calcLength(s),c=calcLength(e);return c>a?o=progress(e.min,e.max-a,s.min):a>c&&(o=progress(s.min,s.max-c,e.min)),clamp(0,1,o)}function rebaseAxisConstraints(s,e){const o={};return e.min!==void 0&&(o.min=e.min-s.min),e.max!==void 0&&(o.max=e.max-s.min),o}const defaultElastic=.35;function resolveDragElastic(s=defaultElastic){return s===!1?s=0:s===!0&&(s=defaultElastic),{x:resolveAxisElastic(s,"left","right"),y:resolveAxisElastic(s,"top","bottom")}}function resolveAxisElastic(s,e,o){return{min:resolvePointElastic(s,e),max:resolvePointElastic(s,o)}}function resolvePointElastic(s,e){return typeof s=="number"?s:s[e]||0}const createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()});function eachAxis(s){return[s("x"),s("y")]}function convertBoundingBoxToBox({top:s,left:e,right:o,bottom:a}){return{x:{min:e,max:o},y:{min:s,max:a}}}function convertBoxToBoundingBox({x:s,y:e}){return{top:e.min,right:s.max,bottom:e.max,left:s.min}}function transformBoxPoints(s,e){if(!e)return s;const o=e({x:s.left,y:s.top}),a=e({x:s.right,y:s.bottom});return{top:o.y,left:o.x,bottom:a.y,right:a.x}}function isIdentityScale(s){return s===void 0||s===1}function hasScale({scale:s,scaleX:e,scaleY:o}){return!isIdentityScale(s)||!isIdentityScale(e)||!isIdentityScale(o)}function hasTransform(s){return hasScale(s)||has2DTranslate(s)||s.z||s.rotate||s.rotateX||s.rotateY}function has2DTranslate(s){return is2DTranslate(s.x)||is2DTranslate(s.y)}function is2DTranslate(s){return s&&s!=="0%"}function scalePoint(s,e,o){const a=s-o,c=e*a;return o+c}function applyPointDelta(s,e,o,a,c){return c!==void 0&&(s=scalePoint(s,c,a)),scalePoint(s,o,a)+e}function applyAxisDelta(s,e=0,o=1,a,c){s.min=applyPointDelta(s.min,e,o,a,c),s.max=applyPointDelta(s.max,e,o,a,c)}function applyBoxDelta(s,{x:e,y:o}){applyAxisDelta(s.x,e.translate,e.scale,e.originPoint),applyAxisDelta(s.y,o.translate,o.scale,o.originPoint)}function applyTreeDeltas(s,e,o,a=!1){const c=o.length;if(!c)return;e.x=e.y=1;let h,g;for(let b=0;b<c;b++){h=o[b],g=h.projectionDelta;const _=h.instance;_&&_.style&&_.style.display==="contents"||(a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&transformBox(s,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),g&&(e.x*=g.x.scale,e.y*=g.y.scale,applyBoxDelta(s,g)),a&&hasTransform(h.latestValues)&&transformBox(s,h.latestValues))}e.x=snapToDefault(e.x),e.y=snapToDefault(e.y)}function snapToDefault(s){return Number.isInteger(s)||s>1.0000000000001||s<.999999999999?s:1}function translateAxis(s,e){s.min=s.min+e,s.max=s.max+e}function transformAxis(s,e,[o,a,c]){const h=e[c]!==void 0?e[c]:.5,g=mix(s.min,s.max,h);applyAxisDelta(s,e[o],e[a],g,e.scale)}const xKeys$1=["x","scaleX","originX"],yKeys$1=["y","scaleY","originY"];function transformBox(s,e){transformAxis(s.x,e,xKeys$1),transformAxis(s.y,e,yKeys$1)}function measureViewportBox(s,e){return convertBoundingBoxToBox(transformBoxPoints(s.getBoundingClientRect(),e))}function measurePageBox(s,e,o){const a=measureViewportBox(s,o),{scroll:c}=e;return c&&(translateAxis(a.x,c.offset.x),translateAxis(a.y,c.offset.y)),a}const getContextWindow=({current:s})=>s?s.ownerDocument.defaultView:null,elementDragControls=new WeakMap;class VisualElementDragControls{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.visualElement=e}start(e,{snapToCursor:o=!1}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const c=$=>{const{dragSnapToOrigin:_e}=this.getProps();_e?this.pauseAnimation():this.stopAnimation(),o&&this.snapToCursor(extractEventInfo($,"page").point)},h=($,_e)=>{const{drag:tt,dragPropagation:et,onDragStart:ut}=this.getProps();if(tt&&!et&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=getGlobalLock(tt),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(st=>{let nt=this.getAxisMotionValue(st).get()||0;if(percent.test(nt)){const{projection:rt}=this.visualElement;if(rt&&rt.layout){const at=rt.layout.layoutBox[st];at&&(nt=calcLength(at)*(parseFloat(nt)/100))}}this.originPoint[st]=nt}),ut&&frame.update(()=>ut($,_e),!1,!0);const{animationState:ht}=this.visualElement;ht&&ht.setActive("whileDrag",!0)},g=($,_e)=>{const{dragPropagation:tt,dragDirectionLock:et,onDirectionLock:ut,onDrag:ht}=this.getProps();if(!tt&&!this.openGlobalLock)return;const{offset:st}=_e;if(et&&this.currentDirection===null){this.currentDirection=getCurrentDirection(st),this.currentDirection!==null&&ut&&ut(this.currentDirection);return}this.updateAxis("x",_e.point,st),this.updateAxis("y",_e.point,st),this.visualElement.render(),ht&&ht($,_e)},b=($,_e)=>this.stop($,_e),_=()=>eachAxis($=>{var _e;return this.getAnimationState($)==="paused"&&((_e=this.getAxisMotionValue($).animation)===null||_e===void 0?void 0:_e.play())}),{dragSnapToOrigin:j}=this.getProps();this.panSession=new PanSession(e,{onSessionStart:c,onStart:h,onMove:g,onSessionEnd:b,resumeAnimation:_},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:j,contextWindow:getContextWindow(this.visualElement)})}stop(e,o){const a=this.isDragging;if(this.cancel(),!a)return;const{velocity:c}=o;this.startAnimation(c);const{onDragEnd:h}=this.getProps();h&&frame.update(()=>h(e,o))}cancel(){this.isDragging=!1;const{projection:e,animationState:o}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:a}=this.getProps();!a&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),o&&o.setActive("whileDrag",!1)}updateAxis(e,o,a){const{drag:c}=this.getProps();if(!a||!shouldDrag(e,c,this.currentDirection))return;const h=this.getAxisMotionValue(e);let g=this.originPoint[e]+a[e];this.constraints&&this.constraints[e]&&(g=applyConstraints(g,this.constraints[e],this.elastic[e])),h.set(g)}resolveConstraints(){var e;const{dragConstraints:o,dragElastic:a}=this.getProps(),c=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,h=this.constraints;o&&isRefObject(o)?this.constraints||(this.constraints=this.resolveRefConstraints()):o&&c?this.constraints=calcRelativeConstraints(c.layoutBox,o):this.constraints=!1,this.elastic=resolveDragElastic(a),h!==this.constraints&&c&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(g=>{this.getAxisMotionValue(g)&&(this.constraints[g]=rebaseAxisConstraints(c.layoutBox[g],this.constraints[g]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:o}=this.getProps();if(!e||!isRefObject(e))return!1;const a=e.current,{projection:c}=this.visualElement;if(!c||!c.layout)return!1;const h=measurePageBox(a,c.root,this.visualElement.getTransformPagePoint());let g=calcViewportConstraints(c.layout.layoutBox,h);if(o){const b=o(convertBoxToBoundingBox(g));this.hasMutatedConstraints=!!b,b&&(g=convertBoundingBoxToBox(b))}return g}startAnimation(e){const{drag:o,dragMomentum:a,dragElastic:c,dragTransition:h,dragSnapToOrigin:g,onDragTransitionEnd:b}=this.getProps(),_=this.constraints||{},j=eachAxis($=>{if(!shouldDrag($,o,this.currentDirection))return;let _e=_&&_[$]||{};g&&(_e={min:0,max:0});const tt=c?200:1e6,et=c?40:1e7,ut={type:"inertia",velocity:a?e[$]:0,bounceStiffness:tt,bounceDamping:et,timeConstant:750,restDelta:1,restSpeed:10,...h,..._e};return this.startAxisValueAnimation($,ut)});return Promise.all(j).then(b)}startAxisValueAnimation(e,o){const a=this.getAxisMotionValue(e);return a.start(animateMotionValue(e,a,0,o))}stopAnimation(){eachAxis(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){eachAxis(e=>{var o;return(o=this.getAxisMotionValue(e).animation)===null||o===void 0?void 0:o.pause()})}getAnimationState(e){var o;return(o=this.getAxisMotionValue(e).animation)===null||o===void 0?void 0:o.state}getAxisMotionValue(e){const o="_drag"+e.toUpperCase(),a=this.visualElement.getProps(),c=a[o];return c||this.visualElement.getValue(e,(a.initial?a.initial[e]:void 0)||0)}snapToCursor(e){eachAxis(o=>{const{drag:a}=this.getProps();if(!shouldDrag(o,a,this.currentDirection))return;const{projection:c}=this.visualElement,h=this.getAxisMotionValue(o);if(c&&c.layout){const{min:g,max:b}=c.layout.layoutBox[o];h.set(e[o]-mix(g,b,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:o}=this.getProps(),{projection:a}=this.visualElement;if(!isRefObject(o)||!a||!this.constraints)return;this.stopAnimation();const c={x:0,y:0};eachAxis(g=>{const b=this.getAxisMotionValue(g);if(b){const _=b.get();c[g]=calcOrigin({min:_,max:_},this.constraints[g])}});const{transformTemplate:h}=this.visualElement.getProps();this.visualElement.current.style.transform=h?h({},""):"none",a.root&&a.root.updateScroll(),a.updateLayout(),this.resolveConstraints(),eachAxis(g=>{if(!shouldDrag(g,e,null))return;const b=this.getAxisMotionValue(g),{min:_,max:j}=this.constraints[g];b.set(mix(_,j,c[g]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const e=this.visualElement.current,o=addPointerEvent(e,"pointerdown",_=>{const{drag:j,dragListener:$=!0}=this.getProps();j&&$&&this.start(_)}),a=()=>{const{dragConstraints:_}=this.getProps();isRefObject(_)&&(this.constraints=this.resolveRefConstraints())},{projection:c}=this.visualElement,h=c.addEventListener("measure",a);c&&!c.layout&&(c.root&&c.root.updateScroll(),c.updateLayout()),a();const g=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),b=c.addEventListener("didUpdate",({delta:_,hasLayoutChanged:j})=>{this.isDragging&&j&&(eachAxis($=>{const _e=this.getAxisMotionValue($);_e&&(this.originPoint[$]+=_[$].translate,_e.set(_e.get()+_[$].translate))}),this.visualElement.render())});return()=>{g(),o(),h(),b&&b()}}getProps(){const e=this.visualElement.getProps(),{drag:o=!1,dragDirectionLock:a=!1,dragPropagation:c=!1,dragConstraints:h=!1,dragElastic:g=defaultElastic,dragMomentum:b=!0}=e;return{...e,drag:o,dragDirectionLock:a,dragPropagation:c,dragConstraints:h,dragElastic:g,dragMomentum:b}}}function shouldDrag(s,e,o){return(e===!0||e===s)&&(o===null||o===s)}function getCurrentDirection(s,e=10){let o=null;return Math.abs(s.y)>e?o="y":Math.abs(s.x)>e&&(o="x"),o}class DragGesture extends Feature{constructor(e){super(e),this.removeGroupControls=noop$1,this.removeListeners=noop$1,this.controls=new VisualElementDragControls(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop$1}unmount(){this.removeGroupControls(),this.removeListeners()}}const asyncHandler=s=>(e,o)=>{s&&frame.update(()=>s(e,o))};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop$1}onPointerDown(e){this.session=new PanSession(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:o,onPan:a,onPanEnd:c}=this.node.getProps();return{onSessionStart:asyncHandler(e),onStart:asyncHandler(o),onMove:a,onEnd:(h,g)=>{delete this.session,c&&frame.update(()=>c(h,g))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function usePresence(){const s=reactExports.useContext(PresenceContext);if(s===null)return[!0,null];const{isPresent:e,onExitComplete:o,register:a}=s,c=reactExports.useId();return reactExports.useEffect(()=>a(c),[]),!e&&o?[!1,()=>o&&o(c)]:[!0]}const globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pixelsToPercent(s,e){return e.max===e.min?0:s/(e.max-e.min)*100}const correctBorderRadius={correct:(s,e)=>{if(!e.target)return s;if(typeof s=="string")if(px.test(s))s=parseFloat(s);else return s;const o=pixelsToPercent(s,e.target.x),a=pixelsToPercent(s,e.target.y);return`${o}% ${a}%`}},correctBoxShadow={correct:(s,{treeScale:e,projectionDelta:o})=>{const a=s,c=complex.parse(s);if(c.length>5)return a;const h=complex.createTransformer(s),g=typeof c[0]!="number"?1:0,b=o.x.scale*e.x,_=o.y.scale*e.y;c[0+g]/=b,c[1+g]/=_;const j=mix(b,_,.5);return typeof c[2+g]=="number"&&(c[2+g]/=j),typeof c[3+g]=="number"&&(c[3+g]/=j),h(c)}};class MeasureLayoutWithContext extends React.Component{componentDidMount(){const{visualElement:e,layoutGroup:o,switchLayoutGroup:a,layoutId:c}=this.props,{projection:h}=e;addScaleCorrector(defaultScaleCorrectors),h&&(o.group&&o.group.add(h),a&&a.register&&c&&a.register(h),h.root.didUpdate(),h.addEventListener("animationComplete",()=>{this.safeToRemove()}),h.setOptions({...h.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:o,visualElement:a,drag:c,isPresent:h}=this.props,g=a.projection;return g&&(g.isPresent=h,c||e.layoutDependency!==o||o===void 0?g.willUpdate():this.safeToRemove(),e.isPresent!==h&&(h?g.promote():g.relegate()||frame.postRender(()=>{const b=g.getStack();(!b||!b.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:o,switchLayoutGroup:a}=this.props,{projection:c}=e;c&&(c.scheduleCheckAfterUnmount(),o&&o.group&&o.group.remove(c),a&&a.deregister&&a.deregister(c))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function MeasureLayout(s){const[e,o]=usePresence(),a=reactExports.useContext(LayoutGroupContext);return React.createElement(MeasureLayoutWithContext,{...s,layoutGroup:a,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:e,safeToRemove:o})}const defaultScaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow},borders$1=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders$1.length,asNumber=s=>typeof s=="string"?parseFloat(s):s,isPx=s=>typeof s=="number"||px.test(s);function mixValues(s,e,o,a,c,h){c?(s.opacity=mix(0,o.opacity!==void 0?o.opacity:1,easeCrossfadeIn(a)),s.opacityExit=mix(e.opacity!==void 0?e.opacity:1,0,easeCrossfadeOut(a))):h&&(s.opacity=mix(e.opacity!==void 0?e.opacity:1,o.opacity!==void 0?o.opacity:1,a));for(let g=0;g<numBorders;g++){const b=`border${borders$1[g]}Radius`;let _=getRadius(e,b),j=getRadius(o,b);if(_===void 0&&j===void 0)continue;_||(_=0),j||(j=0),_===0||j===0||isPx(_)===isPx(j)?(s[b]=Math.max(mix(asNumber(_),asNumber(j),a),0),(percent.test(j)||percent.test(_))&&(s[b]+="%")):s[b]=j}(e.rotate||o.rotate)&&(s.rotate=mix(e.rotate||0,o.rotate||0,a))}function getRadius(s,e){return s[e]!==void 0?s[e]:s.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop$1);function compress(s,e,o){return a=>a<s?0:a>e?1:o(progress(s,e,a))}function copyAxisInto(s,e){s.min=e.min,s.max=e.max}function copyBoxInto(s,e){copyAxisInto(s.x,e.x),copyAxisInto(s.y,e.y)}function removePointDelta(s,e,o,a,c){return s-=e,s=scalePoint(s,1/o,a),c!==void 0&&(s=scalePoint(s,1/c,a)),s}function removeAxisDelta(s,e=0,o=1,a=.5,c,h=s,g=s){if(percent.test(e)&&(e=parseFloat(e),e=mix(g.min,g.max,e/100)-g.min),typeof e!="number")return;let b=mix(h.min,h.max,a);s===h&&(b-=e),s.min=removePointDelta(s.min,e,o,b,c),s.max=removePointDelta(s.max,e,o,b,c)}function removeAxisTransforms(s,e,[o,a,c],h,g){removeAxisDelta(s,e[o],e[a],e[c],e.scale,h,g)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(s,e,o,a){removeAxisTransforms(s.x,e,xKeys,o?o.x:void 0,a?a.x:void 0),removeAxisTransforms(s.y,e,yKeys,o?o.y:void 0,a?a.y:void 0)}function isAxisDeltaZero(s){return s.translate===0&&s.scale===1}function isDeltaZero(s){return isAxisDeltaZero(s.x)&&isAxisDeltaZero(s.y)}function boxEquals(s,e){return s.x.min===e.x.min&&s.x.max===e.x.max&&s.y.min===e.y.min&&s.y.max===e.y.max}function boxEqualsRounded(s,e){return Math.round(s.x.min)===Math.round(e.x.min)&&Math.round(s.x.max)===Math.round(e.x.max)&&Math.round(s.y.min)===Math.round(e.y.min)&&Math.round(s.y.max)===Math.round(e.y.max)}function aspectRatio(s){return calcLength(s.x)/calcLength(s.y)}class NodeStack{constructor(){this.members=[]}add(e){addUniqueItem(this.members,e),e.scheduleRender()}remove(e){if(removeItem(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const o=this.members[this.members.length-1];o&&this.promote(o)}}relegate(e){const o=this.members.findIndex(c=>e===c);if(o===0)return!1;let a;for(let c=o;c>=0;c--){const h=this.members[c];if(h.isPresent!==!1){a=h;break}}return a?(this.promote(a),!0):!1}promote(e,o){const a=this.lead;if(e!==a&&(this.prevLead=a,this.lead=e,e.show(),a)){a.instance&&a.scheduleRender(),e.scheduleRender(),e.resumeFrom=a,o&&(e.resumeFrom.preserveOpacity=!0),a.snapshot&&(e.snapshot=a.snapshot,e.snapshot.latestValues=a.animationValues||a.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:c}=e.options;c===!1&&a.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:o,resumingFrom:a}=e;o.onExitComplete&&o.onExitComplete(),a&&a.options.onExitComplete&&a.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function buildProjectionTransform(s,e,o){let a="";const c=s.x.translate/e.x,h=s.y.translate/e.y;if((c||h)&&(a=`translate3d(${c}px, ${h}px, 0) `),(e.x!==1||e.y!==1)&&(a+=`scale(${1/e.x}, ${1/e.y}) `),o){const{rotate:_,rotateX:j,rotateY:$}=o;_&&(a+=`rotate(${_}deg) `),j&&(a+=`rotateX(${j}deg) `),$&&(a+=`rotateY(${$}deg) `)}const g=s.x.scale*e.x,b=s.y.scale*e.y;return(g!==1||b!==1)&&(a+=`scale(${g}, ${b})`),a||"none"}const compareByDepth=(s,e)=>s.depth-e.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(e){addUniqueItem(this.children,e),this.isDirty=!0}remove(e){removeItem(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(e)}}function delay(s,e){const o=performance.now(),a=({timestamp:c})=>{const h=c-o;h>=e&&(cancelFrame(a),s(h-e))};return frame.read(a,!0),()=>cancelFrame(a)}function record(s){window.MotionDebug&&window.MotionDebug.record(s)}function isSVGElement(s){return s instanceof SVGElement&&s.tagName!=="svg"}function animateSingleValue(s,e,o){const a=isMotionValue(s)?s:motionValue(s);return a.start(animateMotionValue("",a,e,o)),a.animation}const transformAxes=["","X","Y","Z"],hiddenVisibility={visibility:"hidden"},animationTarget=1e3;let id=0;const projectionFrameData={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function createProjectionNode({attachResizeListener:s,defaultParent:e,measureScroll:o,checkIsScrollRoot:a,resetTransform:c}){return class{constructor(g={},b=e==null?void 0:e()){this.id=id++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,projectionFrameData.totalNodes=projectionFrameData.resolvedTargetDeltas=projectionFrameData.recalculatedProjection=0,this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes),record(projectionFrameData)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=g,this.root=b?b.root||b:this,this.path=b?[...b.path,b]:[],this.parent=b,this.depth=b?b.depth+1:0;for(let _=0;_<this.path.length;_++)this.path[_].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(g,b){return this.eventHandlers.has(g)||this.eventHandlers.set(g,new SubscriptionManager),this.eventHandlers.get(g).add(b)}notifyListeners(g,...b){const _=this.eventHandlers.get(g);_&&_.notify(...b)}hasListeners(g){return this.eventHandlers.has(g)}mount(g,b=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=isSVGElement(g),this.instance=g;const{layoutId:_,layout:j,visualElement:$}=this.options;if($&&!$.current&&$.mount(g),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),b&&(j||_)&&(this.isLayoutDirty=!0),s){let _e;const tt=()=>this.root.updateBlockedByResize=!1;s(g,()=>{this.root.updateBlockedByResize=!0,_e&&_e(),_e=delay(tt,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation))})}_&&this.root.registerSharedNode(_,this),this.options.animate!==!1&&$&&(_||j)&&this.addEventListener("didUpdate",({delta:_e,hasLayoutChanged:tt,hasRelativeTargetChanged:et,layout:ut})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const ht=this.options.transition||$.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:st,onLayoutAnimationComplete:nt}=$.getProps(),rt=!this.targetLayout||!boxEqualsRounded(this.targetLayout,ut)||et,at=!tt&&et;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||at||tt&&(rt||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(_e,at);const dt={...getValueTransition(ht,"layout"),onPlay:st,onComplete:nt};($.shouldReduceMotion||this.options.layoutRoot)&&(dt.delay=0,dt.type=!1),this.startAnimation(dt)}else tt||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=ut})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const g=this.getStack();g&&g.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetRotation),this.animationId++)}getTransformTemplate(){const{visualElement:g}=this.options;return g&&g.getProps().transformTemplate}willUpdate(g=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let $=0;$<this.path.length;$++){const _e=this.path[$];_e.shouldResetTransform=!0,_e.updateScroll("snapshot"),_e.options.layoutRoot&&_e.willUpdate(!1)}const{layoutId:b,layout:_}=this.options;if(b===void 0&&!_)return;const j=this.getTransformTemplate();this.prevTransformTemplateValue=j?j(this.latestValues,""):void 0,this.updateSnapshot(),g&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}this.isUpdating||this.nodes.forEach(clearIsLayoutDirty),this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate),this.clearAllSnapshots();const b=performance.now();frameData.delta=clamp(0,1e3/60,b-frameData.timestamp),frameData.timestamp=b,frameData.isProcessing=!0,steps.update.process(frameData),steps.preRender.process(frameData),steps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let _=0;_<this.path.length;_++)this.path[_].updateScroll();const g=this.layout;this.layout=this.measure(!1),this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:b}=this.options;b&&b.notify("LayoutMeasure",this.layout.layoutBox,g?g.layoutBox:void 0)}updateScroll(g="measure"){let b=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===g&&(b=!1),b&&(this.scroll={animationId:this.root.animationId,phase:g,isRoot:a(this.instance),offset:o(this.instance)})}resetTransform(){if(!c)return;const g=this.isLayoutDirty||this.shouldResetTransform,b=this.projectionDelta&&!isDeltaZero(this.projectionDelta),_=this.getTransformTemplate(),j=_?_(this.latestValues,""):void 0,$=j!==this.prevTransformTemplateValue;g&&(b||hasTransform(this.latestValues)||$)&&(c(this.instance,j),this.shouldResetTransform=!1,this.scheduleRender())}measure(g=!0){const b=this.measurePageBox();let _=this.removeElementScroll(b);return g&&(_=this.removeTransform(_)),roundBox(_),{animationId:this.root.animationId,measuredBox:b,layoutBox:_,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:g}=this.options;if(!g)return createBox();const b=g.measureViewportBox(),{scroll:_}=this.root;return _&&(translateAxis(b.x,_.offset.x),translateAxis(b.y,_.offset.y)),b}removeElementScroll(g){const b=createBox();copyBoxInto(b,g);for(let _=0;_<this.path.length;_++){const j=this.path[_],{scroll:$,options:_e}=j;if(j!==this.root&&$&&_e.layoutScroll){if($.isRoot){copyBoxInto(b,g);const{scroll:tt}=this.root;tt&&(translateAxis(b.x,-tt.offset.x),translateAxis(b.y,-tt.offset.y))}translateAxis(b.x,$.offset.x),translateAxis(b.y,$.offset.y)}}return b}applyTransform(g,b=!1){const _=createBox();copyBoxInto(_,g);for(let j=0;j<this.path.length;j++){const $=this.path[j];!b&&$.options.layoutScroll&&$.scroll&&$!==$.root&&transformBox(_,{x:-$.scroll.offset.x,y:-$.scroll.offset.y}),hasTransform($.latestValues)&&transformBox(_,$.latestValues)}return hasTransform(this.latestValues)&&transformBox(_,this.latestValues),_}removeTransform(g){const b=createBox();copyBoxInto(b,g);for(let _=0;_<this.path.length;_++){const j=this.path[_];if(!j.instance||!hasTransform(j.latestValues))continue;hasScale(j.latestValues)&&j.updateSnapshot();const $=createBox(),_e=j.measurePageBox();copyBoxInto($,_e),removeBoxTransforms(b,j.latestValues,j.snapshot?j.snapshot.layoutBox:void 0,$)}return hasTransform(this.latestValues)&&removeBoxTransforms(b,this.latestValues),b}setTargetDelta(g){this.targetDelta=g,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(g){this.options={...this.options,...g,crossfade:g.crossfade!==void 0?g.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(g=!1){var b;const _=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=_.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=_.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=_.isSharedProjectionDirty);const j=!!this.resumingFrom||this!==_;if(!(g||j&&this.isSharedProjectionDirty||this.isProjectionDirty||!((b=this.parent)===null||b===void 0)&&b.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:_e,layoutId:tt}=this.options;if(!(!this.layout||!(_e||tt))){if(this.resolvedRelativeTargetAt=frameData.timestamp,!this.targetDelta&&!this.relativeTarget){const et=this.getClosestProjectingParent();et&&et.layout&&this.animationProgress!==1?(this.relativeParent=et,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.layout.layoutBox,et.layout.layoutBox),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const et=this.getClosestProjectingParent();et&&!!et.resumingFrom==!!this.resumingFrom&&!et.options.layoutScroll&&et.target&&this.animationProgress!==1?(this.relativeParent=et,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.target,et.target),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}projectionFrameData.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var g;const b=this.getLead(),_=!!this.resumingFrom||this!==b;let j=!0;if((this.isProjectionDirty||!((g=this.parent)===null||g===void 0)&&g.isProjectionDirty)&&(j=!1),_&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(j=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(j=!1),j)return;const{layout:$,layoutId:_e}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!($||_e))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const tt=this.treeScale.x,et=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,_),b.layout&&!b.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(b.target=b.layout.layoutBox);const{target:ut}=b;if(!ut){this.projectionTransform&&(this.projectionDelta=createDelta(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta());const ht=this.projectionTransform;calcBoxDelta(this.projectionDelta,this.layoutCorrected,ut,this.latestValues),this.projectionTransform=buildProjectionTransform(this.projectionDelta,this.treeScale),(this.projectionTransform!==ht||this.treeScale.x!==tt||this.treeScale.y!==et)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",ut)),projectionFrameData.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(g=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),g){const b=this.getStack();b&&b.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(g,b=!1){const _=this.snapshot,j=_?_.latestValues:{},$={...this.latestValues},_e=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!b;const tt=createBox(),et=_?_.source:void 0,ut=this.layout?this.layout.source:void 0,ht=et!==ut,st=this.getStack(),nt=!st||st.members.length<=1,rt=!!(ht&&!nt&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let at;this.mixTargetDelta=dt=>{const ot=dt/1e3;mixAxisDelta(_e.x,g.x,ot),mixAxisDelta(_e.y,g.y,ot),this.setTargetDelta(_e),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(tt,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,tt,ot),at&&boxEquals(this.relativeTarget,at)&&(this.isProjectionDirty=!1),at||(at=createBox()),copyBoxInto(at,this.relativeTarget)),ht&&(this.animationValues=$,mixValues($,j,this.latestValues,ot,rt,nt)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=ot},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(g){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.currentAnimation=animateSingleValue(0,animationTarget,{...g,onUpdate:b=>{this.mixTargetDelta(b),g.onUpdate&&g.onUpdate(b)},onComplete:()=>{g.onComplete&&g.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const g=this.getStack();g&&g.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const g=this.getLead();let{targetWithTransforms:b,target:_,layout:j,latestValues:$}=g;if(!(!b||!_||!j)){if(this!==g&&this.layout&&j&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,j.layoutBox)){_=this.target||createBox();const _e=calcLength(this.layout.layoutBox.x);_.x.min=g.target.x.min,_.x.max=_.x.min+_e;const tt=calcLength(this.layout.layoutBox.y);_.y.min=g.target.y.min,_.y.max=_.y.min+tt}copyBoxInto(b,_),transformBox(b,$),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,b,$)}}registerSharedNode(g,b){this.sharedNodes.has(g)||this.sharedNodes.set(g,new NodeStack),this.sharedNodes.get(g).add(b);const j=b.options.initialPromotionConfig;b.promote({transition:j?j.transition:void 0,preserveFollowOpacity:j&&j.shouldPreserveFollowOpacity?j.shouldPreserveFollowOpacity(b):void 0})}isLead(){const g=this.getStack();return g?g.lead===this:!0}getLead(){var g;const{layoutId:b}=this.options;return b?((g=this.getStack())===null||g===void 0?void 0:g.lead)||this:this}getPrevLead(){var g;const{layoutId:b}=this.options;return b?(g=this.getStack())===null||g===void 0?void 0:g.prevLead:void 0}getStack(){const{layoutId:g}=this.options;if(g)return this.root.sharedNodes.get(g)}promote({needsReset:g,transition:b,preserveFollowOpacity:_}={}){const j=this.getStack();j&&j.promote(this,_),g&&(this.projectionDelta=void 0,this.needsReset=!0),b&&this.setOptions({transition:b})}relegate(){const g=this.getStack();return g?g.relegate(this):!1}resetRotation(){const{visualElement:g}=this.options;if(!g)return;let b=!1;const{latestValues:_}=g;if((_.rotate||_.rotateX||_.rotateY||_.rotateZ)&&(b=!0),!b)return;const j={};for(let $=0;$<transformAxes.length;$++){const _e="rotate"+transformAxes[$];_[_e]&&(j[_e]=_[_e],g.setStaticValue(_e,0))}g.render();for(const $ in j)g.setStaticValue($,j[$]);g.scheduleRender()}getProjectionStyles(g){var b,_;if(!this.instance||this.isSVG)return;if(!this.isVisible)return hiddenVisibility;const j={visibility:""},$=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,j.opacity="",j.pointerEvents=resolveMotionValue(g==null?void 0:g.pointerEvents)||"",j.transform=$?$(this.latestValues,""):"none",j;const _e=this.getLead();if(!this.projectionDelta||!this.layout||!_e.target){const ht={};return this.options.layoutId&&(ht.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,ht.pointerEvents=resolveMotionValue(g==null?void 0:g.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(ht.transform=$?$({},""):"none",this.hasProjected=!1),ht}const tt=_e.animationValues||_e.latestValues;this.applyTransformsToTarget(),j.transform=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,tt),$&&(j.transform=$(tt,j.transform));const{x:et,y:ut}=this.projectionDelta;j.transformOrigin=`${et.origin*100}% ${ut.origin*100}% 0`,_e.animationValues?j.opacity=_e===this?(_=(b=tt.opacity)!==null&&b!==void 0?b:this.latestValues.opacity)!==null&&_!==void 0?_:1:this.preserveOpacity?this.latestValues.opacity:tt.opacityExit:j.opacity=_e===this?tt.opacity!==void 0?tt.opacity:"":tt.opacityExit!==void 0?tt.opacityExit:0;for(const ht in scaleCorrectors){if(tt[ht]===void 0)continue;const{correct:st,applyTo:nt}=scaleCorrectors[ht],rt=j.transform==="none"?tt[ht]:st(tt[ht],_e);if(nt){const at=nt.length;for(let dt=0;dt<at;dt++)j[nt[dt]]=rt}else j[ht]=rt}return this.options.layoutId&&(j.pointerEvents=_e===this?resolveMotionValue(g==null?void 0:g.pointerEvents)||"":"none"),j}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(g=>{var b;return(b=g.currentAnimation)===null||b===void 0?void 0:b.stop()}),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(s){s.updateLayout()}function notifyLayoutUpdate(s){var e;const o=((e=s.resumeFrom)===null||e===void 0?void 0:e.snapshot)||s.snapshot;if(s.isLead()&&s.layout&&o&&s.hasListeners("didUpdate")){const{layoutBox:a,measuredBox:c}=s.layout,{animationType:h}=s.options,g=o.source!==s.layout.source;h==="size"?eachAxis(_e=>{const tt=g?o.measuredBox[_e]:o.layoutBox[_e],et=calcLength(tt);tt.min=a[_e].min,tt.max=tt.min+et}):shouldAnimatePositionOnly(h,o.layoutBox,a)&&eachAxis(_e=>{const tt=g?o.measuredBox[_e]:o.layoutBox[_e],et=calcLength(a[_e]);tt.max=tt.min+et,s.relativeTarget&&!s.currentAnimation&&(s.isProjectionDirty=!0,s.relativeTarget[_e].max=s.relativeTarget[_e].min+et)});const b=createDelta();calcBoxDelta(b,a,o.layoutBox);const _=createDelta();g?calcBoxDelta(_,s.applyTransform(c,!0),o.measuredBox):calcBoxDelta(_,a,o.layoutBox);const j=!isDeltaZero(b);let $=!1;if(!s.resumeFrom){const _e=s.getClosestProjectingParent();if(_e&&!_e.resumeFrom){const{snapshot:tt,layout:et}=_e;if(tt&&et){const ut=createBox();calcRelativePosition(ut,o.layoutBox,tt.layoutBox);const ht=createBox();calcRelativePosition(ht,a,et.layoutBox),boxEqualsRounded(ut,ht)||($=!0),_e.options.layoutRoot&&(s.relativeTarget=ht,s.relativeTargetOrigin=ut,s.relativeParent=_e)}}}s.notifyListeners("didUpdate",{layout:a,snapshot:o,delta:_,layoutDelta:b,hasLayoutChanged:j,hasRelativeTargetChanged:$})}else if(s.isLead()){const{onExitComplete:a}=s.options;a&&a()}s.options.transition=void 0}function propagateDirtyNodes(s){projectionFrameData.totalNodes++,s.parent&&(s.isProjecting()||(s.isProjectionDirty=s.parent.isProjectionDirty),s.isSharedProjectionDirty||(s.isSharedProjectionDirty=!!(s.isProjectionDirty||s.parent.isProjectionDirty||s.parent.isSharedProjectionDirty)),s.isTransformDirty||(s.isTransformDirty=s.parent.isTransformDirty))}function cleanDirtyNodes(s){s.isProjectionDirty=s.isSharedProjectionDirty=s.isTransformDirty=!1}function clearSnapshot(s){s.clearSnapshot()}function clearMeasurements(s){s.clearMeasurements()}function clearIsLayoutDirty(s){s.isLayoutDirty=!1}function resetTransformStyle(s){const{visualElement:e}=s.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),s.resetTransform()}function finishAnimation(s){s.finishAnimation(),s.targetDelta=s.relativeTarget=s.target=void 0,s.isProjectionDirty=!0}function resolveTargetDelta(s){s.resolveTargetDelta()}function calcProjection(s){s.calcProjection()}function resetRotation(s){s.resetRotation()}function removeLeadSnapshots(s){s.removeLeadSnapshot()}function mixAxisDelta(s,e,o){s.translate=mix(e.translate,0,o),s.scale=mix(e.scale,1,o),s.origin=e.origin,s.originPoint=e.originPoint}function mixAxis(s,e,o,a){s.min=mix(e.min,o.min,a),s.max=mix(e.max,o.max,a)}function mixBox(s,e,o,a){mixAxis(s.x,e.x,o.x,a),mixAxis(s.y,e.y,o.y,a)}function hasOpacityCrossfade(s){return s.animationValues&&s.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=s=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(s),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop$1;function roundAxis(s){s.min=roundPoint(s.min),s.max=roundPoint(s.max)}function roundBox(s){roundAxis(s.x),roundAxis(s.y)}function shouldAnimatePositionOnly(s,e,o){return s==="position"||s==="preserve-aspect"&&!isNear(aspectRatio(e),aspectRatio(o),.2)}const DocumentProjectionNode=createProjectionNode({attachResizeListener:(s,e)=>addDomEvent(s,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode({measureScroll:s=>({x:s.scrollLeft,y:s.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const s=new DocumentProjectionNode({});s.mount(window),s.setOptions({layoutScroll:!0}),rootProjectionNode.current=s}return rootProjectionNode.current},resetTransform:(s,e)=>{s.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:s=>window.getComputedStyle(s).position==="fixed"}),drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}},splitCSSVariableRegex=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function parseCSSVariable(s){const e=splitCSSVariableRegex.exec(s);if(!e)return[,];const[,o,a]=e;return[o,a]}function getVariableValue(s,e,o=1){const[a,c]=parseCSSVariable(s);if(!a)return;const h=window.getComputedStyle(e).getPropertyValue(a);if(h){const g=h.trim();return isNumericalString(g)?parseFloat(g):g}else return isCSSVariableToken(c)?getVariableValue(c,e,o+1):c}function resolveCSSVariables(s,{...e},o){const a=s.current;if(!(a instanceof Element))return{target:e,transitionEnd:o};o&&(o={...o}),s.values.forEach(c=>{const h=c.get();if(!isCSSVariableToken(h))return;const g=getVariableValue(h,a);g&&c.set(g)});for(const c in e){const h=e[c];if(!isCSSVariableToken(h))continue;const g=getVariableValue(h,a);g&&(e[c]=g,o||(o={}),o[c]===void 0&&(o[c]=h))}return{target:e,transitionEnd:o}}const positionalKeys=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),isPositionalKey=s=>positionalKeys.has(s),hasPositionalKey=s=>Object.keys(s).some(isPositionalKey),isNumOrPxType=s=>s===number||s===px,getPosFromMatrix=(s,e)=>parseFloat(s.split(", ")[e]),getTranslateFromMatrix=(s,e)=>(o,{transform:a})=>{if(a==="none"||!a)return 0;const c=a.match(/^matrix3d\((.+)\)$/);if(c)return getPosFromMatrix(c[1],e);{const h=a.match(/^matrix\((.+)\)$/);return h?getPosFromMatrix(h[1],s):0}},transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(s=>!transformKeys.has(s));function removeNonTranslationalTransform(s){const e=[];return nonTranslationalTransformKeys.forEach(o=>{const a=s.getValue(o);a!==void 0&&(e.push([o,a.get()]),a.set(o.startsWith("scale")?1:0))}),e.length&&s.render(),e}const positionalValues={width:({x:s},{paddingLeft:e="0",paddingRight:o="0"})=>s.max-s.min-parseFloat(e)-parseFloat(o),height:({y:s},{paddingTop:e="0",paddingBottom:o="0"})=>s.max-s.min-parseFloat(e)-parseFloat(o),top:(s,{top:e})=>parseFloat(e),left:(s,{left:e})=>parseFloat(e),bottom:({y:s},{top:e})=>parseFloat(e)+(s.max-s.min),right:({x:s},{left:e})=>parseFloat(e)+(s.max-s.min),x:getTranslateFromMatrix(4,13),y:getTranslateFromMatrix(5,14)};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const convertChangedValueTypes=(s,e,o)=>{const a=e.measureViewportBox(),c=e.current,h=getComputedStyle(c),{display:g}=h,b={};g==="none"&&e.setStaticValue("display",s.display||"block"),o.forEach(j=>{b[j]=positionalValues[j](a,h)}),e.render();const _=e.measureViewportBox();return o.forEach(j=>{const $=e.getValue(j);$&&$.jump(b[j]),s[j]=positionalValues[j](_,h)}),s},checkAndConvertChangedValueTypes=(s,e,o={},a={})=>{e={...e},a={...a};const c=Object.keys(e).filter(isPositionalKey);let h=[],g=!1;const b=[];if(c.forEach(_=>{const j=s.getValue(_);if(!s.hasValue(_))return;let $=o[_],_e=findDimensionValueType($);const tt=e[_];let et;if(isKeyframesTarget(tt)){const ut=tt.length,ht=tt[0]===null?1:0;$=tt[ht],_e=findDimensionValueType($);for(let st=ht;st<ut&&tt[st]!==null;st++)et?invariant(findDimensionValueType(tt[st])===et):et=findDimensionValueType(tt[st])}else et=findDimensionValueType(tt);if(_e!==et)if(isNumOrPxType(_e)&&isNumOrPxType(et)){const ut=j.get();typeof ut=="string"&&j.set(parseFloat(ut)),typeof tt=="string"?e[_]=parseFloat(tt):Array.isArray(tt)&&et===px&&(e[_]=tt.map(parseFloat))}else _e!=null&&_e.transform&&(et!=null&&et.transform)&&($===0||tt===0)?$===0?j.set(et.transform($)):e[_]=_e.transform(tt):(g||(h=removeNonTranslationalTransform(s),g=!0),b.push(_),a[_]=a[_]!==void 0?a[_]:e[_],j.jump(tt))}),b.length){const _=b.indexOf("height")>=0?window.pageYOffset:null,j=convertChangedValueTypes(e,s,b);return h.length&&h.forEach(([$,_e])=>{s.getValue($).set(_e)}),s.render(),isBrowser$1&&_!==null&&window.scrollTo({top:_}),{target:j,transitionEnd:a}}else return{target:e,transitionEnd:a}};function unitConversion(s,e,o,a){return hasPositionalKey(e)?checkAndConvertChangedValueTypes(s,e,o,a):{target:e,transitionEnd:a}}const parseDomVariant=(s,e,o,a)=>{const c=resolveCSSVariables(s,e,a);return e=c.target,a=c.transitionEnd,unitConversion(s,e,o,a)},prefersReducedMotion={current:null},hasReducedMotionListener={current:!1};function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser$1)if(window.matchMedia){const s=window.matchMedia("(prefers-reduced-motion)"),e=()=>prefersReducedMotion.current=s.matches;s.addListener(e),e()}else prefersReducedMotion.current=!1}function updateMotionValuesFromProps(s,e,o){const{willChange:a}=e;for(const c in e){const h=e[c],g=o[c];if(isMotionValue(h))s.addValue(c,h),isWillChangeMotionValue(a)&&a.add(c);else if(isMotionValue(g))s.addValue(c,motionValue(h,{owner:s})),isWillChangeMotionValue(a)&&a.remove(c);else if(g!==h)if(s.hasValue(c)){const b=s.getValue(c);!b.hasAnimated&&b.set(h)}else{const b=s.getStaticValue(c);s.addValue(c,motionValue(b!==void 0?b:h,{owner:s}))}}for(const c in o)e[c]===void 0&&s.removeValue(c);return e}const visualElementStore=new WeakMap,featureNames=Object.keys(featureDefinitions),numFeatures=featureNames.length,propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],numVariantProps=variantProps.length;class VisualElement{constructor({parent:e,props:o,presenceContext:a,reducedMotionConfig:c,visualState:h},g={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>frame.render(this.render,!1,!0);const{latestValues:b,renderState:_}=h;this.latestValues=b,this.baseTarget={...b},this.initialValues=o.initial?{...b}:{},this.renderState=_,this.parent=e,this.props=o,this.presenceContext=a,this.depth=e?e.depth+1:0,this.reducedMotionConfig=c,this.options=g,this.isControllingVariants=isControllingVariants(o),this.isVariantNode=isVariantNode(o),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:j,...$}=this.scrapeMotionValuesFromProps(o,{});for(const _e in $){const tt=$[_e];b[_e]!==void 0&&isMotionValue(tt)&&(tt.set(b[_e],!1),isWillChangeMotionValue(j)&&j.add(_e))}}scrapeMotionValuesFromProps(e,o){return{}}mount(e){this.current=e,visualElementStore.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((o,a)=>this.bindToMotionValue(a,o)),hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:prefersReducedMotion.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){visualElementStore.delete(this.current),this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,o){const a=transformProps.has(e),c=o.on("change",g=>{this.latestValues[e]=g,this.props.onUpdate&&frame.update(this.notifyUpdate,!1,!0),a&&this.projection&&(this.projection.isTransformDirty=!0)}),h=o.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{c(),h()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...o},a,c,h){let g,b;for(let _=0;_<numFeatures;_++){const j=featureNames[_],{isEnabled:$,Feature:_e,ProjectionNode:tt,MeasureLayout:et}=featureDefinitions[j];tt&&(g=tt),$(o)&&(!this.features[j]&&_e&&(this.features[j]=new _e(this)),et&&(b=et))}if((this.type==="html"||this.type==="svg")&&!this.projection&&g){this.projection=new g(this.latestValues,this.parent&&this.parent.projection);const{layoutId:_,layout:j,drag:$,dragConstraints:_e,layoutScroll:tt,layoutRoot:et}=o;this.projection.setOptions({layoutId:_,layout:j,alwaysMeasureLayout:!!$||_e&&isRefObject(_e),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof j=="string"?j:"both",initialPromotionConfig:h,layoutScroll:tt,layoutRoot:et})}return b}updateFeatures(){for(const e in this.features){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,o){this.latestValues[e]=o}makeTargetAnimatable(e,o=!0){return this.makeTargetAnimatableFromInstance(e,this.props,o)}update(e,o){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=o;for(let a=0;a<propEventHandlers.length;a++){const c=propEventHandlers[a];this.propEventSubscriptions[c]&&(this.propEventSubscriptions[c](),delete this.propEventSubscriptions[c]);const h=e["on"+c];h&&(this.propEventSubscriptions[c]=this.on(c,h))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const a=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(a.initial=this.props.initial),a}const o={};for(let a=0;a<numVariantProps;a++){const c=variantProps[a],h=this.props[c];(isVariantLabel(h)||h===!1)&&(o[c]=h)}return o}addVariantChild(e){const o=this.getClosestVariantNode();if(o)return o.variantChildren&&o.variantChildren.add(e),()=>o.variantChildren.delete(e)}addValue(e,o){o!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,o)),this.values.set(e,o),this.latestValues[e]=o.get()}removeValue(e){this.values.delete(e);const o=this.valueSubscriptions.get(e);o&&(o(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,o){if(this.props.values&&this.props.values[e])return this.props.values[e];let a=this.values.get(e);return a===void 0&&o!==void 0&&(a=motionValue(o,{owner:this}),this.addValue(e,a)),a}readValue(e){var o;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(o=this.getBaseTargetFromProps(this.props,e))!==null&&o!==void 0?o:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,o){this.baseTarget[e]=o}getBaseTarget(e){var o;const{initial:a}=this.props,c=typeof a=="string"||typeof a=="object"?(o=resolveVariantFromProps(this.props,a))===null||o===void 0?void 0:o[e]:void 0;if(a&&c!==void 0)return c;const h=this.getBaseTargetFromProps(this.props,e);return h!==void 0&&!isMotionValue(h)?h:this.initialValues[e]!==void 0&&c===void 0?void 0:this.baseTarget[e]}on(e,o){return this.events[e]||(this.events[e]=new SubscriptionManager),this.events[e].add(o)}notify(e,...o){this.events[e]&&this.events[e].notify(...o)}}class DOMVisualElement extends VisualElement{sortInstanceNodePosition(e,o){return e.compareDocumentPosition(o)&2?1:-1}getBaseTargetFromProps(e,o){return e.style?e.style[o]:void 0}removeValueFromRenderState(e,{vars:o,style:a}){delete o[e],delete a[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:o,...a},{transformValues:c},h){let g=getOrigin(a,e||{},this);if(c&&(o&&(o=c(o)),a&&(a=c(a)),g&&(g=c(g))),h){checkTargetForNewValues(this,a,g);const b=parseDomVariant(this,a,g,o);o=b.transitionEnd,a=b.target}return{transition:e,transitionEnd:o,...a}}}function getComputedStyle$1(s){return window.getComputedStyle(s)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,o){if(transformProps.has(o)){const a=getDefaultValueType(o);return a&&a.default||0}else{const a=getComputedStyle$1(e),c=(isCSSVariableName(o)?a.getPropertyValue(o):a[o])||0;return typeof c=="string"?c.trim():c}}measureInstanceViewportBox(e,{transformPagePoint:o}){return measureViewportBox(e,o)}build(e,o,a,c){buildHTMLStyles(e,o,a,c.transformTemplate)}scrapeMotionValuesFromProps(e,o){return scrapeMotionValuesFromProps$1(e,o)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;isMotionValue(e)&&(this.childSubscription=e.on("change",o=>{this.current&&(this.current.textContent=`${o}`)}))}renderInstance(e,o,a,c){renderHTML(e,o,a,c)}}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,o){return e[o]}readValueFromInstance(e,o){if(transformProps.has(o)){const a=getDefaultValueType(o);return a&&a.default||0}return o=camelCaseAttributes.has(o)?o:camelToDash(o),e.getAttribute(o)}measureInstanceViewportBox(){return createBox()}scrapeMotionValuesFromProps(e,o){return scrapeMotionValuesFromProps(e,o)}build(e,o,a,c){buildSVGAttrs(e,o,a,this.isSVGTag,c.transformTemplate)}renderInstance(e,o,a,c){renderSVG(e,o,a,c)}mount(e){this.isSVGTag=isSVGTag(e.tagName),super.mount(e)}}const createDomVisualElement=(s,e)=>isSVGComponent(s)?new SVGVisualElement(e,{enableHardwareAcceleration:!1}):new HTMLVisualElement(e,{enableHardwareAcceleration:!0}),layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},preloadedFeatures={...animations,...gestureAnimations,...drag,...layout},motion=createMotionProxy((s,e)=>createDomMotionConfig(s,e,preloadedFeatures,createDomVisualElement));function useIsMounted(){const s=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>(s.current=!0,()=>{s.current=!1}),[]),s}function useForceUpdate(){const s=useIsMounted(),[e,o]=reactExports.useState(0),a=reactExports.useCallback(()=>{s.current&&o(e+1)},[e]);return[reactExports.useCallback(()=>frame.postRender(a),[a]),e]}class PopChildMeasure extends reactExports.Component{getSnapshotBeforeUpdate(e){const o=this.props.childRef.current;if(o&&e.isPresent&&!this.props.isPresent){const a=this.props.sizeRef.current;a.height=o.offsetHeight||0,a.width=o.offsetWidth||0,a.top=o.offsetTop,a.left=o.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function PopChild({children:s,isPresent:e}){const o=reactExports.useId(),a=reactExports.useRef(null),c=reactExports.useRef({width:0,height:0,top:0,left:0});return reactExports.useInsertionEffect(()=>{const{width:h,height:g,top:b,left:_}=c.current;if(e||!a.current||!h||!g)return;a.current.dataset.motionPopId=o;const j=document.createElement("style");return document.head.appendChild(j),j.sheet&&j.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${g}px !important;
            top: ${b}px !important;
            left: ${_}px !important;
          }
        `),()=>{document.head.removeChild(j)}},[e]),reactExports.createElement(PopChildMeasure,{isPresent:e,childRef:a,sizeRef:c},reactExports.cloneElement(s,{ref:a}))}const PresenceChild=({children:s,initial:e,isPresent:o,onExitComplete:a,custom:c,presenceAffectsLayout:h,mode:g})=>{const b=useConstant(newChildrenMap),_=reactExports.useId(),j=reactExports.useMemo(()=>({id:_,initial:e,isPresent:o,custom:c,onExitComplete:$=>{b.set($,!0);for(const _e of b.values())if(!_e)return;a&&a()},register:$=>(b.set($,!1),()=>b.delete($))}),h?void 0:[o]);return reactExports.useMemo(()=>{b.forEach(($,_e)=>b.set(_e,!1))},[o]),reactExports.useEffect(()=>{!o&&!b.size&&a&&a()},[o]),g==="popLayout"&&(s=reactExports.createElement(PopChild,{isPresent:o},s)),reactExports.createElement(PresenceContext.Provider,{value:j},s)};function newChildrenMap(){return new Map}function useUnmountEffect(s){return reactExports.useEffect(()=>()=>s(),[])}const getChildKey=s=>s.key||"";function updateChildLookup(s,e){s.forEach(o=>{const a=getChildKey(o);e.set(a,o)})}function onlyElements(s){const e=[];return reactExports.Children.forEach(s,o=>{reactExports.isValidElement(o)&&e.push(o)}),e}const AnimatePresence=({children:s,custom:e,initial:o=!0,onExitComplete:a,exitBeforeEnter:c,presenceAffectsLayout:h=!0,mode:g="sync"})=>{const b=reactExports.useContext(LayoutGroupContext).forceRender||useForceUpdate()[0],_=useIsMounted(),j=onlyElements(s);let $=j;const _e=reactExports.useRef(new Map).current,tt=reactExports.useRef($),et=reactExports.useRef(new Map).current,ut=reactExports.useRef(!0);if(useIsomorphicLayoutEffect(()=>{ut.current=!1,updateChildLookup(j,et),tt.current=$}),useUnmountEffect(()=>{ut.current=!0,et.clear(),_e.clear()}),ut.current)return reactExports.createElement(reactExports.Fragment,null,$.map(rt=>reactExports.createElement(PresenceChild,{key:getChildKey(rt),isPresent:!0,initial:o?void 0:!1,presenceAffectsLayout:h,mode:g},rt)));$=[...$];const ht=tt.current.map(getChildKey),st=j.map(getChildKey),nt=ht.length;for(let rt=0;rt<nt;rt++){const at=ht[rt];st.indexOf(at)===-1&&!_e.has(at)&&_e.set(at,void 0)}return g==="wait"&&_e.size&&($=[]),_e.forEach((rt,at)=>{if(st.indexOf(at)!==-1)return;const dt=et.get(at);if(!dt)return;const ot=ht.indexOf(at);let ct=rt;if(!ct){const vt=()=>{_e.delete(at);const mt=Array.from(et.keys()).filter(pt=>!st.includes(pt));if(mt.forEach(pt=>et.delete(pt)),tt.current=j.filter(pt=>{const Et=getChildKey(pt);return Et===at||mt.includes(Et)}),!_e.size){if(_.current===!1)return;b(),a&&a()}};ct=reactExports.createElement(PresenceChild,{key:getChildKey(dt),isPresent:!1,onExitComplete:vt,custom:e,presenceAffectsLayout:h,mode:g},dt),_e.set(at,ct)}$.splice(ot,0,ct)}),$=$.map(rt=>{const at=rt.key;return _e.has(at)?rt:reactExports.createElement(PresenceChild,{key:getChildKey(rt),isPresent:!0,presenceAffectsLayout:h,mode:g},rt)}),reactExports.createElement(reactExports.Fragment,null,_e.size?$:$.map(rt=>reactExports.cloneElement(rt)))};var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const toKebabCase=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),createLucideIcon=(s,e)=>{const o=reactExports.forwardRef(({color:a="currentColor",size:c=24,strokeWidth:h=2,absoluteStrokeWidth:g,children:b,..._},j)=>reactExports.createElement("svg",{ref:j,...defaultAttributes,width:c,height:c,stroke:a,strokeWidth:g?Number(h)*24/Number(c):h,className:`lucide lucide-${toKebabCase(s)}`,..._},[...e.map(([$,_e])=>reactExports.createElement($,_e)),...(Array.isArray(b)?b:[b])||[]]));return o.displayName=`${s}`,o};var createLucideIcon$1=createLucideIcon;const BookOpen=createLucideIcon$1("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),ChevronDown=createLucideIcon$1("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),FileText=createLucideIcon$1("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),File=createLucideIcon$1("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]),Heart=createLucideIcon$1("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),Mic=createLucideIcon$1("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),Pause=createLucideIcon$1("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),Play=createLucideIcon$1("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),Settings=createLucideIcon$1("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Shuffle=createLucideIcon$1("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]),SkipBack=createLucideIcon$1("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]),SkipForward=createLucideIcon$1("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]),Upload=createLucideIcon$1("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Volume2=createLucideIcon$1("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]),Zap=createLucideIcon$1("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);var eventEmitter={exports:{}},d$1={exports:{}},_undefined$1=void 0,is$4=function(s){return s!==_undefined$1&&s!==null},isValue$3=is$4,possibleTypes={object:!0,function:!0,undefined:!0},is$3=function(s){return isValue$3(s)?hasOwnProperty.call(possibleTypes,typeof s):!1},isObject$5=is$3,is$2=function(s){if(!isObject$5(s))return!1;try{return s.constructor?s.constructor.prototype===s:!1}catch{return!1}},isPrototype=is$2,is$1=function(s){if(typeof s!="function"||!hasOwnProperty.call(s,"length"))return!1;try{if(typeof s.length!="number"||typeof s.call!="function"||typeof s.apply!="function")return!1}catch{return!1}return!isPrototype(s)},isFunction$1=is$1,classRe=/^\s*class[\s{/}]/,functionToString=Function.prototype.toString,is=function(s){return!(!isFunction$1(s)||classRe.test(functionToString.call(s)))},isImplemented$2=function(){var s=Object.assign,e;return typeof s!="function"?!1:(e={foo:"raz"},s(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")},isImplemented$1,hasRequiredIsImplemented;function requireIsImplemented(){return hasRequiredIsImplemented||(hasRequiredIsImplemented=1,isImplemented$1=function(){try{return Object.keys("primitive"),!0}catch{return!1}}),isImplemented$1}var noop=function(){},_undefined=noop(),isValue$2=function(s){return s!==_undefined&&s!==null},shim$2,hasRequiredShim$2;function requireShim$2(){if(hasRequiredShim$2)return shim$2;hasRequiredShim$2=1;var s=isValue$2,e=Object.keys;return shim$2=function(o){return e(s(o)?Object(o):o)},shim$2}var keys,hasRequiredKeys;function requireKeys(){return hasRequiredKeys||(hasRequiredKeys=1,keys=requireIsImplemented()()?Object.keys:requireShim$2()),keys}var validValue,hasRequiredValidValue;function requireValidValue(){if(hasRequiredValidValue)return validValue;hasRequiredValidValue=1;var s=isValue$2;return validValue=function(e){if(!s(e))throw new TypeError("Cannot use null or undefined");return e},validValue}var shim$1,hasRequiredShim$1;function requireShim$1(){if(hasRequiredShim$1)return shim$1;hasRequiredShim$1=1;var s=requireKeys(),e=requireValidValue(),o=Math.max;return shim$1=function(a,c){var h,g,b=o(arguments.length,2),_;for(a=Object(e(a)),_=function(j){try{a[j]=c[j]}catch($){h||(h=$)}},g=1;g<b;++g)c=arguments[g],s(c).forEach(_);if(h!==void 0)throw h;return a},shim$1}var assign$3=isImplemented$2()?Object.assign:requireShim$1(),isValue$1=isValue$2,forEach=Array.prototype.forEach,create=Object.create,process$2=function(s,e){var o;for(o in s)e[o]=s[o]},normalizeOptions=function(s){var e=create(null);return forEach.call(arguments,function(o){isValue$1(o)&&process$2(Object(o),e)}),e},str="razdwatrzy",isImplemented=function(){return typeof str.contains!="function"?!1:str.contains("dwa")===!0&&str.contains("foo")===!1},shim,hasRequiredShim;function requireShim(){if(hasRequiredShim)return shim;hasRequiredShim=1;var s=String.prototype.indexOf;return shim=function(e){return s.call(this,e,arguments[1])>-1},shim}var contains$3=isImplemented()?String.prototype.contains:requireShim(),isValue=is$4,isPlainFunction=is,assign$2=assign$3,normalizeOpts=normalizeOptions,contains$2=contains$3,d=d$1.exports=function(s,e){var o,a,c,h,g;return arguments.length<2||typeof s!="string"?(h=e,e=s,s=null):h=arguments[2],isValue(s)?(o=contains$2.call(s,"c"),a=contains$2.call(s,"e"),c=contains$2.call(s,"w")):(o=c=!0,a=!1),g={value:e,configurable:o,enumerable:a,writable:c},h?assign$2(normalizeOpts(h),g):g};d.gs=function(s,e,o){var a,c,h,g;return typeof s!="string"?(h=o,o=e,e=s,s=null):h=arguments[3],isValue(e)?isPlainFunction(e)?isValue(o)?isPlainFunction(o)||(h=o,o=void 0):o=void 0:(h=e,e=o=void 0):e=void 0,isValue(s)?(a=contains$2.call(s,"c"),c=contains$2.call(s,"e")):(a=!0,c=!1),g={get:e,set:o,configurable:a,enumerable:c},h?assign$2(normalizeOpts(h),g):g};var dExports=d$1.exports,validCallable=function(s){if(typeof s!="function")throw new TypeError(s+" is not a function");return s};(function(s,e){var o=dExports,a=validCallable,c=Function.prototype.apply,h=Function.prototype.call,g=Object.create,b=Object.defineProperty,_=Object.defineProperties,j=Object.prototype.hasOwnProperty,$={configurable:!0,enumerable:!1,writable:!0},_e,tt,et,ut,ht,st,nt;_e=function(rt,at){var dt;return a(at),j.call(this,"__ee__")?dt=this.__ee__:(dt=$.value=g(null),b(this,"__ee__",$),$.value=null),dt[rt]?typeof dt[rt]=="object"?dt[rt].push(at):dt[rt]=[dt[rt],at]:dt[rt]=at,this},tt=function(rt,at){var dt,ot;return a(at),ot=this,_e.call(this,rt,dt=function(){et.call(ot,rt,dt),c.call(at,this,arguments)}),dt.__eeOnceListener__=at,this},et=function(rt,at){var dt,ot,ct,vt;if(a(at),!j.call(this,"__ee__"))return this;if(dt=this.__ee__,!dt[rt])return this;if(ot=dt[rt],typeof ot=="object")for(vt=0;ct=ot[vt];++vt)(ct===at||ct.__eeOnceListener__===at)&&(ot.length===2?dt[rt]=ot[vt?0:1]:ot.splice(vt,1));else(ot===at||ot.__eeOnceListener__===at)&&delete dt[rt];return this},ut=function(rt){var at,dt,ot,ct,vt;if(j.call(this,"__ee__")&&(ct=this.__ee__[rt],!!ct))if(typeof ct=="object"){for(dt=arguments.length,vt=new Array(dt-1),at=1;at<dt;++at)vt[at-1]=arguments[at];for(ct=ct.slice(),at=0;ot=ct[at];++at)c.call(ot,this,vt)}else switch(arguments.length){case 1:h.call(ct,this);break;case 2:h.call(ct,this,arguments[1]);break;case 3:h.call(ct,this,arguments[1],arguments[2]);break;default:for(dt=arguments.length,vt=new Array(dt-1),at=1;at<dt;++at)vt[at-1]=arguments[at];c.call(ct,this,vt)}},ht={on:_e,once:tt,off:et,emit:ut},st={on:o(_e),once:o(tt),off:o(et),emit:o(ut)},nt=_({},st),s.exports=e=function(rt){return rt==null?g(nt):_(Object(rt),st)},e.methods=ht})(eventEmitter,eventEmitter.exports);var eventEmitterExports=eventEmitter.exports;const EventEmitter=getDefaultExportFromCjs(eventEmitterExports);var dom$1={},conventions$2={};function find$1(s,e,o){if(o===void 0&&(o=Array.prototype),s&&typeof o.find=="function")return o.find.call(s,e);for(var a=0;a<s.length;a++)if(Object.prototype.hasOwnProperty.call(s,a)){var c=s[a];if(e.call(void 0,c,a,s))return c}}function freeze(s,e){return e===void 0&&(e=Object),e&&typeof e.freeze=="function"?e.freeze(s):s}var MIME_TYPE=freeze({HTML:"text/html",isHTML:function(s){return s===MIME_TYPE.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),NAMESPACE$3=freeze({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(s){return s===NAMESPACE$3.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});conventions$2.find=find$1;conventions$2.freeze=freeze;conventions$2.MIME_TYPE=MIME_TYPE;conventions$2.NAMESPACE=NAMESPACE$3;var conventions$1=conventions$2,find=conventions$1.find,NAMESPACE$2=conventions$1.NAMESPACE;function notEmptyString(s){return s!==""}function splitOnASCIIWhitespace(s){return s?s.split(/[\t\n\f\r ]+/).filter(notEmptyString):[]}function orderedSetReducer(s,e){return s.hasOwnProperty(e)||(s[e]=!0),s}function toOrderedSet(s){if(!s)return[];var e=splitOnASCIIWhitespace(s);return Object.keys(e.reduce(orderedSetReducer,{}))}function arrayIncludes(s){return function(e){return s&&s.indexOf(e)!==-1}}function copy$1(s,e){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o])}function _extends(s,e){var o=s.prototype;if(!(o instanceof e)){let c=function(){};var a=c;c.prototype=e.prototype,c=new c,copy$1(o,c),s.prototype=o=c}o.constructor!=s&&(typeof s!="function"&&console.error("unknown Class:"+s),o.constructor=s)}var NodeType={},ELEMENT_NODE$3=NodeType.ELEMENT_NODE=1,ATTRIBUTE_NODE=NodeType.ATTRIBUTE_NODE=2,TEXT_NODE$2=NodeType.TEXT_NODE=3,CDATA_SECTION_NODE=NodeType.CDATA_SECTION_NODE=4,ENTITY_REFERENCE_NODE=NodeType.ENTITY_REFERENCE_NODE=5,ENTITY_NODE=NodeType.ENTITY_NODE=6,PROCESSING_INSTRUCTION_NODE=NodeType.PROCESSING_INSTRUCTION_NODE=7,COMMENT_NODE=NodeType.COMMENT_NODE=8,DOCUMENT_NODE$1=NodeType.DOCUMENT_NODE=9,DOCUMENT_TYPE_NODE=NodeType.DOCUMENT_TYPE_NODE=10,DOCUMENT_FRAGMENT_NODE=NodeType.DOCUMENT_FRAGMENT_NODE=11,NOTATION_NODE=NodeType.NOTATION_NODE=12,ExceptionCode={},ExceptionMessage={};ExceptionCode.INDEX_SIZE_ERR=(ExceptionMessage[1]="Index size error",1);ExceptionCode.DOMSTRING_SIZE_ERR=(ExceptionMessage[2]="DOMString size error",2);var HIERARCHY_REQUEST_ERR=ExceptionCode.HIERARCHY_REQUEST_ERR=(ExceptionMessage[3]="Hierarchy request error",3);ExceptionCode.WRONG_DOCUMENT_ERR=(ExceptionMessage[4]="Wrong document",4);ExceptionCode.INVALID_CHARACTER_ERR=(ExceptionMessage[5]="Invalid character",5);ExceptionCode.NO_DATA_ALLOWED_ERR=(ExceptionMessage[6]="No data allowed",6);ExceptionCode.NO_MODIFICATION_ALLOWED_ERR=(ExceptionMessage[7]="No modification allowed",7);var NOT_FOUND_ERR=ExceptionCode.NOT_FOUND_ERR=(ExceptionMessage[8]="Not found",8);ExceptionCode.NOT_SUPPORTED_ERR=(ExceptionMessage[9]="Not supported",9);var INUSE_ATTRIBUTE_ERR=ExceptionCode.INUSE_ATTRIBUTE_ERR=(ExceptionMessage[10]="Attribute in use",10);ExceptionCode.INVALID_STATE_ERR=(ExceptionMessage[11]="Invalid state",11);ExceptionCode.SYNTAX_ERR=(ExceptionMessage[12]="Syntax error",12);ExceptionCode.INVALID_MODIFICATION_ERR=(ExceptionMessage[13]="Invalid modification",13);ExceptionCode.NAMESPACE_ERR=(ExceptionMessage[14]="Invalid namespace",14);ExceptionCode.INVALID_ACCESS_ERR=(ExceptionMessage[15]="Invalid access",15);function DOMException(s,e){if(e instanceof Error)var o=e;else o=this,Error.call(this,ExceptionMessage[s]),this.message=ExceptionMessage[s],Error.captureStackTrace&&Error.captureStackTrace(this,DOMException);return o.code=s,e&&(this.message=this.message+": "+e),o}DOMException.prototype=Error.prototype;copy$1(ExceptionCode,DOMException);function NodeList(){}NodeList.prototype={length:0,item:function(s){return s>=0&&s<this.length?this[s]:null},toString:function(s,e){for(var o=[],a=0;a<this.length;a++)serializeToString(this[a],o,s,e);return o.join("")},filter:function(s){return Array.prototype.filter.call(this,s)},indexOf:function(s){return Array.prototype.indexOf.call(this,s)}};function LiveNodeList(s,e){this._node=s,this._refresh=e,_updateLiveList(this)}function _updateLiveList(s){var e=s._node._inc||s._node.ownerDocument._inc;if(s._inc!==e){var o=s._refresh(s._node);if(__set__(s,"length",o.length),!s.$$length||o.length<s.$$length)for(var a=o.length;a in s;a++)Object.prototype.hasOwnProperty.call(s,a)&&delete s[a];copy$1(o,s),s._inc=e}}LiveNodeList.prototype.item=function(s){return _updateLiveList(this),this[s]||null};_extends(LiveNodeList,NodeList);function NamedNodeMap(){}function _findNodeIndex(s,e){for(var o=s.length;o--;)if(s[o]===e)return o}function _addNamedNode(s,e,o,a){if(a?e[_findNodeIndex(e,a)]=o:e[e.length++]=o,s){o.ownerElement=s;var c=s.ownerDocument;c&&(a&&_onRemoveAttribute(c,s,a),_onAddAttribute(c,s,o))}}function _removeNamedNode(s,e,o){var a=_findNodeIndex(e,o);if(a>=0){for(var c=e.length-1;a<c;)e[a]=e[++a];if(e.length=c,s){var h=s.ownerDocument;h&&(_onRemoveAttribute(h,s,o),o.ownerElement=null)}}else throw new DOMException(NOT_FOUND_ERR,new Error(s.tagName+"@"+o))}NamedNodeMap.prototype={length:0,item:NodeList.prototype.item,getNamedItem:function(s){for(var e=this.length;e--;){var o=this[e];if(o.nodeName==s)return o}},setNamedItem:function(s){var e=s.ownerElement;if(e&&e!=this._ownerElement)throw new DOMException(INUSE_ATTRIBUTE_ERR);var o=this.getNamedItem(s.nodeName);return _addNamedNode(this._ownerElement,this,s,o),o},setNamedItemNS:function(s){var e=s.ownerElement,o;if(e&&e!=this._ownerElement)throw new DOMException(INUSE_ATTRIBUTE_ERR);return o=this.getNamedItemNS(s.namespaceURI,s.localName),_addNamedNode(this._ownerElement,this,s,o),o},removeNamedItem:function(s){var e=this.getNamedItem(s);return _removeNamedNode(this._ownerElement,this,e),e},removeNamedItemNS:function(s,e){var o=this.getNamedItemNS(s,e);return _removeNamedNode(this._ownerElement,this,o),o},getNamedItemNS:function(s,e){for(var o=this.length;o--;){var a=this[o];if(a.localName==e&&a.namespaceURI==s)return a}return null}};function DOMImplementation$1(){}DOMImplementation$1.prototype={hasFeature:function(s,e){return!0},createDocument:function(s,e,o){var a=new Document;if(a.implementation=this,a.childNodes=new NodeList,a.doctype=o||null,o&&a.appendChild(o),e){var c=a.createElementNS(s,e);a.appendChild(c)}return a},createDocumentType:function(s,e,o){var a=new DocumentType;return a.name=s,a.nodeName=s,a.publicId=e||"",a.systemId=o||"",a}};function Node$1(){}Node$1.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(s,e){return _insertBefore(this,s,e)},replaceChild:function(s,e){_insertBefore(this,s,e,assertPreReplacementValidityInDocument),e&&this.removeChild(e)},removeChild:function(s){return _removeChild(this,s)},appendChild:function(s){return this.insertBefore(s,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(s){return cloneNode(this.ownerDocument||this,this,s)},normalize:function(){for(var s=this.firstChild;s;){var e=s.nextSibling;e&&e.nodeType==TEXT_NODE$2&&s.nodeType==TEXT_NODE$2?(this.removeChild(e),s.appendData(e.data)):(s.normalize(),s=e)}},isSupported:function(s,e){return this.ownerDocument.implementation.hasFeature(s,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(s){for(var e=this;e;){var o=e._nsMap;if(o){for(var a in o)if(Object.prototype.hasOwnProperty.call(o,a)&&o[a]===s)return a}e=e.nodeType==ATTRIBUTE_NODE?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(s){for(var e=this;e;){var o=e._nsMap;if(o&&s in o&&Object.prototype.hasOwnProperty.call(o,s))return o[s];e=e.nodeType==ATTRIBUTE_NODE?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(s){var e=this.lookupPrefix(s);return e==null}};function _xmlEncoder(s){return s=="<"&&"&lt;"||s==">"&&"&gt;"||s=="&"&&"&amp;"||s=='"'&&"&quot;"||"&#"+s.charCodeAt()+";"}copy$1(NodeType,Node$1);copy$1(NodeType,Node$1.prototype);function _visitNode(s,e){if(e(s))return!0;if(s=s.firstChild)do if(_visitNode(s,e))return!0;while(s=s.nextSibling)}function Document(){this.ownerDocument=this}function _onAddAttribute(s,e,o){s&&s._inc++;var a=o.namespaceURI;a===NAMESPACE$2.XMLNS&&(e._nsMap[o.prefix?o.localName:""]=o.value)}function _onRemoveAttribute(s,e,o,a){s&&s._inc++;var c=o.namespaceURI;c===NAMESPACE$2.XMLNS&&delete e._nsMap[o.prefix?o.localName:""]}function _onUpdateChild(s,e,o){if(s&&s._inc){s._inc++;var a=e.childNodes;if(o)a[a.length++]=o;else{for(var c=e.firstChild,h=0;c;)a[h++]=c,c=c.nextSibling;a.length=h,delete a[a.length]}}}function _removeChild(s,e){var o=e.previousSibling,a=e.nextSibling;return o?o.nextSibling=a:s.firstChild=a,a?a.previousSibling=o:s.lastChild=o,e.parentNode=null,e.previousSibling=null,e.nextSibling=null,_onUpdateChild(s.ownerDocument,s),e}function hasValidParentNodeType(s){return s&&(s.nodeType===Node$1.DOCUMENT_NODE||s.nodeType===Node$1.DOCUMENT_FRAGMENT_NODE||s.nodeType===Node$1.ELEMENT_NODE)}function hasInsertableNodeType(s){return s&&(isElementNode(s)||isTextNode(s)||isDocTypeNode(s)||s.nodeType===Node$1.DOCUMENT_FRAGMENT_NODE||s.nodeType===Node$1.COMMENT_NODE||s.nodeType===Node$1.PROCESSING_INSTRUCTION_NODE)}function isDocTypeNode(s){return s&&s.nodeType===Node$1.DOCUMENT_TYPE_NODE}function isElementNode(s){return s&&s.nodeType===Node$1.ELEMENT_NODE}function isTextNode(s){return s&&s.nodeType===Node$1.TEXT_NODE}function isElementInsertionPossible(s,e){var o=s.childNodes||[];if(find(o,isElementNode)||isDocTypeNode(e))return!1;var a=find(o,isDocTypeNode);return!(e&&a&&o.indexOf(a)>o.indexOf(e))}function isElementReplacementPossible(s,e){var o=s.childNodes||[];function a(h){return isElementNode(h)&&h!==e}if(find(o,a))return!1;var c=find(o,isDocTypeNode);return!(e&&c&&o.indexOf(c)>o.indexOf(e))}function assertPreInsertionValidity1to5(s,e,o){if(!hasValidParentNodeType(s))throw new DOMException(HIERARCHY_REQUEST_ERR,"Unexpected parent node type "+s.nodeType);if(o&&o.parentNode!==s)throw new DOMException(NOT_FOUND_ERR,"child not in parent");if(!hasInsertableNodeType(e)||isDocTypeNode(e)&&s.nodeType!==Node$1.DOCUMENT_NODE)throw new DOMException(HIERARCHY_REQUEST_ERR,"Unexpected node type "+e.nodeType+" for parent node type "+s.nodeType)}function assertPreInsertionValidityInDocument(s,e,o){var a=s.childNodes||[],c=e.childNodes||[];if(e.nodeType===Node$1.DOCUMENT_FRAGMENT_NODE){var h=c.filter(isElementNode);if(h.length>1||find(c,isTextNode))throw new DOMException(HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(h.length===1&&!isElementInsertionPossible(s,o))throw new DOMException(HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(isElementNode(e)&&!isElementInsertionPossible(s,o))throw new DOMException(HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(isDocTypeNode(e)){if(find(a,isDocTypeNode))throw new DOMException(HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");var g=find(a,isElementNode);if(o&&a.indexOf(g)<a.indexOf(o))throw new DOMException(HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element");if(!o&&g)throw new DOMException(HIERARCHY_REQUEST_ERR,"Doctype can not be appended since element is present")}}function assertPreReplacementValidityInDocument(s,e,o){var a=s.childNodes||[],c=e.childNodes||[];if(e.nodeType===Node$1.DOCUMENT_FRAGMENT_NODE){var h=c.filter(isElementNode);if(h.length>1||find(c,isTextNode))throw new DOMException(HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(h.length===1&&!isElementReplacementPossible(s,o))throw new DOMException(HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(isElementNode(e)&&!isElementReplacementPossible(s,o))throw new DOMException(HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(isDocTypeNode(e)){let _=function(j){return isDocTypeNode(j)&&j!==o};var b=_;if(find(a,_))throw new DOMException(HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");var g=find(a,isElementNode);if(o&&a.indexOf(g)<a.indexOf(o))throw new DOMException(HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element")}}function _insertBefore(s,e,o,a){assertPreInsertionValidity1to5(s,e,o),s.nodeType===Node$1.DOCUMENT_NODE&&(a||assertPreInsertionValidityInDocument)(s,e,o);var c=e.parentNode;if(c&&c.removeChild(e),e.nodeType===DOCUMENT_FRAGMENT_NODE){var h=e.firstChild;if(h==null)return e;var g=e.lastChild}else h=g=e;var b=o?o.previousSibling:s.lastChild;h.previousSibling=b,g.nextSibling=o,b?b.nextSibling=h:s.firstChild=h,o==null?s.lastChild=g:o.previousSibling=g;do h.parentNode=s;while(h!==g&&(h=h.nextSibling));return _onUpdateChild(s.ownerDocument||s,s),e.nodeType==DOCUMENT_FRAGMENT_NODE&&(e.firstChild=e.lastChild=null),e}function _appendSingleChild(s,e){return e.parentNode&&e.parentNode.removeChild(e),e.parentNode=s,e.previousSibling=s.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:s.firstChild=e,s.lastChild=e,_onUpdateChild(s.ownerDocument,s,e),e}Document.prototype={nodeName:"#document",nodeType:DOCUMENT_NODE$1,doctype:null,documentElement:null,_inc:1,insertBefore:function(s,e){if(s.nodeType==DOCUMENT_FRAGMENT_NODE){for(var o=s.firstChild;o;){var a=o.nextSibling;this.insertBefore(o,e),o=a}return s}return _insertBefore(this,s,e),s.ownerDocument=this,this.documentElement===null&&s.nodeType===ELEMENT_NODE$3&&(this.documentElement=s),s},removeChild:function(s){return this.documentElement==s&&(this.documentElement=null),_removeChild(this,s)},replaceChild:function(s,e){_insertBefore(this,s,e,assertPreReplacementValidityInDocument),s.ownerDocument=this,e&&this.removeChild(e),isElementNode(s)&&(this.documentElement=s)},importNode:function(s,e){return importNode(this,s,e)},getElementById:function(s){var e=null;return _visitNode(this.documentElement,function(o){if(o.nodeType==ELEMENT_NODE$3&&o.getAttribute("id")==s)return e=o,!0}),e},getElementsByClassName:function(s){var e=toOrderedSet(s);return new LiveNodeList(this,function(o){var a=[];return e.length>0&&_visitNode(o.documentElement,function(c){if(c!==o&&c.nodeType===ELEMENT_NODE$3){var h=c.getAttribute("class");if(h){var g=s===h;if(!g){var b=toOrderedSet(h);g=e.every(arrayIncludes(b))}g&&a.push(c)}}}),a})},createElement:function(s){var e=new Element$2;e.ownerDocument=this,e.nodeName=s,e.tagName=s,e.localName=s,e.childNodes=new NodeList;var o=e.attributes=new NamedNodeMap;return o._ownerElement=e,e},createDocumentFragment:function(){var s=new DocumentFragment;return s.ownerDocument=this,s.childNodes=new NodeList,s},createTextNode:function(s){var e=new Text;return e.ownerDocument=this,e.appendData(s),e},createComment:function(s){var e=new Comment;return e.ownerDocument=this,e.appendData(s),e},createCDATASection:function(s){var e=new CDATASection;return e.ownerDocument=this,e.appendData(s),e},createProcessingInstruction:function(s,e){var o=new ProcessingInstruction;return o.ownerDocument=this,o.tagName=o.nodeName=o.target=s,o.nodeValue=o.data=e,o},createAttribute:function(s){var e=new Attr;return e.ownerDocument=this,e.name=s,e.nodeName=s,e.localName=s,e.specified=!0,e},createEntityReference:function(s){var e=new EntityReference;return e.ownerDocument=this,e.nodeName=s,e},createElementNS:function(s,e){var o=new Element$2,a=e.split(":"),c=o.attributes=new NamedNodeMap;return o.childNodes=new NodeList,o.ownerDocument=this,o.nodeName=e,o.tagName=e,o.namespaceURI=s,a.length==2?(o.prefix=a[0],o.localName=a[1]):o.localName=e,c._ownerElement=o,o},createAttributeNS:function(s,e){var o=new Attr,a=e.split(":");return o.ownerDocument=this,o.nodeName=e,o.name=e,o.namespaceURI=s,o.specified=!0,a.length==2?(o.prefix=a[0],o.localName=a[1]):o.localName=e,o}};_extends(Document,Node$1);function Element$2(){this._nsMap={}}Element$2.prototype={nodeType:ELEMENT_NODE$3,hasAttribute:function(s){return this.getAttributeNode(s)!=null},getAttribute:function(s){var e=this.getAttributeNode(s);return e&&e.value||""},getAttributeNode:function(s){return this.attributes.getNamedItem(s)},setAttribute:function(s,e){var o=this.ownerDocument.createAttribute(s);o.value=o.nodeValue=""+e,this.setAttributeNode(o)},removeAttribute:function(s){var e=this.getAttributeNode(s);e&&this.removeAttributeNode(e)},appendChild:function(s){return s.nodeType===DOCUMENT_FRAGMENT_NODE?this.insertBefore(s,null):_appendSingleChild(this,s)},setAttributeNode:function(s){return this.attributes.setNamedItem(s)},setAttributeNodeNS:function(s){return this.attributes.setNamedItemNS(s)},removeAttributeNode:function(s){return this.attributes.removeNamedItem(s.nodeName)},removeAttributeNS:function(s,e){var o=this.getAttributeNodeNS(s,e);o&&this.removeAttributeNode(o)},hasAttributeNS:function(s,e){return this.getAttributeNodeNS(s,e)!=null},getAttributeNS:function(s,e){var o=this.getAttributeNodeNS(s,e);return o&&o.value||""},setAttributeNS:function(s,e,o){var a=this.ownerDocument.createAttributeNS(s,e);a.value=a.nodeValue=""+o,this.setAttributeNode(a)},getAttributeNodeNS:function(s,e){return this.attributes.getNamedItemNS(s,e)},getElementsByTagName:function(s){return new LiveNodeList(this,function(e){var o=[];return _visitNode(e,function(a){a!==e&&a.nodeType==ELEMENT_NODE$3&&(s==="*"||a.tagName==s)&&o.push(a)}),o})},getElementsByTagNameNS:function(s,e){return new LiveNodeList(this,function(o){var a=[];return _visitNode(o,function(c){c!==o&&c.nodeType===ELEMENT_NODE$3&&(s==="*"||c.namespaceURI===s)&&(e==="*"||c.localName==e)&&a.push(c)}),a})}};Document.prototype.getElementsByTagName=Element$2.prototype.getElementsByTagName;Document.prototype.getElementsByTagNameNS=Element$2.prototype.getElementsByTagNameNS;_extends(Element$2,Node$1);function Attr(){}Attr.prototype.nodeType=ATTRIBUTE_NODE;_extends(Attr,Node$1);function CharacterData(){}CharacterData.prototype={data:"",substringData:function(s,e){return this.data.substring(s,s+e)},appendData:function(s){s=this.data+s,this.nodeValue=this.data=s,this.length=s.length},insertData:function(s,e){this.replaceData(s,0,e)},appendChild:function(s){throw new Error(ExceptionMessage[HIERARCHY_REQUEST_ERR])},deleteData:function(s,e){this.replaceData(s,e,"")},replaceData:function(s,e,o){var a=this.data.substring(0,s),c=this.data.substring(s+e);o=a+o+c,this.nodeValue=this.data=o,this.length=o.length}};_extends(CharacterData,Node$1);function Text(){}Text.prototype={nodeName:"#text",nodeType:TEXT_NODE$2,splitText:function(s){var e=this.data,o=e.substring(s);e=e.substring(0,s),this.data=this.nodeValue=e,this.length=e.length;var a=this.ownerDocument.createTextNode(o);return this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling),a}};_extends(Text,CharacterData);function Comment(){}Comment.prototype={nodeName:"#comment",nodeType:COMMENT_NODE};_extends(Comment,CharacterData);function CDATASection(){}CDATASection.prototype={nodeName:"#cdata-section",nodeType:CDATA_SECTION_NODE};_extends(CDATASection,CharacterData);function DocumentType(){}DocumentType.prototype.nodeType=DOCUMENT_TYPE_NODE;_extends(DocumentType,Node$1);function Notation(){}Notation.prototype.nodeType=NOTATION_NODE;_extends(Notation,Node$1);function Entity(){}Entity.prototype.nodeType=ENTITY_NODE;_extends(Entity,Node$1);function EntityReference(){}EntityReference.prototype.nodeType=ENTITY_REFERENCE_NODE;_extends(EntityReference,Node$1);function DocumentFragment(){}DocumentFragment.prototype.nodeName="#document-fragment";DocumentFragment.prototype.nodeType=DOCUMENT_FRAGMENT_NODE;_extends(DocumentFragment,Node$1);function ProcessingInstruction(){}ProcessingInstruction.prototype.nodeType=PROCESSING_INSTRUCTION_NODE;_extends(ProcessingInstruction,Node$1);function XMLSerializer$1(){}XMLSerializer$1.prototype.serializeToString=function(s,e,o){return nodeSerializeToString.call(s,e,o)};Node$1.prototype.toString=nodeSerializeToString;function nodeSerializeToString(s,e){var o=[],a=this.nodeType==9&&this.documentElement||this,c=a.prefix,h=a.namespaceURI;if(h&&c==null){var c=a.lookupPrefix(h);if(c==null)var g=[{namespace:h,prefix:null}]}return serializeToString(this,o,s,e,g),o.join("")}function needNamespaceDefine(s,e,o){var a=s.prefix||"",c=s.namespaceURI;if(!c||a==="xml"&&c===NAMESPACE$2.XML||c===NAMESPACE$2.XMLNS)return!1;for(var h=o.length;h--;){var g=o[h];if(g.prefix===a)return g.namespace!==c}return!0}function addSerializedAttribute(s,e,o){s.push(" ",e,'="',o.replace(/[<&"]/g,_xmlEncoder),'"')}function serializeToString(s,e,o,a,c){if(c||(c=[]),a)if(s=a(s),s){if(typeof s=="string"){e.push(s);return}}else return;switch(s.nodeType){case ELEMENT_NODE$3:var h=s.attributes,g=h.length,nt=s.firstChild,b=s.tagName;o=NAMESPACE$2.isHTML(s.namespaceURI)||o;var _=b;if(!o&&!s.prefix&&s.namespaceURI){for(var j,$=0;$<h.length;$++)if(h.item($).name==="xmlns"){j=h.item($).value;break}if(!j)for(var _e=c.length-1;_e>=0;_e--){var tt=c[_e];if(tt.prefix===""&&tt.namespace===s.namespaceURI){j=tt.namespace;break}}if(j!==s.namespaceURI)for(var _e=c.length-1;_e>=0;_e--){var tt=c[_e];if(tt.namespace===s.namespaceURI){tt.prefix&&(_=tt.prefix+":"+b);break}}}e.push("<",_);for(var et=0;et<g;et++){var ut=h.item(et);ut.prefix=="xmlns"?c.push({prefix:ut.localName,namespace:ut.value}):ut.nodeName=="xmlns"&&c.push({prefix:"",namespace:ut.value})}for(var et=0;et<g;et++){var ut=h.item(et);if(needNamespaceDefine(ut,o,c)){var ht=ut.prefix||"",st=ut.namespaceURI;addSerializedAttribute(e,ht?"xmlns:"+ht:"xmlns",st),c.push({prefix:ht,namespace:st})}serializeToString(ut,e,o,a,c)}if(b===_&&needNamespaceDefine(s,o,c)){var ht=s.prefix||"",st=s.namespaceURI;addSerializedAttribute(e,ht?"xmlns:"+ht:"xmlns",st),c.push({prefix:ht,namespace:st})}if(nt||o&&!/^(?:meta|link|img|br|hr|input)$/i.test(b)){if(e.push(">"),o&&/^script$/i.test(b))for(;nt;)nt.data?e.push(nt.data):serializeToString(nt,e,o,a,c.slice()),nt=nt.nextSibling;else for(;nt;)serializeToString(nt,e,o,a,c.slice()),nt=nt.nextSibling;e.push("</",_,">")}else e.push("/>");return;case DOCUMENT_NODE$1:case DOCUMENT_FRAGMENT_NODE:for(var nt=s.firstChild;nt;)serializeToString(nt,e,o,a,c.slice()),nt=nt.nextSibling;return;case ATTRIBUTE_NODE:return addSerializedAttribute(e,s.name,s.value);case TEXT_NODE$2:return e.push(s.data.replace(/[<&]/g,_xmlEncoder).replace(/]]>/g,"]]&gt;"));case CDATA_SECTION_NODE:return e.push("<![CDATA[",s.data,"]]>");case COMMENT_NODE:return e.push("<!--",s.data,"-->");case DOCUMENT_TYPE_NODE:var rt=s.publicId,at=s.systemId;if(e.push("<!DOCTYPE ",s.name),rt)e.push(" PUBLIC ",rt),at&&at!="."&&e.push(" ",at),e.push(">");else if(at&&at!=".")e.push(" SYSTEM ",at,">");else{var dt=s.internalSubset;dt&&e.push(" [",dt,"]"),e.push(">")}return;case PROCESSING_INSTRUCTION_NODE:return e.push("<?",s.target," ",s.data,"?>");case ENTITY_REFERENCE_NODE:return e.push("&",s.nodeName,";");default:e.push("??",s.nodeName)}}function importNode(s,e,o){var a;switch(e.nodeType){case ELEMENT_NODE$3:a=e.cloneNode(!1),a.ownerDocument=s;case DOCUMENT_FRAGMENT_NODE:break;case ATTRIBUTE_NODE:o=!0;break}if(a||(a=e.cloneNode(!1)),a.ownerDocument=s,a.parentNode=null,o)for(var c=e.firstChild;c;)a.appendChild(importNode(s,c,o)),c=c.nextSibling;return a}function cloneNode(s,e,o){var a=new e.constructor;for(var c in e)if(Object.prototype.hasOwnProperty.call(e,c)){var h=e[c];typeof h!="object"&&h!=a[c]&&(a[c]=h)}switch(e.childNodes&&(a.childNodes=new NodeList),a.ownerDocument=s,a.nodeType){case ELEMENT_NODE$3:var g=e.attributes,b=a.attributes=new NamedNodeMap,_=g.length;b._ownerElement=a;for(var j=0;j<_;j++)a.setAttributeNode(cloneNode(s,g.item(j),!0));break;case ATTRIBUTE_NODE:o=!0}if(o)for(var $=e.firstChild;$;)a.appendChild(cloneNode(s,$,o)),$=$.nextSibling;return a}function __set__(s,e,o){s[e]=o}try{if(Object.defineProperty){let s=function(e){switch(e.nodeType){case ELEMENT_NODE$3:case DOCUMENT_FRAGMENT_NODE:var o=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&o.push(s(e)),e=e.nextSibling;return o.join("");default:return e.nodeValue}};var getTextContent=s;Object.defineProperty(LiveNodeList.prototype,"length",{get:function(){return _updateLiveList(this),this.$$length}}),Object.defineProperty(Node$1.prototype,"textContent",{get:function(){return s(this)},set:function(e){switch(this.nodeType){case ELEMENT_NODE$3:case DOCUMENT_FRAGMENT_NODE:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),__set__=function(e,o,a){e["$$"+o]=a}}}catch{}dom$1.DocumentType=DocumentType;dom$1.DOMException=DOMException;dom$1.DOMImplementation=DOMImplementation$1;dom$1.Element=Element$2;dom$1.Node=Node$1;dom$1.NodeList=NodeList;dom$1.XMLSerializer=XMLSerializer$1;var domParser={},entities$3={};(function(s){var e=conventions$2.freeze;s.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),s.HTML_ENTITIES=e({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),s.entityMap=s.HTML_ENTITIES})(entities$3);var sax$1={},NAMESPACE$1=conventions$2.NAMESPACE,nameStartChar=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,nameChar=new RegExp("[\\-\\.0-9"+nameStartChar.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),tagNamePattern=new RegExp("^"+nameStartChar.source+nameChar.source+"*(?::"+nameStartChar.source+nameChar.source+"*)?$"),S_TAG=0,S_ATTR=1,S_ATTR_SPACE=2,S_EQ=3,S_ATTR_NOQUOT_VALUE=4,S_ATTR_END=5,S_TAG_SPACE=6,S_TAG_CLOSE=7;function ParseError$1(s,e){this.message=s,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,ParseError$1)}ParseError$1.prototype=new Error;ParseError$1.prototype.name=ParseError$1.name;function XMLReader$1(){}XMLReader$1.prototype={parse:function(s,e,o){var a=this.domBuilder;a.startDocument(),_copy(e,e={}),parse$2(s,e,o,a,this.errorHandler),a.endDocument()}};function parse$2(s,e,o,a,c){function h(Vt){if(Vt>65535){Vt-=65536;var Zt=55296+(Vt>>10),It=56320+(Vt&1023);return String.fromCharCode(Zt,It)}else return String.fromCharCode(Vt)}function g(Vt){var Zt=Vt.slice(1,-1);return Zt in o?o[Zt]:Zt.charAt(0)==="#"?h(parseInt(Zt.substr(1).replace("x","0x"))):(c.error("entity not found:"+Vt),Vt)}function b(Vt){if(Vt>ht){var Zt=s.substring(ht,Vt).replace(/&#?\w+;/g,g);tt&&_(ht),a.characters(Zt,0,Vt-ht),ht=Vt}}function _(Vt,Zt){for(;Vt>=$&&(Zt=_e.exec(s));)j=Zt.index,$=j+Zt[0].length,tt.lineNumber++;tt.columnNumber=Vt-j+1}for(var j=0,$=0,_e=/.*(?:\r\n?|\n)|.*$/g,tt=a.locator,et=[{currentNSMap:e}],ut={},ht=0;;){try{var st=s.indexOf("<",ht);if(st<0){if(!s.substr(ht).match(/^\s*$/)){var nt=a.doc,rt=nt.createTextNode(s.substr(ht));nt.appendChild(rt),a.currentElement=rt}return}switch(st>ht&&b(st),s.charAt(st+1)){case"/":var Ct=s.indexOf(">",st+3),at=s.substring(st+2,Ct).replace(/[ \t\n\r]+$/g,""),dt=et.pop();Ct<0?(at=s.substring(st+2).replace(/[\s<].*/,""),c.error("end tag name: "+at+" is not complete:"+dt.tagName),Ct=st+1+at.length):at.match(/\s</)&&(at=at.replace(/[\s<].*/,""),c.error("end tag name: "+at+" maybe not complete"),Ct=st+1+at.length);var ot=dt.localNSMap,ct=dt.tagName==at,vt=ct||dt.tagName&&dt.tagName.toLowerCase()==at.toLowerCase();if(vt){if(a.endElement(dt.uri,dt.localName,at),ot)for(var mt in ot)Object.prototype.hasOwnProperty.call(ot,mt)&&a.endPrefixMapping(mt);ct||c.fatalError("end tag name: "+at+" is not match the current start tagName:"+dt.tagName)}else et.push(dt);Ct++;break;case"?":tt&&_(st),Ct=parseInstruction(s,st,a);break;case"!":tt&&_(st),Ct=parseDCC(s,st,a,c);break;default:tt&&_(st);var pt=new ElementAttributes,Et=et[et.length-1].currentNSMap,Ct=parseElementStartPart(s,st,pt,Et,g,c),Nt=pt.length;if(!pt.closed&&fixSelfClosed(s,Ct,pt.tagName,ut)&&(pt.closed=!0,o.nbsp||c.warning("unclosed xml attribute")),tt&&Nt){for(var Ut=copyLocator(tt,{}),Tt=0;Tt<Nt;Tt++){var qt=pt[Tt];_(qt.offset),qt.locator=copyLocator(tt,{})}a.locator=Ut,appendElement$1(pt,a,Et)&&et.push(pt),a.locator=tt}else appendElement$1(pt,a,Et)&&et.push(pt);NAMESPACE$1.isHTML(pt.uri)&&!pt.closed?Ct=parseHtmlSpecialContent(s,Ct,pt.tagName,g,a):Ct++}}catch(Vt){if(Vt instanceof ParseError$1)throw Vt;c.error("element parse error: "+Vt),Ct=-1}Ct>ht?ht=Ct:b(Math.max(st,ht)+1)}}function copyLocator(s,e){return e.lineNumber=s.lineNumber,e.columnNumber=s.columnNumber,e}function parseElementStartPart(s,e,o,a,c,h){function g(tt,et,ut){o.attributeNames.hasOwnProperty(tt)&&h.fatalError("Attribute "+tt+" redefined"),o.addValue(tt,et,ut)}for(var b,_,j=++e,$=S_TAG;;){var _e=s.charAt(j);switch(_e){case"=":if($===S_ATTR)b=s.slice(e,j),$=S_EQ;else if($===S_ATTR_SPACE)$=S_EQ;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if($===S_EQ||$===S_ATTR)if($===S_ATTR&&(h.warning('attribute value must after "="'),b=s.slice(e,j)),e=j+1,j=s.indexOf(_e,e),j>0)_=s.slice(e,j).replace(/&#?\w+;/g,c),g(b,_,e-1),$=S_ATTR_END;else throw new Error("attribute value no end '"+_e+"' match");else if($==S_ATTR_NOQUOT_VALUE)_=s.slice(e,j).replace(/&#?\w+;/g,c),g(b,_,e),h.warning('attribute "'+b+'" missed start quot('+_e+")!!"),e=j+1,$=S_ATTR_END;else throw new Error('attribute value must after "="');break;case"/":switch($){case S_TAG:o.setTagName(s.slice(e,j));case S_ATTR_END:case S_TAG_SPACE:case S_TAG_CLOSE:$=S_TAG_CLOSE,o.closed=!0;case S_ATTR_NOQUOT_VALUE:case S_ATTR:break;case S_ATTR_SPACE:o.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return h.error("unexpected end of input"),$==S_TAG&&o.setTagName(s.slice(e,j)),j;case">":switch($){case S_TAG:o.setTagName(s.slice(e,j));case S_ATTR_END:case S_TAG_SPACE:case S_TAG_CLOSE:break;case S_ATTR_NOQUOT_VALUE:case S_ATTR:_=s.slice(e,j),_.slice(-1)==="/"&&(o.closed=!0,_=_.slice(0,-1));case S_ATTR_SPACE:$===S_ATTR_SPACE&&(_=b),$==S_ATTR_NOQUOT_VALUE?(h.warning('attribute "'+_+'" missed quot(")!'),g(b,_.replace(/&#?\w+;/g,c),e)):((!NAMESPACE$1.isHTML(a[""])||!_.match(/^(?:disabled|checked|selected)$/i))&&h.warning('attribute "'+_+'" missed value!! "'+_+'" instead!!'),g(_,_,e));break;case S_EQ:throw new Error("attribute value missed!!")}return j;case"":_e=" ";default:if(_e<=" ")switch($){case S_TAG:o.setTagName(s.slice(e,j)),$=S_TAG_SPACE;break;case S_ATTR:b=s.slice(e,j),$=S_ATTR_SPACE;break;case S_ATTR_NOQUOT_VALUE:var _=s.slice(e,j).replace(/&#?\w+;/g,c);h.warning('attribute "'+_+'" missed quot(")!!'),g(b,_,e);case S_ATTR_END:$=S_TAG_SPACE;break}else switch($){case S_ATTR_SPACE:o.tagName,(!NAMESPACE$1.isHTML(a[""])||!b.match(/^(?:disabled|checked|selected)$/i))&&h.warning('attribute "'+b+'" missed value!! "'+b+'" instead2!!'),g(b,b,e),e=j,$=S_ATTR;break;case S_ATTR_END:h.warning('attribute space is required"'+b+'"!!');case S_TAG_SPACE:$=S_ATTR,e=j;break;case S_EQ:$=S_ATTR_NOQUOT_VALUE,e=j;break;case S_TAG_CLOSE:throw new Error("elements closed character '/' and '>' must be connected to")}}j++}}function appendElement$1(s,e,o){for(var a=s.tagName,c=null,_e=s.length;_e--;){var h=s[_e],g=h.qName,b=h.value,tt=g.indexOf(":");if(tt>0)var _=h.prefix=g.slice(0,tt),j=g.slice(tt+1),$=_==="xmlns"&&j;else j=g,_=null,$=g==="xmlns"&&"";h.localName=j,$!==!1&&(c==null&&(c={},_copy(o,o={})),o[$]=c[$]=b,h.uri=NAMESPACE$1.XMLNS,e.startPrefixMapping($,b))}for(var _e=s.length;_e--;){h=s[_e];var _=h.prefix;_&&(_==="xml"&&(h.uri=NAMESPACE$1.XML),_!=="xmlns"&&(h.uri=o[_||""]))}var tt=a.indexOf(":");tt>0?(_=s.prefix=a.slice(0,tt),j=s.localName=a.slice(tt+1)):(_=null,j=s.localName=a);var et=s.uri=o[_||""];if(e.startElement(et,j,a,s),s.closed){if(e.endElement(et,j,a),c)for(_ in c)Object.prototype.hasOwnProperty.call(c,_)&&e.endPrefixMapping(_)}else return s.currentNSMap=o,s.localNSMap=c,!0}function parseHtmlSpecialContent(s,e,o,a,c){if(/^(?:script|textarea)$/i.test(o)){var h=s.indexOf("</"+o+">",e),g=s.substring(e+1,h);if(/[&<]/.test(g))return/^script$/i.test(o)?(c.characters(g,0,g.length),h):(g=g.replace(/&#?\w+;/g,a),c.characters(g,0,g.length),h)}return e+1}function fixSelfClosed(s,e,o,a){var c=a[o];return c==null&&(c=s.lastIndexOf("</"+o+">"),c<e&&(c=s.lastIndexOf("</"+o)),a[o]=c),c<e}function _copy(s,e){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o])}function parseDCC(s,e,o,a){var c=s.charAt(e+2);switch(c){case"-":if(s.charAt(e+3)==="-"){var h=s.indexOf("-->",e+4);return h>e?(o.comment(s,e+4,h-e-4),h+3):(a.error("Unclosed comment"),-1)}else return-1;default:if(s.substr(e+3,6)=="CDATA["){var h=s.indexOf("]]>",e+9);return o.startCDATA(),o.characters(s,e+9,h-e-9),o.endCDATA(),h+3}var g=split(s,e),b=g.length;if(b>1&&/!doctype/i.test(g[0][0])){var _=g[1][0],j=!1,$=!1;b>3&&(/^public$/i.test(g[2][0])?(j=g[3][0],$=b>4&&g[4][0]):/^system$/i.test(g[2][0])&&($=g[3][0]));var _e=g[b-1];return o.startDTD(_,j,$),o.endDTD(),_e.index+_e[0].length}}return-1}function parseInstruction(s,e,o){var a=s.indexOf("?>",e);if(a){var c=s.substring(e,a).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return c?(c[0].length,o.processingInstruction(c[1],c[2]),a+2):-1}return-1}function ElementAttributes(){this.attributeNames={}}ElementAttributes.prototype={setTagName:function(s){if(!tagNamePattern.test(s))throw new Error("invalid tagName:"+s);this.tagName=s},addValue:function(s,e,o){if(!tagNamePattern.test(s))throw new Error("invalid attribute:"+s);this.attributeNames[s]=this.length,this[this.length++]={qName:s,value:e,offset:o}},length:0,getLocalName:function(s){return this[s].localName},getLocator:function(s){return this[s].locator},getQName:function(s){return this[s].qName},getURI:function(s){return this[s].uri},getValue:function(s){return this[s].value}};function split(s,e){var o,a=[],c=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(c.lastIndex=e,c.exec(s);o=c.exec(s);)if(a.push(o),o[1])return a}sax$1.XMLReader=XMLReader$1;sax$1.ParseError=ParseError$1;var conventions=conventions$2,dom=dom$1,entities$2=entities$3,sax=sax$1,DOMImplementation=dom.DOMImplementation,NAMESPACE=conventions.NAMESPACE,ParseError=sax.ParseError,XMLReader=sax.XMLReader;function DOMParser$2(s){this.options=s||{locator:{}}}DOMParser$2.prototype.parseFromString=function(s,e){var o=this.options,a=new XMLReader,c=o.domBuilder||new DOMHandler,h=o.errorHandler,g=o.locator,b=o.xmlns||{},_=/\/x?html?$/.test(e),j=_?entities$2.HTML_ENTITIES:entities$2.XML_ENTITIES;return g&&c.setDocumentLocator(g),a.errorHandler=buildErrorHandler(h,c,g),a.domBuilder=o.domBuilder||c,_&&(b[""]=NAMESPACE.HTML),b.xml=b.xml||NAMESPACE.XML,s&&typeof s=="string"?a.parse(s,b,j):a.errorHandler.error("invalid doc source"),c.doc};function buildErrorHandler(s,e,o){if(!s){if(e instanceof DOMHandler)return e;s=e}var a={},c=s instanceof Function;o=o||{};function h(g){var b=s[g];!b&&c&&(b=s.length==2?function(_){s(g,_)}:s),a[g]=b&&function(_){b("[xmldom "+g+"]	"+_+_locator(o))}||function(){}}return h("warning"),h("error"),h("fatalError"),a}function DOMHandler(){this.cdata=!1}function position(s,e){e.lineNumber=s.lineNumber,e.columnNumber=s.columnNumber}DOMHandler.prototype={startDocument:function(){this.doc=new DOMImplementation().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(s,e,o,a){var c=this.doc,h=c.createElementNS(s,o||e),g=a.length;appendElement(this,h),this.currentElement=h,this.locator&&position(this.locator,h);for(var b=0;b<g;b++){var s=a.getURI(b),_=a.getValue(b),o=a.getQName(b),j=c.createAttributeNS(s,o);this.locator&&position(a.getLocator(b),j),j.value=j.nodeValue=_,h.setAttributeNode(j)}},endElement:function(s,e,o){var a=this.currentElement;a.tagName,this.currentElement=a.parentNode},startPrefixMapping:function(s,e){},endPrefixMapping:function(s){},processingInstruction:function(s,e){var o=this.doc.createProcessingInstruction(s,e);this.locator&&position(this.locator,o),appendElement(this,o)},ignorableWhitespace:function(s,e,o){},characters:function(s,e,o){if(s=_toString.apply(this,arguments),s){if(this.cdata)var a=this.doc.createCDATASection(s);else var a=this.doc.createTextNode(s);this.currentElement?this.currentElement.appendChild(a):/^\s*$/.test(s)&&this.doc.appendChild(a),this.locator&&position(this.locator,a)}},skippedEntity:function(s){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(s){(this.locator=s)&&(s.lineNumber=0)},comment:function(s,e,o){s=_toString.apply(this,arguments);var a=this.doc.createComment(s);this.locator&&position(this.locator,a),appendElement(this,a)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(s,e,o){var a=this.doc.implementation;if(a&&a.createDocumentType){var c=a.createDocumentType(s,e,o);this.locator&&position(this.locator,c),appendElement(this,c),this.doc.doctype=c}},warning:function(s){console.warn("[xmldom warning]	"+s,_locator(this.locator))},error:function(s){console.error("[xmldom error]	"+s,_locator(this.locator))},fatalError:function(s){throw new ParseError(s,this.locator)}};function _locator(s){if(s)return`
@`+(s.systemId||"")+"#[line:"+s.lineNumber+",col:"+s.columnNumber+"]"}function _toString(s,e,o){return typeof s=="string"?s.substr(e,o):s.length>=e+o||e?new java.lang.String(s,e,o)+"":s}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(s){DOMHandler.prototype[s]=function(){return null}});function appendElement(s,e){s.currentElement?s.currentElement.appendChild(e):s.doc.appendChild(e)}domParser.__DOMHandler=DOMHandler;domParser.DOMParser=DOMParser$2;domParser.DOMImplementation=dom.DOMImplementation;domParser.XMLSerializer=dom.XMLSerializer;var DOMParser$1=domParser.DOMParser;const requestAnimationFrame$1=typeof window<"u"?window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame:!1,ELEMENT_NODE$2=1,TEXT_NODE$1=3,_URL=typeof URL<"u"?URL:typeof window<"u"?window.URL||window.webkitURL||window.mozURL:void 0;function uuid(){var s=new Date().getTime(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){var a=(s+Math.random()*16)%16|0;return s=Math.floor(s/16),(o=="x"?a:a&7|8).toString(16)});return e}function documentHeight(){return Math.max(document.documentElement.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight)}function isElement(s){return!!(s&&s.nodeType==1)}function isNumber(s){return!isNaN(parseFloat(s))&&isFinite(s)}function isFloat(s){let e=parseFloat(s);return isNumber(s)===!1?!1:typeof s=="string"&&s.indexOf(".")>-1?!0:Math.floor(e)!==e}function prefixed(s){var e=["Webkit","webkit","Moz","O","ms"],o=["-webkit-","-webkit-","-moz-","-o-","-ms-"],a=s.toLowerCase(),c=e.length;if(typeof document>"u"||typeof document.body.style[a]<"u")return s;for(var h=0;h<c;h++)if(typeof document.body.style[o[h]+a]<"u")return o[h]+a;return s}function defaults(s){for(var e=1,o=arguments.length;e<o;e++){var a=arguments[e];for(var c in a)s[c]===void 0&&(s[c]=a[c])}return s}function extend(s){var e=[].slice.call(arguments,1);return e.forEach(function(o){o&&Object.getOwnPropertyNames(o).forEach(function(a){Object.defineProperty(s,a,Object.getOwnPropertyDescriptor(o,a))})}),s}function insert(s,e,o){var a=locationOf(s,e,o);return e.splice(a,0,s),a}function locationOf(s,e,o,a,c){var h=a||0,g=c||e.length,b=parseInt(h+(g-h)/2),_;return o||(o=function(j,$){if(j>$)return 1;if(j<$)return-1;if(j==$)return 0}),g-h<=0?b:(_=o(e[b],s),g-h===1?_>=0?b:b+1:_===0?b:_===-1?locationOf(s,e,o,b,g):locationOf(s,e,o,h,b))}function indexOfSorted(s,e,o,a,c){var h=a||0,g=c||e.length,b=parseInt(h+(g-h)/2),_;return o||(o=function(j,$){if(j>$)return 1;if(j<$)return-1;if(j==$)return 0}),g-h<=0?-1:(_=o(e[b],s),g-h===1?_===0?b:-1:_===0?b:_===-1?indexOfSorted(s,e,o,b,g):indexOfSorted(s,e,o,h,b))}function bounds(s){var e=window.getComputedStyle(s),o=["width","paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"],a=["height","paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"],c=0,h=0;return o.forEach(function(g){c+=parseFloat(e[g])||0}),a.forEach(function(g){h+=parseFloat(e[g])||0}),{height:h,width:c}}function borders(s){var e=window.getComputedStyle(s),o=["paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"],a=["paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"],c=0,h=0;return o.forEach(function(g){c+=parseFloat(e[g])||0}),a.forEach(function(g){h+=parseFloat(e[g])||0}),{height:h,width:c}}function nodeBounds(s){let e,o=s.ownerDocument;if(s.nodeType==Node.TEXT_NODE){let a=o.createRange();a.selectNodeContents(s),e=a.getBoundingClientRect()}else e=s.getBoundingClientRect();return e}function windowBounds(){var s=window.innerWidth,e=window.innerHeight;return{top:0,left:0,right:s,bottom:e,width:s,height:e}}function indexOfNode(s,e){for(var o=s.parentNode,a=o.childNodes,c,h=-1,g=0;g<a.length&&(c=a[g],c.nodeType===e&&h++,c!=s);g++);return h}function indexOfTextNode(s){return indexOfNode(s,TEXT_NODE$1)}function indexOfElementNode(s){return indexOfNode(s,ELEMENT_NODE$2)}function isXml(s){return["xml","opf","ncx"].indexOf(s)>-1}function createBlob(s,e){return new Blob([s],{type:e})}function createBlobUrl(s,e){var o,a=createBlob(s,e);return o=_URL.createObjectURL(a),o}function revokeBlobUrl(s){return _URL.revokeObjectURL(s)}function createBase64Url(s,e){var o,a;if(typeof s=="string")return o=btoa(s),a="data:"+e+";base64,"+o,a}function type(s){return Object.prototype.toString.call(s).slice(8,-1)}function parse$1(s,e,o){var a,c;return typeof DOMParser>"u"||o?c=DOMParser$1:c=DOMParser,s.charCodeAt(0)===65279&&(s=s.slice(1)),a=new c().parseFromString(s,e),a}function qs(s,e){var o;if(!s)throw new Error("No Element Provided");if(typeof s.querySelector<"u")return s.querySelector(e);if(o=s.getElementsByTagName(e),o.length)return o[0]}function qsa(s,e){return typeof s.querySelector<"u"?s.querySelectorAll(e):s.getElementsByTagName(e)}function qsp(s,e,o){var a,c;if(typeof s.querySelector<"u"){e+="[";for(var h in o)e+=h+"~='"+o[h]+"'";return e+="]",s.querySelector(e)}else if(a=s.getElementsByTagName(e),c=Array.prototype.slice.call(a,0).filter(function(g){for(var b in o)if(g.getAttribute(b)===o[b])return!0;return!1}),c)return c[0]}function sprint(s,e){var o=s.ownerDocument||s;typeof o.createTreeWalker<"u"?treeWalker(s,e,NodeFilter.SHOW_TEXT):walk(s,function(a){a&&a.nodeType===3&&e(a)})}function treeWalker(s,e,o){var a=document.createTreeWalker(s,o,null,!1);let c;for(;c=a.nextNode();)e(c)}function walk(s,e){if(e(s))return!0;if(s=s.firstChild,s)do{if(walk(s,e))return!0;s=s.nextSibling}while(s)}function blob2base64(s){return new Promise(function(e,o){var a=new FileReader;a.readAsDataURL(s),a.onloadend=function(){e(a.result)}})}function defer(){this.resolve=null,this.reject=null,this.id=uuid(),this.promise=new Promise((s,e)=>{this.resolve=s,this.reject=e}),Object.freeze(this)}function querySelectorByType(s,e,o){var a;if(typeof s.querySelector<"u"&&(a=s.querySelector(`${e}[*|type="${o}"]`)),!a||a.length===0){a=qsa(s,e);for(var c=0;c<a.length;c++)if(a[c].getAttributeNS("http://www.idpf.org/2007/ops","type")===o||a[c].getAttribute("epub:type")===o)return a[c]}else return a}function findChildren(s){for(var e=[],o=s.childNodes,a=0;a<o.length;a++){let c=o[a];c.nodeType===1&&e.push(c)}return e}function parents(s){for(var e=[s];s;s=s.parentNode)e.unshift(s);return e}function filterChildren(s,e,o){for(var a=[],c=s.childNodes,h=0;h<c.length;h++){let g=c[h];if(g.nodeType===1&&g.nodeName.toLowerCase()===e){if(o)return g;a.push(g)}}if(!o)return a}function getParentByTagName(s,e){let o;if(!(s===null||e===""))for(o=s.parentNode;o.nodeType===1;){if(o.tagName.toLowerCase()===e)return o;o=o.parentNode}}class RangeObject{constructor(){this.collapsed=!1,this.commonAncestorContainer=void 0,this.endContainer=void 0,this.endOffset=void 0,this.startContainer=void 0,this.startOffset=void 0}setStart(e,o){this.startContainer=e,this.startOffset=o,this.endContainer?this.commonAncestorContainer=this._commonAncestorContainer():this.collapse(!0),this._checkCollapsed()}setEnd(e,o){this.endContainer=e,this.endOffset=o,this.startContainer?(this.collapsed=!1,this.commonAncestorContainer=this._commonAncestorContainer()):this.collapse(!1),this._checkCollapsed()}collapse(e){this.collapsed=!0,e?(this.endContainer=this.startContainer,this.endOffset=this.startOffset,this.commonAncestorContainer=this.startContainer.parentNode):(this.startContainer=this.endContainer,this.startOffset=this.endOffset,this.commonAncestorContainer=this.endOffset.parentNode)}selectNode(e){let o=e.parentNode,a=Array.prototype.indexOf.call(o.childNodes,e);this.setStart(o,a),this.setEnd(o,a+1)}selectNodeContents(e){e.childNodes[e.childNodes-1];let o=e.nodeType===3?e.textContent.length:parent.childNodes.length;this.setStart(e,0),this.setEnd(e,o)}_commonAncestorContainer(e,o){var a=parents(e||this.startContainer),c=parents(o||this.endContainer);if(a[0]==c[0]){for(var h=0;h<a.length;h++)if(a[h]!=c[h])return a[h-1]}}_checkCollapsed(){this.startContainer===this.endContainer&&this.startOffset===this.endOffset?this.collapsed=!0:this.collapsed=!1}toString(){}}const utils$2=Object.freeze(Object.defineProperty({__proto__:null,RangeObject,blob2base64,borders,bounds,createBase64Url,createBlob,createBlobUrl,defaults,defer,documentHeight,extend,filterChildren,findChildren,getParentByTagName,indexOfElementNode,indexOfNode,indexOfSorted,indexOfTextNode,insert,isElement,isFloat,isNumber,isXml,locationOf,nodeBounds,parents,parse:parse$1,prefixed,qs,qsa,qsp,querySelectorByType,requestAnimationFrame:requestAnimationFrame$1,revokeBlobUrl,sprint,treeWalker,type,uuid,walk,windowBounds},Symbol.toStringTag,{value:"Module"}));if(!process$1)var process$1={cwd:function(){return"/"}};function assertPath(s){if(typeof s!="string")throw new TypeError("Path must be a string. Received "+s)}function normalizeStringPosix(s,e){for(var o="",a=-1,c=0,h,g=0;g<=s.length;++g){if(g<s.length)h=s.charCodeAt(g);else{if(h===47)break;h=47}if(h===47){if(!(a===g-1||c===1))if(a!==g-1&&c===2){if(o.length<2||o.charCodeAt(o.length-1)!==46||o.charCodeAt(o.length-2)!==46){if(o.length>2){for(var b=o.length-1,_=b;_>=0&&o.charCodeAt(_)!==47;--_);if(_!==b){_===-1?o="":o=o.slice(0,_),a=g,c=0;continue}}else if(o.length===2||o.length===1){o="",a=g,c=0;continue}}e&&(o.length>0?o+="/..":o="..")}else o.length>0?o+="/"+s.slice(a+1,g):o=s.slice(a+1,g);a=g,c=0}else h===46&&c!==-1?++c:c=-1}return o}function _format(s,e){var o=e.dir||e.root,a=e.base||(e.name||"")+(e.ext||"");return o?o===e.root?o+a:o+s+a:a}var posix={resolve:function(){for(var e="",o=!1,a,c=arguments.length-1;c>=-1&&!o;c--){var h;c>=0?h=arguments[c]:(a===void 0&&(a=process$1.cwd()),h=a),assertPath(h),h.length!==0&&(e=h+"/"+e,o=h.charCodeAt(0)===47)}return e=normalizeStringPosix(e,!o),o?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(assertPath(e),e.length===0)return".";var o=e.charCodeAt(0)===47,a=e.charCodeAt(e.length-1)===47;return e=normalizeStringPosix(e,!o),e.length===0&&!o&&(e="."),e.length>0&&a&&(e+="/"),o?"/"+e:e},isAbsolute:function(e){return assertPath(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,o=0;o<arguments.length;++o){var a=arguments[o];assertPath(a),a.length>0&&(e===void 0?e=a:e+="/"+a)}return e===void 0?".":posix.normalize(e)},relative:function(e,o){if(assertPath(e),assertPath(o),e===o||(e=posix.resolve(e),o=posix.resolve(o),e===o))return"";for(var a=1;a<e.length&&e.charCodeAt(a)===47;++a);for(var c=e.length,h=c-a,g=1;g<o.length&&o.charCodeAt(g)===47;++g);for(var b=o.length,_=b-g,j=h<_?h:_,$=-1,_e=0;_e<=j;++_e){if(_e===j){if(_>j){if(o.charCodeAt(g+_e)===47)return o.slice(g+_e+1);if(_e===0)return o.slice(g+_e)}else h>j&&(e.charCodeAt(a+_e)===47?$=_e:_e===0&&($=0));break}var tt=e.charCodeAt(a+_e),et=o.charCodeAt(g+_e);if(tt!==et)break;tt===47&&($=_e)}var ut="";for(_e=a+$+1;_e<=c;++_e)(_e===c||e.charCodeAt(_e)===47)&&(ut.length===0?ut+="..":ut+="/..");return ut.length>0?ut+o.slice(g+$):(g+=$,o.charCodeAt(g)===47&&++g,o.slice(g))},_makeLong:function(e){return e},dirname:function(e){if(assertPath(e),e.length===0)return".";for(var o=e.charCodeAt(0),a=o===47,c=-1,h=!0,g=e.length-1;g>=1;--g)if(o=e.charCodeAt(g),o===47){if(!h){c=g;break}}else h=!1;return c===-1?a?"/":".":a&&c===1?"//":e.slice(0,c)},basename:function(e,o){if(o!==void 0&&typeof o!="string")throw new TypeError('"ext" argument must be a string');assertPath(e);var a=0,c=-1,h=!0,g;if(o!==void 0&&o.length>0&&o.length<=e.length){if(o.length===e.length&&o===e)return"";var b=o.length-1,_=-1;for(g=e.length-1;g>=0;--g){var j=e.charCodeAt(g);if(j===47){if(!h){a=g+1;break}}else _===-1&&(h=!1,_=g+1),b>=0&&(j===o.charCodeAt(b)?--b===-1&&(c=g):(b=-1,c=_))}return a===c?c=_:c===-1&&(c=e.length),e.slice(a,c)}else{for(g=e.length-1;g>=0;--g)if(e.charCodeAt(g)===47){if(!h){a=g+1;break}}else c===-1&&(h=!1,c=g+1);return c===-1?"":e.slice(a,c)}},extname:function(e){assertPath(e);for(var o=-1,a=0,c=-1,h=!0,g=0,b=e.length-1;b>=0;--b){var _=e.charCodeAt(b);if(_===47){if(!h){a=b+1;break}continue}c===-1&&(h=!1,c=b+1),_===46?o===-1?o=b:g!==1&&(g=1):o!==-1&&(g=-1)}return o===-1||c===-1||g===0||g===1&&o===c-1&&o===a+1?"":e.slice(o,c)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('Parameter "pathObject" must be an object, not '+typeof e);return _format("/",e)},parse:function(e){assertPath(e);var o={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return o;var a=e.charCodeAt(0),c=a===47,h;c?(o.root="/",h=1):h=0;for(var g=-1,b=0,_=-1,j=!0,$=e.length-1,_e=0;$>=h;--$){if(a=e.charCodeAt($),a===47){if(!j){b=$+1;break}continue}_===-1&&(j=!1,_=$+1),a===46?g===-1?g=$:_e!==1&&(_e=1):g!==-1&&(_e=-1)}return g===-1||_===-1||_e===0||_e===1&&g===_-1&&g===b+1?_!==-1&&(b===0&&c?o.base=o.name=e.slice(1,_):o.base=o.name=e.slice(b,_)):(b===0&&c?(o.name=e.slice(1,g),o.base=e.slice(1,_)):(o.name=e.slice(b,g),o.base=e.slice(b,_)),o.ext=e.slice(g,_)),b>0?o.dir=e.slice(0,b-1):c&&(o.dir="/"),o},sep:"/",delimiter:":",posix:null},path=posix;const path$1=getDefaultExportFromCjs(path);class Path{constructor(e){var o,a;o=e.indexOf("://"),o>-1&&(e=new URL(e).pathname),a=this.parse(e),this.path=e,this.isDirectory(e)?this.directory=e:this.directory=a.dir+"/",this.filename=a.base,this.extension=a.ext.slice(1)}parse(e){return path$1.parse(e)}isAbsolute(e){return path$1.isAbsolute(e||this.path)}isDirectory(e){return e.charAt(e.length-1)==="/"}resolve(e){return path$1.resolve(this.directory,e)}relative(e){var o=e&&e.indexOf("://")>-1;return o?e:path$1.relative(this.directory,e)}splitPath(e){return this.splitPathRe.exec(e).slice(1)}toString(){return this.path}}let Url$1=class{constructor(e,o){var a=e.indexOf("://")>-1,c=e,h;if(this.Url=void 0,this.href=e,this.protocol="",this.origin="",this.hash="",this.hash="",this.search="",this.base=o,!a&&o!==!1&&typeof o!="string"&&window&&window.location&&(this.base=window.location.href),a||this.base)try{this.base?this.Url=new URL(e,this.base):this.Url=new URL(e),this.href=this.Url.href,this.protocol=this.Url.protocol,this.origin=this.Url.origin,this.hash=this.Url.hash,this.search=this.Url.search,c=this.Url.pathname+(this.Url.search?this.Url.search:"")}catch{this.Url=void 0,this.base&&(h=new Path(this.base),c=h.resolve(c))}this.Path=new Path(c),this.directory=this.Path.directory,this.filename=this.Path.filename,this.extension=this.Path.extension}path(){return this.Path}resolve(e){var o=e.indexOf("://")>-1,a;return o?e:(a=path$1.resolve(this.directory,e),this.origin+a)}relative(e){return path$1.relative(e,this.directory)}toString(){return this.href}};const ELEMENT_NODE$1=1,TEXT_NODE=3,DOCUMENT_NODE=9;class EpubCFI{constructor(e,o,a){var c;if(this.str="",this.base={},this.spinePos=0,this.range=!1,this.path={},this.start=null,this.end=null,!(this instanceof EpubCFI))return new EpubCFI(e,o,a);if(typeof o=="string"?this.base=this.parseComponent(o):typeof o=="object"&&o.steps&&(this.base=o),c=this.checkType(e),c==="string")return this.str=e,extend(this,this.parse(e));if(c==="range")return extend(this,this.fromRange(e,this.base,a));if(c==="node")return extend(this,this.fromNode(e,this.base,a));if(c==="EpubCFI"&&e.path)return e;if(e)throw new TypeError("not a valid argument for EpubCFI");return this}checkType(e){return this.isCfiString(e)?"string":e&&typeof e=="object"&&(type(e)==="Range"||typeof e.startContainer<"u")?"range":e&&typeof e=="object"&&typeof e.nodeType<"u"?"node":e&&typeof e=="object"&&e instanceof EpubCFI?"EpubCFI":!1}parse(e){var o={spinePos:-1,range:!1,base:{},path:{},start:null,end:null},a,c,h;return typeof e!="string"?{spinePos:-1}:(e.indexOf("epubcfi(")===0&&e[e.length-1]===")"&&(e=e.slice(8,e.length-1)),a=this.getChapterComponent(e),a?(o.base=this.parseComponent(a),c=this.getPathComponent(e),o.path=this.parseComponent(c),h=this.getRange(e),h&&(o.range=!0,o.start=this.parseComponent(h[0]),o.end=this.parseComponent(h[1])),o.spinePos=o.base.steps[1].index,o):{spinePos:-1})}parseComponent(e){var o={steps:[],terminal:{offset:null,assertion:null}},a=e.split(":"),c=a[0].split("/"),h;return a.length>1&&(h=a[1],o.terminal=this.parseTerminal(h)),c[0]===""&&c.shift(),o.steps=c.map((function(g){return this.parseStep(g)}).bind(this)),o}parseStep(e){var o,a,c,h,g;if(h=e.match(/\[(.*)\]/),h&&h[1]&&(g=h[1]),a=parseInt(e),!isNaN(a))return a%2===0?(o="element",c=a/2-1):(o="text",c=(a-1)/2),{type:o,index:c,id:g||null}}parseTerminal(e){var o,a,c=e.match(/\[(.*)\]/);return c&&c[1]?(o=parseInt(e.split("[")[0]),a=c[1]):o=parseInt(e),isNumber(o)||(o=null),{offset:o,assertion:a}}getChapterComponent(e){var o=e.split("!");return o[0]}getPathComponent(e){var o=e.split("!");if(o[1])return o[1].split(",")[0]}getRange(e){var o=e.split(",");return o.length===3?[o[1],o[2]]:!1}getCharecterOffsetComponent(e){var o=e.split(":");return o[1]||""}joinSteps(e){return e?e.map(function(o){var a="";return o.type==="element"&&(a+=(o.index+1)*2),o.type==="text"&&(a+=1+2*o.index),o.id&&(a+="["+o.id+"]"),a}).join("/"):""}segmentString(e){var o="/";return o+=this.joinSteps(e.steps),e.terminal&&e.terminal.offset!=null&&(o+=":"+e.terminal.offset),e.terminal&&e.terminal.assertion!=null&&(o+="["+e.terminal.assertion+"]"),o}toString(){var e="epubcfi(";return e+=this.segmentString(this.base),e+="!",e+=this.segmentString(this.path),this.range&&this.start&&(e+=",",e+=this.segmentString(this.start)),this.range&&this.end&&(e+=",",e+=this.segmentString(this.end)),e+=")",e}compare(e,o){var a,c,h,g;if(typeof e=="string"&&(e=new EpubCFI(e)),typeof o=="string"&&(o=new EpubCFI(o)),e.spinePos>o.spinePos)return 1;if(e.spinePos<o.spinePos)return-1;e.range?(a=e.path.steps.concat(e.start.steps),h=e.start.terminal):(a=e.path.steps,h=e.path.terminal),o.range?(c=o.path.steps.concat(o.start.steps),g=o.start.terminal):(c=o.path.steps,g=o.path.terminal);for(var b=0;b<a.length;b++){if(!a[b])return-1;if(!c[b]||a[b].index>c[b].index)return 1;if(a[b].index<c[b].index)return-1}return a.length<c.length?-1:h.offset>g.offset?1:h.offset<g.offset?-1:0}step(e){var o=e.nodeType===TEXT_NODE?"text":"element";return{id:e.id,tagName:e.tagName,type:o,index:this.position(e)}}filteredStep(e,o){var a=this.filter(e,o),c;if(a)return c=a.nodeType===TEXT_NODE?"text":"element",{id:a.id,tagName:a.tagName,type:c,index:this.filteredPosition(a,o)}}pathTo(e,o,a){for(var c={steps:[],terminal:{offset:null,assertion:null}},h=e,g;h&&h.parentNode&&h.parentNode.nodeType!=DOCUMENT_NODE;)a?g=this.filteredStep(h,a):g=this.step(h),g&&c.steps.unshift(g),h=h.parentNode;return o!=null&&o>=0&&(c.terminal.offset=o,c.steps[c.steps.length-1].type!="text"&&c.steps.push({type:"text",index:0})),c}equalStep(e,o){return!e||!o?!1:e.index===o.index&&e.id===o.id&&e.type===o.type}fromRange(e,o,a){var c={range:!1,base:{},path:{},start:null,end:null},h=e.startContainer,g=e.endContainer,b=e.startOffset,_=e.endOffset,j=!1;if(a&&(j=h.ownerDocument.querySelector("."+a)!=null),typeof o=="string"?(c.base=this.parseComponent(o),c.spinePos=c.base.steps[1].index):typeof o=="object"&&(c.base=o),e.collapsed)j&&(b=this.patchOffset(h,b,a)),c.path=this.pathTo(h,b,a);else{c.range=!0,j&&(b=this.patchOffset(h,b,a)),c.start=this.pathTo(h,b,a),j&&(_=this.patchOffset(g,_,a)),c.end=this.pathTo(g,_,a),c.path={steps:[],terminal:null};var $=c.start.steps.length,_e;for(_e=0;_e<$&&this.equalStep(c.start.steps[_e],c.end.steps[_e]);_e++)_e===$-1?c.start.terminal===c.end.terminal&&(c.path.steps.push(c.start.steps[_e]),c.range=!1):c.path.steps.push(c.start.steps[_e]);c.start.steps=c.start.steps.slice(c.path.steps.length),c.end.steps=c.end.steps.slice(c.path.steps.length)}return c}fromNode(e,o,a){var c={range:!1,base:{},path:{},start:null,end:null};return typeof o=="string"?(c.base=this.parseComponent(o),c.spinePos=c.base.steps[1].index):typeof o=="object"&&(c.base=o),c.path=this.pathTo(e,null,a),c}filter(e,o){var a,c,h,g,b,_=!1;return e.nodeType===TEXT_NODE?(_=!0,h=e.parentNode,a=e.parentNode.classList.contains(o)):(_=!1,a=e.classList.contains(o)),a&&_?(g=h.previousSibling,b=h.nextSibling,g&&g.nodeType===TEXT_NODE?c=g:b&&b.nodeType===TEXT_NODE&&(c=b),c||e):a&&!_?!1:e}patchOffset(e,o,a){if(e.nodeType!=TEXT_NODE)throw new Error("Anchor must be a text node");var c=e,h=o;for(e.parentNode.classList.contains(a)&&(c=e.parentNode);c.previousSibling;){if(c.previousSibling.nodeType===ELEMENT_NODE$1)if(c.previousSibling.classList.contains(a))h+=c.previousSibling.textContent.length;else break;else h+=c.previousSibling.textContent.length;c=c.previousSibling}return h}normalizedMap(e,o,a){var c={},h=-1,g,b=e.length,_,j;for(g=0;g<b;g++)_=e[g].nodeType,_===ELEMENT_NODE$1&&e[g].classList.contains(a)&&(_=TEXT_NODE),g>0&&_===TEXT_NODE&&j===TEXT_NODE?c[g]=h:o===_&&(h=h+1,c[g]=h),j=_;return c}position(e){var o,a;return e.nodeType===ELEMENT_NODE$1?(o=e.parentNode.children,o||(o=findChildren(e.parentNode)),a=Array.prototype.indexOf.call(o,e)):(o=this.textNodes(e.parentNode),a=o.indexOf(e)),a}filteredPosition(e,o){var a,c,h;return e.nodeType===ELEMENT_NODE$1?(a=e.parentNode.children,h=this.normalizedMap(a,ELEMENT_NODE$1,o)):(a=e.parentNode.childNodes,e.parentNode.classList.contains(o)&&(e=e.parentNode,a=e.parentNode.childNodes),h=this.normalizedMap(a,TEXT_NODE,o)),c=Array.prototype.indexOf.call(a,e),h[c]}stepsToXpath(e){var o=[".","*"];return e.forEach(function(a){var c=a.index+1;a.id?o.push("*[position()="+c+" and @id='"+a.id+"']"):a.type==="text"?o.push("text()["+c+"]"):o.push("*["+c+"]")}),o.join("/")}stepsToQuerySelector(e){var o=["html"];return e.forEach(function(a){var c=a.index+1;a.id?o.push("#"+a.id):a.type==="text"||o.push("*:nth-child("+c+")")}),o.join(">")}textNodes(e,o){return Array.prototype.slice.call(e.childNodes).filter(function(a){return a.nodeType===TEXT_NODE?!0:!!(o&&a.classList.contains(o))})}walkToNode(e,o,a){var c=o||document,h=c.documentElement,g,b,_=e.length,j;for(j=0;j<_&&(b=e[j],b.type==="element"?b.id?h=c.getElementById(b.id):(g=h.children||findChildren(h),h=g[b.index]):b.type==="text"&&(h=this.textNodes(h,a)[b.index]),!!h);j++);return h}findNode(e,o,a){var c=o||document,h,g;return!a&&typeof c.evaluate<"u"?(g=this.stepsToXpath(e),h=c.evaluate(g,c,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue):a?h=this.walkToNode(e,c,a):h=this.walkToNode(e,c),h}fixMiss(e,o,a,c){var h=this.findNode(e.slice(0,-1),a,c),g=h.childNodes,b=this.normalizedMap(g,TEXT_NODE,c),_,j,$=e[e.length-1].index;for(let _e in b){if(!b.hasOwnProperty(_e))return;if(b[_e]===$)if(_=g[_e],j=_.textContent.length,o>j)o=o-j;else{_.nodeType===ELEMENT_NODE$1?h=_.childNodes[0]:h=_;break}}return{container:h,offset:o}}toRange(e,o){var a=e||document,c,h,g,b,_,j=this,$,_e,tt=o?a.querySelector("."+o)!=null:!1,et;if(typeof a.createRange<"u"?c=a.createRange():c=new RangeObject,j.range?(h=j.start,$=j.path.steps.concat(h.steps),b=this.findNode($,a,tt?o:null),g=j.end,_e=j.path.steps.concat(g.steps),_=this.findNode(_e,a,tt?o:null)):(h=j.path,$=j.path.steps,b=this.findNode(j.path.steps,a,tt?o:null)),b)try{h.terminal.offset!=null?c.setStart(b,h.terminal.offset):c.setStart(b,0)}catch{et=this.fixMiss($,h.terminal.offset,a,tt?o:null),c.setStart(et.container,et.offset)}else return console.log("No startContainer found for",this.toString()),null;if(_)try{g.terminal.offset!=null?c.setEnd(_,g.terminal.offset):c.setEnd(_,0)}catch{et=this.fixMiss(_e,j.end.terminal.offset,a,tt?o:null),c.setEnd(et.container,et.offset)}return c}isCfiString(e){return typeof e=="string"&&e.indexOf("epubcfi(")===0&&e[e.length-1]===")"}generateChapterComponent(e,o,a){var c=parseInt(o),h=(e+1)*2,g="/"+h+"/";return g+=(c+1)*2,a&&(g+="["+a+"]"),g}collapse(e){this.range&&(this.range=!1,e?(this.path.steps=this.path.steps.concat(this.start.steps),this.path.terminal=this.start.terminal):(this.path.steps=this.path.steps.concat(this.end.steps),this.path.terminal=this.end.terminal))}}class Hook{constructor(e){this.context=e||this,this.hooks=[]}register(){for(var e=0;e<arguments.length;++e)if(typeof arguments[e]=="function")this.hooks.push(arguments[e]);else for(var o=0;o<arguments[e].length;++o)this.hooks.push(arguments[e][o])}deregister(e){let o;for(let a=0;a<this.hooks.length;a++)if(o=this.hooks[a],o===e){this.hooks.splice(a,1);break}}trigger(){var e=arguments,o=this.context,a=[];return this.hooks.forEach(function(c){try{var h=c.apply(o,e)}catch(g){console.log(g)}h&&typeof h.then=="function"&&a.push(h)}),Promise.all(a)}list(){return this.hooks}clear(){return this.hooks=[]}}function replaceBase(s,e){var o,a,c=e.url,h=c.indexOf("://")>-1;s&&(a=qs(s,"head"),o=qs(a,"base"),o||(o=s.createElement("base"),a.insertBefore(o,a.firstChild)),!h&&window&&window.location&&(c=window.location.origin+c),o.setAttribute("href",c))}function replaceCanonical(s,e){var o,a,c=e.canonical;s&&(o=qs(s,"head"),a=qs(o,"link[rel='canonical']"),a?a.setAttribute("href",c):(a=s.createElement("link"),a.setAttribute("rel","canonical"),a.setAttribute("href",c),o.appendChild(a)))}function replaceMeta(s,e){var o,a,c=e.idref;s&&(o=qs(s,"head"),a=qs(o,"link[property='dc.identifier']"),a?a.setAttribute("content",c):(a=s.createElement("meta"),a.setAttribute("name","dc.identifier"),a.setAttribute("content",c),o.appendChild(a)))}function replaceLinks(s,e){var o=s.querySelectorAll("a[href]");if(o.length)for(var a=qs(s.ownerDocument,"base"),c=a?a.getAttribute("href"):void 0,h=(function(b){var _=b.getAttribute("href");if(_.indexOf("mailto:")!==0){var j=_.indexOf("://")>-1;if(j)b.setAttribute("target","_blank");else{var $;try{$=new Url$1(_,c)}catch{}b.onclick=function(){return $&&$.hash?e($.Path.path+$.hash):e($?$.Path.path:_),!1}}}}).bind(this),g=0;g<o.length;g++)h(o[g])}function substitute(s,e,o){return e.forEach(function(a,c){a&&o[c]&&(a=a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),s=s.replace(new RegExp(a,"g"),o[c]))}),s}function request(s,e,o,a){var c=typeof window<"u"?window.URL:!1,h=c?"blob":"arraybuffer",g=new defer,b=new XMLHttpRequest,_=XMLHttpRequest.prototype,j;"overrideMimeType"in _||Object.defineProperty(_,"overrideMimeType",{value:function(){}}),o&&(b.withCredentials=!0),b.onreadystatechange=_e,b.onerror=$,b.open("GET",s,!0);for(j in a)b.setRequestHeader(j,a[j]);e=="json"&&b.setRequestHeader("Accept","application/json"),e||(e=new Path(s).extension),e=="blob"&&(b.responseType=h),isXml(e)&&b.overrideMimeType("text/xml"),e=="binary"&&(b.responseType="arraybuffer"),b.send();function $(tt){g.reject(tt)}function _e(){if(this.readyState===XMLHttpRequest.DONE){var tt=!1;if((this.responseType===""||this.responseType==="document")&&(tt=this.responseXML),this.status===200||this.status===0||tt){var et;if(!this.response&&!tt)return g.reject({status:this.status,message:"Empty Response",stack:new Error().stack}),g.promise;if(this.status===403)return g.reject({status:this.status,response:this.response,message:"Forbidden",stack:new Error().stack}),g.promise;tt?et=this.responseXML:isXml(e)?et=parse$1(this.response,"text/xml"):e=="xhtml"?et=parse$1(this.response,"application/xhtml+xml"):e=="html"||e=="htm"?et=parse$1(this.response,"text/html"):e=="json"?et=JSON.parse(this.response):e=="blob"?c?et=this.response:et=new Blob([this.response]):et=this.response,g.resolve(et)}else g.reject({status:this.status,message:this.response,stack:new Error().stack})}}return g.promise}class Section{constructor(e,o){this.idref=e.idref,this.linear=e.linear==="yes",this.properties=e.properties,this.index=e.index,this.href=e.href,this.url=e.url,this.canonical=e.canonical,this.next=e.next,this.prev=e.prev,this.cfiBase=e.cfiBase,o?this.hooks=o:(this.hooks={},this.hooks.serialize=new Hook(this),this.hooks.content=new Hook(this)),this.document=void 0,this.contents=void 0,this.output=void 0}load(e){var o=e||this.request||request,a=new defer,c=a.promise;return this.contents?a.resolve(this.contents):o(this.url).then((function(h){return this.document=h,this.contents=h.documentElement,this.hooks.content.trigger(this.document,this)}).bind(this)).then((function(){a.resolve(this.contents)}).bind(this)).catch(function(h){a.reject(h)}),c}base(){return replaceBase(this.document,this)}render(e){var o=new defer,a=o.promise;return this.output,this.load(e).then((function(c){var h=typeof navigator<"u"&&navigator.userAgent||"",g=h.indexOf("Trident")>=0,b;typeof XMLSerializer>"u"||g?b=DOMParser$1:b=XMLSerializer;var _=new b;return this.output=_.serializeToString(c),this.output}).bind(this)).then((function(){return this.hooks.serialize.trigger(this.output,this)}).bind(this)).then((function(){o.resolve(this.output)}).bind(this)).catch(function(c){o.reject(c)}),a}find(e){var o=this,a=[],c=e.toLowerCase(),h=function(g){for(var b=g.textContent.toLowerCase(),_=o.document.createRange(),j,$,_e=-1,tt,et=150;$!=-1;)$=b.indexOf(c,_e+1),$!=-1&&(_=o.document.createRange(),_.setStart(g,$),_.setEnd(g,$+c.length),j=o.cfiFromRange(_),g.textContent.length<et?tt=g.textContent:(tt=g.textContent.substring($-et/2,$+et/2),tt="..."+tt+"..."),a.push({cfi:j,excerpt:tt})),_e=$};return sprint(o.document,function(g){h(g)}),a}search(e,o=5){if(typeof document.createTreeWalker>"u")return this.find(e);let a=[];const c=150,h=this,g=e.toLowerCase(),b=function(_e){const ut=_e.reduce((ht,st)=>ht+st.textContent,"").toLowerCase().indexOf(g);if(ut!=-1){const st=ut+g.length;let nt=0,rt=0;if(ut<_e[0].length){let at;for(;nt<_e.length-1&&(rt+=_e[nt].length,!(st<=rt));)nt+=1;let dt=_e[0],ot=_e[nt],ct=h.document.createRange();ct.setStart(dt,ut);let vt=_e.slice(0,nt).reduce((pt,Et)=>pt+Et.textContent.length,0);ct.setEnd(ot,vt>st?st:st-vt),at=h.cfiFromRange(ct);let mt=_e.slice(0,nt+1).reduce((pt,Et)=>pt+Et.textContent,"");mt.length>c&&(mt=mt.substring(ut-c/2,ut+c/2),mt="..."+mt+"..."),a.push({cfi:at,excerpt:mt})}}},_=document.createTreeWalker(h.document,NodeFilter.SHOW_TEXT,null,!1);let j,$=[];for(;j=_.nextNode();)$.push(j),$.length==o&&(b($.slice(0,o)),$=$.slice(1,o));return $.length>0&&b($),a}reconcileLayoutSettings(e){var o={layout:e.layout,spread:e.spread,orientation:e.orientation};return this.properties.forEach(function(a){var c=a.replace("rendition:",""),h=c.indexOf("-"),g,b;h!=-1&&(g=c.slice(0,h),b=c.slice(h+1),o[g]=b)}),o}cfiFromRange(e){return new EpubCFI(e,this.cfiBase).toString()}cfiFromElement(e){return new EpubCFI(e,this.cfiBase).toString()}unload(){this.document=void 0,this.contents=void 0,this.output=void 0}destroy(){this.unload(),this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.idref=void 0,this.linear=void 0,this.properties=void 0,this.index=void 0,this.href=void 0,this.url=void 0,this.next=void 0,this.prev=void 0,this.cfiBase=void 0}}class Spine{constructor(){this.spineItems=[],this.spineByHref={},this.spineById={},this.hooks={},this.hooks.serialize=new Hook,this.hooks.content=new Hook,this.hooks.content.register(replaceBase),this.hooks.content.register(replaceCanonical),this.hooks.content.register(replaceMeta),this.epubcfi=new EpubCFI,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}unpack(e,o,a){this.items=e.spine,this.manifest=e.manifest,this.spineNodeIndex=e.spineNodeIndex,this.baseUrl=e.baseUrl||e.basePath||"",this.length=this.items.length,this.items.forEach((c,h)=>{var g=this.manifest[c.idref],b;c.index=h,c.cfiBase=this.epubcfi.generateChapterComponent(this.spineNodeIndex,c.index,c.id),c.href&&(c.url=o(c.href,!0),c.canonical=a(c.href)),g&&(c.href=g.href,c.url=o(c.href,!0),c.canonical=a(c.href),g.properties.length&&c.properties.push.apply(c.properties,g.properties)),c.linear==="yes"?(c.prev=(function(){let _=c.index;for(;_>0;){let j=this.get(_-1);if(j&&j.linear)return j;_-=1}}).bind(this),c.next=(function(){let _=c.index;for(;_<this.spineItems.length-1;){let j=this.get(_+1);if(j&&j.linear)return j;_+=1}}).bind(this)):(c.prev=function(){},c.next=function(){}),b=new Section(c,this.hooks),this.append(b)}),this.loaded=!0}get(e){var o=0;if(typeof e>"u")for(;o<this.spineItems.length;){let a=this.spineItems[o];if(a&&a.linear)break;o+=1}else this.epubcfi.isCfiString(e)?o=new EpubCFI(e).spinePos:typeof e=="number"||isNaN(e)===!1?o=e:typeof e=="string"&&e.indexOf("#")===0?o=this.spineById[e.substring(1)]:typeof e=="string"&&(e=e.split("#")[0],o=this.spineByHref[e]||this.spineByHref[encodeURI(e)]);return this.spineItems[o]||null}append(e){var o=this.spineItems.length;return e.index=o,this.spineItems.push(e),this.spineByHref[decodeURI(e.href)]=o,this.spineByHref[encodeURI(e.href)]=o,this.spineByHref[e.href]=o,this.spineById[e.idref]=o,o}prepend(e){return this.spineByHref[e.href]=0,this.spineById[e.idref]=0,this.spineItems.forEach(function(o,a){o.index=a}),0}remove(e){var o=this.spineItems.indexOf(e);if(o>-1)return delete this.spineByHref[e.href],delete this.spineById[e.idref],this.spineItems.splice(o,1)}each(){return this.spineItems.forEach.apply(this.spineItems,arguments)}first(){let e=0;do{let o=this.get(e);if(o&&o.linear)return o;e+=1}while(e<this.spineItems.length)}last(){let e=this.spineItems.length-1;do{let o=this.get(e);if(o&&o.linear)return o;e-=1}while(e>=0)}destroy(){this.each(e=>e.destroy()),this.spineItems=void 0,this.spineByHref=void 0,this.spineById=void 0,this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.epubcfi=void 0,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}}class Queue{constructor(e){this._q=[],this.context=e,this.tick=requestAnimationFrame$1,this.running=!1,this.paused=!1}enqueue(){var e,o,a,c=[].shift.call(arguments),h=arguments;if(!c)throw new Error("No Task Provided");return typeof c=="function"?(e=new defer,o=e.promise,a={task:c,args:h,deferred:e,promise:o}):a={promise:c},this._q.push(a),this.paused==!1&&!this.running&&this.run(),a.promise}dequeue(){var e,o,a;if(this._q.length&&!this.paused){if(e=this._q.shift(),o=e.task,o)return a=o.apply(this.context,e.args),a&&typeof a.then=="function"?a.then((function(){e.deferred.resolve.apply(this.context,arguments)}).bind(this),(function(){e.deferred.reject.apply(this.context,arguments)}).bind(this)):(e.deferred.resolve.apply(this.context,a),e.promise);if(e.promise)return e.promise}else return e=new defer,e.deferred.resolve(),e.promise}dump(){for(;this._q.length;)this.dequeue()}run(){return this.running||(this.running=!0,this.defered=new defer),this.tick.call(window,()=>{this._q.length?this.dequeue().then((function(){this.run()}).bind(this)):(this.defered.resolve(),this.running=void 0)}),this.paused==!0&&(this.paused=!1),this.defered.promise}flush(){if(this.running)return this.running;if(this._q.length)return this.running=this.dequeue().then((function(){return this.running=void 0,this.flush()}).bind(this)),this.running}clear(){this._q=[]}length(){return this._q.length}pause(){this.paused=!0}stop(){this._q=[],this.running=!1,this.paused=!0}}const EPUBJS_VERSION="0.3",DOM_EVENTS=["keydown","keyup","keypressed","mouseup","mousedown","mousemove","click","touchend","touchstart","touchmove"],EVENTS={BOOK:{OPEN_FAILED:"openFailed"},CONTENTS:{EXPAND:"expand",RESIZE:"resize",SELECTED:"selected",SELECTED_RANGE:"selectedRange",LINK_CLICKED:"linkClicked"},LOCATIONS:{CHANGED:"changed"},MANAGERS:{RESIZE:"resize",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",ADDED:"added",SCROLL:"scroll",SCROLLED:"scrolled",REMOVED:"removed"},VIEWS:{AXIS:"axis",WRITING_MODE:"writingMode",LOAD_ERROR:"loaderror",RENDERED:"rendered",RESIZED:"resized",DISPLAYED:"displayed",SHOWN:"shown",HIDDEN:"hidden",MARK_CLICKED:"markClicked"},RENDITION:{STARTED:"started",ATTACHED:"attached",DISPLAYED:"displayed",DISPLAY_ERROR:"displayerror",RENDERED:"rendered",REMOVED:"removed",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",LOCATION_CHANGED:"locationChanged",RELOCATED:"relocated",MARK_CLICKED:"markClicked",SELECTED:"selected",LAYOUT:"layout"},LAYOUT:{UPDATED:"updated"},ANNOTATION:{ATTACH:"attach",DETACH:"detach"}};class Locations{constructor(e,o,a){this.spine=e,this.request=o,this.pause=a||100,this.q=new Queue(this),this.epubcfi=new EpubCFI,this._locations=[],this._locationsWords=[],this.total=0,this.break=150,this._current=0,this._wordCounter=0,this.currentLocation="",this._currentCfi="",this.processingTimeout=void 0}generate(e){return e&&(this.break=e),this.q.pause(),this.spine.each((function(o){o.linear&&this.q.enqueue(this.process.bind(this),o)}).bind(this)),this.q.run().then((function(){return this.total=this._locations.length-1,this._currentCfi&&(this.currentLocation=this._currentCfi),this._locations}).bind(this))}createRange(){return{startContainer:void 0,startOffset:void 0,endContainer:void 0,endOffset:void 0}}process(e){return e.load(this.request).then((function(o){var a=new defer,c=this.parse(o,e.cfiBase);return this._locations=this._locations.concat(c),e.unload(),this.processingTimeout=setTimeout(()=>a.resolve(c),this.pause),a.promise}).bind(this))}parse(e,o,a){var c=[],h,g=e.ownerDocument,b=qs(g,"body"),_=0,j,$=a||this.break,_e=function(tt){var et=tt.length,ut,ht=0;if(tt.textContent.trim().length===0)return!1;for(_==0&&(h=this.createRange(),h.startContainer=tt,h.startOffset=0),ut=$-_,ut>et&&(_+=et,ht=et);ht<et;)if(ut=$-_,_===0&&(ht+=1,h=this.createRange(),h.startContainer=tt,h.startOffset=ht),ht+ut>=et)_+=et-ht,ht=et;else{ht+=ut,h.endContainer=tt,h.endOffset=ht;let st=new EpubCFI(h,o).toString();c.push(st),_=0}j=tt};if(sprint(b,_e.bind(this)),h&&h.startContainer&&j){h.endContainer=j,h.endOffset=j.length;let tt=new EpubCFI(h,o).toString();c.push(tt),_=0}return c}generateFromWords(e,o,a){var c=e?new EpubCFI(e):void 0;return this.q.pause(),this._locationsWords=[],this._wordCounter=0,this.spine.each((function(h){h.linear&&(c?h.index>=c.spinePos&&this.q.enqueue(this.processWords.bind(this),h,o,c,a):this.q.enqueue(this.processWords.bind(this),h,o,c,a))}).bind(this)),this.q.run().then((function(){return this._currentCfi&&(this.currentLocation=this._currentCfi),this._locationsWords}).bind(this))}processWords(e,o,a,c){return c&&this._locationsWords.length>=c?Promise.resolve():e.load(this.request).then((function(h){var g=new defer,b=this.parseWords(h,e,o,a),_=c-this._locationsWords.length;return this._locationsWords=this._locationsWords.concat(b.length>=c?b.slice(0,_):b),e.unload(),this.processingTimeout=setTimeout(()=>g.resolve(b),this.pause),g.promise}).bind(this))}countWords(e){return e=e.replace(/(^\s*)|(\s*$)/gi,""),e=e.replace(/[ ]{2,}/gi," "),e=e.replace(/\n /,`
`),e.split(" ").length}parseWords(e,o,a,c){var h=o.cfiBase,g=[],b=e.ownerDocument,_=qs(b,"body"),j=a,$=c?c.spinePos!==o.index:!0,_e;c&&o.index===c.spinePos&&(_e=c.findNode(c.range?c.path.steps.concat(c.start.steps):c.path.steps,e.ownerDocument));var tt=function(et){if(!$)if(et===_e)$=!0;else return!1;if(et.textContent.length<10&&et.textContent.trim().length===0)return!1;var ut=this.countWords(et.textContent),ht,st=0;if(ut===0)return!1;for(ht=j-this._wordCounter,ht>ut&&(this._wordCounter+=ut,st=ut);st<ut;)if(ht=j-this._wordCounter,st+ht>=ut)this._wordCounter+=ut-st,st=ut;else{st+=ht;let nt=new EpubCFI(et,h);g.push({cfi:nt.toString(),wordCount:this._wordCounter}),this._wordCounter=0}};return sprint(_,tt.bind(this)),g}locationFromCfi(e){let o;return EpubCFI.prototype.isCfiString(e)&&(e=new EpubCFI(e)),this._locations.length===0?-1:(o=locationOf(e,this._locations,this.epubcfi.compare),o>this.total?this.total:o)}percentageFromCfi(e){if(this._locations.length===0)return null;var o=this.locationFromCfi(e);return this.percentageFromLocation(o)}percentageFromLocation(e){return!e||!this.total?0:e/this.total}cfiFromLocation(e){var o=-1;return typeof e!="number"&&(e=parseInt(e)),e>=0&&e<this._locations.length&&(o=this._locations[e]),o}cfiFromPercentage(e){let o;if(e>1&&console.warn("Normalize cfiFromPercentage value to between 0 - 1"),e>=1){let a=new EpubCFI(this._locations[this.total]);return a.collapse(),a.toString()}return o=Math.ceil(this.total*e),this.cfiFromLocation(o)}load(e){return typeof e=="string"?this._locations=JSON.parse(e):this._locations=e,this.total=this._locations.length-1,this._locations}save(){return JSON.stringify(this._locations)}getCurrent(){return this._current}setCurrent(e){var o;if(typeof e=="string")this._currentCfi=e;else if(typeof e=="number")this._current=e;else return;this._locations.length!==0&&(typeof e=="string"?(o=this.locationFromCfi(e),this._current=o):o=e,this.emit(EVENTS.LOCATIONS.CHANGED,{percentage:this.percentageFromLocation(o)}))}get currentLocation(){return this._current}set currentLocation(e){this.setCurrent(e)}length(){return this._locations.length}destroy(){this.spine=void 0,this.request=void 0,this.pause=void 0,this.q.stop(),this.q=void 0,this.epubcfi=void 0,this._locations=void 0,this.total=void 0,this.break=void 0,this._current=void 0,this.currentLocation=void 0,this._currentCfi=void 0,clearTimeout(this.processingTimeout)}}EventEmitter(Locations.prototype);class Container{constructor(e){this.packagePath="",this.directory="",this.encoding="",e&&this.parse(e)}parse(e){var o;if(!e)throw new Error("Container File Not Found");if(o=qs(e,"rootfile"),!o)throw new Error("No RootFile Found");this.packagePath=o.getAttribute("full-path"),this.directory=path$1.dirname(this.packagePath),this.encoding=e.xmlEncoding}destroy(){this.packagePath=void 0,this.directory=void 0,this.encoding=void 0}}class Packaging{constructor(e){this.manifest={},this.navPath="",this.ncxPath="",this.coverPath="",this.spineNodeIndex=0,this.spine=[],this.metadata={},e&&this.parse(e)}parse(e){var o,a,c;if(!e)throw new Error("Package File Not Found");if(o=qs(e,"metadata"),!o)throw new Error("No Metadata Found");if(a=qs(e,"manifest"),!a)throw new Error("No Manifest Found");if(c=qs(e,"spine"),!c)throw new Error("No Spine Found");return this.manifest=this.parseManifest(a),this.navPath=this.findNavPath(a),this.ncxPath=this.findNcxPath(a,c),this.coverPath=this.findCoverPath(e),this.spineNodeIndex=indexOfElementNode(c),this.spine=this.parseSpine(c,this.manifest),this.uniqueIdentifier=this.findUniqueIdentifier(e),this.metadata=this.parseMetadata(o),this.metadata.direction=c.getAttribute("page-progression-direction"),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex}}parseMetadata(e){var o={};return o.title=this.getElementText(e,"title"),o.creator=this.getElementText(e,"creator"),o.description=this.getElementText(e,"description"),o.pubdate=this.getElementText(e,"date"),o.publisher=this.getElementText(e,"publisher"),o.identifier=this.getElementText(e,"identifier"),o.language=this.getElementText(e,"language"),o.rights=this.getElementText(e,"rights"),o.modified_date=this.getPropertyText(e,"dcterms:modified"),o.layout=this.getPropertyText(e,"rendition:layout"),o.orientation=this.getPropertyText(e,"rendition:orientation"),o.flow=this.getPropertyText(e,"rendition:flow"),o.viewport=this.getPropertyText(e,"rendition:viewport"),o.media_active_class=this.getPropertyText(e,"media:active-class"),o.spread=this.getPropertyText(e,"rendition:spread"),o}parseManifest(e){var o={},a=qsa(e,"item"),c=Array.prototype.slice.call(a);return c.forEach(function(h){var g=h.getAttribute("id"),b=h.getAttribute("href")||"",_=h.getAttribute("media-type")||"",j=h.getAttribute("media-overlay")||"",$=h.getAttribute("properties")||"";o[g]={href:b,type:_,overlay:j,properties:$.length?$.split(" "):[]}}),o}parseSpine(e,o){var a=[],c=qsa(e,"itemref"),h=Array.prototype.slice.call(c);return h.forEach(function(g,b){var _=g.getAttribute("idref"),j=g.getAttribute("properties")||"",$=j.length?j.split(" "):[],_e={id:g.getAttribute("id"),idref:_,linear:g.getAttribute("linear")||"yes",properties:$,index:b};a.push(_e)}),a}findUniqueIdentifier(e){var o=e.documentElement.getAttribute("unique-identifier");if(!o)return"";var a=e.getElementById(o);return a&&a.localName==="identifier"&&a.namespaceURI==="http://purl.org/dc/elements/1.1/"&&a.childNodes.length>0?a.childNodes[0].nodeValue.trim():""}findNavPath(e){var o=qsp(e,"item",{properties:"nav"});return o?o.getAttribute("href"):!1}findNcxPath(e,o){var a=qsp(e,"item",{"media-type":"application/x-dtbncx+xml"}),c;return a||(c=o.getAttribute("toc"),c&&(a=e.querySelector(`#${c}`))),a?a.getAttribute("href"):!1}findCoverPath(e){var o=qs(e,"package");o.getAttribute("version");var a=qsp(e,"item",{properties:"cover-image"});if(a)return a.getAttribute("href");var c=qsp(e,"meta",{name:"cover"});if(c){var h=c.getAttribute("content"),g=e.getElementById(h);return g?g.getAttribute("href"):""}else return!1}getElementText(e,o){var a=e.getElementsByTagNameNS("http://purl.org/dc/elements/1.1/",o),c;return!a||a.length===0?"":(c=a[0],c.childNodes.length?c.childNodes[0].nodeValue:"")}getPropertyText(e,o){var a=qsp(e,"meta",{property:o});return a&&a.childNodes.length?a.childNodes[0].nodeValue:""}load(e){this.metadata=e.metadata;let o=e.readingOrder||e.spine;return this.spine=o.map((a,c)=>(a.index=c,a.linear=a.linear||"yes",a)),e.resources.forEach((a,c)=>{this.manifest[c]=a,a.rel&&a.rel[0]==="cover"&&(this.coverPath=a.href)}),this.spineNodeIndex=0,this.toc=e.toc.map((a,c)=>(a.label=a.title,a)),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex,toc:this.toc}}destroy(){this.manifest=void 0,this.navPath=void 0,this.ncxPath=void 0,this.coverPath=void 0,this.spineNodeIndex=void 0,this.spine=void 0,this.metadata=void 0}}class Navigation{constructor(e){this.toc=[],this.tocByHref={},this.tocById={},this.landmarks=[],this.landmarksByType={},this.length=0,e&&this.parse(e)}parse(e){let o=e.nodeType,a,c;o&&(a=qs(e,"html"),c=qs(e,"ncx")),o?a?(this.toc=this.parseNav(e),this.landmarks=this.parseLandmarks(e)):c&&(this.toc=this.parseNcx(e)):this.toc=this.load(e),this.length=0,this.unpack(this.toc)}unpack(e){for(var o,a=0;a<e.length;a++)o=e[a],o.href&&(this.tocByHref[o.href]=a),o.id&&(this.tocById[o.id]=a),this.length++,o.subitems.length&&this.unpack(o.subitems)}get(e){var o;return e?(e.indexOf("#")===0?o=this.tocById[e.substring(1)]:e in this.tocByHref&&(o=this.tocByHref[e]),this.getByIndex(e,o,this.toc)):this.toc}getByIndex(e,o,a){if(a.length===0)return;const c=a[o];if(c&&(e===c.id||e===c.href))return c;{let h;for(let g=0;g<a.length&&(h=this.getByIndex(e,o,a[g].subitems),!h);++g);return h}}landmark(e){var o;return e?(o=this.landmarksByType[e],this.landmarks[o]):this.landmarks}parseNav(e){var o=querySelectorByType(e,"nav","toc"),a=[];if(!o)return a;let c=filterChildren(o,"ol",!0);return c&&(a=this.parseNavList(c)),a}parseNavList(e,o){const a=[];if(!e||!e.children)return a;for(let c=0;c<e.children.length;c++){const h=this.navItem(e.children[c],o);h&&a.push(h)}return a}navItem(e,o){let a=e.getAttribute("id")||void 0,c=filterChildren(e,"a",!0)||filterChildren(e,"span",!0);if(!c)return;let h=c.getAttribute("href")||"";a||(a=h);let g=c.textContent||"",b=[],_=filterChildren(e,"ol",!0);return _&&(b=this.parseNavList(_,a)),{id:a,href:h,label:g,subitems:b,parent:o}}parseLandmarks(e){var o=querySelectorByType(e,"nav","landmarks"),a=o?qsa(o,"li"):[],c=a.length,h,g=[],b;if(!a||c===0)return g;for(h=0;h<c;++h)b=this.landmarkItem(a[h]),b&&(g.push(b),this.landmarksByType[b.type]=h);return g}landmarkItem(e){let o=filterChildren(e,"a",!0);if(!o)return;let a=o.getAttributeNS("http://www.idpf.org/2007/ops","type")||void 0,c=o.getAttribute("href")||"",h=o.textContent||"";return{href:c,label:h,type:a}}parseNcx(e){var o=qsa(e,"navPoint"),a=o.length,c,h={},g=[],b,_;if(!o||a===0)return g;for(c=0;c<a;++c)b=this.ncxItem(o[c]),h[b.id]=b,b.parent?(_=h[b.parent],_.subitems.push(b)):g.push(b);return g}ncxItem(e){var o=e.getAttribute("id")||!1,a=qs(e,"content"),c=a.getAttribute("src"),h=qs(e,"navLabel"),g=h.textContent?h.textContent:"",b=[],_=e.parentNode,j;return _&&(_.nodeName==="navPoint"||_.nodeName.split(":").slice(-1)[0]==="navPoint")&&(j=_.getAttribute("id")),{id:o,href:c,label:g,subitems:b,parent:j}}load(e){return e.map(o=>(o.label=o.title,o.subitems=o.children?this.load(o.children):[],o))}forEach(e){return this.toc.forEach(e)}}var table$1={application:{ecmascript:["es","ecma"],javascript:"js",ogg:"ogx",pdf:"pdf",postscript:["ps","ai","eps","epsi","epsf","eps2","eps3"],"rdf+xml":"rdf",smil:["smi","smil"],"xhtml+xml":["xhtml","xht"],xml:["xml","xsl","xsd","opf","ncx"],zip:"zip","x-httpd-eruby":"rhtml","x-latex":"latex","x-maker":["frm","maker","frame","fm","fb","book","fbdoc"],"x-object":"o","x-shockwave-flash":["swf","swfl"],"x-silverlight":"scr","epub+zip":"epub","font-tdpfr":"pfr","inkml+xml":["ink","inkml"],json:"json","jsonml+json":"jsonml","mathml+xml":"mathml","metalink+xml":"metalink",mp4:"mp4s","omdoc+xml":"omdoc",oxps:"oxps","vnd.amazon.ebook":"azw",widget:"wgt","x-dtbook+xml":"dtb","x-dtbresource+xml":"res","x-font-bdf":"bdf","x-font-ghostscript":"gsf","x-font-linux-psf":"psf","x-font-otf":"otf","x-font-pcf":"pcf","x-font-snf":"snf","x-font-ttf":["ttf","ttc"],"x-font-type1":["pfa","pfb","pfm","afm"],"x-font-woff":"woff","x-mobipocket-ebook":["prc","mobi"],"x-mspublisher":"pub","x-nzb":"nzb","x-tgif":"obj","xaml+xml":"xaml","xml-dtd":"dtd","xproc+xml":"xpl","xslt+xml":"xslt","internet-property-stream":"acx","x-compress":"z","x-compressed":"tgz","x-gzip":"gz"},audio:{flac:"flac",midi:["mid","midi","kar","rmi"],mpeg:["mpga","mpega","mp2","mp3","m4a","mp2a","m2a","m3a"],mpegurl:"m3u",ogg:["oga","ogg","spx"],"x-aiff":["aif","aiff","aifc"],"x-ms-wma":"wma","x-wav":"wav",adpcm:"adp",mp4:"mp4a",webm:"weba","x-aac":"aac","x-caf":"caf","x-matroska":"mka","x-pn-realaudio-plugin":"rmp",xm:"xm",mid:["mid","rmi"]},image:{gif:"gif",ief:"ief",jpeg:["jpeg","jpg","jpe"],pcx:"pcx",png:"png","svg+xml":["svg","svgz"],tiff:["tiff","tif"],"x-icon":"ico",bmp:"bmp",webp:"webp","x-pict":["pic","pct"],"x-tga":"tga","cis-cod":"cod"},text:{"cache-manifest":["manifest","appcache"],css:"css",csv:"csv",html:["html","htm","shtml","stm"],mathml:"mml",plain:["txt","text","brf","conf","def","list","log","in","bas"],richtext:"rtx","tab-separated-values":"tsv","x-bibtex":"bib"},video:{mpeg:["mpeg","mpg","mpe","m1v","m2v","mp2","mpa","mpv2"],mp4:["mp4","mp4v","mpg4"],quicktime:["qt","mov"],ogg:"ogv","vnd.mpegurl":["mxu","m4u"],"x-flv":"flv","x-la-asf":["lsf","lsx"],"x-mng":"mng","x-ms-asf":["asf","asx","asr"],"x-ms-wm":"wm","x-ms-wmv":"wmv","x-ms-wmx":"wmx","x-ms-wvx":"wvx","x-msvideo":"avi","x-sgi-movie":"movie","x-matroska":["mpv","mkv","mk3d","mks"],"3gpp2":"3g2",h261:"h261",h263:"h263",h264:"h264",jpeg:"jpgv",jpm:["jpm","jpgm"],mj2:["mj2","mjp2"],"vnd.ms-playready.media.pyv":"pyv","vnd.uvvu.mp4":["uvu","uvvu"],"vnd.vivo":"viv",webm:"webm","x-f4v":"f4v","x-m4v":"m4v","x-ms-vob":"vob","x-smv":"smv"}},mimeTypes=function(){var s,e,o,a,c={};for(s in table$1)if(table$1.hasOwnProperty(s)){for(e in table$1[s])if(table$1[s].hasOwnProperty(e))if(o=table$1[s][e],typeof o=="string")c[o]=s+"/"+e;else for(a=0;a<o.length;a++)c[o[a]]=s+"/"+e}return c}(),defaultValue="text/plain";function lookup(s){return s&&mimeTypes[s.split(".").pop().toLowerCase()]||defaultValue}const mime={lookup};class Resources{constructor(e,o){this.settings={replacements:o&&o.replacements||"base64",archive:o&&o.archive,resolver:o&&o.resolver,request:o&&o.request},this.process(e)}process(e){this.manifest=e,this.resources=Object.keys(e).map(function(o){return e[o]}),this.replacementUrls=[],this.html=[],this.assets=[],this.css=[],this.urls=[],this.cssUrls=[],this.split(),this.splitUrls()}split(){this.html=this.resources.filter(function(e){if(e.type==="application/xhtml+xml"||e.type==="text/html")return!0}),this.assets=this.resources.filter(function(e){if(e.type!=="application/xhtml+xml"&&e.type!=="text/html")return!0}),this.css=this.resources.filter(function(e){if(e.type==="text/css")return!0})}splitUrls(){this.urls=this.assets.map((function(e){return e.href}).bind(this)),this.cssUrls=this.css.map(function(e){return e.href})}createUrl(e){var o=new Url$1(e),a=mime.lookup(o.filename);return this.settings.archive?this.settings.archive.createUrl(e,{base64:this.settings.replacements==="base64"}):this.settings.replacements==="base64"?this.settings.request(e,"blob").then(c=>blob2base64(c)).then(c=>createBase64Url(c,a)):this.settings.request(e,"blob").then(c=>createBlobUrl(c,a))}replacements(){if(this.settings.replacements==="none")return new Promise((function(o){o(this.urls)}).bind(this));var e=this.urls.map(o=>{var a=this.settings.resolver(o);return this.createUrl(a).catch(c=>(console.error(c),null))});return Promise.all(e).then(o=>(this.replacementUrls=o.filter(a=>typeof a=="string"),o))}replaceCss(e,o){var a=[];return e=e||this.settings.archive,o=o||this.settings.resolver,this.cssUrls.forEach((function(c){var h=this.createCssFile(c,e,o).then((function(g){var b=this.urls.indexOf(c);b>-1&&(this.replacementUrls[b]=g)}).bind(this));a.push(h)}).bind(this)),Promise.all(a)}createCssFile(e){var o;if(path$1.isAbsolute(e))return new Promise(function(g){g()});var a=this.settings.resolver(e),c;this.settings.archive?c=this.settings.archive.getText(a):c=this.settings.request(a,"text");var h=this.urls.map(g=>{var b=this.settings.resolver(g),_=new Path(a).relative(b);return _});return c?c.then(g=>(g=substitute(g,h,this.replacementUrls),this.settings.replacements==="base64"?o=createBase64Url(g,"text/css"):o=createBlobUrl(g,"text/css"),o),g=>new Promise(function(b){b()})):new Promise(function(g){g()})}relativeTo(e,o){return o=o||this.settings.resolver,this.urls.map((function(a){var c=o(a),h=new Path(e).relative(c);return h}).bind(this))}get(e){var o=this.urls.indexOf(e);if(o!==-1)return this.replacementUrls.length?new Promise((function(a,c){a(this.replacementUrls[o])}).bind(this)):this.createUrl(e)}substitute(e,o){var a;return o?a=this.relativeTo(o):a=this.urls,substitute(e,a,this.replacementUrls)}destroy(){this.settings=void 0,this.manifest=void 0,this.resources=void 0,this.replacementUrls=void 0,this.html=void 0,this.assets=void 0,this.css=void 0,this.urls=void 0,this.cssUrls=void 0}}class PageList{constructor(e){this.pages=[],this.locations=[],this.epubcfi=new EpubCFI,this.firstPage=0,this.lastPage=0,this.totalPages=0,this.toc=void 0,this.ncx=void 0,e&&(this.pageList=this.parse(e)),this.pageList&&this.pageList.length&&this.process(this.pageList)}parse(e){var o=qs(e,"html"),a=qs(e,"ncx");if(o)return this.parseNav(e);if(a)return this.parseNcx(e)}parseNav(e){var o=querySelectorByType(e,"nav","page-list"),a=o?qsa(o,"li"):[],c=a.length,h,g=[],b;if(!a||c===0)return g;for(h=0;h<c;++h)b=this.item(a[h]),g.push(b);return g}parseNcx(e){var o=[],a=0,c,h,g,b=0;if(h=qs(e,"pageList"),!h||(g=qsa(h,"pageTarget"),b=g.length,!g||g.length===0))return o;for(a=0;a<b;++a)c=this.ncxItem(g[a]),o.push(c);return o}ncxItem(e){var o=qs(e,"navLabel"),a=qs(o,"text"),c=a.textContent,h=qs(e,"content"),g=h.getAttribute("src"),b=parseInt(c,10);return{href:g,page:b}}item(e){var o=qs(e,"a"),a=o.getAttribute("href")||"",c=o.textContent||"",h=parseInt(c),g=a.indexOf("epubcfi"),b,_,j;return g!=-1?(b=a.split("#"),_=b[0],j=b.length>1?b[1]:!1,{cfi:j,href:a,packageUrl:_,page:h}):{href:a,page:h}}process(e){e.forEach(function(o){this.pages.push(o.page),o.cfi&&this.locations.push(o.cfi)},this),this.firstPage=parseInt(this.pages[0]),this.lastPage=parseInt(this.pages[this.pages.length-1]),this.totalPages=this.lastPage-this.firstPage}pageFromCfi(e){var o=-1;if(this.locations.length===0)return-1;var a=indexOfSorted(e,this.locations,this.epubcfi.compare);return a!=-1?o=this.pages[a]:(a=locationOf(e,this.locations,this.epubcfi.compare),o=a-1>=0?this.pages[a-1]:this.pages[0],o!==void 0||(o=-1)),o}cfiFromPage(e){var o=-1;typeof e!="number"&&(e=parseInt(e));var a=this.pages.indexOf(e);return a!=-1&&(o=this.locations[a]),o}pageFromPercentage(e){var o=Math.round(this.totalPages*e);return o}percentageFromPage(e){var o=(e-this.firstPage)/this.totalPages;return Math.round(o*1e3)/1e3}percentageFromCfi(e){var o=this.pageFromCfi(e),a=this.percentageFromPage(o);return a}destroy(){this.pages=void 0,this.locations=void 0,this.epubcfi=void 0,this.pageList=void 0,this.toc=void 0,this.ncx=void 0}}class Layout{constructor(e){this.settings=e,this.name=e.layout||"reflowable",this._spread=e.spread!=="none",this._minSpreadWidth=e.minSpreadWidth||800,this._evenSpreads=e.evenSpreads||!1,e.flow==="scrolled"||e.flow==="scrolled-continuous"||e.flow==="scrolled-doc"?this._flow="scrolled":this._flow="paginated",this.width=0,this.height=0,this.spreadWidth=0,this.delta=0,this.columnWidth=0,this.gap=0,this.divisor=1,this.props={name:this.name,spread:this._spread,flow:this._flow,width:0,height:0,spreadWidth:0,delta:0,columnWidth:0,gap:0,divisor:1}}flow(e){return typeof e<"u"&&(e==="scrolled"||e==="scrolled-continuous"||e==="scrolled-doc"?this._flow="scrolled":this._flow="paginated",this.update({flow:this._flow})),this._flow}spread(e,o){return e&&(this._spread=e!=="none",this.update({spread:this._spread})),o>=0&&(this._minSpreadWidth=o),this._spread}calculate(e,o,a){var c=1,h=a||0,g=e,b=o,_=Math.floor(g/12),j,$,_e,tt;this._spread&&g>=this._minSpreadWidth?c=2:c=1,this.name==="reflowable"&&this._flow==="paginated"&&!(a>=0)&&(h=_%2===0?_:_-1),this.name==="pre-paginated"&&(h=0),c>1?(j=g/c-h,_e=j+h):(j=g,_e=g),this.name==="pre-paginated"&&c>1&&(g=j),$=j*c+h,tt=g,this.width=g,this.height=b,this.spreadWidth=$,this.pageWidth=_e,this.delta=tt,this.columnWidth=j,this.gap=h,this.divisor=c,this.update({width:g,height:b,spreadWidth:$,pageWidth:_e,delta:tt,columnWidth:j,gap:h,divisor:c})}format(e,o,a){var c;return this.name==="pre-paginated"?c=e.fit(this.columnWidth,this.height,o):this._flow==="paginated"?c=e.columns(this.width,this.height,this.columnWidth,this.gap,this.settings.direction):a&&a==="horizontal"?c=e.size(null,this.height):c=e.size(this.width,null),c}count(e,o){let a,c;return this.name==="pre-paginated"?(a=1,c=1):this._flow==="paginated"?(o=o||this.delta,a=Math.ceil(e/o),c=a*this.divisor):(o=o||this.height,a=Math.ceil(e/o),c=a),{spreads:a,pages:c}}update(e){if(Object.keys(e).forEach(o=>{this.props[o]===e[o]&&delete e[o]}),Object.keys(e).length>0){let o=extend(this.props,e);this.emit(EVENTS.LAYOUT.UPDATED,o,e)}}}EventEmitter(Layout.prototype);class Themes{constructor(e){this.rendition=e,this._themes={default:{rules:{},url:"",serialized:""}},this._overrides={},this._current="default",this._injected=[],this.rendition.hooks.content.register(this.inject.bind(this)),this.rendition.hooks.content.register(this.overrides.bind(this))}register(){if(arguments.length!==0){if(arguments.length===1&&typeof arguments[0]=="object")return this.registerThemes(arguments[0]);if(arguments.length===1&&typeof arguments[0]=="string")return this.default(arguments[0]);if(arguments.length===2&&typeof arguments[1]=="string")return this.registerUrl(arguments[0],arguments[1]);if(arguments.length===2&&typeof arguments[1]=="object")return this.registerRules(arguments[0],arguments[1])}}default(e){if(e){if(typeof e=="string")return this.registerUrl("default",e);if(typeof e=="object")return this.registerRules("default",e)}}registerThemes(e){for(var o in e)e.hasOwnProperty(o)&&(typeof e[o]=="string"?this.registerUrl(o,e[o]):this.registerRules(o,e[o]))}registerCss(e,o){this._themes[e]={serialized:o},(this._injected[e]||e=="default")&&this.update(e)}registerUrl(e,o){var a=new Url$1(o);this._themes[e]={url:a.toString()},(this._injected[e]||e=="default")&&this.update(e)}registerRules(e,o){this._themes[e]={rules:o},(this._injected[e]||e=="default")&&this.update(e)}select(e){var o=this._current,a;this._current=e,this.update(e),a=this.rendition.getContents(),a.forEach(c=>{c.removeClass(o),c.addClass(e)})}update(e){var o=this.rendition.getContents();o.forEach(a=>{this.add(e,a)})}inject(e){var o=[],a=this._themes,c;for(var h in a)a.hasOwnProperty(h)&&(h===this._current||h==="default")&&(c=a[h],(c.rules&&Object.keys(c.rules).length>0||c.url&&o.indexOf(c.url)===-1)&&this.add(h,e),this._injected.push(h));this._current!="default"&&e.addClass(this._current)}add(e,o){var a=this._themes[e];!a||!o||(a.url?o.addStylesheet(a.url):a.serialized?(o.addStylesheetCss(a.serialized,e),a.injected=!0):a.rules&&(o.addStylesheetRules(a.rules,e),a.injected=!0))}override(e,o,a){var c=this.rendition.getContents();this._overrides[e]={value:o,priority:a===!0},c.forEach(h=>{h.css(e,this._overrides[e].value,this._overrides[e].priority)})}removeOverride(e){var o=this.rendition.getContents();delete this._overrides[e],o.forEach(a=>{a.css(e)})}overrides(e){var o=this._overrides;for(var a in o)o.hasOwnProperty(a)&&e.css(a,o[a].value,o[a].priority)}fontSize(e){this.override("font-size",e)}font(e){this.override("font-family",e,!0)}destroy(){this.rendition=void 0,this._themes=void 0,this._overrides=void 0,this._current=void 0,this._injected=void 0}}class Mapping{constructor(e,o,a,c=!1){this.layout=e,this.horizontal=a==="horizontal",this.direction=o||"ltr",this._dev=c}section(e){var o=this.findRanges(e),a=this.rangeListToCfiList(e.section.cfiBase,o);return a}page(e,o,a,c){var h=e&&e.document?e.document.body:!1,g;if(h){if(g=this.rangePairToCfiPair(o,{start:this.findStart(h,a,c),end:this.findEnd(h,a,c)}),this._dev===!0){let b=e.document,_=new EpubCFI(g.start).toRange(b),j=new EpubCFI(g.end).toRange(b),$=b.defaultView.getSelection(),_e=b.createRange();$.removeAllRanges(),_e.setStart(_.startContainer,_.startOffset),_e.setEnd(j.endContainer,j.endOffset),$.addRange(_e)}return g}}walk(e,o){if(!(e&&e.nodeType===Node.TEXT_NODE)){var a={acceptNode:function(_){return _.data.trim().length>0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}},c=a.acceptNode;c.acceptNode=a.acceptNode;for(var h=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,c,!1),g,b;(g=h.nextNode())&&(b=o(g),!b););return b}}findRanges(e){for(var o=[],a=e.contents.scrollWidth(),c=Math.ceil(a/this.layout.spreadWidth),h=c*this.layout.divisor,g=this.layout.columnWidth,b=this.layout.gap,_,j,$=0;$<h.pages;$++)_=(g+b)*$,j=g*($+1)+b*$,o.push({start:this.findStart(e.document.body,_,j),end:this.findEnd(e.document.body,_,j)});return o}findStart(e,o,a){for(var c=[e],h,g,b=e;c.length;)if(h=c.shift(),g=this.walk(h,_=>{var j,$,_e,tt,et;if(et=nodeBounds(_),this.horizontal&&this.direction==="ltr"){if(j=this.horizontal?et.left:et.top,$=this.horizontal?et.right:et.bottom,j>=o&&j<=a)return _;if($>o)return _;b=_,c.push(_)}else if(this.horizontal&&this.direction==="rtl"){if(j=et.left,$=et.right,$<=a&&$>=o)return _;if(j<a)return _;b=_,c.push(_)}else{if(_e=et.top,tt=et.bottom,_e>=o&&_e<=a)return _;if(tt>o)return _;b=_,c.push(_)}}),g)return this.findTextStartRange(g,o,a);return this.findTextStartRange(b,o,a)}findEnd(e,o,a){for(var c=[e],h,g=e,b;c.length;)if(h=c.shift(),b=this.walk(h,_=>{var j,$,_e,tt,et;if(et=nodeBounds(_),this.horizontal&&this.direction==="ltr"){if(j=Math.round(et.left),$=Math.round(et.right),j>a&&g)return g;if($>a)return _;g=_,c.push(_)}else if(this.horizontal&&this.direction==="rtl"){if(j=Math.round(this.horizontal?et.left:et.top),$=Math.round(this.horizontal?et.right:et.bottom),$<o&&g)return g;if(j<o)return _;g=_,c.push(_)}else{if(_e=Math.round(et.top),tt=Math.round(et.bottom),_e>a&&g)return g;if(tt>a)return _;g=_,c.push(_)}}),b)return this.findTextEndRange(b,o,a);return this.findTextEndRange(g,o,a)}findTextStartRange(e,o,a){for(var c=this.splitTextNodeIntoRanges(e),h,g,b,_,j,$=0;$<c.length;$++)if(h=c[$],g=h.getBoundingClientRect(),this.horizontal&&this.direction==="ltr"){if(b=g.left,b>=o)return h}else if(this.horizontal&&this.direction==="rtl"){if(j=g.right,j<=a)return h}else if(_=g.top,_>=o)return h;return c[0]}findTextEndRange(e,o,a){for(var c=this.splitTextNodeIntoRanges(e),h,g,b,_,j,$,_e,tt=0;tt<c.length;tt++){if(g=c[tt],b=g.getBoundingClientRect(),this.horizontal&&this.direction==="ltr"){if(_=b.left,j=b.right,_>a&&h)return h;if(j>a)return g}else if(this.horizontal&&this.direction==="rtl"){if(_=b.left,j=b.right,j<o&&h)return h;if(_<o)return g}else{if($=b.top,_e=b.bottom,$>a&&h)return h;if(_e>a)return g}h=g}return c[c.length-1]}splitTextNodeIntoRanges(e,o){var a=[],c=e.textContent||"",h=c.trim(),g,b=e.ownerDocument,_=o||" ",j=h.indexOf(_);if(j===-1||e.nodeType!=Node.TEXT_NODE)return g=b.createRange(),g.selectNodeContents(e),[g];for(g=b.createRange(),g.setStart(e,0),g.setEnd(e,j),a.push(g),g=!1;j!=-1;)j=h.indexOf(_,j+1),j>0&&(g&&(g.setEnd(e,j),a.push(g)),g=b.createRange(),g.setStart(e,j+1));return g&&(g.setEnd(e,h.length),a.push(g)),a}rangePairToCfiPair(e,o){var a=o.start,c=o.end;a.collapse(!0),c.collapse(!1);let h=new EpubCFI(a,e).toString(),g=new EpubCFI(c,e).toString();return{start:h,end:g}}rangeListToCfiList(e,o){for(var a=[],c,h=0;h<o.length;h++)c=this.rangePairToCfiPair(e,o[h]),a.push(c);return a}axis(e){return e&&(this.horizontal=e==="horizontal"),this.horizontal}}const hasNavigator=typeof navigator<"u",isChrome=hasNavigator&&/Chrome/.test(navigator.userAgent),isWebkit=hasNavigator&&!isChrome&&/AppleWebKit/.test(navigator.userAgent),ELEMENT_NODE=1;class Contents{constructor(e,o,a,c){this.epubcfi=new EpubCFI,this.document=e,this.documentElement=this.document.documentElement,this.content=o||this.document.body,this.window=this.document.defaultView,this._size={width:0,height:0},this.sectionIndex=c||0,this.cfiBase=a||"",this.epubReadingSystem("epub.js",EPUBJS_VERSION),this.called=0,this.active=!0,this.listeners()}static get listenedEvents(){return DOM_EVENTS}width(e){var o=this.content;return e&&isNumber(e)&&(e=e+"px"),e&&(o.style.width=e),parseInt(this.window.getComputedStyle(o).width)}height(e){var o=this.content;return e&&isNumber(e)&&(e=e+"px"),e&&(o.style.height=e),parseInt(this.window.getComputedStyle(o).height)}contentWidth(e){var o=this.content||this.document.body;return e&&isNumber(e)&&(e=e+"px"),e&&(o.style.width=e),parseInt(this.window.getComputedStyle(o).width)}contentHeight(e){var o=this.content||this.document.body;return e&&isNumber(e)&&(e=e+"px"),e&&(o.style.height=e),parseInt(this.window.getComputedStyle(o).height)}textWidth(){let e,o,a=this.document.createRange(),c=this.content||this.document.body,h=borders(c);return a.selectNodeContents(c),e=a.getBoundingClientRect(),o=e.width,h&&h.width&&(o+=h.width),Math.round(o)}textHeight(){let e,o,a=this.document.createRange(),c=this.content||this.document.body;return a.selectNodeContents(c),e=a.getBoundingClientRect(),o=e.bottom,Math.round(o)}scrollWidth(){var e=this.documentElement.scrollWidth;return e}scrollHeight(){var e=this.documentElement.scrollHeight;return e}overflow(e){return e&&(this.documentElement.style.overflow=e),this.window.getComputedStyle(this.documentElement).overflow}overflowX(e){return e&&(this.documentElement.style.overflowX=e),this.window.getComputedStyle(this.documentElement).overflowX}overflowY(e){return e&&(this.documentElement.style.overflowY=e),this.window.getComputedStyle(this.documentElement).overflowY}css(e,o,a){var c=this.content||this.document.body;return o?c.style.setProperty(e,o,a?"important":""):c.style.removeProperty(e),this.window.getComputedStyle(c)[e]}viewport(e){var o=this.document.querySelector("meta[name='viewport']"),a={width:void 0,height:void 0,scale:void 0,minimum:void 0,maximum:void 0,scalable:void 0},c=[],h={};if(o&&o.hasAttribute("content")){let g=o.getAttribute("content"),b=g.match(/width\s*=\s*([^,]*)/),_=g.match(/height\s*=\s*([^,]*)/),j=g.match(/initial-scale\s*=\s*([^,]*)/),$=g.match(/minimum-scale\s*=\s*([^,]*)/),_e=g.match(/maximum-scale\s*=\s*([^,]*)/),tt=g.match(/user-scalable\s*=\s*([^,]*)/);b&&b.length&&typeof b[1]<"u"&&(a.width=b[1]),_&&_.length&&typeof _[1]<"u"&&(a.height=_[1]),j&&j.length&&typeof j[1]<"u"&&(a.scale=j[1]),$&&$.length&&typeof $[1]<"u"&&(a.minimum=$[1]),_e&&_e.length&&typeof _e[1]<"u"&&(a.maximum=_e[1]),tt&&tt.length&&typeof tt[1]<"u"&&(a.scalable=tt[1])}return h=defaults(e||{},a),e&&(h.width&&c.push("width="+h.width),h.height&&c.push("height="+h.height),h.scale&&c.push("initial-scale="+h.scale),h.scalable==="no"?(c.push("minimum-scale="+h.scale),c.push("maximum-scale="+h.scale),c.push("user-scalable="+h.scalable)):(h.scalable&&c.push("user-scalable="+h.scalable),h.minimum&&c.push("minimum-scale="+h.minimum),h.maximum&&c.push("minimum-scale="+h.maximum)),o||(o=this.document.createElement("meta"),o.setAttribute("name","viewport"),this.document.querySelector("head").appendChild(o)),o.setAttribute("content",c.join(", ")),this.window.scrollTo(0,0)),h}expand(){this.emit(EVENTS.CONTENTS.EXPAND)}listeners(){this.imageLoadListeners(),this.mediaQueryListeners(),this.addEventListeners(),this.addSelectionListeners(),typeof ResizeObserver>"u"?(this.resizeListeners(),this.visibilityListeners()):this.resizeObservers(),this.linksHandler()}removeListeners(){this.removeEventListeners(),this.removeSelectionListeners(),this.observer&&this.observer.disconnect(),clearTimeout(this.expanding)}resizeCheck(){let e=this.textWidth(),o=this.textHeight();(e!=this._size.width||o!=this._size.height)&&(this._size={width:e,height:o},this.onResize&&this.onResize(this._size),this.emit(EVENTS.CONTENTS.RESIZE,this._size))}resizeListeners(){clearTimeout(this.expanding),requestAnimationFrame(this.resizeCheck.bind(this)),this.expanding=setTimeout(this.resizeListeners.bind(this),350)}visibilityListeners(){document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&this.active===!1?(this.active=!0,this.resizeListeners()):(this.active=!1,clearTimeout(this.expanding))})}transitionListeners(){let e=this.content;e.style.transitionProperty="font, font-size, font-size-adjust, font-stretch, font-variation-settings, font-weight, width, height",e.style.transitionDuration="0.001ms",e.style.transitionTimingFunction="linear",e.style.transitionDelay="0",this._resizeCheck=this.resizeCheck.bind(this),this.document.addEventListener("transitionend",this._resizeCheck)}mediaQueryListeners(){for(var e=this.document.styleSheets,o=(function(b){b.matches&&!this._expanding&&setTimeout(this.expand.bind(this),1)}).bind(this),a=0;a<e.length;a+=1){var c;try{c=e[a].cssRules}catch{return}if(!c)return;for(var h=0;h<c.length;h+=1)if(c[h].media){var g=this.window.matchMedia(c[h].media.mediaText);g.addListener(o)}}}resizeObservers(){this.observer=new ResizeObserver(e=>{requestAnimationFrame(this.resizeCheck.bind(this))}),this.observer.observe(this.document.documentElement)}mutationObservers(){this.observer=new MutationObserver(o=>{this.resizeCheck()});let e={attributes:!0,childList:!0,characterData:!0,subtree:!0};this.observer.observe(this.document,e)}imageLoadListeners(){for(var e=this.document.querySelectorAll("img"),o,a=0;a<e.length;a++)o=e[a],typeof o.naturalWidth<"u"&&o.naturalWidth===0&&(o.onload=this.expand.bind(this))}fontLoadListeners(){!this.document||!this.document.fonts||this.document.fonts.ready.then((function(){this.resizeCheck()}).bind(this))}root(){return this.document?this.document.documentElement:null}locationOf(e,o){var a,c={left:0,top:0};if(!this.document)return c;if(this.epubcfi.isCfiString(e)){let h=new EpubCFI(e).toRange(this.document,o);if(h){try{if(!h.endContainer||h.startContainer==h.endContainer&&h.startOffset==h.endOffset){let g=h.startContainer.textContent.indexOf(" ",h.startOffset);g==-1&&(g=h.startContainer.textContent.length),h.setEnd(h.startContainer,g)}}catch(g){console.error("setting end offset to start container length failed",g)}if(h.startContainer.nodeType===Node.ELEMENT_NODE)a=h.startContainer.getBoundingClientRect(),c.left=a.left,c.top=a.top;else if(isWebkit){let g=h.startContainer,b=new Range;try{g.nodeType===ELEMENT_NODE?a=g.getBoundingClientRect():h.startOffset+2<g.length?(b.setStart(g,h.startOffset),b.setEnd(g,h.startOffset+2),a=b.getBoundingClientRect()):h.startOffset-2>0?(b.setStart(g,h.startOffset-2),b.setEnd(g,h.startOffset),a=b.getBoundingClientRect()):a=g.parentNode.getBoundingClientRect()}catch(_){console.error(_,_.stack)}}else a=h.getBoundingClientRect()}}else if(typeof e=="string"&&e.indexOf("#")>-1){let h=e.substring(e.indexOf("#")+1),g=this.document.getElementById(h);if(g)if(isWebkit){let b=new Range;b.selectNode(g),a=b.getBoundingClientRect()}else a=g.getBoundingClientRect()}return a&&(c.left=a.left,c.top=a.top),c}addStylesheet(e){return new Promise((function(o,a){var c,h=!1;if(!this.document){o(!1);return}if(c=this.document.querySelector("link[href='"+e+"']"),c){o(!0);return}c=this.document.createElement("link"),c.type="text/css",c.rel="stylesheet",c.href=e,c.onload=c.onreadystatechange=function(){!h&&(!this.readyState||this.readyState=="complete")&&(h=!0,setTimeout(()=>{o(!0)},1))},this.document.head.appendChild(c)}).bind(this))}_getStylesheetNode(e){var o;return e="epubjs-inserted-css-"+(e||""),this.document?(o=this.document.getElementById(e),o||(o=this.document.createElement("style"),o.id=e,this.document.head.appendChild(o)),o):!1}addStylesheetCss(e,o){if(!this.document||!e)return!1;var a;return a=this._getStylesheetNode(o),a.innerHTML=e,!0}addStylesheetRules(e,o){var a;if(!(!this.document||!e||e.length===0))if(a=this._getStylesheetNode(o).sheet,Object.prototype.toString.call(e)==="[object Array]")for(var c=0,h=e.length;c<h;c++){var g=1,b=e[c],_=e[c][0],j="";Object.prototype.toString.call(b[1][0])==="[object Array]"&&(b=b[1],g=0);for(var $=b.length;g<$;g++){var _e=b[g];j+=_e[0]+":"+_e[1]+(_e[2]?" !important":"")+`;
`}a.insertRule(_+"{"+j+"}",a.cssRules.length)}else Object.keys(e).forEach(et=>{const ut=e[et];if(Array.isArray(ut))ut.forEach(ht=>{const nt=Object.keys(ht).map(rt=>`${rt}:${ht[rt]}`).join(";");a.insertRule(`${et}{${nt}}`,a.cssRules.length)});else{const st=Object.keys(ut).map(nt=>`${nt}:${ut[nt]}`).join(";");a.insertRule(`${et}{${st}}`,a.cssRules.length)}})}addScript(e){return new Promise((function(o,a){var c,h=!1;if(!this.document){o(!1);return}c=this.document.createElement("script"),c.type="text/javascript",c.async=!0,c.src=e,c.onload=c.onreadystatechange=function(){!h&&(!this.readyState||this.readyState=="complete")&&(h=!0,setTimeout(function(){o(!0)},1))},this.document.head.appendChild(c)}).bind(this))}addClass(e){var o;this.document&&(o=this.content||this.document.body,o&&o.classList.add(e))}removeClass(e){var o;this.document&&(o=this.content||this.document.body,o&&o.classList.remove(e))}addEventListeners(){this.document&&(this._triggerEvent=this.triggerEvent.bind(this),DOM_EVENTS.forEach(function(e){this.document.addEventListener(e,this._triggerEvent,{passive:!0})},this))}removeEventListeners(){this.document&&(DOM_EVENTS.forEach(function(e){this.document.removeEventListener(e,this._triggerEvent,{passive:!0})},this),this._triggerEvent=void 0)}triggerEvent(e){this.emit(e.type,e)}addSelectionListeners(){this.document&&(this._onSelectionChange=this.onSelectionChange.bind(this),this.document.addEventListener("selectionchange",this._onSelectionChange,{passive:!0}))}removeSelectionListeners(){this.document&&(this.document.removeEventListener("selectionchange",this._onSelectionChange,{passive:!0}),this._onSelectionChange=void 0)}onSelectionChange(e){this.selectionEndTimeout&&clearTimeout(this.selectionEndTimeout),this.selectionEndTimeout=setTimeout((function(){var o=this.window.getSelection();this.triggerSelectedEvent(o)}).bind(this),250)}triggerSelectedEvent(e){var o,a;e&&e.rangeCount>0&&(o=e.getRangeAt(0),o.collapsed||(a=new EpubCFI(o,this.cfiBase).toString(),this.emit(EVENTS.CONTENTS.SELECTED,a),this.emit(EVENTS.CONTENTS.SELECTED_RANGE,o)))}range(e,o){var a=new EpubCFI(e);return a.toRange(this.document,o)}cfiFromRange(e,o){return new EpubCFI(e,this.cfiBase,o).toString()}cfiFromNode(e,o){return new EpubCFI(e,this.cfiBase,o).toString()}map(e){var o=new Mapping(e);return o.section()}size(e,o){var a={scale:1,scalable:"no"};this.layoutStyle("scrolling"),e>=0&&(this.width(e),a.width=e,this.css("padding","0 "+e/12+"px")),o>=0&&(this.height(o),a.height=o),this.css("margin","0"),this.css("box-sizing","border-box"),this.viewport(a)}columns(e,o,a,c,h){let g=prefixed("column-axis"),b=prefixed("column-gap"),_=prefixed("column-width"),j=prefixed("column-fill"),_e=this.writingMode().indexOf("vertical")===0?"vertical":"horizontal";this.layoutStyle("paginated"),h==="rtl"&&_e==="horizontal"&&this.direction(h),this.width(e),this.height(o),this.viewport({width:e,height:o,scale:1,scalable:"no"}),this.css("overflow-y","hidden"),this.css("margin","0",!0),_e==="vertical"?(this.css("padding-top",c/2+"px",!0),this.css("padding-bottom",c/2+"px",!0),this.css("padding-left","20px"),this.css("padding-right","20px"),this.css(g,"vertical")):(this.css("padding-top","20px"),this.css("padding-bottom","20px"),this.css("padding-left",c/2+"px",!0),this.css("padding-right",c/2+"px",!0),this.css(g,"horizontal")),this.css("box-sizing","border-box"),this.css("max-width","inherit"),this.css(j,"auto"),this.css(b,c+"px"),this.css(_,a+"px"),this.css("-webkit-line-box-contain","block glyphs replaced")}scaler(e,o,a){var c="scale("+e+")",h="";this.css("transform-origin","top left"),(o>=0||a>=0)&&(h=" translate("+(o||0)+"px, "+(a||0)+"px )"),this.css("transform",c+h)}fit(e,o,a){var c=this.viewport(),h=parseInt(c.width),g=parseInt(c.height),b=e/h,_=o/g,j=b<_?b:_;if(this.layoutStyle("paginated"),this.width(h),this.height(g),this.overflow("hidden"),this.scaler(j,0,0),this.css("background-size",h*j+"px "+g*j+"px"),this.css("background-color","transparent"),a&&a.properties.includes("page-spread-left")){var $=e-h*j;this.css("margin-left",$+"px")}}direction(e){this.documentElement&&(this.documentElement.style.direction=e)}mapPage(e,o,a,c,h){var g=new Mapping(o,h);return g.page(this,e,a,c)}linksHandler(){replaceLinks(this.content,e=>{this.emit(EVENTS.CONTENTS.LINK_CLICKED,e)})}writingMode(e){let o=prefixed("writing-mode");return e&&this.documentElement&&(this.documentElement.style[o]=e),this.window.getComputedStyle(this.documentElement)[o]||""}layoutStyle(e){return e&&(this._layoutStyle=e,navigator.epubReadingSystem.layoutStyle=this._layoutStyle),this._layoutStyle||"paginated"}epubReadingSystem(e,o){return navigator.epubReadingSystem={name:e,version:o,layoutStyle:this.layoutStyle(),hasFeature:function(a){switch(a){case"dom-manipulation":return!0;case"layout-changes":return!0;case"touch-events":return!0;case"mouse-events":return!0;case"keyboard-events":return!0;case"spine-scripting":return!1;default:return!1}}},navigator.epubReadingSystem}destroy(){this.removeListeners()}}EventEmitter(Contents.prototype);class Annotations{constructor(e){this.rendition=e,this.highlights=[],this.underlines=[],this.marks=[],this._annotations={},this._annotationsBySectionIndex={},this.rendition.hooks.render.register(this.inject.bind(this)),this.rendition.hooks.unloaded.register(this.clear.bind(this))}add(e,o,a,c,h,g){let b=encodeURI(o+e),j=new EpubCFI(o).spinePos,$=new Annotation({type:e,cfiRange:o,data:a,sectionIndex:j,cb:c,className:h,styles:g});return this._annotations[b]=$,j in this._annotationsBySectionIndex?this._annotationsBySectionIndex[j].push(b):this._annotationsBySectionIndex[j]=[b],this.rendition.views().forEach(tt=>{$.sectionIndex===tt.index&&$.attach(tt)}),$}remove(e,o){let a=encodeURI(e+o);if(a in this._annotations){let c=this._annotations[a];if(o&&c.type!==o)return;this.rendition.views().forEach(g=>{this._removeFromAnnotationBySectionIndex(c.sectionIndex,a),c.sectionIndex===g.index&&c.detach(g)}),delete this._annotations[a]}}_removeFromAnnotationBySectionIndex(e,o){this._annotationsBySectionIndex[e]=this._annotationsAt(e).filter(a=>a!==o)}_annotationsAt(e){return this._annotationsBySectionIndex[e]}highlight(e,o,a,c,h){return this.add("highlight",e,o,a,c,h)}underline(e,o,a,c,h){return this.add("underline",e,o,a,c,h)}mark(e,o,a){return this.add("mark",e,o,a)}each(){return this._annotations.forEach.apply(this._annotations,arguments)}inject(e){let o=e.index;o in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[o].forEach(c=>{this._annotations[c].attach(e)})}clear(e){let o=e.index;o in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[o].forEach(c=>{this._annotations[c].detach(e)})}show(){}hide(){}}class Annotation{constructor({type:e,cfiRange:o,data:a,sectionIndex:c,cb:h,className:g,styles:b}){this.type=e,this.cfiRange=o,this.data=a,this.sectionIndex=c,this.mark=void 0,this.cb=h,this.className=g,this.styles=b}update(e){this.data=e}attach(e){let{cfiRange:o,data:a,type:c,mark:h,cb:g,className:b,styles:_}=this,j;return c==="highlight"?j=e.highlight(o,a,g,b,_):c==="underline"?j=e.underline(o,a,g,b,_):c==="mark"&&(j=e.mark(o,a,g)),this.mark=j,this.emit(EVENTS.ANNOTATION.ATTACH,j),j}detach(e){let{cfiRange:o,type:a}=this,c;return e&&(a==="highlight"?c=e.unhighlight(o):a==="underline"?c=e.ununderline(o):a==="mark"&&(c=e.unmark(o))),this.mark=void 0,this.emit(EVENTS.ANNOTATION.DETACH,c),c}text(){}}EventEmitter(Annotation.prototype);var marks={},svg={};Object.defineProperty(svg,"__esModule",{value:!0});svg.createElement=createElement;function createElement(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}svg.default={createElement};var events={};Object.defineProperty(events,"__esModule",{value:!0});events.proxyMouse=proxyMouse;events.clone=clone;events.default={proxyMouse};function proxyMouse(s,e){function o(g){for(var b=e.length-1;b>=0;b--){var _=e[b],j=g.clientX,$=g.clientY;if(g.touches&&g.touches.length&&(j=g.touches[0].clientX,$=g.touches[0].clientY),!!contains$1(_,s,j,$)){_.dispatchEvent(clone(g));break}}}if(s.nodeName==="iframe"||s.nodeName==="IFRAME")try{this.target=s.contentDocument}catch{this.target=s}else this.target=s;for(var a=["mouseup","mousedown","click","touchstart"],c=0;c<a.length;c++){var h=a[c];this.target.addEventListener(h,function(g){return o(g)},!1)}}function clone(s){var e=Object.assign({},s,{bubbles:!1});try{return new MouseEvent(s.type,e)}catch{var o=document.createEvent("MouseEvents");return o.initMouseEvent(s.type,!1,e.cancelable,e.view,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),o}}function contains$1(s,e,o,a){var c=e.getBoundingClientRect();function h($,_e,tt){var et=$.top-c.top,ut=$.left-c.left,ht=et+$.height,st=ut+$.width;return et<=tt&&ut<=_e&&ht>tt&&st>_e}var g=s.getBoundingClientRect();if(!h(g,o,a))return!1;for(var b=s.getClientRects(),_=0,j=b.length;_<j;_++)if(h(b[_],o,a))return!0;return!1}var Pane_1,Highlight_1;Object.defineProperty(marks,"__esModule",{value:!0});var Underline_1=marks.Underline=Highlight_1=marks.Highlight=marks.Mark=Pane_1=marks.Pane=void 0,_get=function s(e,o,a){e===null&&(e=Function.prototype);var c=Object.getOwnPropertyDescriptor(e,o);if(c===void 0){var h=Object.getPrototypeOf(e);return h===null?void 0:s(h,o,a)}else{if("value"in c)return c.value;var g=c.get;return g===void 0?void 0:g.call(a)}},_createClass=function(){function s(e,o){for(var a=0;a<o.length;a++){var c=o[a];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,c.key,c)}}return function(e,o,a){return o&&s(e.prototype,o),a&&s(e,a),e}}(),_svg=svg,_svg2=_interopRequireDefault(_svg),_events=events,_events2=_interopRequireDefault(_events);function _interopRequireDefault(s){return s&&s.__esModule?s:{default:s}}function _possibleConstructorReturn(s,e){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:s}function _inherits(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);s.prototype=Object.create(e&&e.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(s,e):s.__proto__=e)}function _classCallCheck(s,e){if(!(s instanceof e))throw new TypeError("Cannot call a class as a function")}Pane_1=marks.Pane=function(){function s(e){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document.body;_classCallCheck(this,s),this.target=e,this.element=_svg2.default.createElement("svg"),this.marks=[],this.element.style.position="absolute",this.element.setAttribute("pointer-events","none"),_events2.default.proxyMouse(this.target,this.marks),this.container=o,this.container.appendChild(this.element),this.render()}return _createClass(s,[{key:"addMark",value:function(o){var a=_svg2.default.createElement("g");return this.element.appendChild(a),o.bind(a,this.container),this.marks.push(o),o.render(),o}},{key:"removeMark",value:function(o){var a=this.marks.indexOf(o);if(a!==-1){var c=o.unbind();this.element.removeChild(c),this.marks.splice(a,1)}}},{key:"render",value:function(){setCoords(this.element,coords(this.target,this.container));var o=!0,a=!1,c=void 0;try{for(var h=this.marks[Symbol.iterator](),g;!(o=(g=h.next()).done);o=!0){var b=g.value;b.render()}}catch(_){a=!0,c=_}finally{try{!o&&h.return&&h.return()}finally{if(a)throw c}}}}]),s}();var Mark=marks.Mark=function(){function s(){_classCallCheck(this,s),this.element=null}return _createClass(s,[{key:"bind",value:function(o,a){this.element=o,this.container=a}},{key:"unbind",value:function(){var o=this.element;return this.element=null,o}},{key:"render",value:function(){}},{key:"dispatchEvent",value:function(o){this.element&&this.element.dispatchEvent(o)}},{key:"getBoundingClientRect",value:function(){return this.element.getBoundingClientRect()}},{key:"getClientRects",value:function(){for(var o=[],a=this.element.firstChild;a;)o.push(a.getBoundingClientRect()),a=a.nextSibling;return o}},{key:"filteredRanges",value:function(){var o=Array.from(this.range.getClientRects());return o.filter(function(a){for(var c=0;c<o.length;c++){if(o[c]===a)return!0;var h=contains(o[c],a);if(h)return!1}return!0})}}]),s}(),Highlight=Highlight_1=marks.Highlight=function(s){_inherits(e,s);function e(o,a,c,h){_classCallCheck(this,e);var g=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return g.range=o,g.className=a,g.data=c||{},g.attributes=h||{},g}return _createClass(e,[{key:"bind",value:function(a,c){_get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"bind",this).call(this,a,c);for(var h in this.data)this.data.hasOwnProperty(h)&&(this.element.dataset[h]=this.data[h]);for(var h in this.attributes)this.attributes.hasOwnProperty(h)&&this.element.setAttribute(h,this.attributes[h]);this.className&&this.element.classList.add(this.className)}},{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var a=this.element.ownerDocument.createDocumentFragment(),c=this.filteredRanges(),h=this.element.getBoundingClientRect(),g=this.container.getBoundingClientRect(),b=0,_=c.length;b<_;b++){var j=c[b],$=_svg2.default.createElement("rect");$.setAttribute("x",j.left-h.left+g.left),$.setAttribute("y",j.top-h.top+g.top),$.setAttribute("height",j.height),$.setAttribute("width",j.width),a.appendChild($)}this.element.appendChild(a)}}]),e}(Mark);Underline_1=marks.Underline=function(s){_inherits(e,s);function e(o,a,c,h){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,o,a,c,h))}return _createClass(e,[{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var a=this.element.ownerDocument.createDocumentFragment(),c=this.filteredRanges(),h=this.element.getBoundingClientRect(),g=this.container.getBoundingClientRect(),b=0,_=c.length;b<_;b++){var j=c[b],$=_svg2.default.createElement("rect");$.setAttribute("x",j.left-h.left+g.left),$.setAttribute("y",j.top-h.top+g.top),$.setAttribute("height",j.height),$.setAttribute("width",j.width),$.setAttribute("fill","none");var _e=_svg2.default.createElement("line");_e.setAttribute("x1",j.left-h.left+g.left),_e.setAttribute("x2",j.left-h.left+g.left+j.width),_e.setAttribute("y1",j.top-h.top+g.top+j.height-1),_e.setAttribute("y2",j.top-h.top+g.top+j.height-1),_e.setAttribute("stroke-width",1),_e.setAttribute("stroke","black"),_e.setAttribute("stroke-linecap","square"),a.appendChild($),a.appendChild(_e)}this.element.appendChild(a)}}]),e}(Highlight);function coords(s,e){var o=e.getBoundingClientRect(),a=s.getBoundingClientRect();return{top:a.top-o.top,left:a.left-o.left,height:s.scrollHeight,width:s.scrollWidth}}function setCoords(s,e){s.style.setProperty("top",e.top+"px","important"),s.style.setProperty("left",e.left+"px","important"),s.style.setProperty("height",e.height+"px","important"),s.style.setProperty("width",e.width+"px","important")}function contains(s,e){return e.right<=s.right&&e.left>=s.left&&e.top>=s.top&&e.bottom<=s.bottom}class IframeView{constructor(e,o){this.settings=extend({ignoreClass:"",axis:void 0,direction:void 0,width:0,height:0,layout:void 0,globalLayoutProperties:{},method:void 0,forceRight:!1,allowScriptedContent:!1,allowPopups:!1},o||{}),this.id="epubjs-view-"+uuid(),this.section=e,this.index=e.index,this.element=this.container(this.settings.axis),this.added=!1,this.displayed=!1,this.rendered=!1,this.fixedWidth=0,this.fixedHeight=0,this.epubcfi=new EpubCFI,this.layout=this.settings.layout,this.pane=void 0,this.highlights={},this.underlines={},this.marks={}}container(e){var o=document.createElement("div");return o.classList.add("epub-view"),o.style.height="0px",o.style.width="0px",o.style.overflow="hidden",o.style.position="relative",o.style.display="block",e&&e=="horizontal"?o.style.flex="none":o.style.flex="initial",o}create(){return this.iframe?this.iframe:(this.element||(this.element=this.createContainer()),this.iframe=document.createElement("iframe"),this.iframe.id=this.id,this.iframe.scrolling="no",this.iframe.style.overflow="hidden",this.iframe.seamless="seamless",this.iframe.style.border="none",this.iframe.sandbox="allow-same-origin",this.settings.allowScriptedContent&&(this.iframe.sandbox+=" allow-scripts"),this.settings.allowPopups&&(this.iframe.sandbox+=" allow-popups"),this.iframe.setAttribute("enable-annotation","true"),this.resizing=!0,this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this.element.setAttribute("ref",this.index),this.added=!0,this.elementBounds=bounds(this.element),"srcdoc"in this.iframe?this.supportsSrcdoc=!0:this.supportsSrcdoc=!1,this.settings.method||(this.settings.method=this.supportsSrcdoc?"srcdoc":"write"),this.iframe)}render(e,o){return this.create(),this.size(),this.sectionRender||(this.sectionRender=this.section.render(e)),this.sectionRender.then((function(a){return this.load(a)}).bind(this)).then((function(){let a=this.contents.writingMode(),c;return this.settings.flow==="scrolled"?c=a.indexOf("vertical")===0?"horizontal":"vertical":c=a.indexOf("vertical")===0?"vertical":"horizontal",a.indexOf("vertical")===0&&this.settings.flow==="paginated"&&(this.layout.delta=this.layout.height),this.setAxis(c),this.emit(EVENTS.VIEWS.AXIS,c),this.setWritingMode(a),this.emit(EVENTS.VIEWS.WRITING_MODE,a),this.layout.format(this.contents,this.section,this.axis),this.addListeners(),new Promise((h,g)=>{this.expand(),this.settings.forceRight&&(this.element.style.marginLeft=this.width()+"px"),h()})}).bind(this),(function(a){return this.emit(EVENTS.VIEWS.LOAD_ERROR,a),new Promise((c,h)=>{h(a)})}).bind(this)).then((function(){this.emit(EVENTS.VIEWS.RENDERED,this.section)}).bind(this))}reset(){this.iframe&&(this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this._textWidth=void 0,this._contentWidth=void 0,this._textHeight=void 0,this._contentHeight=void 0),this._needsReframe=!0}size(e,o){var a=e||this.settings.width,c=o||this.settings.height;this.layout.name==="pre-paginated"?this.lock("both",a,c):this.settings.axis==="horizontal"?this.lock("height",a,c):this.lock("width",a,c),this.settings.width=a,this.settings.height=c}lock(e,o,a){var c=borders(this.element),h;this.iframe?h=borders(this.iframe):h={width:0,height:0},e=="width"&&isNumber(o)&&(this.lockedWidth=o-c.width-h.width),e=="height"&&isNumber(a)&&(this.lockedHeight=a-c.height-h.height),e==="both"&&isNumber(o)&&isNumber(a)&&(this.lockedWidth=o-c.width-h.width,this.lockedHeight=a-c.height-h.height),this.displayed&&this.iframe&&this.expand()}expand(e){var o=this.lockedWidth,a=this.lockedHeight,c;!this.iframe||this._expanding||(this._expanding=!0,this.layout.name==="pre-paginated"?(o=this.layout.columnWidth,a=this.layout.height):this.settings.axis==="horizontal"?(o=this.contents.textWidth(),o%this.layout.pageWidth>0&&(o=Math.ceil(o/this.layout.pageWidth)*this.layout.pageWidth),this.settings.forceEvenPages&&(c=o/this.layout.pageWidth,this.layout.divisor>1&&this.layout.name==="reflowable"&&c%2>0&&(o+=this.layout.pageWidth))):this.settings.axis==="vertical"&&(a=this.contents.textHeight(),this.settings.flow==="paginated"&&a%this.layout.height>0&&(a=Math.ceil(a/this.layout.height)*this.layout.height)),(this._needsReframe||o!=this._width||a!=this._height)&&this.reframe(o,a),this._expanding=!1)}reframe(e,o){var a;isNumber(e)&&(this.element.style.width=e+"px",this.iframe.style.width=e+"px",this._width=e),isNumber(o)&&(this.element.style.height=o+"px",this.iframe.style.height=o+"px",this._height=o);let c=this.prevBounds?e-this.prevBounds.width:e,h=this.prevBounds?o-this.prevBounds.height:o;a={width:e,height:o,widthDelta:c,heightDelta:h},this.pane&&this.pane.render(),requestAnimationFrame(()=>{let g;for(let b in this.marks)this.marks.hasOwnProperty(b)&&(g=this.marks[b],this.placeMark(g.element,g.range))}),this.onResize(this,a),this.emit(EVENTS.VIEWS.RESIZED,a),this.prevBounds=a,this.elementBounds=bounds(this.element)}load(e){var o=new defer,a=o.promise;if(!this.iframe)return o.reject(new Error("No Iframe Available")),a;if(this.iframe.onload=(function(h){this.onLoad(h,o)}).bind(this),this.settings.method==="blobUrl")this.blobUrl=createBlobUrl(e,"application/xhtml+xml"),this.iframe.src=this.blobUrl,this.element.appendChild(this.iframe);else if(this.settings.method==="srcdoc")this.iframe.srcdoc=e,this.element.appendChild(this.iframe);else{if(this.element.appendChild(this.iframe),this.document=this.iframe.contentDocument,!this.document)return o.reject(new Error("No Document Available")),a;if(this.iframe.contentDocument.open(),window.MSApp&&MSApp.execUnsafeLocalFunction){var c=this;MSApp.execUnsafeLocalFunction(function(){c.iframe.contentDocument.write(e)})}else this.iframe.contentDocument.write(e);this.iframe.contentDocument.close()}return a}onLoad(e,o){this.window=this.iframe.contentWindow,this.document=this.iframe.contentDocument,this.contents=new Contents(this.document,this.document.body,this.section.cfiBase,this.section.index),this.rendering=!1;var a=this.document.querySelector("link[rel='canonical']");a?a.setAttribute("href",this.section.canonical):(a=this.document.createElement("link"),a.setAttribute("rel","canonical"),a.setAttribute("href",this.section.canonical),this.document.querySelector("head").appendChild(a)),this.contents.on(EVENTS.CONTENTS.EXPAND,()=>{this.displayed&&this.iframe&&(this.expand(),this.contents&&this.layout.format(this.contents))}),this.contents.on(EVENTS.CONTENTS.RESIZE,c=>{this.displayed&&this.iframe&&(this.expand(),this.contents&&this.layout.format(this.contents))}),o.resolve(this.contents)}setLayout(e){this.layout=e,this.contents&&(this.layout.format(this.contents),this.expand())}setAxis(e){this.settings.axis=e,e=="horizontal"?this.element.style.flex="none":this.element.style.flex="initial",this.size()}setWritingMode(e){this.writingMode=e}addListeners(){}removeListeners(e){}display(e){var o=new defer;return this.displayed?o.resolve(this):this.render(e).then((function(){this.emit(EVENTS.VIEWS.DISPLAYED,this),this.onDisplayed(this),this.displayed=!0,o.resolve(this)}).bind(this),function(a){o.reject(a,this)}),o.promise}show(){this.element.style.visibility="visible",this.iframe&&(this.iframe.style.visibility="visible",this.iframe.style.transform="translateZ(0)",this.iframe.offsetWidth,this.iframe.style.transform=null),this.emit(EVENTS.VIEWS.SHOWN,this)}hide(){this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.stopExpanding=!0,this.emit(EVENTS.VIEWS.HIDDEN,this)}offset(){return{top:this.element.offsetTop,left:this.element.offsetLeft}}width(){return this._width}height(){return this._height}position(){return this.element.getBoundingClientRect()}locationOf(e){this.iframe.getBoundingClientRect();var o=this.contents.locationOf(e,this.settings.ignoreClass);return{left:o.left,top:o.top}}onDisplayed(e){}onResize(e,o){}bounds(e){return(e||!this.elementBounds)&&(this.elementBounds=bounds(this.element)),this.elementBounds}highlight(e,o={},a,c="epubjs-hl",h={}){if(!this.contents)return;const g=Object.assign({fill:"yellow","fill-opacity":"0.3","mix-blend-mode":"multiply"},h);let b=this.contents.range(e),_=()=>{this.emit(EVENTS.VIEWS.MARK_CLICKED,e,o)};o.epubcfi=e,this.pane||(this.pane=new Pane_1(this.iframe,this.element));let j=new Highlight_1(b,c,o,g),$=this.pane.addMark(j);return this.highlights[e]={mark:$,element:$.element,listeners:[_,a]},$.element.setAttribute("ref",c),$.element.addEventListener("click",_),$.element.addEventListener("touchstart",_),a&&($.element.addEventListener("click",a),$.element.addEventListener("touchstart",a)),$}underline(e,o={},a,c="epubjs-ul",h={}){if(!this.contents)return;const g=Object.assign({stroke:"black","stroke-opacity":"0.3","mix-blend-mode":"multiply"},h);let b=this.contents.range(e),_=()=>{this.emit(EVENTS.VIEWS.MARK_CLICKED,e,o)};o.epubcfi=e,this.pane||(this.pane=new Pane_1(this.iframe,this.element));let j=new Underline_1(b,c,o,g),$=this.pane.addMark(j);return this.underlines[e]={mark:$,element:$.element,listeners:[_,a]},$.element.setAttribute("ref",c),$.element.addEventListener("click",_),$.element.addEventListener("touchstart",_),a&&($.element.addEventListener("click",a),$.element.addEventListener("touchstart",a)),$}mark(e,o={},a){if(!this.contents)return;if(e in this.marks)return this.marks[e];let c=this.contents.range(e);if(!c)return;let h=c.commonAncestorContainer,g=h.nodeType===1?h:h.parentNode,b=j=>{this.emit(EVENTS.VIEWS.MARK_CLICKED,e,o)};c.collapsed&&h.nodeType===1?(c=new Range,c.selectNodeContents(h)):c.collapsed&&(c=new Range,c.selectNodeContents(g));let _=this.document.createElement("a");return _.setAttribute("ref","epubjs-mk"),_.style.position="absolute",_.dataset.epubcfi=e,o&&Object.keys(o).forEach(j=>{_.dataset[j]=o[j]}),a&&(_.addEventListener("click",a),_.addEventListener("touchstart",a)),_.addEventListener("click",b),_.addEventListener("touchstart",b),this.placeMark(_,c),this.element.appendChild(_),this.marks[e]={element:_,range:c,listeners:[b,a]},g}placeMark(e,o){let a,c,h;if(this.layout.name==="pre-paginated"||this.settings.axis!=="horizontal"){let b=o.getBoundingClientRect();a=b.top,c=b.right}else{let b=o.getClientRects(),_;for(var g=0;g!=b.length;g++)_=b[g],(!h||_.left<h)&&(h=_.left,c=Math.ceil(h/this.layout.props.pageWidth)*this.layout.props.pageWidth-this.layout.gap/2,a=_.top)}e.style.top=`${a}px`,e.style.left=`${c}px`}unhighlight(e){let o;e in this.highlights&&(o=this.highlights[e],this.pane.removeMark(o.mark),o.listeners.forEach(a=>{a&&(o.element.removeEventListener("click",a),o.element.removeEventListener("touchstart",a))}),delete this.highlights[e])}ununderline(e){let o;e in this.underlines&&(o=this.underlines[e],this.pane.removeMark(o.mark),o.listeners.forEach(a=>{a&&(o.element.removeEventListener("click",a),o.element.removeEventListener("touchstart",a))}),delete this.underlines[e])}unmark(e){let o;e in this.marks&&(o=this.marks[e],this.element.removeChild(o.element),o.listeners.forEach(a=>{a&&(o.element.removeEventListener("click",a),o.element.removeEventListener("touchstart",a))}),delete this.marks[e])}destroy(){for(let e in this.highlights)this.unhighlight(e);for(let e in this.underlines)this.ununderline(e);for(let e in this.marks)this.unmark(e);this.blobUrl&&revokeBlobUrl(this.blobUrl),this.displayed&&(this.displayed=!1,this.removeListeners(),this.contents.destroy(),this.stopExpanding=!0,this.element.removeChild(this.iframe),this.pane&&(this.pane.element.remove(),this.pane=void 0),this.iframe=void 0,this.contents=void 0,this._textWidth=null,this._textHeight=null,this._width=null,this._height=null)}}EventEmitter(IframeView.prototype);function scrollType(){var s="reverse",e=createDefiner();return document.body.appendChild(e),e.scrollLeft>0?s="default":typeof Element<"u"&&Element.prototype.scrollIntoView?(e.children[0].children[1].scrollIntoView(),e.scrollLeft<0&&(s="negative")):(e.scrollLeft=1,e.scrollLeft===0&&(s="negative")),document.body.removeChild(e),s}function createDefiner(){var s=document.createElement("div");s.dir="rtl",s.style.position="fixed",s.style.width="1px",s.style.height="1px",s.style.top="0px",s.style.left="0px",s.style.overflow="hidden";var e=document.createElement("div");e.style.width="2px";var o=document.createElement("span");o.style.width="1px",o.style.display="inline-block";var a=document.createElement("span");return a.style.width="1px",a.style.display="inline-block",e.appendChild(o),e.appendChild(a),s.appendChild(e),s}function isObject$4(s){var e=typeof s;return s!=null&&(e=="object"||e=="function")}var isObject_1=isObject$4,freeGlobal$1=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,_freeGlobal=freeGlobal$1,freeGlobal=_freeGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$2=freeGlobal||freeSelf||Function("return this")(),_root=root$2,root$1=_root,now$1=function(){return root$1.Date.now()},now_1=now$1,reWhitespace=/\s/;function trimmedEndIndex$1(s){for(var e=s.length;e--&&reWhitespace.test(s.charAt(e)););return e}var _trimmedEndIndex=trimmedEndIndex$1,trimmedEndIndex=_trimmedEndIndex,reTrimStart=/^\s+/;function baseTrim$1(s){return s&&s.slice(0,trimmedEndIndex(s)+1).replace(reTrimStart,"")}var _baseTrim=baseTrim$1,root=_root,Symbol$3=root.Symbol,_Symbol=Symbol$3,Symbol$2=_Symbol,objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty,nativeObjectToString$1=objectProto$1.toString,symToStringTag$1=Symbol$2?Symbol$2.toStringTag:void 0;function getRawTag$1(s){var e=hasOwnProperty$1.call(s,symToStringTag$1),o=s[symToStringTag$1];try{s[symToStringTag$1]=void 0;var a=!0}catch{}var c=nativeObjectToString$1.call(s);return a&&(e?s[symToStringTag$1]=o:delete s[symToStringTag$1]),c}var _getRawTag=getRawTag$1,objectProto=Object.prototype,nativeObjectToString=objectProto.toString;function objectToString$1(s){return nativeObjectToString.call(s)}var _objectToString=objectToString$1,Symbol$1=_Symbol,getRawTag=_getRawTag,objectToString=_objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$1?Symbol$1.toStringTag:void 0;function baseGetTag$1(s){return s==null?s===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(s)?getRawTag(s):objectToString(s)}var _baseGetTag=baseGetTag$1;function isObjectLike$1(s){return s!=null&&typeof s=="object"}var isObjectLike_1=isObjectLike$1,baseGetTag=_baseGetTag,isObjectLike=isObjectLike_1,symbolTag="[object Symbol]";function isSymbol$1(s){return typeof s=="symbol"||isObjectLike(s)&&baseGetTag(s)==symbolTag}var isSymbol_1=isSymbol$1,baseTrim=_baseTrim,isObject$3=isObject_1,isSymbol=isSymbol_1,NAN=0/0,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber$1(s){if(typeof s=="number")return s;if(isSymbol(s))return NAN;if(isObject$3(s)){var e=typeof s.valueOf=="function"?s.valueOf():s;s=isObject$3(e)?e+"":e}if(typeof s!="string")return s===0?s:+s;s=baseTrim(s);var o=reIsBinary.test(s);return o||reIsOctal.test(s)?freeParseInt(s.slice(2),o?2:8):reIsBadHex.test(s)?NAN:+s}var toNumber_1=toNumber$1,isObject$2=isObject_1,now=now_1,toNumber=toNumber_1,FUNC_ERROR_TEXT$1="Expected a function",nativeMax=Math.max,nativeMin=Math.min;function debounce$1(s,e,o){var a,c,h,g,b,_,j=0,$=!1,_e=!1,tt=!0;if(typeof s!="function")throw new TypeError(FUNC_ERROR_TEXT$1);e=toNumber(e)||0,isObject$2(o)&&($=!!o.leading,_e="maxWait"in o,h=_e?nativeMax(toNumber(o.maxWait)||0,e):h,tt="trailing"in o?!!o.trailing:tt);function et(ct){var vt=a,mt=c;return a=c=void 0,j=ct,g=s.apply(mt,vt),g}function ut(ct){return j=ct,b=setTimeout(nt,e),$?et(ct):g}function ht(ct){var vt=ct-_,mt=ct-j,pt=e-vt;return _e?nativeMin(pt,h-mt):pt}function st(ct){var vt=ct-_,mt=ct-j;return _===void 0||vt>=e||vt<0||_e&&mt>=h}function nt(){var ct=now();if(st(ct))return rt(ct);b=setTimeout(nt,ht(ct))}function rt(ct){return b=void 0,tt&&a?et(ct):(a=c=void 0,g)}function at(){b!==void 0&&clearTimeout(b),j=0,a=_=c=b=void 0}function dt(){return b===void 0?g:rt(now())}function ot(){var ct=now(),vt=st(ct);if(a=arguments,c=this,_=ct,vt){if(b===void 0)return ut(_);if(_e)return clearTimeout(b),b=setTimeout(nt,e),et(_)}return b===void 0&&(b=setTimeout(nt,e)),g}return ot.cancel=at,ot.flush=dt,ot}var debounce_1=debounce$1;const debounce$2=getDefaultExportFromCjs(debounce_1);var debounce=debounce_1,isObject$1=isObject_1,FUNC_ERROR_TEXT="Expected a function";function throttle(s,e,o){var a=!0,c=!0;if(typeof s!="function")throw new TypeError(FUNC_ERROR_TEXT);return isObject$1(o)&&(a="leading"in o?!!o.leading:a,c="trailing"in o?!!o.trailing:c),debounce(s,e,{leading:a,maxWait:e,trailing:c})}var throttle_1=throttle;const throttle$1=getDefaultExportFromCjs(throttle_1);class Stage{constructor(e){this.settings=e||{},this.id="epubjs-container-"+uuid(),this.container=this.create(this.settings),this.settings.hidden&&(this.wrapper=this.wrap(this.container))}create(e){let o=e.height,a=e.width,c=e.overflow||!1,h=e.axis||"vertical",g=e.direction;extend(this.settings,e),e.height&&isNumber(e.height)&&(o=e.height+"px"),e.width&&isNumber(e.width)&&(a=e.width+"px");let b=document.createElement("div");return b.id=this.id,b.classList.add("epub-container"),b.style.wordSpacing="0",b.style.lineHeight="0",b.style.verticalAlign="top",b.style.position="relative",h==="horizontal"&&(b.style.display="flex",b.style.flexDirection="row",b.style.flexWrap="nowrap"),a&&(b.style.width=a),o&&(b.style.height=o),c&&(c==="scroll"&&h==="vertical"?(b.style["overflow-y"]=c,b.style["overflow-x"]="hidden"):c==="scroll"&&h==="horizontal"?(b.style["overflow-y"]="hidden",b.style["overflow-x"]=c):b.style.overflow=c),g&&(b.dir=g,b.style.direction=g),g&&this.settings.fullsize&&(document.body.style.direction=g),b}wrap(e){var o=document.createElement("div");return o.style.visibility="hidden",o.style.overflow="hidden",o.style.width="0",o.style.height="0",o.appendChild(e),o}getElement(e){var o;if(isElement(e)?o=e:typeof e=="string"&&(o=document.getElementById(e)),!o)throw new Error("Not an Element");return o}attachTo(e){var o=this.getElement(e),a;if(o)return this.settings.hidden?a=this.wrapper:a=this.container,o.appendChild(a),this.element=o,o}getContainer(){return this.container}onResize(e){(!isNumber(this.settings.width)||!isNumber(this.settings.height))&&(this.resizeFunc=throttle$1(e,50),window.addEventListener("resize",this.resizeFunc,!1))}onOrientationChange(e){this.orientationChangeFunc=e,window.addEventListener("orientationchange",this.orientationChangeFunc,!1)}size(e,o){var a;let c=e||this.settings.width,h=o||this.settings.height;e===null?(a=this.element.getBoundingClientRect(),a.width&&(e=Math.floor(a.width),this.container.style.width=e+"px")):isNumber(e)?this.container.style.width=e+"px":this.container.style.width=e,o===null?(a=a||this.element.getBoundingClientRect(),a.height&&(o=a.height,this.container.style.height=o+"px")):isNumber(o)?this.container.style.height=o+"px":this.container.style.height=o,isNumber(e)||(e=this.container.clientWidth),isNumber(o)||(o=this.container.clientHeight),this.containerStyles=window.getComputedStyle(this.container),this.containerPadding={left:parseFloat(this.containerStyles["padding-left"])||0,right:parseFloat(this.containerStyles["padding-right"])||0,top:parseFloat(this.containerStyles["padding-top"])||0,bottom:parseFloat(this.containerStyles["padding-bottom"])||0};let g=windowBounds(),b=window.getComputedStyle(document.body),_={left:parseFloat(b["padding-left"])||0,right:parseFloat(b["padding-right"])||0,top:parseFloat(b["padding-top"])||0,bottom:parseFloat(b["padding-bottom"])||0};return c||(e=g.width-_.left-_.right),(this.settings.fullsize&&!h||!h)&&(o=g.height-_.top-_.bottom),{width:e-this.containerPadding.left-this.containerPadding.right,height:o-this.containerPadding.top-this.containerPadding.bottom}}bounds(){let e;return this.container.style.overflow!=="visible"&&(e=this.container&&this.container.getBoundingClientRect()),!e||!e.width||!e.height?windowBounds():e}getSheet(){var e=document.createElement("style");return e.appendChild(document.createTextNode("")),document.head.appendChild(e),e.sheet}addStyleRules(e,o){var a="#"+this.id+" ",c="";this.sheet||(this.sheet=this.getSheet()),o.forEach(function(h){for(var g in h)h.hasOwnProperty(g)&&(c+=g+":"+h[g]+";")}),this.sheet.insertRule(a+e+" {"+c+"}",0)}axis(e){e==="horizontal"?(this.container.style.display="flex",this.container.style.flexDirection="row",this.container.style.flexWrap="nowrap"):this.container.style.display="block",this.settings.axis=e}direction(e){this.container&&(this.container.dir=e,this.container.style.direction=e),this.settings.fullsize&&(document.body.style.direction=e),this.settings.dir=e}overflow(e){this.container&&(e==="scroll"&&this.settings.axis==="vertical"?(this.container.style["overflow-y"]=e,this.container.style["overflow-x"]="hidden"):e==="scroll"&&this.settings.axis==="horizontal"?(this.container.style["overflow-y"]="hidden",this.container.style["overflow-x"]=e):this.container.style.overflow=e),this.settings.overflow=e}destroy(){this.element&&(this.settings.hidden?this.wrapper:this.container,this.element.contains(this.container)&&this.element.removeChild(this.container),window.removeEventListener("resize",this.resizeFunc),window.removeEventListener("orientationChange",this.orientationChangeFunc))}}class Views{constructor(e){this.container=e,this._views=[],this.length=0,this.hidden=!1}all(){return this._views}first(){return this._views[0]}last(){return this._views[this._views.length-1]}indexOf(e){return this._views.indexOf(e)}slice(){return this._views.slice.apply(this._views,arguments)}get(e){return this._views[e]}append(e){return this._views.push(e),this.container&&this.container.appendChild(e.element),this.length++,e}prepend(e){return this._views.unshift(e),this.container&&this.container.insertBefore(e.element,this.container.firstChild),this.length++,e}insert(e,o){return this._views.splice(o,0,e),this.container&&(o<this.container.children.length?this.container.insertBefore(e.element,this.container.children[o]):this.container.appendChild(e.element)),this.length++,e}remove(e){var o=this._views.indexOf(e);o>-1&&this._views.splice(o,1),this.destroy(e),this.length--}destroy(e){e.displayed&&e.destroy(),this.container&&this.container.removeChild(e.element),e=null}forEach(){return this._views.forEach.apply(this._views,arguments)}clear(){var e,o=this.length;if(this.length){for(var a=0;a<o;a++)e=this._views[a],this.destroy(e);this._views=[],this.length=0}}find(e){for(var o,a=this.length,c=0;c<a;c++)if(o=this._views[c],o.displayed&&o.section.index==e.index)return o}displayed(){for(var e=[],o,a=this.length,c=0;c<a;c++)o=this._views[c],o.displayed&&e.push(o);return e}show(){for(var e,o=this.length,a=0;a<o;a++)e=this._views[a],e.displayed&&e.show();this.hidden=!1}hide(){for(var e,o=this.length,a=0;a<o;a++)e=this._views[a],e.displayed&&e.hide();this.hidden=!0}}class DefaultViewManager{constructor(e){this.name="default",this.optsSettings=e.settings,this.View=e.view,this.request=e.request,this.renditionQueue=e.queue,this.q=new Queue(this),this.settings=extend(this.settings||{},{infinite:!0,hidden:!1,width:void 0,height:void 0,axis:void 0,writingMode:void 0,flow:"scrolled",ignoreClass:"",fullsize:void 0,allowScriptedContent:!1,allowPopups:!1}),extend(this.settings,e.settings||{}),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,method:this.settings.method,width:0,height:0,forceEvenPages:!0,allowScriptedContent:this.settings.allowScriptedContent,allowPopups:this.settings.allowPopups},this.rendered=!1}render(e,o){let a=e.tagName;typeof this.settings.fullsize>"u"&&a&&(a.toLowerCase()=="body"||a.toLowerCase()=="html")&&(this.settings.fullsize=!0),this.settings.fullsize&&(this.settings.overflow="visible",this.overflow=this.settings.overflow),this.settings.size=o,this.settings.rtlScrollType=scrollType(),this.stage=new Stage({width:o.width,height:o.height,overflow:this.overflow,hidden:this.settings.hidden,axis:this.settings.axis,fullsize:this.settings.fullsize,direction:this.settings.direction}),this.stage.attachTo(e),this.container=this.stage.getContainer(),this.views=new Views(this.container),this._bounds=this.bounds(),this._stageSize=this.stage.size(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.stage.onResize(this.onResized.bind(this)),this.stage.onOrientationChange(this.onOrientationChange.bind(this)),this.addEventListeners(),this.layout&&this.updateLayout(),this.rendered=!0}addEventListeners(){var e;window.addEventListener("unload",(function(o){this.destroy()}).bind(this)),this.settings.fullsize?e=window:e=this.container,this._onScroll=this.onScroll.bind(this),e.addEventListener("scroll",this._onScroll)}removeEventListeners(){var e;this.settings.fullsize?e=window:e=this.container,e.removeEventListener("scroll",this._onScroll),this._onScroll=void 0}destroy(){clearTimeout(this.orientationTimeout),clearTimeout(this.resizeTimeout),clearTimeout(this.afterScrolled),this.clear(),this.removeEventListeners(),this.stage.destroy(),this.rendered=!1}onOrientationChange(e){let{orientation:o}=window;this.optsSettings.resizeOnOrientationChange&&this.resize(),clearTimeout(this.orientationTimeout),this.orientationTimeout=setTimeout((function(){this.orientationTimeout=void 0,this.optsSettings.resizeOnOrientationChange&&this.resize(),this.emit(EVENTS.MANAGERS.ORIENTATION_CHANGE,o)}).bind(this),500)}onResized(e){this.resize()}resize(e,o,a){let c=this.stage.size(e,o);if(this.winBounds=windowBounds(),this.orientationTimeout&&this.winBounds.width===this.winBounds.height){this._stageSize=void 0;return}this._stageSize&&this._stageSize.width===c.width&&this._stageSize.height===c.height||(this._stageSize=c,this._bounds=this.bounds(),this.clear(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.updateLayout(),this.emit(EVENTS.MANAGERS.RESIZED,{width:this._stageSize.width,height:this._stageSize.height},a))}createView(e,o){return new this.View(e,extend(this.viewSettings,{forceRight:o}))}handleNextPrePaginated(e,o,a){let c;if(this.layout.name==="pre-paginated"&&this.layout.divisor>1){if(e||o.index===0)return;if(c=o.next(),c&&!c.properties.includes("page-spread-left"))return a.call(this,c)}}display(e,o){var a=new defer,c=a.promise;(o===e.href||isNumber(o))&&(o=void 0);var h=this.views.find(e);if(h&&e&&this.layout.name!=="pre-paginated"){let b=h.offset();if(this.settings.direction==="ltr")this.scrollTo(b.left,b.top,!0);else{let _=h.width();this.scrollTo(b.left+_,b.top,!0)}if(o){let _=h.locationOf(o),j=h.width();this.moveTo(_,j)}return a.resolve(),c}this.clear();let g=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&e.properties.includes("page-spread-right")&&(g=!0),this.add(e,g).then((function(b){if(o){let _=b.locationOf(o),j=b.width();this.moveTo(_,j)}}).bind(this),b=>{a.reject(b)}).then((function(){return this.handleNextPrePaginated(g,e,this.add)}).bind(this)).then((function(){this.views.show(),a.resolve()}).bind(this)),c}afterDisplayed(e){this.emit(EVENTS.MANAGERS.ADDED,e)}afterResized(e){this.emit(EVENTS.MANAGERS.RESIZE,e.section)}moveTo(e,o){var a=0,c=0;this.isPaginated?(a=Math.floor(e.left/this.layout.delta)*this.layout.delta,a+this.layout.delta>this.container.scrollWidth&&(a=this.container.scrollWidth-this.layout.delta),c=Math.floor(e.top/this.layout.delta)*this.layout.delta,c+this.layout.delta>this.container.scrollHeight&&(c=this.container.scrollHeight-this.layout.delta)):c=e.top,this.settings.direction==="rtl"&&(a=a+this.layout.delta,a=a-o),this.scrollTo(a,c,!0)}add(e,o){var a=this.createView(e,o);return this.views.append(a),a.onDisplayed=this.afterDisplayed.bind(this),a.onResize=this.afterResized.bind(this),a.on(EVENTS.VIEWS.AXIS,c=>{this.updateAxis(c)}),a.on(EVENTS.VIEWS.WRITING_MODE,c=>{this.updateWritingMode(c)}),a.display(this.request)}append(e,o){var a=this.createView(e,o);return this.views.append(a),a.onDisplayed=this.afterDisplayed.bind(this),a.onResize=this.afterResized.bind(this),a.on(EVENTS.VIEWS.AXIS,c=>{this.updateAxis(c)}),a.on(EVENTS.VIEWS.WRITING_MODE,c=>{this.updateWritingMode(c)}),a.display(this.request)}prepend(e,o){var a=this.createView(e,o);return a.on(EVENTS.VIEWS.RESIZED,c=>{this.counter(c)}),this.views.prepend(a),a.onDisplayed=this.afterDisplayed.bind(this),a.onResize=this.afterResized.bind(this),a.on(EVENTS.VIEWS.AXIS,c=>{this.updateAxis(c)}),a.on(EVENTS.VIEWS.WRITING_MODE,c=>{this.updateWritingMode(c)}),a.display(this.request)}counter(e){this.settings.axis==="vertical"?this.scrollBy(0,e.heightDelta,!0):this.scrollBy(e.widthDelta,0,!0)}next(){var e,o;let a=this.settings.direction;if(this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"&&(!a||a==="ltr")?(this.scrollLeft=this.container.scrollLeft,o=this.container.scrollLeft+this.container.offsetWidth+this.layout.delta,o<=this.container.scrollWidth?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next()):this.isPaginated&&this.settings.axis==="horizontal"&&a==="rtl"?(this.scrollLeft=this.container.scrollLeft,this.settings.rtlScrollType==="default"?(o=this.container.scrollLeft,o>0?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next()):(o=this.container.scrollLeft+this.layout.delta*-1,o>this.container.scrollWidth*-1?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next())):this.isPaginated&&this.settings.axis==="vertical"?(this.scrollTop=this.container.scrollTop,this.container.scrollTop+this.container.offsetHeight<this.container.scrollHeight?this.scrollBy(0,this.layout.height,!0):e=this.views.last().section.next()):e=this.views.last().section.next(),e)){this.clear(),this.updateLayout();let c=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&e.properties.includes("page-spread-right")&&(c=!0),this.append(e,c).then((function(){return this.handleNextPrePaginated(c,e,this.append)}).bind(this),h=>h).then((function(){!this.isPaginated&&this.settings.axis==="horizontal"&&this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"&&this.scrollTo(this.container.scrollWidth,0,!0),this.views.show()}).bind(this))}}prev(){var e,o;let a=this.settings.direction;if(this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"&&(!a||a==="ltr")?(this.scrollLeft=this.container.scrollLeft,o=this.container.scrollLeft,o>0?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev()):this.isPaginated&&this.settings.axis==="horizontal"&&a==="rtl"?(this.scrollLeft=this.container.scrollLeft,this.settings.rtlScrollType==="default"?(o=this.container.scrollLeft+this.container.offsetWidth,o<this.container.scrollWidth?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev()):(o=this.container.scrollLeft,o<0?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev())):this.isPaginated&&this.settings.axis==="vertical"?(this.scrollTop=this.container.scrollTop,this.container.scrollTop>0?this.scrollBy(0,-this.layout.height,!0):e=this.views.first().section.prev()):e=this.views.first().section.prev(),e)){this.clear(),this.updateLayout();let c=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&typeof e.prev()!="object"&&(c=!0),this.prepend(e,c).then((function(){var h;if(this.layout.name==="pre-paginated"&&this.layout.divisor>1&&(h=e.prev(),h))return this.prepend(h)}).bind(this),h=>h).then((function(){this.isPaginated&&this.settings.axis==="horizontal"&&(this.settings.direction==="rtl"?this.settings.rtlScrollType==="default"?this.scrollTo(0,0,!0):this.scrollTo(this.container.scrollWidth*-1+this.layout.delta,0,!0):this.scrollTo(this.container.scrollWidth-this.layout.delta,0,!0)),this.views.show()}).bind(this))}}current(){var e=this.visible();return e.length?e[e.length-1]:null}clear(){this.views&&(this.views.hide(),this.scrollTo(0,0,!0),this.views.clear())}currentLocation(){return this.updateLayout(),this.isPaginated&&this.settings.axis==="horizontal"?this.location=this.paginatedLocation():this.location=this.scrolledLocation(),this.location}scrolledLocation(){let e=this.visible(),o=this.container.getBoundingClientRect(),a=o.height<window.innerHeight?o.height:window.innerHeight,c=o.width<window.innerWidth?o.width:window.innerWidth,h=this.settings.axis==="vertical";this.settings.direction;let g=0,b=0;return this.settings.fullsize&&(g=h?window.scrollY:window.scrollX),e.map(j=>{let{index:$,href:_e}=j.section,tt=j.position(),et=j.width(),ut=j.height(),ht,st,nt,rt;h?(ht=g+o.top-tt.top+b,st=ht+a-b,rt=this.layout.count(ut,a).pages,nt=a):(ht=g+o.left-tt.left+b,st=ht+c-b,rt=this.layout.count(et,c).pages,nt=c);let at=Math.ceil(ht/nt),dt=[],ot=Math.ceil(st/nt);if(this.settings.direction==="rtl"&&!h){let mt=at;at=rt-ot,ot=rt-mt}dt=[];for(var ct=at;ct<=ot;ct++){let mt=ct+1;dt.push(mt)}let vt=this.mapping.page(j.contents,j.section.cfiBase,ht,st);return{index:$,href:_e,pages:dt,totalPages:rt,mapping:vt}})}paginatedLocation(){let e=this.visible(),o=this.container.getBoundingClientRect(),a=0,c=0;return this.settings.fullsize&&(a=window.scrollX),e.map(g=>{let{index:b,href:_}=g.section,j,$=g.position(),_e=g.width(),tt,et,ut;this.settings.direction==="rtl"?(j=o.right-a,ut=Math.min(Math.abs(j-$.left),this.layout.width)-c,et=$.width-($.right-j)-c,tt=et-ut):(j=o.left+a,ut=Math.min($.right-j,this.layout.width)-c,tt=j-$.left+c,et=tt+ut),c+=ut;let ht=this.mapping.page(g.contents,g.section.cfiBase,tt,et),st=this.layout.count(_e).pages,nt=Math.floor(tt/this.layout.pageWidth),rt=[],at=Math.floor(et/this.layout.pageWidth);if(nt<0&&(nt=0,at=at+1),this.settings.direction==="rtl"){let ot=nt;nt=st-at,at=st-ot}for(var dt=nt+1;dt<=at;dt++){let ot=dt;rt.push(ot)}return{index:b,href:_,pages:rt,totalPages:st,mapping:ht}})}isVisible(e,o,a,c){var h=e.position(),g=c||this.bounds();return this.settings.axis==="horizontal"&&h.right>g.left-o&&h.left<g.right+a?!0:this.settings.axis==="vertical"&&h.bottom>g.top-o&&h.top<g.bottom+a}visible(){for(var e=this.bounds(),o=this.views.displayed(),a=o.length,c=[],h,g,b=0;b<a;b++)g=o[b],h=this.isVisible(g,0,0,e),h===!0&&c.push(g);return c}scrollBy(e,o,a){let c=this.settings.direction==="rtl"?-1:1;a&&(this.ignore=!0),this.settings.fullsize?window.scrollBy(e*c,o*c):(e&&(this.container.scrollLeft+=e*c),o&&(this.container.scrollTop+=o)),this.scrolled=!0}scrollTo(e,o,a){a&&(this.ignore=!0),this.settings.fullsize?window.scrollTo(e,o):(this.container.scrollLeft=e,this.container.scrollTop=o),this.scrolled=!0}onScroll(){let e,o;this.settings.fullsize?(e=window.scrollY,o=window.scrollX):(e=this.container.scrollTop,o=this.container.scrollLeft),this.scrollTop=e,this.scrollLeft=o,this.ignore?this.ignore=!1:(this.emit(EVENTS.MANAGERS.SCROLL,{top:e,left:o}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout((function(){this.emit(EVENTS.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}).bind(this),20))}bounds(){var e;return e=this.stage.bounds(),e}applyLayout(e){this.layout=e,this.updateLayout(),this.views&&this.views.length>0&&this.layout.name==="pre-paginated"&&this.display(this.views.first().section)}updateLayout(){this.stage&&(this._stageSize=this.stage.size(),this.isPaginated?(this.layout.calculate(this._stageSize.width,this._stageSize.height,this.settings.gap),this.settings.offset=this.layout.delta/this.layout.divisor):this.layout.calculate(this._stageSize.width,this._stageSize.height),this.viewSettings.width=this.layout.width,this.viewSettings.height=this.layout.height,this.setLayout(this.layout))}setLayout(e){this.viewSettings.layout=e,this.mapping=new Mapping(e.props,this.settings.direction,this.settings.axis),this.views&&this.views.forEach(function(o){o&&o.setLayout(e)})}updateWritingMode(e){this.writingMode=e}updateAxis(e,o){!o&&e===this.settings.axis||(this.settings.axis=e,this.stage&&this.stage.axis(e),this.viewSettings.axis=e,this.mapping&&(this.mapping=new Mapping(this.layout.props,this.settings.direction,this.settings.axis)),this.layout&&(e==="vertical"?this.layout.spread("none"):this.layout.spread(this.layout.settings.spread)))}updateFlow(e,o="auto"){let a=e==="paginated"||e==="auto";this.isPaginated=a,e==="scrolled-doc"||e==="scrolled-continuous"||e==="scrolled"?this.updateAxis("vertical"):this.updateAxis("horizontal"),this.viewSettings.flow=e,this.settings.overflow?this.overflow=this.settings.overflow:this.overflow=a?"hidden":o,this.stage&&this.stage.overflow(this.overflow),this.updateLayout()}getContents(){var e=[];return this.views&&this.views.forEach(function(o){const a=o&&o.contents;a&&e.push(a)}),e}direction(e="ltr"){this.settings.direction=e,this.stage&&this.stage.direction(e),this.viewSettings.direction=e,this.updateLayout()}isRendered(){return this.rendered}}EventEmitter(DefaultViewManager.prototype);const PI_D2=Math.PI/2,EASING_EQUATIONS={easeOutSine:function(s){return Math.sin(s*PI_D2)},easeInOutSine:function(s){return-.5*(Math.cos(Math.PI*s)-1)},easeInOutQuint:function(s){return(s/=.5)<1?.5*Math.pow(s,5):.5*(Math.pow(s-2,5)+2)},easeInCubic:function(s){return Math.pow(s,3)}};class Snap{constructor(e,o){this.settings=extend({duration:80,minVelocity:.2,minDistance:10,easing:EASING_EQUATIONS.easeInCubic},o||{}),this.supportsTouch=this.supportsTouch(),this.supportsTouch&&this.setup(e)}setup(e){this.manager=e,this.layout=this.manager.layout,this.fullsize=this.manager.settings.fullsize,this.fullsize?(this.element=this.manager.stage.element,this.scroller=window,this.disableScroll()):(this.element=this.manager.stage.container,this.scroller=this.element,this.element.style.WebkitOverflowScrolling="touch"),this.manager.settings.offset=this.layout.width,this.manager.settings.afterScrolledTimeout=this.settings.duration*2,this.isVertical=this.manager.settings.axis==="vertical",!(!this.manager.isPaginated||this.isVertical)&&(this.touchCanceler=!1,this.resizeCanceler=!1,this.snapping=!1,this.scrollLeft,this.scrollTop,this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0,this.addListeners())}supportsTouch(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}disableScroll(){this.element.style.overflow="hidden"}enableScroll(){this.element.style.overflow=""}addListeners(){this._onResize=this.onResize.bind(this),window.addEventListener("resize",this._onResize),this._onScroll=this.onScroll.bind(this),this.scroller.addEventListener("scroll",this._onScroll),this._onTouchStart=this.onTouchStart.bind(this),this.scroller.addEventListener("touchstart",this._onTouchStart,{passive:!0}),this.on("touchstart",this._onTouchStart),this._onTouchMove=this.onTouchMove.bind(this),this.scroller.addEventListener("touchmove",this._onTouchMove,{passive:!0}),this.on("touchmove",this._onTouchMove),this._onTouchEnd=this.onTouchEnd.bind(this),this.scroller.addEventListener("touchend",this._onTouchEnd,{passive:!0}),this.on("touchend",this._onTouchEnd),this._afterDisplayed=this.afterDisplayed.bind(this),this.manager.on(EVENTS.MANAGERS.ADDED,this._afterDisplayed)}removeListeners(){window.removeEventListener("resize",this._onResize),this._onResize=void 0,this.scroller.removeEventListener("scroll",this._onScroll),this._onScroll=void 0,this.scroller.removeEventListener("touchstart",this._onTouchStart,{passive:!0}),this.off("touchstart",this._onTouchStart),this._onTouchStart=void 0,this.scroller.removeEventListener("touchmove",this._onTouchMove,{passive:!0}),this.off("touchmove",this._onTouchMove),this._onTouchMove=void 0,this.scroller.removeEventListener("touchend",this._onTouchEnd,{passive:!0}),this.off("touchend",this._onTouchEnd),this._onTouchEnd=void 0,this.manager.off(EVENTS.MANAGERS.ADDED,this._afterDisplayed),this._afterDisplayed=void 0}afterDisplayed(e){let o=e.contents;["touchstart","touchmove","touchend"].forEach(a=>{o.on(a,c=>this.triggerViewEvent(c,o))})}triggerViewEvent(e,o){this.emit(e.type,e,o)}onScroll(e){this.scrollLeft=this.fullsize?window.scrollX:this.scroller.scrollLeft,this.scrollTop=this.fullsize?window.scrollY:this.scroller.scrollTop}onResize(e){this.resizeCanceler=!0}onTouchStart(e){let{screenX:o,screenY:a}=e.touches[0];this.fullsize&&this.enableScroll(),this.touchCanceler=!0,this.startTouchX||(this.startTouchX=o,this.startTouchY=a,this.startTime=this.now()),this.endTouchX=o,this.endTouchY=a,this.endTime=this.now()}onTouchMove(e){let{screenX:o,screenY:a}=e.touches[0],c=Math.abs(a-this.endTouchY);this.touchCanceler=!0,!this.fullsize&&c<10&&(this.element.scrollLeft-=o-this.endTouchX),this.endTouchX=o,this.endTouchY=a,this.endTime=this.now()}onTouchEnd(e){this.fullsize&&this.disableScroll(),this.touchCanceler=!1;let o=this.wasSwiped();o!==0?this.snap(o):this.snap(),this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0}wasSwiped(){let e=this.layout.pageWidth*this.layout.divisor,o=this.endTouchX-this.startTouchX,a=Math.abs(o),c=this.endTime-this.startTime,h=o/c,g=this.settings.minVelocity;if(a<=this.settings.minDistance||a>=e)return 0;if(h>g)return-1;if(h<-g)return 1}needsSnap(){let e=this.scrollLeft,o=this.layout.pageWidth*this.layout.divisor;return e%o!==0}snap(e=0){let o=this.scrollLeft,a=this.layout.pageWidth*this.layout.divisor,c=Math.round(o/a)*a;return e&&(c+=e*a),this.smoothScrollTo(c)}smoothScrollTo(e){const o=new defer,a=this.scrollLeft,c=this.now(),h=this.settings.duration,g=this.settings.easing;this.snapping=!0;function b(){const _=this.now(),j=Math.min(1,(_-c)/h);if(g(j),this.touchCanceler||this.resizeCanceler){this.resizeCanceler=!1,this.snapping=!1,o.resolve();return}j<1?(window.requestAnimationFrame(b.bind(this)),this.scrollTo(a+(e-a)*j,0)):(this.scrollTo(e,0),this.snapping=!1,o.resolve())}return b.call(this),o.promise}scrollTo(e=0,o=0){this.fullsize?window.scroll(e,o):(this.scroller.scrollLeft=e,this.scroller.scrollTop=o)}now(){return"now"in window.performance?performance.now():new Date().getTime()}destroy(){this.scroller&&(this.fullsize&&this.enableScroll(),this.removeListeners(),this.scroller=void 0)}}EventEmitter(Snap.prototype);class ContinuousViewManager extends DefaultViewManager{constructor(e){super(e),this.name="continuous",this.settings=extend(this.settings||{},{infinite:!0,overflow:void 0,axis:void 0,writingMode:void 0,flow:"scrolled",offset:500,offsetDelta:250,width:void 0,height:void 0,snap:!1,afterScrolledTimeout:10,allowScriptedContent:!1,allowPopups:!1}),extend(this.settings,e.settings||{}),e.settings.gap!="undefined"&&e.settings.gap===0&&(this.settings.gap=e.settings.gap),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,width:0,height:0,forceEvenPages:!1,allowScriptedContent:this.settings.allowScriptedContent,allowPopups:this.settings.allowPopups},this.scrollTop=0,this.scrollLeft=0}display(e,o){return DefaultViewManager.prototype.display.call(this,e,o).then((function(){return this.fill()}).bind(this))}fill(e){var o=e||new defer;return this.q.enqueue(()=>this.check()).then(a=>{a?this.fill(o):o.resolve()}),o.promise}moveTo(e){var o=0,a=0;this.isPaginated?(o=Math.floor(e.left/this.layout.delta)*this.layout.delta,o+this.settings.offsetDelta):(a=e.top,e.top+this.settings.offsetDelta),(o>0||a>0)&&this.scrollBy(o,a,!0)}afterResized(e){this.emit(EVENTS.MANAGERS.RESIZE,e.section)}removeShownListeners(e){e.onDisplayed=function(){}}add(e){var o=this.createView(e);return this.views.append(o),o.on(EVENTS.VIEWS.RESIZED,a=>{o.expanded=!0}),o.on(EVENTS.VIEWS.AXIS,a=>{this.updateAxis(a)}),o.on(EVENTS.VIEWS.WRITING_MODE,a=>{this.updateWritingMode(a)}),o.onDisplayed=this.afterDisplayed.bind(this),o.onResize=this.afterResized.bind(this),o.display(this.request)}append(e){var o=this.createView(e);return o.on(EVENTS.VIEWS.RESIZED,a=>{o.expanded=!0}),o.on(EVENTS.VIEWS.AXIS,a=>{this.updateAxis(a)}),o.on(EVENTS.VIEWS.WRITING_MODE,a=>{this.updateWritingMode(a)}),this.views.append(o),o.onDisplayed=this.afterDisplayed.bind(this),o}prepend(e){var o=this.createView(e);return o.on(EVENTS.VIEWS.RESIZED,a=>{this.counter(a),o.expanded=!0}),o.on(EVENTS.VIEWS.AXIS,a=>{this.updateAxis(a)}),o.on(EVENTS.VIEWS.WRITING_MODE,a=>{this.updateWritingMode(a)}),this.views.prepend(o),o.onDisplayed=this.afterDisplayed.bind(this),o}counter(e){this.settings.axis==="vertical"?this.scrollBy(0,e.heightDelta,!0):this.scrollBy(e.widthDelta,0,!0)}update(e){for(var o=this.bounds(),a=this.views.all(),c=a.length,h=typeof e<"u"?e:this.settings.offset||0,g,b,_=new defer,j=[],$=0;$<c;$++)if(b=a[$],g=this.isVisible(b,h,h,o),g===!0)if(b.displayed)b.show();else{let _e=b.display(this.request).then(function(tt){tt.show()},tt=>{b.hide()});j.push(_e)}else this.q.enqueue(b.destroy.bind(b)),clearTimeout(this.trimTimeout),this.trimTimeout=setTimeout((function(){this.q.enqueue(this.trim.bind(this))}).bind(this),250);return j.length?Promise.all(j).catch(_e=>{_.reject(_e)}):(_.resolve(),_.promise)}check(e,o){var a=new defer,c=[],h=this.settings.axis==="horizontal",g=this.settings.offset||0;e&&h&&(g=e),o&&!h&&(g=o);var b=this._bounds;let _=h?this.scrollLeft:this.scrollTop,j=h?Math.floor(b.width):b.height,$=h?this.container.scrollWidth:this.container.scrollHeight,_e=this.writingMode&&this.writingMode.indexOf("vertical")===0?"vertical":"horizontal",tt=this.settings.rtlScrollType,et=this.settings.direction==="rtl";this.settings.fullsize?(h&&et&&tt==="negative"||!h&&et&&tt==="default")&&(_=_*-1):(et&&tt==="default"&&_e==="horizontal"&&(_=$-j-_),et&&tt==="negative"&&_e==="horizontal"&&(_=_*-1));let ut=()=>{let at=this.views.first(),dt=at&&at.section.prev();dt&&c.push(this.prepend(dt))},ht=()=>{let at=this.views.last(),dt=at&&at.section.next();dt&&c.push(this.append(dt))},st=_+j+g,nt=_-g;st>=$&&ht(),nt<0&&ut();let rt=c.map(at=>at.display(this.request));return c.length?Promise.all(rt).then(()=>this.check()).then(()=>this.update(g),at=>at):(this.q.enqueue((function(){this.update()}).bind(this)),a.resolve(!1),a.promise)}trim(){for(var e=new defer,o=this.views.displayed(),a=o[0],c=o[o.length-1],h=this.views.indexOf(a),g=this.views.indexOf(c),b=this.views.slice(0,h),_=this.views.slice(g+1),j=0;j<b.length-1;j++)this.erase(b[j],b);for(var $=1;$<_.length;$++)this.erase(_[$]);return e.resolve(),e.promise}erase(e,o){var a,c;this.settings.fullsize?(a=window.scrollY,c=window.scrollX):(a=this.container.scrollTop,c=this.container.scrollLeft);var h=e.bounds();this.views.remove(e),o&&(this.settings.axis==="vertical"?this.scrollTo(0,a-h.height,!0):this.settings.direction==="rtl"?this.settings.fullsize?this.scrollTo(c+Math.floor(h.width),0,!0):this.scrollTo(c,0,!0):this.scrollTo(c-Math.floor(h.width),0,!0))}addEventListeners(e){window.addEventListener("unload",(function(o){this.ignore=!0,this.destroy()}).bind(this)),this.addScrollListeners(),this.isPaginated&&this.settings.snap&&(this.snapper=new Snap(this,this.settings.snap&&typeof this.settings.snap=="object"&&this.settings.snap))}addScrollListeners(){var e;this.tick=requestAnimationFrame$1;let o=this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"?-1:1;this.scrollDeltaVert=0,this.scrollDeltaHorz=0,this.settings.fullsize?(e=window,this.scrollTop=window.scrollY*o,this.scrollLeft=window.scrollX*o):(e=this.container,this.scrollTop=this.container.scrollTop,this.scrollLeft=this.container.scrollLeft),this._onScroll=this.onScroll.bind(this),e.addEventListener("scroll",this._onScroll),this._scrolled=debounce$2(this.scrolled.bind(this),30),this.didScroll=!1}removeEventListeners(){var e;this.settings.fullsize?e=window:e=this.container,e.removeEventListener("scroll",this._onScroll),this._onScroll=void 0}onScroll(){let e,o,a=this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"?-1:1;this.settings.fullsize?(e=window.scrollY*a,o=window.scrollX*a):(e=this.container.scrollTop,o=this.container.scrollLeft),this.scrollTop=e,this.scrollLeft=o,this.ignore?this.ignore=!1:this._scrolled(),this.scrollDeltaVert+=Math.abs(e-this.prevScrollTop),this.scrollDeltaHorz+=Math.abs(o-this.prevScrollLeft),this.prevScrollTop=e,this.prevScrollLeft=o,clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout((function(){this.scrollDeltaVert=0,this.scrollDeltaHorz=0}).bind(this),150),clearTimeout(this.afterScrolled),this.didScroll=!1}scrolled(){this.q.enqueue((function(){return this.check()}).bind(this)),this.emit(EVENTS.MANAGERS.SCROLL,{top:this.scrollTop,left:this.scrollLeft}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout((function(){this.snapper&&this.snapper.supportsTouch&&this.snapper.needsSnap()||this.emit(EVENTS.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}).bind(this),this.settings.afterScrolledTimeout)}next(){let e=this.layout.props.name==="pre-paginated"&&this.layout.props.spread?this.layout.props.delta*2:this.layout.props.delta;this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"?this.scrollBy(e,0,!0):this.scrollBy(0,this.layout.height,!0),this.q.enqueue((function(){return this.check()}).bind(this)))}prev(){let e=this.layout.props.name==="pre-paginated"&&this.layout.props.spread?this.layout.props.delta*2:this.layout.props.delta;this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"?this.scrollBy(-e,0,!0):this.scrollBy(0,-this.layout.height,!0),this.q.enqueue((function(){return this.check()}).bind(this)))}updateFlow(e){this.rendered&&this.snapper&&(this.snapper.destroy(),this.snapper=void 0),super.updateFlow(e,"scroll"),this.rendered&&this.isPaginated&&this.settings.snap&&(this.snapper=new Snap(this,this.settings.snap&&typeof this.settings.snap=="object"&&this.settings.snap))}destroy(){super.destroy(),this.snapper&&this.snapper.destroy()}}class Rendition{constructor(e,o){this.settings=extend(this.settings||{},{width:null,height:null,ignoreClass:"",manager:"default",view:"iframe",flow:null,layout:null,spread:null,minSpreadWidth:800,stylesheet:null,resizeOnOrientationChange:!0,script:null,snap:!1,defaultDirection:"ltr",allowScriptedContent:!1,allowPopups:!1}),extend(this.settings,o),typeof this.settings.manager=="object"&&(this.manager=this.settings.manager),this.book=e,this.hooks={},this.hooks.display=new Hook(this),this.hooks.serialize=new Hook(this),this.hooks.content=new Hook(this),this.hooks.unloaded=new Hook(this),this.hooks.layout=new Hook(this),this.hooks.render=new Hook(this),this.hooks.show=new Hook(this),this.hooks.content.register(this.handleLinks.bind(this)),this.hooks.content.register(this.passEvents.bind(this)),this.hooks.content.register(this.adjustImages.bind(this)),this.book.spine.hooks.content.register(this.injectIdentifier.bind(this)),this.settings.stylesheet&&this.book.spine.hooks.content.register(this.injectStylesheet.bind(this)),this.settings.script&&this.book.spine.hooks.content.register(this.injectScript.bind(this)),this.themes=new Themes(this),this.annotations=new Annotations(this),this.epubcfi=new EpubCFI,this.q=new Queue(this),this.location=void 0,this.q.enqueue(this.book.opened),this.starting=new defer,this.started=this.starting.promise,this.q.enqueue(this.start)}setManager(e){this.manager=e}requireManager(e){var o;return typeof e=="string"&&e==="default"?o=DefaultViewManager:typeof e=="string"&&e==="continuous"?o=ContinuousViewManager:o=e,o}requireView(e){var o;return typeof e=="string"&&e==="iframe"?o=IframeView:o=e,o}start(){switch(!this.settings.layout&&(this.book.package.metadata.layout==="pre-paginated"||this.book.displayOptions.fixedLayout==="true")&&(this.settings.layout="pre-paginated"),this.book.package.metadata.spread){case"none":this.settings.spread="none";break;case"both":this.settings.spread=!0;break}this.manager||(this.ViewManager=this.requireManager(this.settings.manager),this.View=this.requireView(this.settings.view),this.manager=new this.ViewManager({view:this.View,queue:this.q,request:this.book.load.bind(this.book),settings:this.settings})),this.direction(this.book.package.metadata.direction||this.settings.defaultDirection),this.settings.globalLayoutProperties=this.determineLayoutProperties(this.book.package.metadata),this.flow(this.settings.globalLayoutProperties.flow),this.layout(this.settings.globalLayoutProperties),this.manager.on(EVENTS.MANAGERS.ADDED,this.afterDisplayed.bind(this)),this.manager.on(EVENTS.MANAGERS.REMOVED,this.afterRemoved.bind(this)),this.manager.on(EVENTS.MANAGERS.RESIZED,this.onResized.bind(this)),this.manager.on(EVENTS.MANAGERS.ORIENTATION_CHANGE,this.onOrientationChange.bind(this)),this.manager.on(EVENTS.MANAGERS.SCROLLED,this.reportLocation.bind(this)),this.emit(EVENTS.RENDITION.STARTED),this.starting.resolve()}attachTo(e){return this.q.enqueue((function(){this.manager.render(e,{width:this.settings.width,height:this.settings.height}),this.emit(EVENTS.RENDITION.ATTACHED)}).bind(this))}display(e){return this.displaying&&this.displaying.resolve(),this.q.enqueue(this._display,e)}_display(e){if(this.book){this.epubcfi.isCfiString(e);var o=new defer,a=o.promise,c;return this.displaying=o,this.book.locations.length()&&isFloat(e)&&(e=this.book.locations.cfiFromPercentage(parseFloat(e))),c=this.book.spine.get(e),c?(this.manager.display(c,e).then(()=>{o.resolve(c),this.displaying=void 0,this.emit(EVENTS.RENDITION.DISPLAYED,c),this.reportLocation()},h=>{this.emit(EVENTS.RENDITION.DISPLAY_ERROR,h)}),a):(o.reject(new Error("No Section Found")),a)}}afterDisplayed(e){e.on(EVENTS.VIEWS.MARK_CLICKED,(o,a)=>this.triggerMarkEvent(o,a,e.contents)),this.hooks.render.trigger(e,this).then(()=>{e.contents?this.hooks.content.trigger(e.contents,this).then(()=>{this.emit(EVENTS.RENDITION.RENDERED,e.section,e)}):this.emit(EVENTS.RENDITION.RENDERED,e.section,e)})}afterRemoved(e){this.hooks.unloaded.trigger(e,this).then(()=>{this.emit(EVENTS.RENDITION.REMOVED,e.section,e)})}onResized(e,o){this.emit(EVENTS.RENDITION.RESIZED,{width:e.width,height:e.height},o),this.location&&this.location.start&&this.display(o||this.location.start.cfi)}onOrientationChange(e){this.emit(EVENTS.RENDITION.ORIENTATION_CHANGE,e)}moveTo(e){this.manager.moveTo(e)}resize(e,o,a){e&&(this.settings.width=e),o&&(this.settings.height=o),this.manager.resize(e,o,a)}clear(){this.manager.clear()}next(){return this.q.enqueue(this.manager.next.bind(this.manager)).then(this.reportLocation.bind(this))}prev(){return this.q.enqueue(this.manager.prev.bind(this.manager)).then(this.reportLocation.bind(this))}determineLayoutProperties(e){var o,a=this.settings.layout||e.layout||"reflowable",c=this.settings.spread||e.spread||"auto",h=this.settings.orientation||e.orientation||"auto",g=this.settings.flow||e.flow||"auto",b=e.viewport||"",_=this.settings.minSpreadWidth||e.minSpreadWidth||800,j=this.settings.direction||e.direction||"ltr";return(this.settings.width===0||this.settings.width>0)&&(this.settings.height===0||this.settings.height>0),o={layout:a,spread:c,orientation:h,flow:g,viewport:b,minSpreadWidth:_,direction:j},o}flow(e){var o=e;(e==="scrolled"||e==="scrolled-doc"||e==="scrolled-continuous")&&(o="scrolled"),(e==="auto"||e==="paginated")&&(o="paginated"),this.settings.flow=e,this._layout&&this._layout.flow(o),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this.manager&&this.manager.updateFlow(o),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}layout(e){return e&&(this._layout=new Layout(e),this._layout.spread(e.spread,this.settings.minSpreadWidth),this._layout.on(EVENTS.LAYOUT.UPDATED,(o,a)=>{this.emit(EVENTS.RENDITION.LAYOUT,o,a)})),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this._layout}spread(e,o){this.settings.spread=e,o&&(this.settings.minSpreadWidth=o),this._layout&&this._layout.spread(e,o),this.manager&&this.manager.isRendered()&&this.manager.updateLayout()}direction(e){this.settings.direction=e||"ltr",this.manager&&this.manager.direction(this.settings.direction),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}reportLocation(){return this.q.enqueue((function(){requestAnimationFrame((function(){var a=this.manager.currentLocation();if(a&&a.then&&typeof a.then=="function")a.then((function(c){let h=this.located(c);!h||!h.start||!h.end||(this.location=h,this.emit(EVENTS.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(EVENTS.RENDITION.RELOCATED,this.location))}).bind(this));else if(a){let c=this.located(a);if(!c||!c.start||!c.end)return;this.location=c,this.emit(EVENTS.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(EVENTS.RENDITION.RELOCATED,this.location)}}).bind(this))}).bind(this))}currentLocation(){var e=this.manager.currentLocation();if(e&&e.then&&typeof e.then=="function")e.then((function(o){return this.located(o)}).bind(this));else if(e)return this.located(e)}located(e){if(!e.length)return{};let o=e[0],a=e[e.length-1],c={start:{index:o.index,href:o.href,cfi:o.mapping.start,displayed:{page:o.pages[0]||1,total:o.totalPages}},end:{index:a.index,href:a.href,cfi:a.mapping.end,displayed:{page:a.pages[a.pages.length-1]||1,total:a.totalPages}}},h=this.book.locations.locationFromCfi(o.mapping.start),g=this.book.locations.locationFromCfi(a.mapping.end);h!=null&&(c.start.location=h,c.start.percentage=this.book.locations.percentageFromLocation(h)),g!=null&&(c.end.location=g,c.end.percentage=this.book.locations.percentageFromLocation(g));let b=this.book.pageList.pageFromCfi(o.mapping.start),_=this.book.pageList.pageFromCfi(a.mapping.end);return b!=-1&&(c.start.page=b),_!=-1&&(c.end.page=_),a.index===this.book.spine.last().index&&c.end.displayed.page>=c.end.displayed.total&&(c.atEnd=!0),o.index===this.book.spine.first().index&&c.start.displayed.page===1&&(c.atStart=!0),c}destroy(){this.manager&&this.manager.destroy(),this.book=void 0}passEvents(e){DOM_EVENTS.forEach(o=>{e.on(o,a=>this.triggerViewEvent(a,e))}),e.on(EVENTS.CONTENTS.SELECTED,o=>this.triggerSelectedEvent(o,e))}triggerViewEvent(e,o){this.emit(e.type,e,o)}triggerSelectedEvent(e,o){this.emit(EVENTS.RENDITION.SELECTED,e,o)}triggerMarkEvent(e,o,a){this.emit(EVENTS.RENDITION.MARK_CLICKED,e,o,a)}getRange(e,o){var a=new EpubCFI(e),c=this.manager.visible().filter(function(h){if(a.spinePos===h.index)return!0});if(c.length)return c[0].contents.range(a,o)}adjustImages(e){if(this._layout.name==="pre-paginated")return new Promise(function(h){h()});let o=e.window.getComputedStyle(e.content,null),a=(e.content.offsetHeight-(parseFloat(o.paddingTop)+parseFloat(o.paddingBottom)))*.95,c=parseFloat(o.paddingLeft)+parseFloat(o.paddingRight);return e.addStylesheetRules({img:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-c+"px":"100%")+"!important","max-height":a+"px!important","object-fit":"contain","page-break-inside":"avoid","break-inside":"avoid","box-sizing":"border-box"},svg:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-c+"px":"100%")+"!important","max-height":a+"px!important","page-break-inside":"avoid","break-inside":"avoid"}}),new Promise(function(h,g){setTimeout(function(){h()},1)})}getContents(){return this.manager?this.manager.getContents():[]}views(){return(this.manager?this.manager.views:void 0)||[]}handleLinks(e){e&&e.on(EVENTS.CONTENTS.LINK_CLICKED,o=>{let a=this.book.path.relative(o);this.display(a)})}injectStylesheet(e,o){let a=e.createElement("link");a.setAttribute("type","text/css"),a.setAttribute("rel","stylesheet"),a.setAttribute("href",this.settings.stylesheet),e.getElementsByTagName("head")[0].appendChild(a)}injectScript(e,o){let a=e.createElement("script");a.setAttribute("type","text/javascript"),a.setAttribute("src",this.settings.script),a.textContent=" ",e.getElementsByTagName("head")[0].appendChild(a)}injectIdentifier(e,o){let a=this.book.packaging.metadata.identifier,c=e.createElement("meta");c.setAttribute("name","dc.relation.ispartof"),a&&c.setAttribute("content",a),e.getElementsByTagName("head")[0].appendChild(c)}}EventEmitter(Rendition.prototype);function commonjsRequire(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var jszip={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(s,e){(function(o){s.exports=o()})(function(){return function o(a,c,h){function g(j,$){if(!c[j]){if(!a[j]){var _e=typeof commonjsRequire=="function"&&commonjsRequire;if(!$&&_e)return _e(j,!0);if(b)return b(j,!0);var tt=new Error("Cannot find module '"+j+"'");throw tt.code="MODULE_NOT_FOUND",tt}var et=c[j]={exports:{}};a[j][0].call(et.exports,function(ut){var ht=a[j][1][ut];return g(ht||ut)},et,et.exports,o,a,c,h)}return c[j].exports}for(var b=typeof commonjsRequire=="function"&&commonjsRequire,_=0;_<h.length;_++)g(h[_]);return g}({1:[function(o,a,c){var h=o("./utils"),g=o("./support"),b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";c.encode=function(_){for(var j=[],$,_e,tt,et,ut,ht,st,nt=0,rt=_.length,at=rt,dt=h.getTypeOf(_)!=="string";nt<_.length;)at=rt-nt,dt?($=_[nt++],_e=nt<rt?_[nt++]:0,tt=nt<rt?_[nt++]:0):($=_.charCodeAt(nt++),_e=nt<rt?_.charCodeAt(nt++):0,tt=nt<rt?_.charCodeAt(nt++):0),et=$>>2,ut=($&3)<<4|_e>>4,ht=at>1?(_e&15)<<2|tt>>6:64,st=at>2?tt&63:64,j.push(b.charAt(et)+b.charAt(ut)+b.charAt(ht)+b.charAt(st));return j.join("")},c.decode=function(_){var j,$,_e,tt,et,ut,ht,st=0,nt=0,rt="data:";if(_.substr(0,rt.length)===rt)throw new Error("Invalid base64 input, it looks like a data url.");_=_.replace(/[^A-Za-z0-9+/=]/g,"");var at=_.length*3/4;if(_.charAt(_.length-1)===b.charAt(64)&&at--,_.charAt(_.length-2)===b.charAt(64)&&at--,at%1!==0)throw new Error("Invalid base64 input, bad content length.");var dt;for(g.uint8array?dt=new Uint8Array(at|0):dt=new Array(at|0);st<_.length;)tt=b.indexOf(_.charAt(st++)),et=b.indexOf(_.charAt(st++)),ut=b.indexOf(_.charAt(st++)),ht=b.indexOf(_.charAt(st++)),j=tt<<2|et>>4,$=(et&15)<<4|ut>>2,_e=(ut&3)<<6|ht,dt[nt++]=j,ut!==64&&(dt[nt++]=$),ht!==64&&(dt[nt++]=_e);return dt}},{"./support":30,"./utils":32}],2:[function(o,a,c){var h=o("./external"),g=o("./stream/DataWorker"),b=o("./stream/Crc32Probe"),_=o("./stream/DataLengthProbe");function j($,_e,tt,et,ut){this.compressedSize=$,this.uncompressedSize=_e,this.crc32=tt,this.compression=et,this.compressedContent=ut}j.prototype={getContentWorker:function(){var $=new g(h.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new _("data_length")),_e=this;return $.on("end",function(){if(this.streamInfo.data_length!==_e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),$},getCompressedWorker:function(){return new g(h.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},j.createWorkerFrom=function($,_e,tt){return $.pipe(new b).pipe(new _("uncompressedSize")).pipe(_e.compressWorker(tt)).pipe(new _("compressedSize")).withStreamInfo("compression",_e)},a.exports=j},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(o,a,c){var h=o("./stream/GenericWorker");c.STORE={magic:"\0\0",compressWorker:function(){return new h("STORE compression")},uncompressWorker:function(){return new h("STORE decompression")}},c.DEFLATE=o("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(o,a,c){var h=o("./utils");function g(){for(var $,_e=[],tt=0;tt<256;tt++){$=tt;for(var et=0;et<8;et++)$=$&1?3988292384^$>>>1:$>>>1;_e[tt]=$}return _e}var b=g();function _($,_e,tt,et){var ut=b,ht=et+tt;$=$^-1;for(var st=et;st<ht;st++)$=$>>>8^ut[($^_e[st])&255];return $^-1}function j($,_e,tt,et){var ut=b,ht=et+tt;$=$^-1;for(var st=et;st<ht;st++)$=$>>>8^ut[($^_e.charCodeAt(st))&255];return $^-1}a.exports=function(_e,tt){if(typeof _e>"u"||!_e.length)return 0;var et=h.getTypeOf(_e)!=="string";return et?_(tt|0,_e,_e.length,0):j(tt|0,_e,_e.length,0)}},{"./utils":32}],5:[function(o,a,c){c.base64=!1,c.binary=!1,c.dir=!1,c.createFolders=!0,c.date=null,c.compression=null,c.compressionOptions=null,c.comment=null,c.unixPermissions=null,c.dosPermissions=null},{}],6:[function(o,a,c){var h=null;typeof Promise<"u"?h=Promise:h=o("lie"),a.exports={Promise:h}},{lie:37}],7:[function(o,a,c){var h=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",g=o("pako"),b=o("./utils"),_=o("./stream/GenericWorker"),j=h?"uint8array":"array";c.magic="\b\0";function $(_e,tt){_.call(this,"FlateWorker/"+_e),this._pako=null,this._pakoAction=_e,this._pakoOptions=tt,this.meta={}}b.inherits($,_),$.prototype.processChunk=function(_e){this.meta=_e.meta,this._pako===null&&this._createPako(),this._pako.push(b.transformTo(j,_e.data),!1)},$.prototype.flush=function(){_.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},$.prototype.cleanUp=function(){_.prototype.cleanUp.call(this),this._pako=null},$.prototype._createPako=function(){this._pako=new g[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var _e=this;this._pako.onData=function(tt){_e.push({data:tt,meta:_e.meta})}},c.compressWorker=function(_e){return new $("Deflate",_e)},c.uncompressWorker=function(){return new $("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(o,a,c){var h=o("../utils"),g=o("../stream/GenericWorker"),b=o("../utf8"),_=o("../crc32"),j=o("../signature"),$=function(nt,rt){var at="",dt;for(dt=0;dt<rt;dt++)at+=String.fromCharCode(nt&255),nt=nt>>>8;return at},_e=function(nt,rt){var at=nt;return nt||(at=rt?16893:33204),(at&65535)<<16},tt=function(nt){return(nt||0)&63},et=function(nt,rt,at,dt,ot,ct){var vt=nt.file,mt=nt.compression,pt=ct!==b.utf8encode,Et=h.transformTo("string",ct(vt.name)),Ct=h.transformTo("string",b.utf8encode(vt.name)),Nt=vt.comment,Ut=h.transformTo("string",ct(Nt)),Tt=h.transformTo("string",b.utf8encode(Nt)),qt=Ct.length!==vt.name.length,Vt=Tt.length!==Nt.length,Zt,It,Jt="",fn="",_n="",xn=vt.dir,Mt=vt.date,xt={crc32:0,compressedSize:0,uncompressedSize:0};(!rt||at)&&(xt.crc32=nt.crc32,xt.compressedSize=nt.compressedSize,xt.uncompressedSize=nt.uncompressedSize);var At=0;rt&&(At|=8),!pt&&(qt||Vt)&&(At|=2048);var wt=0,kt=0;xn&&(wt|=16),ot==="UNIX"?(kt=798,wt|=_e(vt.unixPermissions,xn)):(kt=20,wt|=tt(vt.dosPermissions)),Zt=Mt.getUTCHours(),Zt=Zt<<6,Zt=Zt|Mt.getUTCMinutes(),Zt=Zt<<5,Zt=Zt|Mt.getUTCSeconds()/2,It=Mt.getUTCFullYear()-1980,It=It<<4,It=It|Mt.getUTCMonth()+1,It=It<<5,It=It|Mt.getUTCDate(),qt&&(fn=$(1,1)+$(_(Et),4)+Ct,Jt+="up"+$(fn.length,2)+fn),Vt&&(_n=$(1,1)+$(_(Ut),4)+Tt,Jt+="uc"+$(_n.length,2)+_n);var Dt="";Dt+=`
\0`,Dt+=$(At,2),Dt+=mt.magic,Dt+=$(Zt,2),Dt+=$(It,2),Dt+=$(xt.crc32,4),Dt+=$(xt.compressedSize,4),Dt+=$(xt.uncompressedSize,4),Dt+=$(Et.length,2),Dt+=$(Jt.length,2);var Ft=j.LOCAL_FILE_HEADER+Dt+Et+Jt,$t=j.CENTRAL_FILE_HEADER+$(kt,2)+Dt+$(Ut.length,2)+"\0\0\0\0"+$(wt,4)+$(dt,4)+Et+Jt+Ut;return{fileRecord:Ft,dirRecord:$t}},ut=function(nt,rt,at,dt,ot){var ct="",vt=h.transformTo("string",ot(dt));return ct=j.CENTRAL_DIRECTORY_END+"\0\0\0\0"+$(nt,2)+$(nt,2)+$(rt,4)+$(at,4)+$(vt.length,2)+vt,ct},ht=function(nt){var rt="";return rt=j.DATA_DESCRIPTOR+$(nt.crc32,4)+$(nt.compressedSize,4)+$(nt.uncompressedSize,4),rt};function st(nt,rt,at,dt){g.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=rt,this.zipPlatform=at,this.encodeFileName=dt,this.streamFiles=nt,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}h.inherits(st,g),st.prototype.push=function(nt){var rt=nt.meta.percent||0,at=this.entriesCount,dt=this._sources.length;this.accumulate?this.contentBuffer.push(nt):(this.bytesWritten+=nt.data.length,g.prototype.push.call(this,{data:nt.data,meta:{currentFile:this.currentFile,percent:at?(rt+100*(at-dt-1))/at:100}}))},st.prototype.openedSource=function(nt){this.currentSourceOffset=this.bytesWritten,this.currentFile=nt.file.name;var rt=this.streamFiles&&!nt.file.dir;if(rt){var at=et(nt,rt,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:at.fileRecord,meta:{percent:0}})}else this.accumulate=!0},st.prototype.closedSource=function(nt){this.accumulate=!1;var rt=this.streamFiles&&!nt.file.dir,at=et(nt,rt,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(at.dirRecord),rt)this.push({data:ht(nt),meta:{percent:100}});else for(this.push({data:at.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},st.prototype.flush=function(){for(var nt=this.bytesWritten,rt=0;rt<this.dirRecords.length;rt++)this.push({data:this.dirRecords[rt],meta:{percent:100}});var at=this.bytesWritten-nt,dt=ut(this.dirRecords.length,at,nt,this.zipComment,this.encodeFileName);this.push({data:dt,meta:{percent:100}})},st.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},st.prototype.registerPrevious=function(nt){this._sources.push(nt);var rt=this;return nt.on("data",function(at){rt.processChunk(at)}),nt.on("end",function(){rt.closedSource(rt.previous.streamInfo),rt._sources.length?rt.prepareNextSource():rt.end()}),nt.on("error",function(at){rt.error(at)}),this},st.prototype.resume=function(){if(!g.prototype.resume.call(this))return!1;if(!this.previous&&this._sources.length)return this.prepareNextSource(),!0;if(!this.previous&&!this._sources.length&&!this.generatedError)return this.end(),!0},st.prototype.error=function(nt){var rt=this._sources;if(!g.prototype.error.call(this,nt))return!1;for(var at=0;at<rt.length;at++)try{rt[at].error(nt)}catch{}return!0},st.prototype.lock=function(){g.prototype.lock.call(this);for(var nt=this._sources,rt=0;rt<nt.length;rt++)nt[rt].lock()},a.exports=st},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(o,a,c){var h=o("../compressions"),g=o("./ZipFileWorker"),b=function(_,j){var $=_||j,_e=h[$];if(!_e)throw new Error($+" is not a valid compression method !");return _e};c.generateWorker=function(_,j,$){var _e=new g(j.streamFiles,$,j.platform,j.encodeFileName),tt=0;try{_.forEach(function(et,ut){tt++;var ht=b(ut.options.compression,j.compression),st=ut.options.compressionOptions||j.compressionOptions||{},nt=ut.dir,rt=ut.date;ut._compressWorker(ht,st).withStreamInfo("file",{name:et,dir:nt,date:rt,comment:ut.comment||"",unixPermissions:ut.unixPermissions,dosPermissions:ut.dosPermissions}).pipe(_e)}),_e.entriesCount=tt}catch(et){_e.error(et)}return _e}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(o,a,c){function h(){if(!(this instanceof h))return new h;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var g=new h;for(var b in this)typeof this[b]!="function"&&(g[b]=this[b]);return g}}h.prototype=o("./object"),h.prototype.loadAsync=o("./load"),h.support=o("./support"),h.defaults=o("./defaults"),h.version="3.10.1",h.loadAsync=function(g,b){return new h().loadAsync(g,b)},h.external=o("./external"),a.exports=h},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(o,a,c){var h=o("./utils"),g=o("./external"),b=o("./utf8"),_=o("./zipEntries"),j=o("./stream/Crc32Probe"),$=o("./nodejsUtils");function _e(tt){return new g.Promise(function(et,ut){var ht=tt.decompressed.getContentWorker().pipe(new j);ht.on("error",function(st){ut(st)}).on("end",function(){ht.streamInfo.crc32!==tt.decompressed.crc32?ut(new Error("Corrupted zip : CRC32 mismatch")):et()}).resume()})}a.exports=function(tt,et){var ut=this;return et=h.extend(et||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:b.utf8decode}),$.isNode&&$.isStream(tt)?g.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):h.prepareContent("the loaded zip file",tt,!0,et.optimizedBinaryString,et.base64).then(function(ht){var st=new _(et);return st.load(ht),st}).then(function(st){var nt=[g.Promise.resolve(st)],rt=st.files;if(et.checkCRC32)for(var at=0;at<rt.length;at++)nt.push(_e(rt[at]));return g.Promise.all(nt)}).then(function(st){for(var nt=st.shift(),rt=nt.files,at=0;at<rt.length;at++){var dt=rt[at],ot=dt.fileNameStr,ct=h.resolve(dt.fileNameStr);ut.file(ct,dt.decompressed,{binary:!0,optimizedBinaryString:!0,date:dt.date,dir:dt.dir,comment:dt.fileCommentStr.length?dt.fileCommentStr:null,unixPermissions:dt.unixPermissions,dosPermissions:dt.dosPermissions,createFolders:et.createFolders}),dt.dir||(ut.file(ct).unsafeOriginalName=ot)}return nt.zipComment.length&&(ut.comment=nt.zipComment),ut})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(o,a,c){var h=o("../utils"),g=o("../stream/GenericWorker");function b(_,j){g.call(this,"Nodejs stream input adapter for "+_),this._upstreamEnded=!1,this._bindStream(j)}h.inherits(b,g),b.prototype._bindStream=function(_){var j=this;this._stream=_,_.pause(),_.on("data",function($){j.push({data:$,meta:{percent:0}})}).on("error",function($){j.isPaused?this.generatedError=$:j.error($)}).on("end",function(){j.isPaused?j._upstreamEnded=!0:j.end()})},b.prototype.pause=function(){return g.prototype.pause.call(this)?(this._stream.pause(),!0):!1},b.prototype.resume=function(){return g.prototype.resume.call(this)?(this._upstreamEnded?this.end():this._stream.resume(),!0):!1},a.exports=b},{"../stream/GenericWorker":28,"../utils":32}],13:[function(o,a,c){var h=o("readable-stream").Readable,g=o("../utils");g.inherits(b,h);function b(_,j,$){h.call(this,j),this._helper=_;var _e=this;_.on("data",function(tt,et){_e.push(tt)||_e._helper.pause(),$&&$(et)}).on("error",function(tt){_e.emit("error",tt)}).on("end",function(){_e.push(null)})}b.prototype._read=function(){this._helper.resume()},a.exports=b},{"../utils":32,"readable-stream":16}],14:[function(o,a,c){a.exports={isNode:typeof Buffer<"u",newBufferFrom:function(h,g){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(h,g);if(typeof h=="number")throw new Error('The "data" argument must not be a number');return new Buffer(h,g)},allocBuffer:function(h){if(Buffer.alloc)return Buffer.alloc(h);var g=new Buffer(h);return g.fill(0),g},isBuffer:function(h){return Buffer.isBuffer(h)},isStream:function(h){return h&&typeof h.on=="function"&&typeof h.pause=="function"&&typeof h.resume=="function"}}},{}],15:[function(o,a,c){var h=o("./utf8"),g=o("./utils"),b=o("./stream/GenericWorker"),_=o("./stream/StreamHelper"),j=o("./defaults"),$=o("./compressedObject"),_e=o("./zipObject"),tt=o("./generate"),et=o("./nodejsUtils"),ut=o("./nodejs/NodejsStreamInputAdapter"),ht=function(ot,ct,vt){var mt=g.getTypeOf(ct),pt,Et=g.extend(vt||{},j);Et.date=Et.date||new Date,Et.compression!==null&&(Et.compression=Et.compression.toUpperCase()),typeof Et.unixPermissions=="string"&&(Et.unixPermissions=parseInt(Et.unixPermissions,8)),Et.unixPermissions&&Et.unixPermissions&16384&&(Et.dir=!0),Et.dosPermissions&&Et.dosPermissions&16&&(Et.dir=!0),Et.dir&&(ot=nt(ot)),Et.createFolders&&(pt=st(ot))&&rt.call(this,pt,!0);var Ct=mt==="string"&&Et.binary===!1&&Et.base64===!1;(!vt||typeof vt.binary>"u")&&(Et.binary=!Ct);var Nt=ct instanceof $&&ct.uncompressedSize===0;(Nt||Et.dir||!ct||ct.length===0)&&(Et.base64=!1,Et.binary=!0,ct="",Et.compression="STORE",mt="string");var Ut=null;ct instanceof $||ct instanceof b?Ut=ct:et.isNode&&et.isStream(ct)?Ut=new ut(ot,ct):Ut=g.prepareContent(ot,ct,Et.binary,Et.optimizedBinaryString,Et.base64);var Tt=new _e(ot,Ut,Et);this.files[ot]=Tt},st=function(ot){ot.slice(-1)==="/"&&(ot=ot.substring(0,ot.length-1));var ct=ot.lastIndexOf("/");return ct>0?ot.substring(0,ct):""},nt=function(ot){return ot.slice(-1)!=="/"&&(ot+="/"),ot},rt=function(ot,ct){return ct=typeof ct<"u"?ct:j.createFolders,ot=nt(ot),this.files[ot]||ht.call(this,ot,null,{dir:!0,createFolders:ct}),this.files[ot]};function at(ot){return Object.prototype.toString.call(ot)==="[object RegExp]"}var dt={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(ot){var ct,vt,mt;for(ct in this.files)mt=this.files[ct],vt=ct.slice(this.root.length,ct.length),vt&&ct.slice(0,this.root.length)===this.root&&ot(vt,mt)},filter:function(ot){var ct=[];return this.forEach(function(vt,mt){ot(vt,mt)&&ct.push(mt)}),ct},file:function(ot,ct,vt){if(arguments.length===1)if(at(ot)){var mt=ot;return this.filter(function(Et,Ct){return!Ct.dir&&mt.test(Et)})}else{var pt=this.files[this.root+ot];return pt&&!pt.dir?pt:null}else ot=this.root+ot,ht.call(this,ot,ct,vt);return this},folder:function(ot){if(!ot)return this;if(at(ot))return this.filter(function(pt,Et){return Et.dir&&ot.test(pt)});var ct=this.root+ot,vt=rt.call(this,ct),mt=this.clone();return mt.root=vt.name,mt},remove:function(ot){ot=this.root+ot;var ct=this.files[ot];if(ct||(ot.slice(-1)!=="/"&&(ot+="/"),ct=this.files[ot]),ct&&!ct.dir)delete this.files[ot];else for(var vt=this.filter(function(pt,Et){return Et.name.slice(0,ot.length)===ot}),mt=0;mt<vt.length;mt++)delete this.files[vt[mt].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(ot){var ct,vt={};try{if(vt=g.extend(ot||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:h.utf8encode}),vt.type=vt.type.toLowerCase(),vt.compression=vt.compression.toUpperCase(),vt.type==="binarystring"&&(vt.type="string"),!vt.type)throw new Error("No output type specified.");g.checkSupport(vt.type),(vt.platform==="darwin"||vt.platform==="freebsd"||vt.platform==="linux"||vt.platform==="sunos")&&(vt.platform="UNIX"),vt.platform==="win32"&&(vt.platform="DOS");var mt=vt.comment||this.comment||"";ct=tt.generateWorker(this,vt,mt)}catch(pt){ct=new b("error"),ct.error(pt)}return new _(ct,vt.type||"string",vt.mimeType)},generateAsync:function(ot,ct){return this.generateInternalStream(ot).accumulate(ct)},generateNodeStream:function(ot,ct){return ot=ot||{},ot.type||(ot.type="nodebuffer"),this.generateInternalStream(ot).toNodejsStream(ct)}};a.exports=dt},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(o,a,c){a.exports=o("stream")},{stream:void 0}],17:[function(o,a,c){var h=o("./DataReader"),g=o("../utils");function b(_){h.call(this,_);for(var j=0;j<this.data.length;j++)_[j]=_[j]&255}g.inherits(b,h),b.prototype.byteAt=function(_){return this.data[this.zero+_]},b.prototype.lastIndexOfSignature=function(_){for(var j=_.charCodeAt(0),$=_.charCodeAt(1),_e=_.charCodeAt(2),tt=_.charCodeAt(3),et=this.length-4;et>=0;--et)if(this.data[et]===j&&this.data[et+1]===$&&this.data[et+2]===_e&&this.data[et+3]===tt)return et-this.zero;return-1},b.prototype.readAndCheckSignature=function(_){var j=_.charCodeAt(0),$=_.charCodeAt(1),_e=_.charCodeAt(2),tt=_.charCodeAt(3),et=this.readData(4);return j===et[0]&&$===et[1]&&_e===et[2]&&tt===et[3]},b.prototype.readData=function(_){if(this.checkOffset(_),_===0)return[];var j=this.data.slice(this.zero+this.index,this.zero+this.index+_);return this.index+=_,j},a.exports=b},{"../utils":32,"./DataReader":18}],18:[function(o,a,c){var h=o("../utils");function g(b){this.data=b,this.length=b.length,this.index=0,this.zero=0}g.prototype={checkOffset:function(b){this.checkIndex(this.index+b)},checkIndex:function(b){if(this.length<this.zero+b||b<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+b+"). Corrupted zip ?")},setIndex:function(b){this.checkIndex(b),this.index=b},skip:function(b){this.setIndex(this.index+b)},byteAt:function(){},readInt:function(b){var _=0,j;for(this.checkOffset(b),j=this.index+b-1;j>=this.index;j--)_=(_<<8)+this.byteAt(j);return this.index+=b,_},readString:function(b){return h.transformTo("string",this.readData(b))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var b=this.readInt(4);return new Date(Date.UTC((b>>25&127)+1980,(b>>21&15)-1,b>>16&31,b>>11&31,b>>5&63,(b&31)<<1))}},a.exports=g},{"../utils":32}],19:[function(o,a,c){var h=o("./Uint8ArrayReader"),g=o("../utils");function b(_){h.call(this,_)}g.inherits(b,h),b.prototype.readData=function(_){this.checkOffset(_);var j=this.data.slice(this.zero+this.index,this.zero+this.index+_);return this.index+=_,j},a.exports=b},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(o,a,c){var h=o("./DataReader"),g=o("../utils");function b(_){h.call(this,_)}g.inherits(b,h),b.prototype.byteAt=function(_){return this.data.charCodeAt(this.zero+_)},b.prototype.lastIndexOfSignature=function(_){return this.data.lastIndexOf(_)-this.zero},b.prototype.readAndCheckSignature=function(_){var j=this.readData(4);return _===j},b.prototype.readData=function(_){this.checkOffset(_);var j=this.data.slice(this.zero+this.index,this.zero+this.index+_);return this.index+=_,j},a.exports=b},{"../utils":32,"./DataReader":18}],21:[function(o,a,c){var h=o("./ArrayReader"),g=o("../utils");function b(_){h.call(this,_)}g.inherits(b,h),b.prototype.readData=function(_){if(this.checkOffset(_),_===0)return new Uint8Array(0);var j=this.data.subarray(this.zero+this.index,this.zero+this.index+_);return this.index+=_,j},a.exports=b},{"../utils":32,"./ArrayReader":17}],22:[function(o,a,c){var h=o("../utils"),g=o("../support"),b=o("./ArrayReader"),_=o("./StringReader"),j=o("./NodeBufferReader"),$=o("./Uint8ArrayReader");a.exports=function(_e){var tt=h.getTypeOf(_e);return h.checkSupport(tt),tt==="string"&&!g.uint8array?new _(_e):tt==="nodebuffer"?new j(_e):g.uint8array?new $(h.transformTo("uint8array",_e)):new b(h.transformTo("array",_e))}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(o,a,c){c.LOCAL_FILE_HEADER="PK",c.CENTRAL_FILE_HEADER="PK",c.CENTRAL_DIRECTORY_END="PK",c.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",c.ZIP64_CENTRAL_DIRECTORY_END="PK",c.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(o,a,c){var h=o("./GenericWorker"),g=o("../utils");function b(_){h.call(this,"ConvertWorker to "+_),this.destType=_}g.inherits(b,h),b.prototype.processChunk=function(_){this.push({data:g.transformTo(this.destType,_.data),meta:_.meta})},a.exports=b},{"../utils":32,"./GenericWorker":28}],25:[function(o,a,c){var h=o("./GenericWorker"),g=o("../crc32"),b=o("../utils");function _(){h.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}b.inherits(_,h),_.prototype.processChunk=function(j){this.streamInfo.crc32=g(j.data,this.streamInfo.crc32||0),this.push(j)},a.exports=_},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(o,a,c){var h=o("../utils"),g=o("./GenericWorker");function b(_){g.call(this,"DataLengthProbe for "+_),this.propName=_,this.withStreamInfo(_,0)}h.inherits(b,g),b.prototype.processChunk=function(_){if(_){var j=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=j+_.data.length}g.prototype.processChunk.call(this,_)},a.exports=b},{"../utils":32,"./GenericWorker":28}],27:[function(o,a,c){var h=o("../utils"),g=o("./GenericWorker"),b=16*1024;function _(j){g.call(this,"DataWorker");var $=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,j.then(function(_e){$.dataIsReady=!0,$.data=_e,$.max=_e&&_e.length||0,$.type=h.getTypeOf(_e),$.isPaused||$._tickAndRepeat()},function(_e){$.error(_e)})}h.inherits(_,g),_.prototype.cleanUp=function(){g.prototype.cleanUp.call(this),this.data=null},_.prototype.resume=function(){return g.prototype.resume.call(this)?(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,h.delay(this._tickAndRepeat,[],this)),!0):!1},_.prototype._tickAndRepeat=function(){this._tickScheduled=!1,!(this.isPaused||this.isFinished)&&(this._tick(),this.isFinished||(h.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},_.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var j=b,$=null,_e=Math.min(this.max,this.index+j);if(this.index>=this.max)return this.end();switch(this.type){case"string":$=this.data.substring(this.index,_e);break;case"uint8array":$=this.data.subarray(this.index,_e);break;case"array":case"nodebuffer":$=this.data.slice(this.index,_e);break}return this.index=_e,this.push({data:$,meta:{percent:this.max?this.index/this.max*100:0}})},a.exports=_},{"../utils":32,"./GenericWorker":28}],28:[function(o,a,c){function h(g){this.name=g||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}h.prototype={push:function(g){this.emit("data",g)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(g){this.emit("error",g)}return!0},error:function(g){return this.isFinished?!1:(this.isPaused?this.generatedError=g:(this.isFinished=!0,this.emit("error",g),this.previous&&this.previous.error(g),this.cleanUp()),!0)},on:function(g,b){return this._listeners[g].push(b),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(g,b){if(this._listeners[g])for(var _=0;_<this._listeners[g].length;_++)this._listeners[g][_].call(this,b)},pipe:function(g){return g.registerPrevious(this)},registerPrevious:function(g){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=g.streamInfo,this.mergeStreamInfo(),this.previous=g;var b=this;return g.on("data",function(_){b.processChunk(_)}),g.on("end",function(){b.end()}),g.on("error",function(_){b.error(_)}),this},pause:function(){return this.isPaused||this.isFinished?!1:(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var g=!1;return this.generatedError&&(this.error(this.generatedError),g=!0),this.previous&&this.previous.resume(),!g},flush:function(){},processChunk:function(g){this.push(g)},withStreamInfo:function(g,b){return this.extraStreamInfo[g]=b,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var g in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,g)&&(this.streamInfo[g]=this.extraStreamInfo[g])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var g="Worker "+this.name;return this.previous?this.previous+" -> "+g:g}},a.exports=h},{}],29:[function(o,a,c){var h=o("../utils"),g=o("./ConvertWorker"),b=o("./GenericWorker"),_=o("../base64"),j=o("../support"),$=o("../external"),_e=null;if(j.nodestream)try{_e=o("../nodejs/NodejsStreamOutputAdapter")}catch{}function tt(st,nt,rt){switch(st){case"blob":return h.newBlob(h.transformTo("arraybuffer",nt),rt);case"base64":return _.encode(nt);default:return h.transformTo(st,nt)}}function et(st,nt){var rt,at=0,dt=null,ot=0;for(rt=0;rt<nt.length;rt++)ot+=nt[rt].length;switch(st){case"string":return nt.join("");case"array":return Array.prototype.concat.apply([],nt);case"uint8array":for(dt=new Uint8Array(ot),rt=0;rt<nt.length;rt++)dt.set(nt[rt],at),at+=nt[rt].length;return dt;case"nodebuffer":return Buffer.concat(nt);default:throw new Error("concat : unsupported type '"+st+"'")}}function ut(st,nt){return new $.Promise(function(rt,at){var dt=[],ot=st._internalType,ct=st._outputType,vt=st._mimeType;st.on("data",function(mt,pt){dt.push(mt),nt&&nt(pt)}).on("error",function(mt){dt=[],at(mt)}).on("end",function(){try{var mt=tt(ct,et(ot,dt),vt);rt(mt)}catch(pt){at(pt)}dt=[]}).resume()})}function ht(st,nt,rt){var at=nt;switch(nt){case"blob":case"arraybuffer":at="uint8array";break;case"base64":at="string";break}try{this._internalType=at,this._outputType=nt,this._mimeType=rt,h.checkSupport(at),this._worker=st.pipe(new g(at)),st.lock()}catch(dt){this._worker=new b("error"),this._worker.error(dt)}}ht.prototype={accumulate:function(st){return ut(this,st)},on:function(st,nt){var rt=this;return st==="data"?this._worker.on(st,function(at){nt.call(rt,at.data,at.meta)}):this._worker.on(st,function(){h.delay(nt,arguments,rt)}),this},resume:function(){return h.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(st){if(h.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new _e(this,{objectMode:this._outputType!=="nodebuffer"},st)}},a.exports=ht},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(o,a,c){if(c.base64=!0,c.array=!0,c.string=!0,c.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",c.nodebuffer=typeof Buffer<"u",c.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")c.blob=!1;else{var h=new ArrayBuffer(0);try{c.blob=new Blob([h],{type:"application/zip"}).size===0}catch{try{var g=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,b=new g;b.append(h),c.blob=b.getBlob("application/zip").size===0}catch{c.blob=!1}}}try{c.nodestream=!!o("readable-stream").Readable}catch{c.nodestream=!1}},{"readable-stream":16}],31:[function(o,a,c){for(var h=o("./utils"),g=o("./support"),b=o("./nodejsUtils"),_=o("./stream/GenericWorker"),j=new Array(256),$=0;$<256;$++)j[$]=$>=252?6:$>=248?5:$>=240?4:$>=224?3:$>=192?2:1;j[254]=j[254]=1;var _e=function(st){var nt,rt,at,dt,ot,ct=st.length,vt=0;for(dt=0;dt<ct;dt++)rt=st.charCodeAt(dt),(rt&64512)===55296&&dt+1<ct&&(at=st.charCodeAt(dt+1),(at&64512)===56320&&(rt=65536+(rt-55296<<10)+(at-56320),dt++)),vt+=rt<128?1:rt<2048?2:rt<65536?3:4;for(g.uint8array?nt=new Uint8Array(vt):nt=new Array(vt),ot=0,dt=0;ot<vt;dt++)rt=st.charCodeAt(dt),(rt&64512)===55296&&dt+1<ct&&(at=st.charCodeAt(dt+1),(at&64512)===56320&&(rt=65536+(rt-55296<<10)+(at-56320),dt++)),rt<128?nt[ot++]=rt:rt<2048?(nt[ot++]=192|rt>>>6,nt[ot++]=128|rt&63):rt<65536?(nt[ot++]=224|rt>>>12,nt[ot++]=128|rt>>>6&63,nt[ot++]=128|rt&63):(nt[ot++]=240|rt>>>18,nt[ot++]=128|rt>>>12&63,nt[ot++]=128|rt>>>6&63,nt[ot++]=128|rt&63);return nt},tt=function(st,nt){var rt;for(nt=nt||st.length,nt>st.length&&(nt=st.length),rt=nt-1;rt>=0&&(st[rt]&192)===128;)rt--;return rt<0||rt===0?nt:rt+j[st[rt]]>nt?rt:nt},et=function(st){var nt,rt,at,dt,ot=st.length,ct=new Array(ot*2);for(rt=0,nt=0;nt<ot;){if(at=st[nt++],at<128){ct[rt++]=at;continue}if(dt=j[at],dt>4){ct[rt++]=65533,nt+=dt-1;continue}for(at&=dt===2?31:dt===3?15:7;dt>1&&nt<ot;)at=at<<6|st[nt++]&63,dt--;if(dt>1){ct[rt++]=65533;continue}at<65536?ct[rt++]=at:(at-=65536,ct[rt++]=55296|at>>10&1023,ct[rt++]=56320|at&1023)}return ct.length!==rt&&(ct.subarray?ct=ct.subarray(0,rt):ct.length=rt),h.applyFromCharCode(ct)};c.utf8encode=function(nt){return g.nodebuffer?b.newBufferFrom(nt,"utf-8"):_e(nt)},c.utf8decode=function(nt){return g.nodebuffer?h.transformTo("nodebuffer",nt).toString("utf-8"):(nt=h.transformTo(g.uint8array?"uint8array":"array",nt),et(nt))};function ut(){_.call(this,"utf-8 decode"),this.leftOver=null}h.inherits(ut,_),ut.prototype.processChunk=function(st){var nt=h.transformTo(g.uint8array?"uint8array":"array",st.data);if(this.leftOver&&this.leftOver.length){if(g.uint8array){var rt=nt;nt=new Uint8Array(rt.length+this.leftOver.length),nt.set(this.leftOver,0),nt.set(rt,this.leftOver.length)}else nt=this.leftOver.concat(nt);this.leftOver=null}var at=tt(nt),dt=nt;at!==nt.length&&(g.uint8array?(dt=nt.subarray(0,at),this.leftOver=nt.subarray(at,nt.length)):(dt=nt.slice(0,at),this.leftOver=nt.slice(at,nt.length))),this.push({data:c.utf8decode(dt),meta:st.meta})},ut.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:c.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},c.Utf8DecodeWorker=ut;function ht(){_.call(this,"utf-8 encode")}h.inherits(ht,_),ht.prototype.processChunk=function(st){this.push({data:c.utf8encode(st.data),meta:st.meta})},c.Utf8EncodeWorker=ht},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(o,a,c){var h=o("./support"),g=o("./base64"),b=o("./nodejsUtils"),_=o("./external");o("setimmediate");function j(st){var nt=null;return h.uint8array?nt=new Uint8Array(st.length):nt=new Array(st.length),_e(st,nt)}c.newBlob=function(st,nt){c.checkSupport("blob");try{return new Blob([st],{type:nt})}catch{try{var rt=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,at=new rt;return at.append(st),at.getBlob(nt)}catch{throw new Error("Bug : can't construct the Blob.")}}};function $(st){return st}function _e(st,nt){for(var rt=0;rt<st.length;++rt)nt[rt]=st.charCodeAt(rt)&255;return nt}var tt={stringifyByChunk:function(st,nt,rt){var at=[],dt=0,ot=st.length;if(ot<=rt)return String.fromCharCode.apply(null,st);for(;dt<ot;)nt==="array"||nt==="nodebuffer"?at.push(String.fromCharCode.apply(null,st.slice(dt,Math.min(dt+rt,ot)))):at.push(String.fromCharCode.apply(null,st.subarray(dt,Math.min(dt+rt,ot)))),dt+=rt;return at.join("")},stringifyByChar:function(st){for(var nt="",rt=0;rt<st.length;rt++)nt+=String.fromCharCode(st[rt]);return nt},applyCanBeUsed:{uint8array:function(){try{return h.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return h.nodebuffer&&String.fromCharCode.apply(null,b.allocBuffer(1)).length===1}catch{return!1}}()}};function et(st){var nt=65536,rt=c.getTypeOf(st),at=!0;if(rt==="uint8array"?at=tt.applyCanBeUsed.uint8array:rt==="nodebuffer"&&(at=tt.applyCanBeUsed.nodebuffer),at)for(;nt>1;)try{return tt.stringifyByChunk(st,rt,nt)}catch{nt=Math.floor(nt/2)}return tt.stringifyByChar(st)}c.applyFromCharCode=et;function ut(st,nt){for(var rt=0;rt<st.length;rt++)nt[rt]=st[rt];return nt}var ht={};ht.string={string:$,array:function(st){return _e(st,new Array(st.length))},arraybuffer:function(st){return ht.string.uint8array(st).buffer},uint8array:function(st){return _e(st,new Uint8Array(st.length))},nodebuffer:function(st){return _e(st,b.allocBuffer(st.length))}},ht.array={string:et,array:$,arraybuffer:function(st){return new Uint8Array(st).buffer},uint8array:function(st){return new Uint8Array(st)},nodebuffer:function(st){return b.newBufferFrom(st)}},ht.arraybuffer={string:function(st){return et(new Uint8Array(st))},array:function(st){return ut(new Uint8Array(st),new Array(st.byteLength))},arraybuffer:$,uint8array:function(st){return new Uint8Array(st)},nodebuffer:function(st){return b.newBufferFrom(new Uint8Array(st))}},ht.uint8array={string:et,array:function(st){return ut(st,new Array(st.length))},arraybuffer:function(st){return st.buffer},uint8array:$,nodebuffer:function(st){return b.newBufferFrom(st)}},ht.nodebuffer={string:et,array:function(st){return ut(st,new Array(st.length))},arraybuffer:function(st){return ht.nodebuffer.uint8array(st).buffer},uint8array:function(st){return ut(st,new Uint8Array(st.length))},nodebuffer:$},c.transformTo=function(st,nt){if(nt||(nt=""),!st)return nt;c.checkSupport(st);var rt=c.getTypeOf(nt),at=ht[rt][st](nt);return at},c.resolve=function(st){for(var nt=st.split("/"),rt=[],at=0;at<nt.length;at++){var dt=nt[at];dt==="."||dt===""&&at!==0&&at!==nt.length-1||(dt===".."?rt.pop():rt.push(dt))}return rt.join("/")},c.getTypeOf=function(st){if(typeof st=="string")return"string";if(Object.prototype.toString.call(st)==="[object Array]")return"array";if(h.nodebuffer&&b.isBuffer(st))return"nodebuffer";if(h.uint8array&&st instanceof Uint8Array)return"uint8array";if(h.arraybuffer&&st instanceof ArrayBuffer)return"arraybuffer"},c.checkSupport=function(st){var nt=h[st.toLowerCase()];if(!nt)throw new Error(st+" is not supported by this platform")},c.MAX_VALUE_16BITS=65535,c.MAX_VALUE_32BITS=-1,c.pretty=function(st){var nt="",rt,at;for(at=0;at<(st||"").length;at++)rt=st.charCodeAt(at),nt+="\\x"+(rt<16?"0":"")+rt.toString(16).toUpperCase();return nt},c.delay=function(st,nt,rt){setImmediate(function(){st.apply(rt||null,nt||[])})},c.inherits=function(st,nt){var rt=function(){};rt.prototype=nt.prototype,st.prototype=new rt},c.extend=function(){var st={},nt,rt;for(nt=0;nt<arguments.length;nt++)for(rt in arguments[nt])Object.prototype.hasOwnProperty.call(arguments[nt],rt)&&typeof st[rt]>"u"&&(st[rt]=arguments[nt][rt]);return st},c.prepareContent=function(st,nt,rt,at,dt){var ot=_.Promise.resolve(nt).then(function(ct){var vt=h.blob&&(ct instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(ct))!==-1);return vt&&typeof FileReader<"u"?new _.Promise(function(mt,pt){var Et=new FileReader;Et.onload=function(Ct){mt(Ct.target.result)},Et.onerror=function(Ct){pt(Ct.target.error)},Et.readAsArrayBuffer(ct)}):ct});return ot.then(function(ct){var vt=c.getTypeOf(ct);return vt?(vt==="arraybuffer"?ct=c.transformTo("uint8array",ct):vt==="string"&&(dt?ct=g.decode(ct):rt&&at!==!0&&(ct=j(ct))),ct):_.Promise.reject(new Error("Can't read the data of '"+st+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(o,a,c){var h=o("./reader/readerFor"),g=o("./utils"),b=o("./signature"),_=o("./zipEntry"),j=o("./support");function $(_e){this.files=[],this.loadOptions=_e}$.prototype={checkSignature:function(_e){if(!this.reader.readAndCheckSignature(_e)){this.reader.index-=4;var tt=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+g.pretty(tt)+", expected "+g.pretty(_e)+")")}},isSignature:function(_e,tt){var et=this.reader.index;this.reader.setIndex(_e);var ut=this.reader.readString(4),ht=ut===tt;return this.reader.setIndex(et),ht},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var _e=this.reader.readData(this.zipCommentLength),tt=j.uint8array?"uint8array":"array",et=g.transformTo(tt,_e);this.zipComment=this.loadOptions.decodeFileName(et)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var _e=this.zip64EndOfCentralSize-44,tt=0,et,ut,ht;tt<_e;)et=this.reader.readInt(2),ut=this.reader.readInt(4),ht=this.reader.readData(ut),this.zip64ExtensibleData[et]={id:et,length:ut,value:ht}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var _e,tt;for(_e=0;_e<this.files.length;_e++)tt=this.files[_e],this.reader.setIndex(tt.localHeaderOffset),this.checkSignature(b.LOCAL_FILE_HEADER),tt.readLocalPart(this.reader),tt.handleUTF8(),tt.processAttributes()},readCentralDir:function(){var _e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(b.CENTRAL_FILE_HEADER);)_e=new _({zip64:this.zip64},this.loadOptions),_e.readCentralPart(this.reader),this.files.push(_e);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var _e=this.reader.lastIndexOfSignature(b.CENTRAL_DIRECTORY_END);if(_e<0){var tt=!this.isSignature(0,b.LOCAL_FILE_HEADER);throw tt?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory")}this.reader.setIndex(_e);var et=_e;if(this.checkSignature(b.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===g.MAX_VALUE_16BITS||this.diskWithCentralDirStart===g.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===g.MAX_VALUE_16BITS||this.centralDirRecords===g.MAX_VALUE_16BITS||this.centralDirSize===g.MAX_VALUE_32BITS||this.centralDirOffset===g.MAX_VALUE_32BITS){if(this.zip64=!0,_e=this.reader.lastIndexOfSignature(b.ZIP64_CENTRAL_DIRECTORY_LOCATOR),_e<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(_e),this.checkSignature(b.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,b.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(b.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(b.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var ut=this.centralDirOffset+this.centralDirSize;this.zip64&&(ut+=20,ut+=12+this.zip64EndOfCentralSize);var ht=et-ut;if(ht>0)this.isSignature(et,b.CENTRAL_FILE_HEADER)||(this.reader.zero=ht);else if(ht<0)throw new Error("Corrupted zip: missing "+Math.abs(ht)+" bytes.")},prepareReader:function(_e){this.reader=h(_e)},load:function(_e){this.prepareReader(_e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},a.exports=$},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(o,a,c){var h=o("./reader/readerFor"),g=o("./utils"),b=o("./compressedObject"),_=o("./crc32"),j=o("./utf8"),$=o("./compressions"),_e=o("./support"),tt=0,et=3,ut=function(st){for(var nt in $)if(Object.prototype.hasOwnProperty.call($,nt)&&$[nt].magic===st)return $[nt];return null};function ht(st,nt){this.options=st,this.loadOptions=nt}ht.prototype={isEncrypted:function(){return(this.bitFlag&1)===1},useUTF8:function(){return(this.bitFlag&2048)===2048},readLocalPart:function(st){var nt,rt;if(st.skip(22),this.fileNameLength=st.readInt(2),rt=st.readInt(2),this.fileName=st.readData(this.fileNameLength),st.skip(rt),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(nt=ut(this.compressionMethod),nt===null)throw new Error("Corrupted zip : compression "+g.pretty(this.compressionMethod)+" unknown (inner file : "+g.transformTo("string",this.fileName)+")");this.decompressed=new b(this.compressedSize,this.uncompressedSize,this.crc32,nt,st.readData(this.compressedSize))},readCentralPart:function(st){this.versionMadeBy=st.readInt(2),st.skip(2),this.bitFlag=st.readInt(2),this.compressionMethod=st.readString(2),this.date=st.readDate(),this.crc32=st.readInt(4),this.compressedSize=st.readInt(4),this.uncompressedSize=st.readInt(4);var nt=st.readInt(2);if(this.extraFieldsLength=st.readInt(2),this.fileCommentLength=st.readInt(2),this.diskNumberStart=st.readInt(2),this.internalFileAttributes=st.readInt(2),this.externalFileAttributes=st.readInt(4),this.localHeaderOffset=st.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");st.skip(nt),this.readExtraFields(st),this.parseZIP64ExtraField(st),this.fileComment=st.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var st=this.versionMadeBy>>8;this.dir=!!(this.externalFileAttributes&16),st===tt&&(this.dosPermissions=this.externalFileAttributes&63),st===et&&(this.unixPermissions=this.externalFileAttributes>>16&65535),!this.dir&&this.fileNameStr.slice(-1)==="/"&&(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var st=h(this.extraFields[1].value);this.uncompressedSize===g.MAX_VALUE_32BITS&&(this.uncompressedSize=st.readInt(8)),this.compressedSize===g.MAX_VALUE_32BITS&&(this.compressedSize=st.readInt(8)),this.localHeaderOffset===g.MAX_VALUE_32BITS&&(this.localHeaderOffset=st.readInt(8)),this.diskNumberStart===g.MAX_VALUE_32BITS&&(this.diskNumberStart=st.readInt(4))}},readExtraFields:function(st){var nt=st.index+this.extraFieldsLength,rt,at,dt;for(this.extraFields||(this.extraFields={});st.index+4<nt;)rt=st.readInt(2),at=st.readInt(2),dt=st.readData(at),this.extraFields[rt]={id:rt,length:at,value:dt};st.setIndex(nt)},handleUTF8:function(){var st=_e.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=j.utf8decode(this.fileName),this.fileCommentStr=j.utf8decode(this.fileComment);else{var nt=this.findExtraFieldUnicodePath();if(nt!==null)this.fileNameStr=nt;else{var rt=g.transformTo(st,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(rt)}var at=this.findExtraFieldUnicodeComment();if(at!==null)this.fileCommentStr=at;else{var dt=g.transformTo(st,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(dt)}}},findExtraFieldUnicodePath:function(){var st=this.extraFields[28789];if(st){var nt=h(st.value);return nt.readInt(1)!==1||_(this.fileName)!==nt.readInt(4)?null:j.utf8decode(nt.readData(st.length-5))}return null},findExtraFieldUnicodeComment:function(){var st=this.extraFields[25461];if(st){var nt=h(st.value);return nt.readInt(1)!==1||_(this.fileComment)!==nt.readInt(4)?null:j.utf8decode(nt.readData(st.length-5))}return null}},a.exports=ht},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(o,a,c){var h=o("./stream/StreamHelper"),g=o("./stream/DataWorker"),b=o("./utf8"),_=o("./compressedObject"),j=o("./stream/GenericWorker"),$=function(ut,ht,st){this.name=ut,this.dir=st.dir,this.date=st.date,this.comment=st.comment,this.unixPermissions=st.unixPermissions,this.dosPermissions=st.dosPermissions,this._data=ht,this._dataBinary=st.binary,this.options={compression:st.compression,compressionOptions:st.compressionOptions}};$.prototype={internalStream:function(ut){var ht=null,st="string";try{if(!ut)throw new Error("No output type specified.");st=ut.toLowerCase();var nt=st==="string"||st==="text";(st==="binarystring"||st==="text")&&(st="string"),ht=this._decompressWorker();var rt=!this._dataBinary;rt&&!nt&&(ht=ht.pipe(new b.Utf8EncodeWorker)),!rt&&nt&&(ht=ht.pipe(new b.Utf8DecodeWorker))}catch(at){ht=new j("error"),ht.error(at)}return new h(ht,st,"")},async:function(ut,ht){return this.internalStream(ut).accumulate(ht)},nodeStream:function(ut,ht){return this.internalStream(ut||"nodebuffer").toNodejsStream(ht)},_compressWorker:function(ut,ht){if(this._data instanceof _&&this._data.compression.magic===ut.magic)return this._data.getCompressedWorker();var st=this._decompressWorker();return this._dataBinary||(st=st.pipe(new b.Utf8EncodeWorker)),_.createWorkerFrom(st,ut,ht)},_decompressWorker:function(){return this._data instanceof _?this._data.getContentWorker():this._data instanceof j?this._data:new g(this._data)}};for(var _e=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],tt=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},et=0;et<_e.length;et++)$.prototype[_e[et]]=tt;a.exports=$},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(o,a,c){(function(h){var g=h.MutationObserver||h.WebKitMutationObserver,b;if(g){var _=0,j=new g(ut),$=h.document.createTextNode("");j.observe($,{characterData:!0}),b=function(){$.data=_=++_%2}}else if(!h.setImmediate&&typeof h.MessageChannel<"u"){var _e=new h.MessageChannel;_e.port1.onmessage=ut,b=function(){_e.port2.postMessage(0)}}else"document"in h&&"onreadystatechange"in h.document.createElement("script")?b=function(){var st=h.document.createElement("script");st.onreadystatechange=function(){ut(),st.onreadystatechange=null,st.parentNode.removeChild(st),st=null},h.document.documentElement.appendChild(st)}:b=function(){setTimeout(ut,0)};var tt,et=[];function ut(){tt=!0;for(var st,nt,rt=et.length;rt;){for(nt=et,et=[],st=-1;++st<rt;)nt[st]();rt=et.length}tt=!1}a.exports=ht;function ht(st){et.push(st)===1&&!tt&&b()}}).call(this,typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(o,a,c){var h=o("immediate");function g(){}var b={},_=["REJECTED"],j=["FULFILLED"],$=["PENDING"];a.exports=_e;function _e(ot){if(typeof ot!="function")throw new TypeError("resolver must be a function");this.state=$,this.queue=[],this.outcome=void 0,ot!==g&&ht(this,ot)}_e.prototype.finally=function(ot){if(typeof ot!="function")return this;var ct=this.constructor;return this.then(vt,mt);function vt(pt){function Et(){return pt}return ct.resolve(ot()).then(Et)}function mt(pt){function Et(){throw pt}return ct.resolve(ot()).then(Et)}},_e.prototype.catch=function(ot){return this.then(null,ot)},_e.prototype.then=function(ot,ct){if(typeof ot!="function"&&this.state===j||typeof ct!="function"&&this.state===_)return this;var vt=new this.constructor(g);if(this.state!==$){var mt=this.state===j?ot:ct;et(vt,mt,this.outcome)}else this.queue.push(new tt(vt,ot,ct));return vt};function tt(ot,ct,vt){this.promise=ot,typeof ct=="function"&&(this.onFulfilled=ct,this.callFulfilled=this.otherCallFulfilled),typeof vt=="function"&&(this.onRejected=vt,this.callRejected=this.otherCallRejected)}tt.prototype.callFulfilled=function(ot){b.resolve(this.promise,ot)},tt.prototype.otherCallFulfilled=function(ot){et(this.promise,this.onFulfilled,ot)},tt.prototype.callRejected=function(ot){b.reject(this.promise,ot)},tt.prototype.otherCallRejected=function(ot){et(this.promise,this.onRejected,ot)};function et(ot,ct,vt){h(function(){var mt;try{mt=ct(vt)}catch(pt){return b.reject(ot,pt)}mt===ot?b.reject(ot,new TypeError("Cannot resolve promise with itself")):b.resolve(ot,mt)})}b.resolve=function(ot,ct){var vt=st(ut,ct);if(vt.status==="error")return b.reject(ot,vt.value);var mt=vt.value;if(mt)ht(ot,mt);else{ot.state=j,ot.outcome=ct;for(var pt=-1,Et=ot.queue.length;++pt<Et;)ot.queue[pt].callFulfilled(ct)}return ot},b.reject=function(ot,ct){ot.state=_,ot.outcome=ct;for(var vt=-1,mt=ot.queue.length;++vt<mt;)ot.queue[vt].callRejected(ct);return ot};function ut(ot){var ct=ot&&ot.then;if(ot&&(typeof ot=="object"||typeof ot=="function")&&typeof ct=="function")return function(){ct.apply(ot,arguments)}}function ht(ot,ct){var vt=!1;function mt(Nt){vt||(vt=!0,b.reject(ot,Nt))}function pt(Nt){vt||(vt=!0,b.resolve(ot,Nt))}function Et(){ct(pt,mt)}var Ct=st(Et);Ct.status==="error"&&mt(Ct.value)}function st(ot,ct){var vt={};try{vt.value=ot(ct),vt.status="success"}catch(mt){vt.status="error",vt.value=mt}return vt}_e.resolve=nt;function nt(ot){return ot instanceof this?ot:b.resolve(new this(g),ot)}_e.reject=rt;function rt(ot){var ct=new this(g);return b.reject(ct,ot)}_e.all=at;function at(ot){var ct=this;if(Object.prototype.toString.call(ot)!=="[object Array]")return this.reject(new TypeError("must be an array"));var vt=ot.length,mt=!1;if(!vt)return this.resolve([]);for(var pt=new Array(vt),Et=0,Ct=-1,Nt=new this(g);++Ct<vt;)Ut(ot[Ct],Ct);return Nt;function Ut(Tt,qt){ct.resolve(Tt).then(Vt,function(Zt){mt||(mt=!0,b.reject(Nt,Zt))});function Vt(Zt){pt[qt]=Zt,++Et===vt&&!mt&&(mt=!0,b.resolve(Nt,pt))}}}_e.race=dt;function dt(ot){var ct=this;if(Object.prototype.toString.call(ot)!=="[object Array]")return this.reject(new TypeError("must be an array"));var vt=ot.length,mt=!1;if(!vt)return this.resolve([]);for(var pt=-1,Et=new this(g);++pt<vt;)Ct(ot[pt]);return Et;function Ct(Nt){ct.resolve(Nt).then(function(Ut){mt||(mt=!0,b.resolve(Et,Ut))},function(Ut){mt||(mt=!0,b.reject(Et,Ut))})}}},{immediate:36}],38:[function(o,a,c){var h=o("./lib/utils/common").assign,g=o("./lib/deflate"),b=o("./lib/inflate"),_=o("./lib/zlib/constants"),j={};h(j,g,b,_),a.exports=j},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(o,a,c){var h=o("./zlib/deflate"),g=o("./utils/common"),b=o("./utils/strings"),_=o("./zlib/messages"),j=o("./zlib/zstream"),$=Object.prototype.toString,_e=0,tt=4,et=0,ut=1,ht=2,st=-1,nt=0,rt=8;function at(vt){if(!(this instanceof at))return new at(vt);this.options=g.assign({level:st,method:rt,chunkSize:16384,windowBits:15,memLevel:8,strategy:nt,to:""},vt||{});var mt=this.options;mt.raw&&mt.windowBits>0?mt.windowBits=-mt.windowBits:mt.gzip&&mt.windowBits>0&&mt.windowBits<16&&(mt.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new j,this.strm.avail_out=0;var pt=h.deflateInit2(this.strm,mt.level,mt.method,mt.windowBits,mt.memLevel,mt.strategy);if(pt!==et)throw new Error(_[pt]);if(mt.header&&h.deflateSetHeader(this.strm,mt.header),mt.dictionary){var Et;if(typeof mt.dictionary=="string"?Et=b.string2buf(mt.dictionary):$.call(mt.dictionary)==="[object ArrayBuffer]"?Et=new Uint8Array(mt.dictionary):Et=mt.dictionary,pt=h.deflateSetDictionary(this.strm,Et),pt!==et)throw new Error(_[pt]);this._dict_set=!0}}at.prototype.push=function(vt,mt){var pt=this.strm,Et=this.options.chunkSize,Ct,Nt;if(this.ended)return!1;Nt=mt===~~mt?mt:mt===!0?tt:_e,typeof vt=="string"?pt.input=b.string2buf(vt):$.call(vt)==="[object ArrayBuffer]"?pt.input=new Uint8Array(vt):pt.input=vt,pt.next_in=0,pt.avail_in=pt.input.length;do{if(pt.avail_out===0&&(pt.output=new g.Buf8(Et),pt.next_out=0,pt.avail_out=Et),Ct=h.deflate(pt,Nt),Ct!==ut&&Ct!==et)return this.onEnd(Ct),this.ended=!0,!1;(pt.avail_out===0||pt.avail_in===0&&(Nt===tt||Nt===ht))&&(this.options.to==="string"?this.onData(b.buf2binstring(g.shrinkBuf(pt.output,pt.next_out))):this.onData(g.shrinkBuf(pt.output,pt.next_out)))}while((pt.avail_in>0||pt.avail_out===0)&&Ct!==ut);return Nt===tt?(Ct=h.deflateEnd(this.strm),this.onEnd(Ct),this.ended=!0,Ct===et):(Nt===ht&&(this.onEnd(et),pt.avail_out=0),!0)},at.prototype.onData=function(vt){this.chunks.push(vt)},at.prototype.onEnd=function(vt){vt===et&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=g.flattenChunks(this.chunks)),this.chunks=[],this.err=vt,this.msg=this.strm.msg};function dt(vt,mt){var pt=new at(mt);if(pt.push(vt,!0),pt.err)throw pt.msg||_[pt.err];return pt.result}function ot(vt,mt){return mt=mt||{},mt.raw=!0,dt(vt,mt)}function ct(vt,mt){return mt=mt||{},mt.gzip=!0,dt(vt,mt)}c.Deflate=at,c.deflate=dt,c.deflateRaw=ot,c.gzip=ct},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(o,a,c){var h=o("./zlib/inflate"),g=o("./utils/common"),b=o("./utils/strings"),_=o("./zlib/constants"),j=o("./zlib/messages"),$=o("./zlib/zstream"),_e=o("./zlib/gzheader"),tt=Object.prototype.toString;function et(st){if(!(this instanceof et))return new et(st);this.options=g.assign({chunkSize:16384,windowBits:0,to:""},st||{});var nt=this.options;nt.raw&&nt.windowBits>=0&&nt.windowBits<16&&(nt.windowBits=-nt.windowBits,nt.windowBits===0&&(nt.windowBits=-15)),nt.windowBits>=0&&nt.windowBits<16&&!(st&&st.windowBits)&&(nt.windowBits+=32),nt.windowBits>15&&nt.windowBits<48&&(nt.windowBits&15||(nt.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new $,this.strm.avail_out=0;var rt=h.inflateInit2(this.strm,nt.windowBits);if(rt!==_.Z_OK)throw new Error(j[rt]);this.header=new _e,h.inflateGetHeader(this.strm,this.header)}et.prototype.push=function(st,nt){var rt=this.strm,at=this.options.chunkSize,dt=this.options.dictionary,ot,ct,vt,mt,pt,Et,Ct=!1;if(this.ended)return!1;ct=nt===~~nt?nt:nt===!0?_.Z_FINISH:_.Z_NO_FLUSH,typeof st=="string"?rt.input=b.binstring2buf(st):tt.call(st)==="[object ArrayBuffer]"?rt.input=new Uint8Array(st):rt.input=st,rt.next_in=0,rt.avail_in=rt.input.length;do{if(rt.avail_out===0&&(rt.output=new g.Buf8(at),rt.next_out=0,rt.avail_out=at),ot=h.inflate(rt,_.Z_NO_FLUSH),ot===_.Z_NEED_DICT&&dt&&(typeof dt=="string"?Et=b.string2buf(dt):tt.call(dt)==="[object ArrayBuffer]"?Et=new Uint8Array(dt):Et=dt,ot=h.inflateSetDictionary(this.strm,Et)),ot===_.Z_BUF_ERROR&&Ct===!0&&(ot=_.Z_OK,Ct=!1),ot!==_.Z_STREAM_END&&ot!==_.Z_OK)return this.onEnd(ot),this.ended=!0,!1;rt.next_out&&(rt.avail_out===0||ot===_.Z_STREAM_END||rt.avail_in===0&&(ct===_.Z_FINISH||ct===_.Z_SYNC_FLUSH))&&(this.options.to==="string"?(vt=b.utf8border(rt.output,rt.next_out),mt=rt.next_out-vt,pt=b.buf2string(rt.output,vt),rt.next_out=mt,rt.avail_out=at-mt,mt&&g.arraySet(rt.output,rt.output,vt,mt,0),this.onData(pt)):this.onData(g.shrinkBuf(rt.output,rt.next_out))),rt.avail_in===0&&rt.avail_out===0&&(Ct=!0)}while((rt.avail_in>0||rt.avail_out===0)&&ot!==_.Z_STREAM_END);return ot===_.Z_STREAM_END&&(ct=_.Z_FINISH),ct===_.Z_FINISH?(ot=h.inflateEnd(this.strm),this.onEnd(ot),this.ended=!0,ot===_.Z_OK):(ct===_.Z_SYNC_FLUSH&&(this.onEnd(_.Z_OK),rt.avail_out=0),!0)},et.prototype.onData=function(st){this.chunks.push(st)},et.prototype.onEnd=function(st){st===_.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=g.flattenChunks(this.chunks)),this.chunks=[],this.err=st,this.msg=this.strm.msg};function ut(st,nt){var rt=new et(nt);if(rt.push(st,!0),rt.err)throw rt.msg||j[rt.err];return rt.result}function ht(st,nt){return nt=nt||{},nt.raw=!0,ut(st,nt)}c.Inflate=et,c.inflate=ut,c.inflateRaw=ht,c.ungzip=ut},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(o,a,c){var h=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";c.assign=function(_){for(var j=Array.prototype.slice.call(arguments,1);j.length;){var $=j.shift();if($){if(typeof $!="object")throw new TypeError($+"must be non-object");for(var _e in $)$.hasOwnProperty(_e)&&(_[_e]=$[_e])}}return _},c.shrinkBuf=function(_,j){return _.length===j?_:_.subarray?_.subarray(0,j):(_.length=j,_)};var g={arraySet:function(_,j,$,_e,tt){if(j.subarray&&_.subarray){_.set(j.subarray($,$+_e),tt);return}for(var et=0;et<_e;et++)_[tt+et]=j[$+et]},flattenChunks:function(_){var j,$,_e,tt,et,ut;for(_e=0,j=0,$=_.length;j<$;j++)_e+=_[j].length;for(ut=new Uint8Array(_e),tt=0,j=0,$=_.length;j<$;j++)et=_[j],ut.set(et,tt),tt+=et.length;return ut}},b={arraySet:function(_,j,$,_e,tt){for(var et=0;et<_e;et++)_[tt+et]=j[$+et]},flattenChunks:function(_){return[].concat.apply([],_)}};c.setTyped=function(_){_?(c.Buf8=Uint8Array,c.Buf16=Uint16Array,c.Buf32=Int32Array,c.assign(c,g)):(c.Buf8=Array,c.Buf16=Array,c.Buf32=Array,c.assign(c,b))},c.setTyped(h)},{}],42:[function(o,a,c){var h=o("./common"),g=!0,b=!0;try{String.fromCharCode.apply(null,[0])}catch{g=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{b=!1}for(var _=new h.Buf8(256),j=0;j<256;j++)_[j]=j>=252?6:j>=248?5:j>=240?4:j>=224?3:j>=192?2:1;_[254]=_[254]=1,c.string2buf=function(_e){var tt,et,ut,ht,st,nt=_e.length,rt=0;for(ht=0;ht<nt;ht++)et=_e.charCodeAt(ht),(et&64512)===55296&&ht+1<nt&&(ut=_e.charCodeAt(ht+1),(ut&64512)===56320&&(et=65536+(et-55296<<10)+(ut-56320),ht++)),rt+=et<128?1:et<2048?2:et<65536?3:4;for(tt=new h.Buf8(rt),st=0,ht=0;st<rt;ht++)et=_e.charCodeAt(ht),(et&64512)===55296&&ht+1<nt&&(ut=_e.charCodeAt(ht+1),(ut&64512)===56320&&(et=65536+(et-55296<<10)+(ut-56320),ht++)),et<128?tt[st++]=et:et<2048?(tt[st++]=192|et>>>6,tt[st++]=128|et&63):et<65536?(tt[st++]=224|et>>>12,tt[st++]=128|et>>>6&63,tt[st++]=128|et&63):(tt[st++]=240|et>>>18,tt[st++]=128|et>>>12&63,tt[st++]=128|et>>>6&63,tt[st++]=128|et&63);return tt};function $(_e,tt){if(tt<65537&&(_e.subarray&&b||!_e.subarray&&g))return String.fromCharCode.apply(null,h.shrinkBuf(_e,tt));for(var et="",ut=0;ut<tt;ut++)et+=String.fromCharCode(_e[ut]);return et}c.buf2binstring=function(_e){return $(_e,_e.length)},c.binstring2buf=function(_e){for(var tt=new h.Buf8(_e.length),et=0,ut=tt.length;et<ut;et++)tt[et]=_e.charCodeAt(et);return tt},c.buf2string=function(_e,tt){var et,ut,ht,st,nt=tt||_e.length,rt=new Array(nt*2);for(ut=0,et=0;et<nt;){if(ht=_e[et++],ht<128){rt[ut++]=ht;continue}if(st=_[ht],st>4){rt[ut++]=65533,et+=st-1;continue}for(ht&=st===2?31:st===3?15:7;st>1&&et<nt;)ht=ht<<6|_e[et++]&63,st--;if(st>1){rt[ut++]=65533;continue}ht<65536?rt[ut++]=ht:(ht-=65536,rt[ut++]=55296|ht>>10&1023,rt[ut++]=56320|ht&1023)}return $(rt,ut)},c.utf8border=function(_e,tt){var et;for(tt=tt||_e.length,tt>_e.length&&(tt=_e.length),et=tt-1;et>=0&&(_e[et]&192)===128;)et--;return et<0||et===0?tt:et+_[_e[et]]>tt?et:tt}},{"./common":41}],43:[function(o,a,c){function h(g,b,_,j){for(var $=g&65535|0,_e=g>>>16&65535|0,tt=0;_!==0;){tt=_>2e3?2e3:_,_-=tt;do $=$+b[j++]|0,_e=_e+$|0;while(--tt);$%=65521,_e%=65521}return $|_e<<16|0}a.exports=h},{}],44:[function(o,a,c){a.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(o,a,c){function h(){for(var _,j=[],$=0;$<256;$++){_=$;for(var _e=0;_e<8;_e++)_=_&1?3988292384^_>>>1:_>>>1;j[$]=_}return j}var g=h();function b(_,j,$,_e){var tt=g,et=_e+$;_^=-1;for(var ut=_e;ut<et;ut++)_=_>>>8^tt[(_^j[ut])&255];return _^-1}a.exports=b},{}],46:[function(o,a,c){var h=o("../utils/common"),g=o("./trees"),b=o("./adler32"),_=o("./crc32"),j=o("./messages"),$=0,_e=1,tt=3,et=4,ut=5,ht=0,st=1,nt=-2,rt=-3,at=-5,dt=-1,ot=1,ct=2,vt=3,mt=4,pt=0,Et=2,Ct=8,Nt=9,Ut=15,Tt=8,qt=29,Vt=256,Zt=Vt+1+qt,It=30,Jt=19,fn=2*Zt+1,_n=15,xn=3,Mt=258,xt=Mt+xn+1,At=32,wt=42,kt=69,Dt=73,Ft=91,$t=103,Wt=113,un=666,rn=1,bn=2,An=3,Nn=4,wn=3;function jn(ft,nn){return ft.msg=j[nn],nn}function Xn(ft){return(ft<<1)-(ft>4?9:0)}function Ln(ft){for(var nn=ft.length;--nn>=0;)ft[nn]=0}function Un(ft){var nn=ft.state,cn=nn.pending;cn>ft.avail_out&&(cn=ft.avail_out),cn!==0&&(h.arraySet(ft.output,nn.pending_buf,nn.pending_out,cn,ft.next_out),ft.next_out+=cn,nn.pending_out+=cn,ft.total_out+=cn,ft.avail_out-=cn,nn.pending-=cn,nn.pending===0&&(nn.pending_out=0))}function kn(ft,nn){g._tr_flush_block(ft,ft.block_start>=0?ft.block_start:-1,ft.strstart-ft.block_start,nn),ft.block_start=ft.strstart,Un(ft.strm)}function en(ft,nn){ft.pending_buf[ft.pending++]=nn}function hn(ft,nn){ft.pending_buf[ft.pending++]=nn>>>8&255,ft.pending_buf[ft.pending++]=nn&255}function Tn(ft,nn,cn,Rt){var Bt=ft.avail_in;return Bt>Rt&&(Bt=Rt),Bt===0?0:(ft.avail_in-=Bt,h.arraySet(nn,ft.input,ft.next_in,Bt,cn),ft.state.wrap===1?ft.adler=b(ft.adler,nn,Bt,cn):ft.state.wrap===2&&(ft.adler=_(ft.adler,nn,Bt,cn)),ft.next_in+=Bt,ft.total_in+=Bt,Bt)}function On(ft,nn){var cn=ft.max_chain_length,Rt=ft.strstart,Bt,dn,Rn=ft.prev_length,Ot=ft.nice_match,yt=ft.strstart>ft.w_size-xt?ft.strstart-(ft.w_size-xt):0,Pt=ft.window,Ht=ft.w_mask,Kt=ft.prev,Qt=ft.strstart+Mt,pn=Pt[Rt+Rn-1],Dn=Pt[Rt+Rn];ft.prev_length>=ft.good_match&&(cn>>=2),Ot>ft.lookahead&&(Ot=ft.lookahead);do if(Bt=nn,!(Pt[Bt+Rn]!==Dn||Pt[Bt+Rn-1]!==pn||Pt[Bt]!==Pt[Rt]||Pt[++Bt]!==Pt[Rt+1])){Rt+=2,Bt++;do;while(Pt[++Rt]===Pt[++Bt]&&Pt[++Rt]===Pt[++Bt]&&Pt[++Rt]===Pt[++Bt]&&Pt[++Rt]===Pt[++Bt]&&Pt[++Rt]===Pt[++Bt]&&Pt[++Rt]===Pt[++Bt]&&Pt[++Rt]===Pt[++Bt]&&Pt[++Rt]===Pt[++Bt]&&Rt<Qt);if(dn=Mt-(Qt-Rt),Rt=Qt-Mt,dn>Rn){if(ft.match_start=nn,Rn=dn,dn>=Ot)break;pn=Pt[Rt+Rn-1],Dn=Pt[Rt+Rn]}}while((nn=Kt[nn&Ht])>yt&&--cn!==0);return Rn<=ft.lookahead?Rn:ft.lookahead}function In(ft){var nn=ft.w_size,cn,Rt,Bt,dn,Rn;do{if(dn=ft.window_size-ft.lookahead-ft.strstart,ft.strstart>=nn+(nn-xt)){h.arraySet(ft.window,ft.window,nn,nn,0),ft.match_start-=nn,ft.strstart-=nn,ft.block_start-=nn,Rt=ft.hash_size,cn=Rt;do Bt=ft.head[--cn],ft.head[cn]=Bt>=nn?Bt-nn:0;while(--Rt);Rt=nn,cn=Rt;do Bt=ft.prev[--cn],ft.prev[cn]=Bt>=nn?Bt-nn:0;while(--Rt);dn+=nn}if(ft.strm.avail_in===0)break;if(Rt=Tn(ft.strm,ft.window,ft.strstart+ft.lookahead,dn),ft.lookahead+=Rt,ft.lookahead+ft.insert>=xn)for(Rn=ft.strstart-ft.insert,ft.ins_h=ft.window[Rn],ft.ins_h=(ft.ins_h<<ft.hash_shift^ft.window[Rn+1])&ft.hash_mask;ft.insert&&(ft.ins_h=(ft.ins_h<<ft.hash_shift^ft.window[Rn+xn-1])&ft.hash_mask,ft.prev[Rn&ft.w_mask]=ft.head[ft.ins_h],ft.head[ft.ins_h]=Rn,Rn++,ft.insert--,!(ft.lookahead+ft.insert<xn)););}while(ft.lookahead<xt&&ft.strm.avail_in!==0)}function Zn(ft,nn){var cn=65535;for(cn>ft.pending_buf_size-5&&(cn=ft.pending_buf_size-5);;){if(ft.lookahead<=1){if(In(ft),ft.lookahead===0&&nn===$)return rn;if(ft.lookahead===0)break}ft.strstart+=ft.lookahead,ft.lookahead=0;var Rt=ft.block_start+cn;if((ft.strstart===0||ft.strstart>=Rt)&&(ft.lookahead=ft.strstart-Rt,ft.strstart=Rt,kn(ft,!1),ft.strm.avail_out===0)||ft.strstart-ft.block_start>=ft.w_size-xt&&(kn(ft,!1),ft.strm.avail_out===0))return rn}return ft.insert=0,nn===et?(kn(ft,!0),ft.strm.avail_out===0?An:Nn):(ft.strstart>ft.block_start&&(kn(ft,!1),ft.strm.avail_out===0),rn)}function Qn(ft,nn){for(var cn,Rt;;){if(ft.lookahead<xt){if(In(ft),ft.lookahead<xt&&nn===$)return rn;if(ft.lookahead===0)break}if(cn=0,ft.lookahead>=xn&&(ft.ins_h=(ft.ins_h<<ft.hash_shift^ft.window[ft.strstart+xn-1])&ft.hash_mask,cn=ft.prev[ft.strstart&ft.w_mask]=ft.head[ft.ins_h],ft.head[ft.ins_h]=ft.strstart),cn!==0&&ft.strstart-cn<=ft.w_size-xt&&(ft.match_length=On(ft,cn)),ft.match_length>=xn)if(Rt=g._tr_tally(ft,ft.strstart-ft.match_start,ft.match_length-xn),ft.lookahead-=ft.match_length,ft.match_length<=ft.max_lazy_match&&ft.lookahead>=xn){ft.match_length--;do ft.strstart++,ft.ins_h=(ft.ins_h<<ft.hash_shift^ft.window[ft.strstart+xn-1])&ft.hash_mask,cn=ft.prev[ft.strstart&ft.w_mask]=ft.head[ft.ins_h],ft.head[ft.ins_h]=ft.strstart;while(--ft.match_length!==0);ft.strstart++}else ft.strstart+=ft.match_length,ft.match_length=0,ft.ins_h=ft.window[ft.strstart],ft.ins_h=(ft.ins_h<<ft.hash_shift^ft.window[ft.strstart+1])&ft.hash_mask;else Rt=g._tr_tally(ft,0,ft.window[ft.strstart]),ft.lookahead--,ft.strstart++;if(Rt&&(kn(ft,!1),ft.strm.avail_out===0))return rn}return ft.insert=ft.strstart<xn-1?ft.strstart:xn-1,nn===et?(kn(ft,!0),ft.strm.avail_out===0?An:Nn):ft.last_lit&&(kn(ft,!1),ft.strm.avail_out===0)?rn:bn}function Kn(ft,nn){for(var cn,Rt,Bt;;){if(ft.lookahead<xt){if(In(ft),ft.lookahead<xt&&nn===$)return rn;if(ft.lookahead===0)break}if(cn=0,ft.lookahead>=xn&&(ft.ins_h=(ft.ins_h<<ft.hash_shift^ft.window[ft.strstart+xn-1])&ft.hash_mask,cn=ft.prev[ft.strstart&ft.w_mask]=ft.head[ft.ins_h],ft.head[ft.ins_h]=ft.strstart),ft.prev_length=ft.match_length,ft.prev_match=ft.match_start,ft.match_length=xn-1,cn!==0&&ft.prev_length<ft.max_lazy_match&&ft.strstart-cn<=ft.w_size-xt&&(ft.match_length=On(ft,cn),ft.match_length<=5&&(ft.strategy===ot||ft.match_length===xn&&ft.strstart-ft.match_start>4096)&&(ft.match_length=xn-1)),ft.prev_length>=xn&&ft.match_length<=ft.prev_length){Bt=ft.strstart+ft.lookahead-xn,Rt=g._tr_tally(ft,ft.strstart-1-ft.prev_match,ft.prev_length-xn),ft.lookahead-=ft.prev_length-1,ft.prev_length-=2;do++ft.strstart<=Bt&&(ft.ins_h=(ft.ins_h<<ft.hash_shift^ft.window[ft.strstart+xn-1])&ft.hash_mask,cn=ft.prev[ft.strstart&ft.w_mask]=ft.head[ft.ins_h],ft.head[ft.ins_h]=ft.strstart);while(--ft.prev_length!==0);if(ft.match_available=0,ft.match_length=xn-1,ft.strstart++,Rt&&(kn(ft,!1),ft.strm.avail_out===0))return rn}else if(ft.match_available){if(Rt=g._tr_tally(ft,0,ft.window[ft.strstart-1]),Rt&&kn(ft,!1),ft.strstart++,ft.lookahead--,ft.strm.avail_out===0)return rn}else ft.match_available=1,ft.strstart++,ft.lookahead--}return ft.match_available&&(Rt=g._tr_tally(ft,0,ft.window[ft.strstart-1]),ft.match_available=0),ft.insert=ft.strstart<xn-1?ft.strstart:xn-1,nn===et?(kn(ft,!0),ft.strm.avail_out===0?An:Nn):ft.last_lit&&(kn(ft,!1),ft.strm.avail_out===0)?rn:bn}function er(ft,nn){for(var cn,Rt,Bt,dn,Rn=ft.window;;){if(ft.lookahead<=Mt){if(In(ft),ft.lookahead<=Mt&&nn===$)return rn;if(ft.lookahead===0)break}if(ft.match_length=0,ft.lookahead>=xn&&ft.strstart>0&&(Bt=ft.strstart-1,Rt=Rn[Bt],Rt===Rn[++Bt]&&Rt===Rn[++Bt]&&Rt===Rn[++Bt])){dn=ft.strstart+Mt;do;while(Rt===Rn[++Bt]&&Rt===Rn[++Bt]&&Rt===Rn[++Bt]&&Rt===Rn[++Bt]&&Rt===Rn[++Bt]&&Rt===Rn[++Bt]&&Rt===Rn[++Bt]&&Rt===Rn[++Bt]&&Bt<dn);ft.match_length=Mt-(dn-Bt),ft.match_length>ft.lookahead&&(ft.match_length=ft.lookahead)}if(ft.match_length>=xn?(cn=g._tr_tally(ft,1,ft.match_length-xn),ft.lookahead-=ft.match_length,ft.strstart+=ft.match_length,ft.match_length=0):(cn=g._tr_tally(ft,0,ft.window[ft.strstart]),ft.lookahead--,ft.strstart++),cn&&(kn(ft,!1),ft.strm.avail_out===0))return rn}return ft.insert=0,nn===et?(kn(ft,!0),ft.strm.avail_out===0?An:Nn):ft.last_lit&&(kn(ft,!1),ft.strm.avail_out===0)?rn:bn}function Jn(ft,nn){for(var cn;;){if(ft.lookahead===0&&(In(ft),ft.lookahead===0)){if(nn===$)return rn;break}if(ft.match_length=0,cn=g._tr_tally(ft,0,ft.window[ft.strstart]),ft.lookahead--,ft.strstart++,cn&&(kn(ft,!1),ft.strm.avail_out===0))return rn}return ft.insert=0,nn===et?(kn(ft,!0),ft.strm.avail_out===0?An:Nn):ft.last_lit&&(kn(ft,!1),ft.strm.avail_out===0)?rn:bn}function Yn(ft,nn,cn,Rt,Bt){this.good_length=ft,this.max_lazy=nn,this.nice_length=cn,this.max_chain=Rt,this.func=Bt}var tr;tr=[new Yn(0,0,0,0,Zn),new Yn(4,4,8,4,Qn),new Yn(4,5,16,8,Qn),new Yn(4,6,32,32,Qn),new Yn(4,4,16,16,Kn),new Yn(8,16,32,32,Kn),new Yn(8,16,128,128,Kn),new Yn(8,32,128,256,Kn),new Yn(32,128,258,1024,Kn),new Yn(32,258,258,4096,Kn)];function Cn(ft){ft.window_size=2*ft.w_size,Ln(ft.head),ft.max_lazy_match=tr[ft.level].max_lazy,ft.good_match=tr[ft.level].good_length,ft.nice_match=tr[ft.level].nice_length,ft.max_chain_length=tr[ft.level].max_chain,ft.strstart=0,ft.block_start=0,ft.lookahead=0,ft.insert=0,ft.match_length=ft.prev_length=xn-1,ft.match_available=0,ft.ins_h=0}function St(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Ct,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new h.Buf16(fn*2),this.dyn_dtree=new h.Buf16((2*It+1)*2),this.bl_tree=new h.Buf16((2*Jt+1)*2),Ln(this.dyn_ltree),Ln(this.dyn_dtree),Ln(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new h.Buf16(_n+1),this.heap=new h.Buf16(2*Zt+1),Ln(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new h.Buf16(2*Zt+1),Ln(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function zt(ft){var nn;return!ft||!ft.state?jn(ft,nt):(ft.total_in=ft.total_out=0,ft.data_type=Et,nn=ft.state,nn.pending=0,nn.pending_out=0,nn.wrap<0&&(nn.wrap=-nn.wrap),nn.status=nn.wrap?wt:Wt,ft.adler=nn.wrap===2?0:1,nn.last_flush=$,g._tr_init(nn),ht)}function sn(ft){var nn=zt(ft);return nn===ht&&Cn(ft.state),nn}function gn(ft,nn){return!ft||!ft.state||ft.state.wrap!==2?nt:(ft.state.gzhead=nn,ht)}function tn(ft,nn,cn,Rt,Bt,dn){if(!ft)return nt;var Rn=1;if(nn===dt&&(nn=6),Rt<0?(Rn=0,Rt=-Rt):Rt>15&&(Rn=2,Rt-=16),Bt<1||Bt>Nt||cn!==Ct||Rt<8||Rt>15||nn<0||nn>9||dn<0||dn>mt)return jn(ft,nt);Rt===8&&(Rt=9);var Ot=new St;return ft.state=Ot,Ot.strm=ft,Ot.wrap=Rn,Ot.gzhead=null,Ot.w_bits=Rt,Ot.w_size=1<<Ot.w_bits,Ot.w_mask=Ot.w_size-1,Ot.hash_bits=Bt+7,Ot.hash_size=1<<Ot.hash_bits,Ot.hash_mask=Ot.hash_size-1,Ot.hash_shift=~~((Ot.hash_bits+xn-1)/xn),Ot.window=new h.Buf8(Ot.w_size*2),Ot.head=new h.Buf16(Ot.hash_size),Ot.prev=new h.Buf16(Ot.w_size),Ot.lit_bufsize=1<<Bt+6,Ot.pending_buf_size=Ot.lit_bufsize*4,Ot.pending_buf=new h.Buf8(Ot.pending_buf_size),Ot.d_buf=1*Ot.lit_bufsize,Ot.l_buf=(1+2)*Ot.lit_bufsize,Ot.level=nn,Ot.strategy=dn,Ot.method=cn,sn(ft)}function Sn(ft,nn){return tn(ft,nn,Ct,Ut,Tt,pt)}function _t(ft,nn){var cn,Rt,Bt,dn;if(!ft||!ft.state||nn>ut||nn<0)return ft?jn(ft,nt):nt;if(Rt=ft.state,!ft.output||!ft.input&&ft.avail_in!==0||Rt.status===un&&nn!==et)return jn(ft,ft.avail_out===0?at:nt);if(Rt.strm=ft,cn=Rt.last_flush,Rt.last_flush=nn,Rt.status===wt)if(Rt.wrap===2)ft.adler=0,en(Rt,31),en(Rt,139),en(Rt,8),Rt.gzhead?(en(Rt,(Rt.gzhead.text?1:0)+(Rt.gzhead.hcrc?2:0)+(Rt.gzhead.extra?4:0)+(Rt.gzhead.name?8:0)+(Rt.gzhead.comment?16:0)),en(Rt,Rt.gzhead.time&255),en(Rt,Rt.gzhead.time>>8&255),en(Rt,Rt.gzhead.time>>16&255),en(Rt,Rt.gzhead.time>>24&255),en(Rt,Rt.level===9?2:Rt.strategy>=ct||Rt.level<2?4:0),en(Rt,Rt.gzhead.os&255),Rt.gzhead.extra&&Rt.gzhead.extra.length&&(en(Rt,Rt.gzhead.extra.length&255),en(Rt,Rt.gzhead.extra.length>>8&255)),Rt.gzhead.hcrc&&(ft.adler=_(ft.adler,Rt.pending_buf,Rt.pending,0)),Rt.gzindex=0,Rt.status=kt):(en(Rt,0),en(Rt,0),en(Rt,0),en(Rt,0),en(Rt,0),en(Rt,Rt.level===9?2:Rt.strategy>=ct||Rt.level<2?4:0),en(Rt,wn),Rt.status=Wt);else{var Rn=Ct+(Rt.w_bits-8<<4)<<8,Ot=-1;Rt.strategy>=ct||Rt.level<2?Ot=0:Rt.level<6?Ot=1:Rt.level===6?Ot=2:Ot=3,Rn|=Ot<<6,Rt.strstart!==0&&(Rn|=At),Rn+=31-Rn%31,Rt.status=Wt,hn(Rt,Rn),Rt.strstart!==0&&(hn(Rt,ft.adler>>>16),hn(Rt,ft.adler&65535)),ft.adler=1}if(Rt.status===kt)if(Rt.gzhead.extra){for(Bt=Rt.pending;Rt.gzindex<(Rt.gzhead.extra.length&65535)&&!(Rt.pending===Rt.pending_buf_size&&(Rt.gzhead.hcrc&&Rt.pending>Bt&&(ft.adler=_(ft.adler,Rt.pending_buf,Rt.pending-Bt,Bt)),Un(ft),Bt=Rt.pending,Rt.pending===Rt.pending_buf_size));)en(Rt,Rt.gzhead.extra[Rt.gzindex]&255),Rt.gzindex++;Rt.gzhead.hcrc&&Rt.pending>Bt&&(ft.adler=_(ft.adler,Rt.pending_buf,Rt.pending-Bt,Bt)),Rt.gzindex===Rt.gzhead.extra.length&&(Rt.gzindex=0,Rt.status=Dt)}else Rt.status=Dt;if(Rt.status===Dt)if(Rt.gzhead.name){Bt=Rt.pending;do{if(Rt.pending===Rt.pending_buf_size&&(Rt.gzhead.hcrc&&Rt.pending>Bt&&(ft.adler=_(ft.adler,Rt.pending_buf,Rt.pending-Bt,Bt)),Un(ft),Bt=Rt.pending,Rt.pending===Rt.pending_buf_size)){dn=1;break}Rt.gzindex<Rt.gzhead.name.length?dn=Rt.gzhead.name.charCodeAt(Rt.gzindex++)&255:dn=0,en(Rt,dn)}while(dn!==0);Rt.gzhead.hcrc&&Rt.pending>Bt&&(ft.adler=_(ft.adler,Rt.pending_buf,Rt.pending-Bt,Bt)),dn===0&&(Rt.gzindex=0,Rt.status=Ft)}else Rt.status=Ft;if(Rt.status===Ft)if(Rt.gzhead.comment){Bt=Rt.pending;do{if(Rt.pending===Rt.pending_buf_size&&(Rt.gzhead.hcrc&&Rt.pending>Bt&&(ft.adler=_(ft.adler,Rt.pending_buf,Rt.pending-Bt,Bt)),Un(ft),Bt=Rt.pending,Rt.pending===Rt.pending_buf_size)){dn=1;break}Rt.gzindex<Rt.gzhead.comment.length?dn=Rt.gzhead.comment.charCodeAt(Rt.gzindex++)&255:dn=0,en(Rt,dn)}while(dn!==0);Rt.gzhead.hcrc&&Rt.pending>Bt&&(ft.adler=_(ft.adler,Rt.pending_buf,Rt.pending-Bt,Bt)),dn===0&&(Rt.status=$t)}else Rt.status=$t;if(Rt.status===$t&&(Rt.gzhead.hcrc?(Rt.pending+2>Rt.pending_buf_size&&Un(ft),Rt.pending+2<=Rt.pending_buf_size&&(en(Rt,ft.adler&255),en(Rt,ft.adler>>8&255),ft.adler=0,Rt.status=Wt)):Rt.status=Wt),Rt.pending!==0){if(Un(ft),ft.avail_out===0)return Rt.last_flush=-1,ht}else if(ft.avail_in===0&&Xn(nn)<=Xn(cn)&&nn!==et)return jn(ft,at);if(Rt.status===un&&ft.avail_in!==0)return jn(ft,at);if(ft.avail_in!==0||Rt.lookahead!==0||nn!==$&&Rt.status!==un){var yt=Rt.strategy===ct?Jn(Rt,nn):Rt.strategy===vt?er(Rt,nn):tr[Rt.level].func(Rt,nn);if((yt===An||yt===Nn)&&(Rt.status=un),yt===rn||yt===An)return ft.avail_out===0&&(Rt.last_flush=-1),ht;if(yt===bn&&(nn===_e?g._tr_align(Rt):nn!==ut&&(g._tr_stored_block(Rt,0,0,!1),nn===tt&&(Ln(Rt.head),Rt.lookahead===0&&(Rt.strstart=0,Rt.block_start=0,Rt.insert=0))),Un(ft),ft.avail_out===0))return Rt.last_flush=-1,ht}return nn!==et?ht:Rt.wrap<=0?st:(Rt.wrap===2?(en(Rt,ft.adler&255),en(Rt,ft.adler>>8&255),en(Rt,ft.adler>>16&255),en(Rt,ft.adler>>24&255),en(Rt,ft.total_in&255),en(Rt,ft.total_in>>8&255),en(Rt,ft.total_in>>16&255),en(Rt,ft.total_in>>24&255)):(hn(Rt,ft.adler>>>16),hn(Rt,ft.adler&65535)),Un(ft),Rt.wrap>0&&(Rt.wrap=-Rt.wrap),Rt.pending!==0?ht:st)}function ln(ft){var nn;return!ft||!ft.state?nt:(nn=ft.state.status,nn!==wt&&nn!==kt&&nn!==Dt&&nn!==Ft&&nn!==$t&&nn!==Wt&&nn!==un?jn(ft,nt):(ft.state=null,nn===Wt?jn(ft,rt):ht))}function Pn(ft,nn){var cn=nn.length,Rt,Bt,dn,Rn,Ot,yt,Pt,Ht;if(!ft||!ft.state||(Rt=ft.state,Rn=Rt.wrap,Rn===2||Rn===1&&Rt.status!==wt||Rt.lookahead))return nt;for(Rn===1&&(ft.adler=b(ft.adler,nn,cn,0)),Rt.wrap=0,cn>=Rt.w_size&&(Rn===0&&(Ln(Rt.head),Rt.strstart=0,Rt.block_start=0,Rt.insert=0),Ht=new h.Buf8(Rt.w_size),h.arraySet(Ht,nn,cn-Rt.w_size,Rt.w_size,0),nn=Ht,cn=Rt.w_size),Ot=ft.avail_in,yt=ft.next_in,Pt=ft.input,ft.avail_in=cn,ft.next_in=0,ft.input=nn,In(Rt);Rt.lookahead>=xn;){Bt=Rt.strstart,dn=Rt.lookahead-(xn-1);do Rt.ins_h=(Rt.ins_h<<Rt.hash_shift^Rt.window[Bt+xn-1])&Rt.hash_mask,Rt.prev[Bt&Rt.w_mask]=Rt.head[Rt.ins_h],Rt.head[Rt.ins_h]=Bt,Bt++;while(--dn);Rt.strstart=Bt,Rt.lookahead=xn-1,In(Rt)}return Rt.strstart+=Rt.lookahead,Rt.block_start=Rt.strstart,Rt.insert=Rt.lookahead,Rt.lookahead=0,Rt.match_length=Rt.prev_length=xn-1,Rt.match_available=0,ft.next_in=yt,ft.input=Pt,ft.avail_in=Ot,Rt.wrap=Rn,ht}c.deflateInit=Sn,c.deflateInit2=tn,c.deflateReset=sn,c.deflateResetKeep=zt,c.deflateSetHeader=gn,c.deflate=_t,c.deflateEnd=ln,c.deflateSetDictionary=Pn,c.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(o,a,c){function h(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}a.exports=h},{}],48:[function(o,a,c){var h=30,g=12;a.exports=function(_,j){var $,_e,tt,et,ut,ht,st,nt,rt,at,dt,ot,ct,vt,mt,pt,Et,Ct,Nt,Ut,Tt,qt,Vt,Zt,It;$=_.state,_e=_.next_in,Zt=_.input,tt=_e+(_.avail_in-5),et=_.next_out,It=_.output,ut=et-(j-_.avail_out),ht=et+(_.avail_out-257),st=$.dmax,nt=$.wsize,rt=$.whave,at=$.wnext,dt=$.window,ot=$.hold,ct=$.bits,vt=$.lencode,mt=$.distcode,pt=(1<<$.lenbits)-1,Et=(1<<$.distbits)-1;e:do{ct<15&&(ot+=Zt[_e++]<<ct,ct+=8,ot+=Zt[_e++]<<ct,ct+=8),Ct=vt[ot&pt];t:for(;;){if(Nt=Ct>>>24,ot>>>=Nt,ct-=Nt,Nt=Ct>>>16&255,Nt===0)It[et++]=Ct&65535;else if(Nt&16){Ut=Ct&65535,Nt&=15,Nt&&(ct<Nt&&(ot+=Zt[_e++]<<ct,ct+=8),Ut+=ot&(1<<Nt)-1,ot>>>=Nt,ct-=Nt),ct<15&&(ot+=Zt[_e++]<<ct,ct+=8,ot+=Zt[_e++]<<ct,ct+=8),Ct=mt[ot&Et];n:for(;;){if(Nt=Ct>>>24,ot>>>=Nt,ct-=Nt,Nt=Ct>>>16&255,Nt&16){if(Tt=Ct&65535,Nt&=15,ct<Nt&&(ot+=Zt[_e++]<<ct,ct+=8,ct<Nt&&(ot+=Zt[_e++]<<ct,ct+=8)),Tt+=ot&(1<<Nt)-1,Tt>st){_.msg="invalid distance too far back",$.mode=h;break e}if(ot>>>=Nt,ct-=Nt,Nt=et-ut,Tt>Nt){if(Nt=Tt-Nt,Nt>rt&&$.sane){_.msg="invalid distance too far back",$.mode=h;break e}if(qt=0,Vt=dt,at===0){if(qt+=nt-Nt,Nt<Ut){Ut-=Nt;do It[et++]=dt[qt++];while(--Nt);qt=et-Tt,Vt=It}}else if(at<Nt){if(qt+=nt+at-Nt,Nt-=at,Nt<Ut){Ut-=Nt;do It[et++]=dt[qt++];while(--Nt);if(qt=0,at<Ut){Nt=at,Ut-=Nt;do It[et++]=dt[qt++];while(--Nt);qt=et-Tt,Vt=It}}}else if(qt+=at-Nt,Nt<Ut){Ut-=Nt;do It[et++]=dt[qt++];while(--Nt);qt=et-Tt,Vt=It}for(;Ut>2;)It[et++]=Vt[qt++],It[et++]=Vt[qt++],It[et++]=Vt[qt++],Ut-=3;Ut&&(It[et++]=Vt[qt++],Ut>1&&(It[et++]=Vt[qt++]))}else{qt=et-Tt;do It[et++]=It[qt++],It[et++]=It[qt++],It[et++]=It[qt++],Ut-=3;while(Ut>2);Ut&&(It[et++]=It[qt++],Ut>1&&(It[et++]=It[qt++]))}}else if(Nt&64){_.msg="invalid distance code",$.mode=h;break e}else{Ct=mt[(Ct&65535)+(ot&(1<<Nt)-1)];continue n}break}}else if(Nt&64)if(Nt&32){$.mode=g;break e}else{_.msg="invalid literal/length code",$.mode=h;break e}else{Ct=vt[(Ct&65535)+(ot&(1<<Nt)-1)];continue t}break}}while(_e<tt&&et<ht);Ut=ct>>3,_e-=Ut,ct-=Ut<<3,ot&=(1<<ct)-1,_.next_in=_e,_.next_out=et,_.avail_in=_e<tt?5+(tt-_e):5-(_e-tt),_.avail_out=et<ht?257+(ht-et):257-(et-ht),$.hold=ot,$.bits=ct}},{}],49:[function(o,a,c){var h=o("../utils/common"),g=o("./adler32"),b=o("./crc32"),_=o("./inffast"),j=o("./inftrees"),$=0,_e=1,tt=2,et=4,ut=5,ht=6,st=0,nt=1,rt=2,at=-2,dt=-3,ot=-4,ct=-5,vt=8,mt=1,pt=2,Et=3,Ct=4,Nt=5,Ut=6,Tt=7,qt=8,Vt=9,Zt=10,It=11,Jt=12,fn=13,_n=14,xn=15,Mt=16,xt=17,At=18,wt=19,kt=20,Dt=21,Ft=22,$t=23,Wt=24,un=25,rn=26,bn=27,An=28,Nn=29,wn=30,jn=31,Xn=32,Ln=852,Un=592,kn=15,en=kn;function hn(tn){return(tn>>>24&255)+(tn>>>8&65280)+((tn&65280)<<8)+((tn&255)<<24)}function Tn(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new h.Buf16(320),this.work=new h.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function On(tn){var Sn;return!tn||!tn.state?at:(Sn=tn.state,tn.total_in=tn.total_out=Sn.total=0,tn.msg="",Sn.wrap&&(tn.adler=Sn.wrap&1),Sn.mode=mt,Sn.last=0,Sn.havedict=0,Sn.dmax=32768,Sn.head=null,Sn.hold=0,Sn.bits=0,Sn.lencode=Sn.lendyn=new h.Buf32(Ln),Sn.distcode=Sn.distdyn=new h.Buf32(Un),Sn.sane=1,Sn.back=-1,st)}function In(tn){var Sn;return!tn||!tn.state?at:(Sn=tn.state,Sn.wsize=0,Sn.whave=0,Sn.wnext=0,On(tn))}function Zn(tn,Sn){var _t,ln;return!tn||!tn.state||(ln=tn.state,Sn<0?(_t=0,Sn=-Sn):(_t=(Sn>>4)+1,Sn<48&&(Sn&=15)),Sn&&(Sn<8||Sn>15))?at:(ln.window!==null&&ln.wbits!==Sn&&(ln.window=null),ln.wrap=_t,ln.wbits=Sn,In(tn))}function Qn(tn,Sn){var _t,ln;return tn?(ln=new Tn,tn.state=ln,ln.window=null,_t=Zn(tn,Sn),_t!==st&&(tn.state=null),_t):at}function Kn(tn){return Qn(tn,en)}var er=!0,Jn,Yn;function tr(tn){if(er){var Sn;for(Jn=new h.Buf32(512),Yn=new h.Buf32(32),Sn=0;Sn<144;)tn.lens[Sn++]=8;for(;Sn<256;)tn.lens[Sn++]=9;for(;Sn<280;)tn.lens[Sn++]=7;for(;Sn<288;)tn.lens[Sn++]=8;for(j(_e,tn.lens,0,288,Jn,0,tn.work,{bits:9}),Sn=0;Sn<32;)tn.lens[Sn++]=5;j(tt,tn.lens,0,32,Yn,0,tn.work,{bits:5}),er=!1}tn.lencode=Jn,tn.lenbits=9,tn.distcode=Yn,tn.distbits=5}function Cn(tn,Sn,_t,ln){var Pn,ft=tn.state;return ft.window===null&&(ft.wsize=1<<ft.wbits,ft.wnext=0,ft.whave=0,ft.window=new h.Buf8(ft.wsize)),ln>=ft.wsize?(h.arraySet(ft.window,Sn,_t-ft.wsize,ft.wsize,0),ft.wnext=0,ft.whave=ft.wsize):(Pn=ft.wsize-ft.wnext,Pn>ln&&(Pn=ln),h.arraySet(ft.window,Sn,_t-ln,Pn,ft.wnext),ln-=Pn,ln?(h.arraySet(ft.window,Sn,_t-ln,ln,0),ft.wnext=ln,ft.whave=ft.wsize):(ft.wnext+=Pn,ft.wnext===ft.wsize&&(ft.wnext=0),ft.whave<ft.wsize&&(ft.whave+=Pn))),0}function St(tn,Sn){var _t,ln,Pn,ft,nn,cn,Rt,Bt,dn,Rn,Ot,yt,Pt,Ht,Kt=0,Qt,pn,Dn,Mn,zn,nr,Bn,Vn,Wn=new h.Buf8(4),rr,sr,ar=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!tn||!tn.state||!tn.output||!tn.input&&tn.avail_in!==0)return at;_t=tn.state,_t.mode===Jt&&(_t.mode=fn),nn=tn.next_out,Pn=tn.output,Rt=tn.avail_out,ft=tn.next_in,ln=tn.input,cn=tn.avail_in,Bt=_t.hold,dn=_t.bits,Rn=cn,Ot=Rt,Vn=st;e:for(;;)switch(_t.mode){case mt:if(_t.wrap===0){_t.mode=fn;break}for(;dn<16;){if(cn===0)break e;cn--,Bt+=ln[ft++]<<dn,dn+=8}if(_t.wrap&2&&Bt===35615){_t.check=0,Wn[0]=Bt&255,Wn[1]=Bt>>>8&255,_t.check=b(_t.check,Wn,2,0),Bt=0,dn=0,_t.mode=pt;break}if(_t.flags=0,_t.head&&(_t.head.done=!1),!(_t.wrap&1)||(((Bt&255)<<8)+(Bt>>8))%31){tn.msg="incorrect header check",_t.mode=wn;break}if((Bt&15)!==vt){tn.msg="unknown compression method",_t.mode=wn;break}if(Bt>>>=4,dn-=4,Bn=(Bt&15)+8,_t.wbits===0)_t.wbits=Bn;else if(Bn>_t.wbits){tn.msg="invalid window size",_t.mode=wn;break}_t.dmax=1<<Bn,tn.adler=_t.check=1,_t.mode=Bt&512?Zt:Jt,Bt=0,dn=0;break;case pt:for(;dn<16;){if(cn===0)break e;cn--,Bt+=ln[ft++]<<dn,dn+=8}if(_t.flags=Bt,(_t.flags&255)!==vt){tn.msg="unknown compression method",_t.mode=wn;break}if(_t.flags&57344){tn.msg="unknown header flags set",_t.mode=wn;break}_t.head&&(_t.head.text=Bt>>8&1),_t.flags&512&&(Wn[0]=Bt&255,Wn[1]=Bt>>>8&255,_t.check=b(_t.check,Wn,2,0)),Bt=0,dn=0,_t.mode=Et;case Et:for(;dn<32;){if(cn===0)break e;cn--,Bt+=ln[ft++]<<dn,dn+=8}_t.head&&(_t.head.time=Bt),_t.flags&512&&(Wn[0]=Bt&255,Wn[1]=Bt>>>8&255,Wn[2]=Bt>>>16&255,Wn[3]=Bt>>>24&255,_t.check=b(_t.check,Wn,4,0)),Bt=0,dn=0,_t.mode=Ct;case Ct:for(;dn<16;){if(cn===0)break e;cn--,Bt+=ln[ft++]<<dn,dn+=8}_t.head&&(_t.head.xflags=Bt&255,_t.head.os=Bt>>8),_t.flags&512&&(Wn[0]=Bt&255,Wn[1]=Bt>>>8&255,_t.check=b(_t.check,Wn,2,0)),Bt=0,dn=0,_t.mode=Nt;case Nt:if(_t.flags&1024){for(;dn<16;){if(cn===0)break e;cn--,Bt+=ln[ft++]<<dn,dn+=8}_t.length=Bt,_t.head&&(_t.head.extra_len=Bt),_t.flags&512&&(Wn[0]=Bt&255,Wn[1]=Bt>>>8&255,_t.check=b(_t.check,Wn,2,0)),Bt=0,dn=0}else _t.head&&(_t.head.extra=null);_t.mode=Ut;case Ut:if(_t.flags&1024&&(yt=_t.length,yt>cn&&(yt=cn),yt&&(_t.head&&(Bn=_t.head.extra_len-_t.length,_t.head.extra||(_t.head.extra=new Array(_t.head.extra_len)),h.arraySet(_t.head.extra,ln,ft,yt,Bn)),_t.flags&512&&(_t.check=b(_t.check,ln,yt,ft)),cn-=yt,ft+=yt,_t.length-=yt),_t.length))break e;_t.length=0,_t.mode=Tt;case Tt:if(_t.flags&2048){if(cn===0)break e;yt=0;do Bn=ln[ft+yt++],_t.head&&Bn&&_t.length<65536&&(_t.head.name+=String.fromCharCode(Bn));while(Bn&&yt<cn);if(_t.flags&512&&(_t.check=b(_t.check,ln,yt,ft)),cn-=yt,ft+=yt,Bn)break e}else _t.head&&(_t.head.name=null);_t.length=0,_t.mode=qt;case qt:if(_t.flags&4096){if(cn===0)break e;yt=0;do Bn=ln[ft+yt++],_t.head&&Bn&&_t.length<65536&&(_t.head.comment+=String.fromCharCode(Bn));while(Bn&&yt<cn);if(_t.flags&512&&(_t.check=b(_t.check,ln,yt,ft)),cn-=yt,ft+=yt,Bn)break e}else _t.head&&(_t.head.comment=null);_t.mode=Vt;case Vt:if(_t.flags&512){for(;dn<16;){if(cn===0)break e;cn--,Bt+=ln[ft++]<<dn,dn+=8}if(Bt!==(_t.check&65535)){tn.msg="header crc mismatch",_t.mode=wn;break}Bt=0,dn=0}_t.head&&(_t.head.hcrc=_t.flags>>9&1,_t.head.done=!0),tn.adler=_t.check=0,_t.mode=Jt;break;case Zt:for(;dn<32;){if(cn===0)break e;cn--,Bt+=ln[ft++]<<dn,dn+=8}tn.adler=_t.check=hn(Bt),Bt=0,dn=0,_t.mode=It;case It:if(_t.havedict===0)return tn.next_out=nn,tn.avail_out=Rt,tn.next_in=ft,tn.avail_in=cn,_t.hold=Bt,_t.bits=dn,rt;tn.adler=_t.check=1,_t.mode=Jt;case Jt:if(Sn===ut||Sn===ht)break e;case fn:if(_t.last){Bt>>>=dn&7,dn-=dn&7,_t.mode=bn;break}for(;dn<3;){if(cn===0)break e;cn--,Bt+=ln[ft++]<<dn,dn+=8}switch(_t.last=Bt&1,Bt>>>=1,dn-=1,Bt&3){case 0:_t.mode=_n;break;case 1:if(tr(_t),_t.mode=kt,Sn===ht){Bt>>>=2,dn-=2;break e}break;case 2:_t.mode=xt;break;case 3:tn.msg="invalid block type",_t.mode=wn}Bt>>>=2,dn-=2;break;case _n:for(Bt>>>=dn&7,dn-=dn&7;dn<32;){if(cn===0)break e;cn--,Bt+=ln[ft++]<<dn,dn+=8}if((Bt&65535)!==(Bt>>>16^65535)){tn.msg="invalid stored block lengths",_t.mode=wn;break}if(_t.length=Bt&65535,Bt=0,dn=0,_t.mode=xn,Sn===ht)break e;case xn:_t.mode=Mt;case Mt:if(yt=_t.length,yt){if(yt>cn&&(yt=cn),yt>Rt&&(yt=Rt),yt===0)break e;h.arraySet(Pn,ln,ft,yt,nn),cn-=yt,ft+=yt,Rt-=yt,nn+=yt,_t.length-=yt;break}_t.mode=Jt;break;case xt:for(;dn<14;){if(cn===0)break e;cn--,Bt+=ln[ft++]<<dn,dn+=8}if(_t.nlen=(Bt&31)+257,Bt>>>=5,dn-=5,_t.ndist=(Bt&31)+1,Bt>>>=5,dn-=5,_t.ncode=(Bt&15)+4,Bt>>>=4,dn-=4,_t.nlen>286||_t.ndist>30){tn.msg="too many length or distance symbols",_t.mode=wn;break}_t.have=0,_t.mode=At;case At:for(;_t.have<_t.ncode;){for(;dn<3;){if(cn===0)break e;cn--,Bt+=ln[ft++]<<dn,dn+=8}_t.lens[ar[_t.have++]]=Bt&7,Bt>>>=3,dn-=3}for(;_t.have<19;)_t.lens[ar[_t.have++]]=0;if(_t.lencode=_t.lendyn,_t.lenbits=7,rr={bits:_t.lenbits},Vn=j($,_t.lens,0,19,_t.lencode,0,_t.work,rr),_t.lenbits=rr.bits,Vn){tn.msg="invalid code lengths set",_t.mode=wn;break}_t.have=0,_t.mode=wt;case wt:for(;_t.have<_t.nlen+_t.ndist;){for(;Kt=_t.lencode[Bt&(1<<_t.lenbits)-1],Qt=Kt>>>24,pn=Kt>>>16&255,Dn=Kt&65535,!(Qt<=dn);){if(cn===0)break e;cn--,Bt+=ln[ft++]<<dn,dn+=8}if(Dn<16)Bt>>>=Qt,dn-=Qt,_t.lens[_t.have++]=Dn;else{if(Dn===16){for(sr=Qt+2;dn<sr;){if(cn===0)break e;cn--,Bt+=ln[ft++]<<dn,dn+=8}if(Bt>>>=Qt,dn-=Qt,_t.have===0){tn.msg="invalid bit length repeat",_t.mode=wn;break}Bn=_t.lens[_t.have-1],yt=3+(Bt&3),Bt>>>=2,dn-=2}else if(Dn===17){for(sr=Qt+3;dn<sr;){if(cn===0)break e;cn--,Bt+=ln[ft++]<<dn,dn+=8}Bt>>>=Qt,dn-=Qt,Bn=0,yt=3+(Bt&7),Bt>>>=3,dn-=3}else{for(sr=Qt+7;dn<sr;){if(cn===0)break e;cn--,Bt+=ln[ft++]<<dn,dn+=8}Bt>>>=Qt,dn-=Qt,Bn=0,yt=11+(Bt&127),Bt>>>=7,dn-=7}if(_t.have+yt>_t.nlen+_t.ndist){tn.msg="invalid bit length repeat",_t.mode=wn;break}for(;yt--;)_t.lens[_t.have++]=Bn}}if(_t.mode===wn)break;if(_t.lens[256]===0){tn.msg="invalid code -- missing end-of-block",_t.mode=wn;break}if(_t.lenbits=9,rr={bits:_t.lenbits},Vn=j(_e,_t.lens,0,_t.nlen,_t.lencode,0,_t.work,rr),_t.lenbits=rr.bits,Vn){tn.msg="invalid literal/lengths set",_t.mode=wn;break}if(_t.distbits=6,_t.distcode=_t.distdyn,rr={bits:_t.distbits},Vn=j(tt,_t.lens,_t.nlen,_t.ndist,_t.distcode,0,_t.work,rr),_t.distbits=rr.bits,Vn){tn.msg="invalid distances set",_t.mode=wn;break}if(_t.mode=kt,Sn===ht)break e;case kt:_t.mode=Dt;case Dt:if(cn>=6&&Rt>=258){tn.next_out=nn,tn.avail_out=Rt,tn.next_in=ft,tn.avail_in=cn,_t.hold=Bt,_t.bits=dn,_(tn,Ot),nn=tn.next_out,Pn=tn.output,Rt=tn.avail_out,ft=tn.next_in,ln=tn.input,cn=tn.avail_in,Bt=_t.hold,dn=_t.bits,_t.mode===Jt&&(_t.back=-1);break}for(_t.back=0;Kt=_t.lencode[Bt&(1<<_t.lenbits)-1],Qt=Kt>>>24,pn=Kt>>>16&255,Dn=Kt&65535,!(Qt<=dn);){if(cn===0)break e;cn--,Bt+=ln[ft++]<<dn,dn+=8}if(pn&&!(pn&240)){for(Mn=Qt,zn=pn,nr=Dn;Kt=_t.lencode[nr+((Bt&(1<<Mn+zn)-1)>>Mn)],Qt=Kt>>>24,pn=Kt>>>16&255,Dn=Kt&65535,!(Mn+Qt<=dn);){if(cn===0)break e;cn--,Bt+=ln[ft++]<<dn,dn+=8}Bt>>>=Mn,dn-=Mn,_t.back+=Mn}if(Bt>>>=Qt,dn-=Qt,_t.back+=Qt,_t.length=Dn,pn===0){_t.mode=rn;break}if(pn&32){_t.back=-1,_t.mode=Jt;break}if(pn&64){tn.msg="invalid literal/length code",_t.mode=wn;break}_t.extra=pn&15,_t.mode=Ft;case Ft:if(_t.extra){for(sr=_t.extra;dn<sr;){if(cn===0)break e;cn--,Bt+=ln[ft++]<<dn,dn+=8}_t.length+=Bt&(1<<_t.extra)-1,Bt>>>=_t.extra,dn-=_t.extra,_t.back+=_t.extra}_t.was=_t.length,_t.mode=$t;case $t:for(;Kt=_t.distcode[Bt&(1<<_t.distbits)-1],Qt=Kt>>>24,pn=Kt>>>16&255,Dn=Kt&65535,!(Qt<=dn);){if(cn===0)break e;cn--,Bt+=ln[ft++]<<dn,dn+=8}if(!(pn&240)){for(Mn=Qt,zn=pn,nr=Dn;Kt=_t.distcode[nr+((Bt&(1<<Mn+zn)-1)>>Mn)],Qt=Kt>>>24,pn=Kt>>>16&255,Dn=Kt&65535,!(Mn+Qt<=dn);){if(cn===0)break e;cn--,Bt+=ln[ft++]<<dn,dn+=8}Bt>>>=Mn,dn-=Mn,_t.back+=Mn}if(Bt>>>=Qt,dn-=Qt,_t.back+=Qt,pn&64){tn.msg="invalid distance code",_t.mode=wn;break}_t.offset=Dn,_t.extra=pn&15,_t.mode=Wt;case Wt:if(_t.extra){for(sr=_t.extra;dn<sr;){if(cn===0)break e;cn--,Bt+=ln[ft++]<<dn,dn+=8}_t.offset+=Bt&(1<<_t.extra)-1,Bt>>>=_t.extra,dn-=_t.extra,_t.back+=_t.extra}if(_t.offset>_t.dmax){tn.msg="invalid distance too far back",_t.mode=wn;break}_t.mode=un;case un:if(Rt===0)break e;if(yt=Ot-Rt,_t.offset>yt){if(yt=_t.offset-yt,yt>_t.whave&&_t.sane){tn.msg="invalid distance too far back",_t.mode=wn;break}yt>_t.wnext?(yt-=_t.wnext,Pt=_t.wsize-yt):Pt=_t.wnext-yt,yt>_t.length&&(yt=_t.length),Ht=_t.window}else Ht=Pn,Pt=nn-_t.offset,yt=_t.length;yt>Rt&&(yt=Rt),Rt-=yt,_t.length-=yt;do Pn[nn++]=Ht[Pt++];while(--yt);_t.length===0&&(_t.mode=Dt);break;case rn:if(Rt===0)break e;Pn[nn++]=_t.length,Rt--,_t.mode=Dt;break;case bn:if(_t.wrap){for(;dn<32;){if(cn===0)break e;cn--,Bt|=ln[ft++]<<dn,dn+=8}if(Ot-=Rt,tn.total_out+=Ot,_t.total+=Ot,Ot&&(tn.adler=_t.check=_t.flags?b(_t.check,Pn,Ot,nn-Ot):g(_t.check,Pn,Ot,nn-Ot)),Ot=Rt,(_t.flags?Bt:hn(Bt))!==_t.check){tn.msg="incorrect data check",_t.mode=wn;break}Bt=0,dn=0}_t.mode=An;case An:if(_t.wrap&&_t.flags){for(;dn<32;){if(cn===0)break e;cn--,Bt+=ln[ft++]<<dn,dn+=8}if(Bt!==(_t.total&4294967295)){tn.msg="incorrect length check",_t.mode=wn;break}Bt=0,dn=0}_t.mode=Nn;case Nn:Vn=nt;break e;case wn:Vn=dt;break e;case jn:return ot;case Xn:default:return at}return tn.next_out=nn,tn.avail_out=Rt,tn.next_in=ft,tn.avail_in=cn,_t.hold=Bt,_t.bits=dn,(_t.wsize||Ot!==tn.avail_out&&_t.mode<wn&&(_t.mode<bn||Sn!==et))&&Cn(tn,tn.output,tn.next_out,Ot-tn.avail_out),Rn-=tn.avail_in,Ot-=tn.avail_out,tn.total_in+=Rn,tn.total_out+=Ot,_t.total+=Ot,_t.wrap&&Ot&&(tn.adler=_t.check=_t.flags?b(_t.check,Pn,Ot,tn.next_out-Ot):g(_t.check,Pn,Ot,tn.next_out-Ot)),tn.data_type=_t.bits+(_t.last?64:0)+(_t.mode===Jt?128:0)+(_t.mode===kt||_t.mode===xn?256:0),(Rn===0&&Ot===0||Sn===et)&&Vn===st&&(Vn=ct),Vn}function zt(tn){if(!tn||!tn.state)return at;var Sn=tn.state;return Sn.window&&(Sn.window=null),tn.state=null,st}function sn(tn,Sn){var _t;return!tn||!tn.state||(_t=tn.state,!(_t.wrap&2))?at:(_t.head=Sn,Sn.done=!1,st)}function gn(tn,Sn){var _t=Sn.length,ln,Pn,ft;return!tn||!tn.state||(ln=tn.state,ln.wrap!==0&&ln.mode!==It)?at:ln.mode===It&&(Pn=1,Pn=g(Pn,Sn,_t,0),Pn!==ln.check)?dt:(ft=Cn(tn,Sn,_t,_t),ft?(ln.mode=jn,ot):(ln.havedict=1,st))}c.inflateReset=In,c.inflateReset2=Zn,c.inflateResetKeep=On,c.inflateInit=Kn,c.inflateInit2=Qn,c.inflate=St,c.inflateEnd=zt,c.inflateGetHeader=sn,c.inflateSetDictionary=gn,c.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(o,a,c){var h=o("../utils/common"),g=15,b=852,_=592,j=0,$=1,_e=2,tt=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],et=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],ut=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],ht=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];a.exports=function(nt,rt,at,dt,ot,ct,vt,mt){var pt=mt.bits,Et=0,Ct=0,Nt=0,Ut=0,Tt=0,qt=0,Vt=0,Zt=0,It=0,Jt=0,fn,_n,xn,Mt,xt,At=null,wt=0,kt,Dt=new h.Buf16(g+1),Ft=new h.Buf16(g+1),$t=null,Wt=0,un,rn,bn;for(Et=0;Et<=g;Et++)Dt[Et]=0;for(Ct=0;Ct<dt;Ct++)Dt[rt[at+Ct]]++;for(Tt=pt,Ut=g;Ut>=1&&Dt[Ut]===0;Ut--);if(Tt>Ut&&(Tt=Ut),Ut===0)return ot[ct++]=1<<24|64<<16|0,ot[ct++]=1<<24|64<<16|0,mt.bits=1,0;for(Nt=1;Nt<Ut&&Dt[Nt]===0;Nt++);for(Tt<Nt&&(Tt=Nt),Zt=1,Et=1;Et<=g;Et++)if(Zt<<=1,Zt-=Dt[Et],Zt<0)return-1;if(Zt>0&&(nt===j||Ut!==1))return-1;for(Ft[1]=0,Et=1;Et<g;Et++)Ft[Et+1]=Ft[Et]+Dt[Et];for(Ct=0;Ct<dt;Ct++)rt[at+Ct]!==0&&(vt[Ft[rt[at+Ct]]++]=Ct);if(nt===j?(At=$t=vt,kt=19):nt===$?(At=tt,wt-=257,$t=et,Wt-=257,kt=256):(At=ut,$t=ht,kt=-1),Jt=0,Ct=0,Et=Nt,xt=ct,qt=Tt,Vt=0,xn=-1,It=1<<Tt,Mt=It-1,nt===$&&It>b||nt===_e&&It>_)return 1;for(;;){un=Et-Vt,vt[Ct]<kt?(rn=0,bn=vt[Ct]):vt[Ct]>kt?(rn=$t[Wt+vt[Ct]],bn=At[wt+vt[Ct]]):(rn=32+64,bn=0),fn=1<<Et-Vt,_n=1<<qt,Nt=_n;do _n-=fn,ot[xt+(Jt>>Vt)+_n]=un<<24|rn<<16|bn|0;while(_n!==0);for(fn=1<<Et-1;Jt&fn;)fn>>=1;if(fn!==0?(Jt&=fn-1,Jt+=fn):Jt=0,Ct++,--Dt[Et]===0){if(Et===Ut)break;Et=rt[at+vt[Ct]]}if(Et>Tt&&(Jt&Mt)!==xn){for(Vt===0&&(Vt=Tt),xt+=Nt,qt=Et-Vt,Zt=1<<qt;qt+Vt<Ut&&(Zt-=Dt[qt+Vt],!(Zt<=0));)qt++,Zt<<=1;if(It+=1<<qt,nt===$&&It>b||nt===_e&&It>_)return 1;xn=Jt&Mt,ot[xn]=Tt<<24|qt<<16|xt-ct|0}}return Jt!==0&&(ot[xt+Jt]=Et-Vt<<24|64<<16|0),mt.bits=Tt,0}},{"../utils/common":41}],51:[function(o,a,c){a.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(o,a,c){var h=o("../utils/common"),g=4,b=0,_=1,j=2;function $(St){for(var zt=St.length;--zt>=0;)St[zt]=0}var _e=0,tt=1,et=2,ut=3,ht=258,st=29,nt=256,rt=nt+1+st,at=30,dt=19,ot=2*rt+1,ct=15,vt=16,mt=7,pt=256,Et=16,Ct=17,Nt=18,Ut=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Tt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],qt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Vt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Zt=512,It=new Array((rt+2)*2);$(It);var Jt=new Array(at*2);$(Jt);var fn=new Array(Zt);$(fn);var _n=new Array(ht-ut+1);$(_n);var xn=new Array(st);$(xn);var Mt=new Array(at);$(Mt);function xt(St,zt,sn,gn,tn){this.static_tree=St,this.extra_bits=zt,this.extra_base=sn,this.elems=gn,this.max_length=tn,this.has_stree=St&&St.length}var At,wt,kt;function Dt(St,zt){this.dyn_tree=St,this.max_code=0,this.stat_desc=zt}function Ft(St){return St<256?fn[St]:fn[256+(St>>>7)]}function $t(St,zt){St.pending_buf[St.pending++]=zt&255,St.pending_buf[St.pending++]=zt>>>8&255}function Wt(St,zt,sn){St.bi_valid>vt-sn?(St.bi_buf|=zt<<St.bi_valid&65535,$t(St,St.bi_buf),St.bi_buf=zt>>vt-St.bi_valid,St.bi_valid+=sn-vt):(St.bi_buf|=zt<<St.bi_valid&65535,St.bi_valid+=sn)}function un(St,zt,sn){Wt(St,sn[zt*2],sn[zt*2+1])}function rn(St,zt){var sn=0;do sn|=St&1,St>>>=1,sn<<=1;while(--zt>0);return sn>>>1}function bn(St){St.bi_valid===16?($t(St,St.bi_buf),St.bi_buf=0,St.bi_valid=0):St.bi_valid>=8&&(St.pending_buf[St.pending++]=St.bi_buf&255,St.bi_buf>>=8,St.bi_valid-=8)}function An(St,zt){var sn=zt.dyn_tree,gn=zt.max_code,tn=zt.stat_desc.static_tree,Sn=zt.stat_desc.has_stree,_t=zt.stat_desc.extra_bits,ln=zt.stat_desc.extra_base,Pn=zt.stat_desc.max_length,ft,nn,cn,Rt,Bt,dn,Rn=0;for(Rt=0;Rt<=ct;Rt++)St.bl_count[Rt]=0;for(sn[St.heap[St.heap_max]*2+1]=0,ft=St.heap_max+1;ft<ot;ft++)nn=St.heap[ft],Rt=sn[sn[nn*2+1]*2+1]+1,Rt>Pn&&(Rt=Pn,Rn++),sn[nn*2+1]=Rt,!(nn>gn)&&(St.bl_count[Rt]++,Bt=0,nn>=ln&&(Bt=_t[nn-ln]),dn=sn[nn*2],St.opt_len+=dn*(Rt+Bt),Sn&&(St.static_len+=dn*(tn[nn*2+1]+Bt)));if(Rn!==0){do{for(Rt=Pn-1;St.bl_count[Rt]===0;)Rt--;St.bl_count[Rt]--,St.bl_count[Rt+1]+=2,St.bl_count[Pn]--,Rn-=2}while(Rn>0);for(Rt=Pn;Rt!==0;Rt--)for(nn=St.bl_count[Rt];nn!==0;)cn=St.heap[--ft],!(cn>gn)&&(sn[cn*2+1]!==Rt&&(St.opt_len+=(Rt-sn[cn*2+1])*sn[cn*2],sn[cn*2+1]=Rt),nn--)}}function Nn(St,zt,sn){var gn=new Array(ct+1),tn=0,Sn,_t;for(Sn=1;Sn<=ct;Sn++)gn[Sn]=tn=tn+sn[Sn-1]<<1;for(_t=0;_t<=zt;_t++){var ln=St[_t*2+1];ln!==0&&(St[_t*2]=rn(gn[ln]++,ln))}}function wn(){var St,zt,sn,gn,tn,Sn=new Array(ct+1);for(sn=0,gn=0;gn<st-1;gn++)for(xn[gn]=sn,St=0;St<1<<Ut[gn];St++)_n[sn++]=gn;for(_n[sn-1]=gn,tn=0,gn=0;gn<16;gn++)for(Mt[gn]=tn,St=0;St<1<<Tt[gn];St++)fn[tn++]=gn;for(tn>>=7;gn<at;gn++)for(Mt[gn]=tn<<7,St=0;St<1<<Tt[gn]-7;St++)fn[256+tn++]=gn;for(zt=0;zt<=ct;zt++)Sn[zt]=0;for(St=0;St<=143;)It[St*2+1]=8,St++,Sn[8]++;for(;St<=255;)It[St*2+1]=9,St++,Sn[9]++;for(;St<=279;)It[St*2+1]=7,St++,Sn[7]++;for(;St<=287;)It[St*2+1]=8,St++,Sn[8]++;for(Nn(It,rt+1,Sn),St=0;St<at;St++)Jt[St*2+1]=5,Jt[St*2]=rn(St,5);At=new xt(It,Ut,nt+1,rt,ct),wt=new xt(Jt,Tt,0,at,ct),kt=new xt(new Array(0),qt,0,dt,mt)}function jn(St){var zt;for(zt=0;zt<rt;zt++)St.dyn_ltree[zt*2]=0;for(zt=0;zt<at;zt++)St.dyn_dtree[zt*2]=0;for(zt=0;zt<dt;zt++)St.bl_tree[zt*2]=0;St.dyn_ltree[pt*2]=1,St.opt_len=St.static_len=0,St.last_lit=St.matches=0}function Xn(St){St.bi_valid>8?$t(St,St.bi_buf):St.bi_valid>0&&(St.pending_buf[St.pending++]=St.bi_buf),St.bi_buf=0,St.bi_valid=0}function Ln(St,zt,sn,gn){Xn(St),gn&&($t(St,sn),$t(St,~sn)),h.arraySet(St.pending_buf,St.window,zt,sn,St.pending),St.pending+=sn}function Un(St,zt,sn,gn){var tn=zt*2,Sn=sn*2;return St[tn]<St[Sn]||St[tn]===St[Sn]&&gn[zt]<=gn[sn]}function kn(St,zt,sn){for(var gn=St.heap[sn],tn=sn<<1;tn<=St.heap_len&&(tn<St.heap_len&&Un(zt,St.heap[tn+1],St.heap[tn],St.depth)&&tn++,!Un(zt,gn,St.heap[tn],St.depth));)St.heap[sn]=St.heap[tn],sn=tn,tn<<=1;St.heap[sn]=gn}function en(St,zt,sn){var gn,tn,Sn=0,_t,ln;if(St.last_lit!==0)do gn=St.pending_buf[St.d_buf+Sn*2]<<8|St.pending_buf[St.d_buf+Sn*2+1],tn=St.pending_buf[St.l_buf+Sn],Sn++,gn===0?un(St,tn,zt):(_t=_n[tn],un(St,_t+nt+1,zt),ln=Ut[_t],ln!==0&&(tn-=xn[_t],Wt(St,tn,ln)),gn--,_t=Ft(gn),un(St,_t,sn),ln=Tt[_t],ln!==0&&(gn-=Mt[_t],Wt(St,gn,ln)));while(Sn<St.last_lit);un(St,pt,zt)}function hn(St,zt){var sn=zt.dyn_tree,gn=zt.stat_desc.static_tree,tn=zt.stat_desc.has_stree,Sn=zt.stat_desc.elems,_t,ln,Pn=-1,ft;for(St.heap_len=0,St.heap_max=ot,_t=0;_t<Sn;_t++)sn[_t*2]!==0?(St.heap[++St.heap_len]=Pn=_t,St.depth[_t]=0):sn[_t*2+1]=0;for(;St.heap_len<2;)ft=St.heap[++St.heap_len]=Pn<2?++Pn:0,sn[ft*2]=1,St.depth[ft]=0,St.opt_len--,tn&&(St.static_len-=gn[ft*2+1]);for(zt.max_code=Pn,_t=St.heap_len>>1;_t>=1;_t--)kn(St,sn,_t);ft=Sn;do _t=St.heap[1],St.heap[1]=St.heap[St.heap_len--],kn(St,sn,1),ln=St.heap[1],St.heap[--St.heap_max]=_t,St.heap[--St.heap_max]=ln,sn[ft*2]=sn[_t*2]+sn[ln*2],St.depth[ft]=(St.depth[_t]>=St.depth[ln]?St.depth[_t]:St.depth[ln])+1,sn[_t*2+1]=sn[ln*2+1]=ft,St.heap[1]=ft++,kn(St,sn,1);while(St.heap_len>=2);St.heap[--St.heap_max]=St.heap[1],An(St,zt),Nn(sn,Pn,St.bl_count)}function Tn(St,zt,sn){var gn,tn=-1,Sn,_t=zt[0*2+1],ln=0,Pn=7,ft=4;for(_t===0&&(Pn=138,ft=3),zt[(sn+1)*2+1]=65535,gn=0;gn<=sn;gn++)Sn=_t,_t=zt[(gn+1)*2+1],!(++ln<Pn&&Sn===_t)&&(ln<ft?St.bl_tree[Sn*2]+=ln:Sn!==0?(Sn!==tn&&St.bl_tree[Sn*2]++,St.bl_tree[Et*2]++):ln<=10?St.bl_tree[Ct*2]++:St.bl_tree[Nt*2]++,ln=0,tn=Sn,_t===0?(Pn=138,ft=3):Sn===_t?(Pn=6,ft=3):(Pn=7,ft=4))}function On(St,zt,sn){var gn,tn=-1,Sn,_t=zt[0*2+1],ln=0,Pn=7,ft=4;for(_t===0&&(Pn=138,ft=3),gn=0;gn<=sn;gn++)if(Sn=_t,_t=zt[(gn+1)*2+1],!(++ln<Pn&&Sn===_t)){if(ln<ft)do un(St,Sn,St.bl_tree);while(--ln!==0);else Sn!==0?(Sn!==tn&&(un(St,Sn,St.bl_tree),ln--),un(St,Et,St.bl_tree),Wt(St,ln-3,2)):ln<=10?(un(St,Ct,St.bl_tree),Wt(St,ln-3,3)):(un(St,Nt,St.bl_tree),Wt(St,ln-11,7));ln=0,tn=Sn,_t===0?(Pn=138,ft=3):Sn===_t?(Pn=6,ft=3):(Pn=7,ft=4)}}function In(St){var zt;for(Tn(St,St.dyn_ltree,St.l_desc.max_code),Tn(St,St.dyn_dtree,St.d_desc.max_code),hn(St,St.bl_desc),zt=dt-1;zt>=3&&St.bl_tree[Vt[zt]*2+1]===0;zt--);return St.opt_len+=3*(zt+1)+5+5+4,zt}function Zn(St,zt,sn,gn){var tn;for(Wt(St,zt-257,5),Wt(St,sn-1,5),Wt(St,gn-4,4),tn=0;tn<gn;tn++)Wt(St,St.bl_tree[Vt[tn]*2+1],3);On(St,St.dyn_ltree,zt-1),On(St,St.dyn_dtree,sn-1)}function Qn(St){var zt=4093624447,sn;for(sn=0;sn<=31;sn++,zt>>>=1)if(zt&1&&St.dyn_ltree[sn*2]!==0)return b;if(St.dyn_ltree[9*2]!==0||St.dyn_ltree[10*2]!==0||St.dyn_ltree[13*2]!==0)return _;for(sn=32;sn<nt;sn++)if(St.dyn_ltree[sn*2]!==0)return _;return b}var Kn=!1;function er(St){Kn||(wn(),Kn=!0),St.l_desc=new Dt(St.dyn_ltree,At),St.d_desc=new Dt(St.dyn_dtree,wt),St.bl_desc=new Dt(St.bl_tree,kt),St.bi_buf=0,St.bi_valid=0,jn(St)}function Jn(St,zt,sn,gn){Wt(St,(_e<<1)+(gn?1:0),3),Ln(St,zt,sn,!0)}function Yn(St){Wt(St,tt<<1,3),un(St,pt,It),bn(St)}function tr(St,zt,sn,gn){var tn,Sn,_t=0;St.level>0?(St.strm.data_type===j&&(St.strm.data_type=Qn(St)),hn(St,St.l_desc),hn(St,St.d_desc),_t=In(St),tn=St.opt_len+3+7>>>3,Sn=St.static_len+3+7>>>3,Sn<=tn&&(tn=Sn)):tn=Sn=sn+5,sn+4<=tn&&zt!==-1?Jn(St,zt,sn,gn):St.strategy===g||Sn===tn?(Wt(St,(tt<<1)+(gn?1:0),3),en(St,It,Jt)):(Wt(St,(et<<1)+(gn?1:0),3),Zn(St,St.l_desc.max_code+1,St.d_desc.max_code+1,_t+1),en(St,St.dyn_ltree,St.dyn_dtree)),jn(St),gn&&Xn(St)}function Cn(St,zt,sn){return St.pending_buf[St.d_buf+St.last_lit*2]=zt>>>8&255,St.pending_buf[St.d_buf+St.last_lit*2+1]=zt&255,St.pending_buf[St.l_buf+St.last_lit]=sn&255,St.last_lit++,zt===0?St.dyn_ltree[sn*2]++:(St.matches++,zt--,St.dyn_ltree[(_n[sn]+nt+1)*2]++,St.dyn_dtree[Ft(zt)*2]++),St.last_lit===St.lit_bufsize-1}c._tr_init=er,c._tr_stored_block=Jn,c._tr_flush_block=tr,c._tr_tally=Cn,c._tr_align=Yn},{"../utils/common":41}],53:[function(o,a,c){function h(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}a.exports=h},{}],54:[function(o,a,c){(function(h){(function(g,b){if(g.setImmediate)return;var _=1,j={},$=!1,_e=g.document,tt;function et(mt){typeof mt!="function"&&(mt=new Function(""+mt));for(var pt=new Array(arguments.length-1),Et=0;Et<pt.length;Et++)pt[Et]=arguments[Et+1];var Ct={callback:mt,args:pt};return j[_]=Ct,tt(_),_++}function ut(mt){delete j[mt]}function ht(mt){var pt=mt.callback,Et=mt.args;switch(Et.length){case 0:pt();break;case 1:pt(Et[0]);break;case 2:pt(Et[0],Et[1]);break;case 3:pt(Et[0],Et[1],Et[2]);break;default:pt.apply(b,Et);break}}function st(mt){if($)setTimeout(st,0,mt);else{var pt=j[mt];if(pt){$=!0;try{ht(pt)}finally{ut(mt),$=!1}}}}function nt(){tt=function(mt){process.nextTick(function(){st(mt)})}}function rt(){if(g.postMessage&&!g.importScripts){var mt=!0,pt=g.onmessage;return g.onmessage=function(){mt=!1},g.postMessage("","*"),g.onmessage=pt,mt}}function at(){var mt="setImmediate$"+Math.random()+"$",pt=function(Et){Et.source===g&&typeof Et.data=="string"&&Et.data.indexOf(mt)===0&&st(+Et.data.slice(mt.length))};g.addEventListener?g.addEventListener("message",pt,!1):g.attachEvent("onmessage",pt),tt=function(Et){g.postMessage(mt+Et,"*")}}function dt(){var mt=new MessageChannel;mt.port1.onmessage=function(pt){var Et=pt.data;st(Et)},tt=function(pt){mt.port2.postMessage(pt)}}function ot(){var mt=_e.documentElement;tt=function(pt){var Et=_e.createElement("script");Et.onreadystatechange=function(){st(pt),Et.onreadystatechange=null,mt.removeChild(Et),Et=null},mt.appendChild(Et)}}function ct(){tt=function(mt){setTimeout(st,0,mt)}}var vt=Object.getPrototypeOf&&Object.getPrototypeOf(g);vt=vt&&vt.setTimeout?vt:g,{}.toString.call(g.process)==="[object process]"?nt():rt()?at():g.MessageChannel?dt():_e&&"onreadystatechange"in _e.createElement("script")?ot():ct(),vt.setImmediate=et,vt.clearImmediate=ut})(typeof self>"u"?typeof h>"u"?this:h:self)}).call(this,typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(jszip);var jszipExports=jszip.exports;const JSZip=getDefaultExportFromCjs(jszipExports);class Archive{constructor(){this.zip=void 0,this.urlCache={},this.checkRequirements()}checkRequirements(){try{this.zip=new JSZip}catch{throw new Error("JSZip lib not loaded")}}open(e,o){return this.zip.loadAsync(e,{base64:o})}openUrl(e,o){return request(e,"binary").then((function(a){return this.zip.loadAsync(a,{base64:o})}).bind(this))}request(e,o){var a=new defer,c,h=new Path(e);return o||(o=h.extension),o=="blob"?c=this.getBlob(e):c=this.getText(e),c?c.then((function(g){let b=this.handleResponse(g,o);a.resolve(b)}).bind(this)):a.reject({message:"File not found in the epub: "+e,stack:new Error().stack}),a.promise}handleResponse(e,o){var a;return o=="json"?a=JSON.parse(e):isXml(o)?a=parse$1(e,"text/xml"):o=="xhtml"?a=parse$1(e,"application/xhtml+xml"):o=="html"||o=="htm"?a=parse$1(e,"text/html"):a=e,a}getBlob(e,o){var a=window.decodeURIComponent(e.substr(1)),c=this.zip.file(a);if(c)return o=o||mime.lookup(c.name),c.async("uint8array").then(function(h){return new Blob([h],{type:o})})}getText(e,o){var a=window.decodeURIComponent(e.substr(1)),c=this.zip.file(a);if(c)return c.async("string").then(function(h){return h})}getBase64(e,o){var a=window.decodeURIComponent(e.substr(1)),c=this.zip.file(a);if(c)return o=o||mime.lookup(c.name),c.async("base64").then(function(h){return"data:"+o+";base64,"+h})}createUrl(e,o){var a=new defer,c=window.URL||window.webkitURL||window.mozURL,h,g,b=o&&o.base64;return e in this.urlCache?(a.resolve(this.urlCache[e]),a.promise):(b?(g=this.getBase64(e),g&&g.then((function(_){this.urlCache[e]=_,a.resolve(_)}).bind(this))):(g=this.getBlob(e),g&&g.then((function(_){h=c.createObjectURL(_),this.urlCache[e]=h,a.resolve(h)}).bind(this))),g||a.reject({message:"File not found in the epub: "+e,stack:new Error().stack}),a.promise)}revokeUrl(e){var o=window.URL||window.webkitURL||window.mozURL,a=this.urlCache[e];a&&o.revokeObjectURL(a)}destroy(){var e=window.URL||window.webkitURL||window.mozURL;for(let o in this.urlCache)e.revokeObjectURL(o);this.zip=void 0,this.urlCache={}}}var localforage$1={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(s,e){(function(o){s.exports=o()})(function(){return function o(a,c,h){function g(j,$){if(!c[j]){if(!a[j]){var _e=typeof commonjsRequire=="function"&&commonjsRequire;if(!$&&_e)return _e(j,!0);if(b)return b(j,!0);var tt=new Error("Cannot find module '"+j+"'");throw tt.code="MODULE_NOT_FOUND",tt}var et=c[j]={exports:{}};a[j][0].call(et.exports,function(ut){var ht=a[j][1][ut];return g(ht||ut)},et,et.exports,o,a,c,h)}return c[j].exports}for(var b=typeof commonjsRequire=="function"&&commonjsRequire,_=0;_<h.length;_++)g(h[_]);return g}({1:[function(o,a,c){(function(h){var g=h.MutationObserver||h.WebKitMutationObserver,b;if(g){var _=0,j=new g(ut),$=h.document.createTextNode("");j.observe($,{characterData:!0}),b=function(){$.data=_=++_%2}}else if(!h.setImmediate&&typeof h.MessageChannel<"u"){var _e=new h.MessageChannel;_e.port1.onmessage=ut,b=function(){_e.port2.postMessage(0)}}else"document"in h&&"onreadystatechange"in h.document.createElement("script")?b=function(){var st=h.document.createElement("script");st.onreadystatechange=function(){ut(),st.onreadystatechange=null,st.parentNode.removeChild(st),st=null},h.document.documentElement.appendChild(st)}:b=function(){setTimeout(ut,0)};var tt,et=[];function ut(){tt=!0;for(var st,nt,rt=et.length;rt;){for(nt=et,et=[],st=-1;++st<rt;)nt[st]();rt=et.length}tt=!1}a.exports=ht;function ht(st){et.push(st)===1&&!tt&&b()}}).call(this,typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(o,a,c){var h=o(1);function g(){}var b={},_=["REJECTED"],j=["FULFILLED"],$=["PENDING"];a.exports=_e;function _e(ot){if(typeof ot!="function")throw new TypeError("resolver must be a function");this.state=$,this.queue=[],this.outcome=void 0,ot!==g&&ht(this,ot)}_e.prototype.catch=function(ot){return this.then(null,ot)},_e.prototype.then=function(ot,ct){if(typeof ot!="function"&&this.state===j||typeof ct!="function"&&this.state===_)return this;var vt=new this.constructor(g);if(this.state!==$){var mt=this.state===j?ot:ct;et(vt,mt,this.outcome)}else this.queue.push(new tt(vt,ot,ct));return vt};function tt(ot,ct,vt){this.promise=ot,typeof ct=="function"&&(this.onFulfilled=ct,this.callFulfilled=this.otherCallFulfilled),typeof vt=="function"&&(this.onRejected=vt,this.callRejected=this.otherCallRejected)}tt.prototype.callFulfilled=function(ot){b.resolve(this.promise,ot)},tt.prototype.otherCallFulfilled=function(ot){et(this.promise,this.onFulfilled,ot)},tt.prototype.callRejected=function(ot){b.reject(this.promise,ot)},tt.prototype.otherCallRejected=function(ot){et(this.promise,this.onRejected,ot)};function et(ot,ct,vt){h(function(){var mt;try{mt=ct(vt)}catch(pt){return b.reject(ot,pt)}mt===ot?b.reject(ot,new TypeError("Cannot resolve promise with itself")):b.resolve(ot,mt)})}b.resolve=function(ot,ct){var vt=st(ut,ct);if(vt.status==="error")return b.reject(ot,vt.value);var mt=vt.value;if(mt)ht(ot,mt);else{ot.state=j,ot.outcome=ct;for(var pt=-1,Et=ot.queue.length;++pt<Et;)ot.queue[pt].callFulfilled(ct)}return ot},b.reject=function(ot,ct){ot.state=_,ot.outcome=ct;for(var vt=-1,mt=ot.queue.length;++vt<mt;)ot.queue[vt].callRejected(ct);return ot};function ut(ot){var ct=ot&&ot.then;if(ot&&(typeof ot=="object"||typeof ot=="function")&&typeof ct=="function")return function(){ct.apply(ot,arguments)}}function ht(ot,ct){var vt=!1;function mt(Nt){vt||(vt=!0,b.reject(ot,Nt))}function pt(Nt){vt||(vt=!0,b.resolve(ot,Nt))}function Et(){ct(pt,mt)}var Ct=st(Et);Ct.status==="error"&&mt(Ct.value)}function st(ot,ct){var vt={};try{vt.value=ot(ct),vt.status="success"}catch(mt){vt.status="error",vt.value=mt}return vt}_e.resolve=nt;function nt(ot){return ot instanceof this?ot:b.resolve(new this(g),ot)}_e.reject=rt;function rt(ot){var ct=new this(g);return b.reject(ct,ot)}_e.all=at;function at(ot){var ct=this;if(Object.prototype.toString.call(ot)!=="[object Array]")return this.reject(new TypeError("must be an array"));var vt=ot.length,mt=!1;if(!vt)return this.resolve([]);for(var pt=new Array(vt),Et=0,Ct=-1,Nt=new this(g);++Ct<vt;)Ut(ot[Ct],Ct);return Nt;function Ut(Tt,qt){ct.resolve(Tt).then(Vt,function(Zt){mt||(mt=!0,b.reject(Nt,Zt))});function Vt(Zt){pt[qt]=Zt,++Et===vt&&!mt&&(mt=!0,b.resolve(Nt,pt))}}}_e.race=dt;function dt(ot){var ct=this;if(Object.prototype.toString.call(ot)!=="[object Array]")return this.reject(new TypeError("must be an array"));var vt=ot.length,mt=!1;if(!vt)return this.resolve([]);for(var pt=-1,Et=new this(g);++pt<vt;)Ct(ot[pt]);return Et;function Ct(Nt){ct.resolve(Nt).then(function(Ut){mt||(mt=!0,b.resolve(Et,Ut))},function(Ut){mt||(mt=!0,b.reject(Et,Ut))})}}},{1:1}],3:[function(o,a,c){(function(h){typeof h.Promise!="function"&&(h.Promise=o(2))}).call(this,typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(o,a,c){var h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(jt){return typeof jt}:function(jt){return jt&&typeof Symbol=="function"&&jt.constructor===Symbol&&jt!==Symbol.prototype?"symbol":typeof jt};function g(jt,on){if(!(jt instanceof on))throw new TypeError("Cannot call a class as a function")}function b(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var _=b();function j(){try{if(!_||!_.open)return!1;var jt=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),on=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!jt||on)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function $(jt,on){jt=jt||[],on=on||{};try{return new Blob(jt,on)}catch(mn){if(mn.name!=="TypeError")throw mn;for(var Xt=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,vn=new Xt,En=0;En<jt.length;En+=1)vn.append(jt[En]);return vn.getBlob(on.type)}}typeof Promise>"u"&&o(3);var _e=Promise;function tt(jt,on){on&&jt.then(function(Xt){on(null,Xt)},function(Xt){on(Xt)})}function et(jt,on,Xt){typeof on=="function"&&jt.then(on),typeof Xt=="function"&&jt.catch(Xt)}function ut(jt){return typeof jt!="string"&&(console.warn(jt+" used as a key, but it is not a string."),jt=String(jt)),jt}function ht(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var st="local-forage-detect-blob-support",nt=void 0,rt={},at=Object.prototype.toString,dt="readonly",ot="readwrite";function ct(jt){for(var on=jt.length,Xt=new ArrayBuffer(on),vn=new Uint8Array(Xt),En=0;En<on;En++)vn[En]=jt.charCodeAt(En);return Xt}function vt(jt){return new _e(function(on){var Xt=jt.transaction(st,ot),vn=$([""]);Xt.objectStore(st).put(vn,"key"),Xt.onabort=function(En){En.preventDefault(),En.stopPropagation(),on(!1)},Xt.oncomplete=function(){var En=navigator.userAgent.match(/Chrome\/(\d+)/),mn=navigator.userAgent.match(/Edge\//);on(mn||!En||parseInt(En[1],10)>=43)}}).catch(function(){return!1})}function mt(jt){return typeof nt=="boolean"?_e.resolve(nt):vt(jt).then(function(on){return nt=on,nt})}function pt(jt){var on=rt[jt.name],Xt={};Xt.promise=new _e(function(vn,En){Xt.resolve=vn,Xt.reject=En}),on.deferredOperations.push(Xt),on.dbReady?on.dbReady=on.dbReady.then(function(){return Xt.promise}):on.dbReady=Xt.promise}function Et(jt){var on=rt[jt.name],Xt=on.deferredOperations.pop();if(Xt)return Xt.resolve(),Xt.promise}function Ct(jt,on){var Xt=rt[jt.name],vn=Xt.deferredOperations.pop();if(vn)return vn.reject(on),vn.promise}function Nt(jt,on){return new _e(function(Xt,vn){if(rt[jt.name]=rt[jt.name]||xn(),jt.db)if(on)pt(jt),jt.db.close();else return Xt(jt.db);var En=[jt.name];on&&En.push(jt.version);var mn=_.open.apply(_,En);on&&(mn.onupgradeneeded=function(Fn){var $n=mn.result;try{$n.createObjectStore(jt.storeName),Fn.oldVersion<=1&&$n.createObjectStore(st)}catch(qn){if(qn.name==="ConstraintError")console.warn('The database "'+jt.name+'" has been upgraded from version '+Fn.oldVersion+" to version "+Fn.newVersion+', but the storage "'+jt.storeName+'" already exists.');else throw qn}}),mn.onerror=function(Fn){Fn.preventDefault(),vn(mn.error)},mn.onsuccess=function(){var Fn=mn.result;Fn.onversionchange=function($n){$n.target.close()},Xt(Fn),Et(jt)}})}function Ut(jt){return Nt(jt,!1)}function Tt(jt){return Nt(jt,!0)}function qt(jt,on){if(!jt.db)return!0;var Xt=!jt.db.objectStoreNames.contains(jt.storeName),vn=jt.version<jt.db.version,En=jt.version>jt.db.version;if(vn&&(jt.version!==on&&console.warn('The database "'+jt.name+`" can't be downgraded from version `+jt.db.version+" to version "+jt.version+"."),jt.version=jt.db.version),En||Xt){if(Xt){var mn=jt.db.version+1;mn>jt.version&&(jt.version=mn)}return!0}return!1}function Vt(jt){return new _e(function(on,Xt){var vn=new FileReader;vn.onerror=Xt,vn.onloadend=function(En){var mn=btoa(En.target.result||"");on({__local_forage_encoded_blob:!0,data:mn,type:jt.type})},vn.readAsBinaryString(jt)})}function Zt(jt){var on=ct(atob(jt.data));return $([on],{type:jt.type})}function It(jt){return jt&&jt.__local_forage_encoded_blob}function Jt(jt){var on=this,Xt=on._initReady().then(function(){var vn=rt[on._dbInfo.name];if(vn&&vn.dbReady)return vn.dbReady});return et(Xt,jt,jt),Xt}function fn(jt){pt(jt);for(var on=rt[jt.name],Xt=on.forages,vn=0;vn<Xt.length;vn++){var En=Xt[vn];En._dbInfo.db&&(En._dbInfo.db.close(),En._dbInfo.db=null)}return jt.db=null,Ut(jt).then(function(mn){return jt.db=mn,qt(jt)?Tt(jt):mn}).then(function(mn){jt.db=on.db=mn;for(var Fn=0;Fn<Xt.length;Fn++)Xt[Fn]._dbInfo.db=mn}).catch(function(mn){throw Ct(jt,mn),mn})}function _n(jt,on,Xt,vn){vn===void 0&&(vn=1);try{var En=jt.db.transaction(jt.storeName,on);Xt(null,En)}catch(mn){if(vn>0&&(!jt.db||mn.name==="InvalidStateError"||mn.name==="NotFoundError"))return _e.resolve().then(function(){if(!jt.db||mn.name==="NotFoundError"&&!jt.db.objectStoreNames.contains(jt.storeName)&&jt.version<=jt.db.version)return jt.db&&(jt.version=jt.db.version+1),Tt(jt)}).then(function(){return fn(jt).then(function(){_n(jt,on,Xt,vn-1)})}).catch(Xt);Xt(mn)}}function xn(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Mt(jt){var on=this,Xt={db:null};if(jt)for(var vn in jt)Xt[vn]=jt[vn];var En=rt[Xt.name];En||(En=xn(),rt[Xt.name]=En),En.forages.push(on),on._initReady||(on._initReady=on.ready,on.ready=Jt);var mn=[];function Fn(){return _e.resolve()}for(var $n=0;$n<En.forages.length;$n++){var qn=En.forages[$n];qn!==on&&mn.push(qn._initReady().catch(Fn))}var Hn=En.forages.slice(0);return _e.all(mn).then(function(){return Xt.db=En.db,Ut(Xt)}).then(function(Gn){return Xt.db=Gn,qt(Xt,on._defaultConfig.version)?Tt(Xt):Gn}).then(function(Gn){Xt.db=En.db=Gn,on._dbInfo=Xt;for(var ir=0;ir<Hn.length;ir++){var lr=Hn[ir];lr!==on&&(lr._dbInfo.db=Xt.db,lr._dbInfo.version=Xt.version)}})}function xt(jt,on){var Xt=this;jt=ut(jt);var vn=new _e(function(En,mn){Xt.ready().then(function(){_n(Xt._dbInfo,dt,function(Fn,$n){if(Fn)return mn(Fn);try{var qn=$n.objectStore(Xt._dbInfo.storeName),Hn=qn.get(jt);Hn.onsuccess=function(){var Gn=Hn.result;Gn===void 0&&(Gn=null),It(Gn)&&(Gn=Zt(Gn)),En(Gn)},Hn.onerror=function(){mn(Hn.error)}}catch(Gn){mn(Gn)}})}).catch(mn)});return tt(vn,on),vn}function At(jt,on){var Xt=this,vn=new _e(function(En,mn){Xt.ready().then(function(){_n(Xt._dbInfo,dt,function(Fn,$n){if(Fn)return mn(Fn);try{var qn=$n.objectStore(Xt._dbInfo.storeName),Hn=qn.openCursor(),Gn=1;Hn.onsuccess=function(){var ir=Hn.result;if(ir){var lr=ir.value;It(lr)&&(lr=Zt(lr));var cr=jt(lr,ir.key,Gn++);cr!==void 0?En(cr):ir.continue()}else En()},Hn.onerror=function(){mn(Hn.error)}}catch(ir){mn(ir)}})}).catch(mn)});return tt(vn,on),vn}function wt(jt,on,Xt){var vn=this;jt=ut(jt);var En=new _e(function(mn,Fn){var $n;vn.ready().then(function(){return $n=vn._dbInfo,at.call(on)==="[object Blob]"?mt($n.db).then(function(qn){return qn?on:Vt(on)}):on}).then(function(qn){_n(vn._dbInfo,ot,function(Hn,Gn){if(Hn)return Fn(Hn);try{var ir=Gn.objectStore(vn._dbInfo.storeName);qn===null&&(qn=void 0);var lr=ir.put(qn,jt);Gn.oncomplete=function(){qn===void 0&&(qn=null),mn(qn)},Gn.onabort=Gn.onerror=function(){var cr=lr.error?lr.error:lr.transaction.error;Fn(cr)}}catch(cr){Fn(cr)}})}).catch(Fn)});return tt(En,Xt),En}function kt(jt,on){var Xt=this;jt=ut(jt);var vn=new _e(function(En,mn){Xt.ready().then(function(){_n(Xt._dbInfo,ot,function(Fn,$n){if(Fn)return mn(Fn);try{var qn=$n.objectStore(Xt._dbInfo.storeName),Hn=qn.delete(jt);$n.oncomplete=function(){En()},$n.onerror=function(){mn(Hn.error)},$n.onabort=function(){var Gn=Hn.error?Hn.error:Hn.transaction.error;mn(Gn)}}catch(Gn){mn(Gn)}})}).catch(mn)});return tt(vn,on),vn}function Dt(jt){var on=this,Xt=new _e(function(vn,En){on.ready().then(function(){_n(on._dbInfo,ot,function(mn,Fn){if(mn)return En(mn);try{var $n=Fn.objectStore(on._dbInfo.storeName),qn=$n.clear();Fn.oncomplete=function(){vn()},Fn.onabort=Fn.onerror=function(){var Hn=qn.error?qn.error:qn.transaction.error;En(Hn)}}catch(Hn){En(Hn)}})}).catch(En)});return tt(Xt,jt),Xt}function Ft(jt){var on=this,Xt=new _e(function(vn,En){on.ready().then(function(){_n(on._dbInfo,dt,function(mn,Fn){if(mn)return En(mn);try{var $n=Fn.objectStore(on._dbInfo.storeName),qn=$n.count();qn.onsuccess=function(){vn(qn.result)},qn.onerror=function(){En(qn.error)}}catch(Hn){En(Hn)}})}).catch(En)});return tt(Xt,jt),Xt}function $t(jt,on){var Xt=this,vn=new _e(function(En,mn){if(jt<0){En(null);return}Xt.ready().then(function(){_n(Xt._dbInfo,dt,function(Fn,$n){if(Fn)return mn(Fn);try{var qn=$n.objectStore(Xt._dbInfo.storeName),Hn=!1,Gn=qn.openKeyCursor();Gn.onsuccess=function(){var ir=Gn.result;if(!ir){En(null);return}jt===0||Hn?En(ir.key):(Hn=!0,ir.advance(jt))},Gn.onerror=function(){mn(Gn.error)}}catch(ir){mn(ir)}})}).catch(mn)});return tt(vn,on),vn}function Wt(jt){var on=this,Xt=new _e(function(vn,En){on.ready().then(function(){_n(on._dbInfo,dt,function(mn,Fn){if(mn)return En(mn);try{var $n=Fn.objectStore(on._dbInfo.storeName),qn=$n.openKeyCursor(),Hn=[];qn.onsuccess=function(){var Gn=qn.result;if(!Gn){vn(Hn);return}Hn.push(Gn.key),Gn.continue()},qn.onerror=function(){En(qn.error)}}catch(Gn){En(Gn)}})}).catch(En)});return tt(Xt,jt),Xt}function un(jt,on){on=ht.apply(this,arguments);var Xt=this.config();jt=typeof jt!="function"&&jt||{},jt.name||(jt.name=jt.name||Xt.name,jt.storeName=jt.storeName||Xt.storeName);var vn=this,En;if(!jt.name)En=_e.reject("Invalid arguments");else{var mn=jt.name===Xt.name&&vn._dbInfo.db,Fn=mn?_e.resolve(vn._dbInfo.db):Ut(jt).then(function($n){var qn=rt[jt.name],Hn=qn.forages;qn.db=$n;for(var Gn=0;Gn<Hn.length;Gn++)Hn[Gn]._dbInfo.db=$n;return $n});jt.storeName?En=Fn.then(function($n){if($n.objectStoreNames.contains(jt.storeName)){var qn=$n.version+1;pt(jt);var Hn=rt[jt.name],Gn=Hn.forages;$n.close();for(var ir=0;ir<Gn.length;ir++){var lr=Gn[ir];lr._dbInfo.db=null,lr._dbInfo.version=qn}var cr=new _e(function(dr,vr){var gr=_.open(jt.name,qn);gr.onerror=function(_r){var Nr=gr.result;Nr.close(),vr(_r)},gr.onupgradeneeded=function(){var _r=gr.result;_r.deleteObjectStore(jt.storeName)},gr.onsuccess=function(){var _r=gr.result;_r.close(),dr(_r)}});return cr.then(function(dr){Hn.db=dr;for(var vr=0;vr<Gn.length;vr++){var gr=Gn[vr];gr._dbInfo.db=dr,Et(gr._dbInfo)}}).catch(function(dr){throw(Ct(jt,dr)||_e.resolve()).catch(function(){}),dr})}}):En=Fn.then(function($n){pt(jt);var qn=rt[jt.name],Hn=qn.forages;$n.close();for(var Gn=0;Gn<Hn.length;Gn++){var ir=Hn[Gn];ir._dbInfo.db=null}var lr=new _e(function(cr,dr){var vr=_.deleteDatabase(jt.name);vr.onerror=function(){var gr=vr.result;gr&&gr.close(),dr(vr.error)},vr.onblocked=function(){console.warn('dropInstance blocked for database "'+jt.name+'" until all open connections are closed')},vr.onsuccess=function(){var gr=vr.result;gr&&gr.close(),cr(gr)}});return lr.then(function(cr){qn.db=cr;for(var dr=0;dr<Hn.length;dr++){var vr=Hn[dr];Et(vr._dbInfo)}}).catch(function(cr){throw(Ct(jt,cr)||_e.resolve()).catch(function(){}),cr})})}return tt(En,on),En}var rn={_driver:"asyncStorage",_initStorage:Mt,_support:j(),iterate:At,getItem:xt,setItem:wt,removeItem:kt,clear:Dt,length:Ft,key:$t,keys:Wt,dropInstance:un};function bn(){return typeof openDatabase=="function"}var An="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Nn="~~local_forage_type~",wn=/^~~local_forage_type~([^~]+)~/,jn="__lfsc__:",Xn=jn.length,Ln="arbf",Un="blob",kn="si08",en="ui08",hn="uic8",Tn="si16",On="si32",In="ur16",Zn="ui32",Qn="fl32",Kn="fl64",er=Xn+Ln.length,Jn=Object.prototype.toString;function Yn(jt){var on=jt.length*.75,Xt=jt.length,vn,En=0,mn,Fn,$n,qn;jt[jt.length-1]==="="&&(on--,jt[jt.length-2]==="="&&on--);var Hn=new ArrayBuffer(on),Gn=new Uint8Array(Hn);for(vn=0;vn<Xt;vn+=4)mn=An.indexOf(jt[vn]),Fn=An.indexOf(jt[vn+1]),$n=An.indexOf(jt[vn+2]),qn=An.indexOf(jt[vn+3]),Gn[En++]=mn<<2|Fn>>4,Gn[En++]=(Fn&15)<<4|$n>>2,Gn[En++]=($n&3)<<6|qn&63;return Hn}function tr(jt){var on=new Uint8Array(jt),Xt="",vn;for(vn=0;vn<on.length;vn+=3)Xt+=An[on[vn]>>2],Xt+=An[(on[vn]&3)<<4|on[vn+1]>>4],Xt+=An[(on[vn+1]&15)<<2|on[vn+2]>>6],Xt+=An[on[vn+2]&63];return on.length%3===2?Xt=Xt.substring(0,Xt.length-1)+"=":on.length%3===1&&(Xt=Xt.substring(0,Xt.length-2)+"=="),Xt}function Cn(jt,on){var Xt="";if(jt&&(Xt=Jn.call(jt)),jt&&(Xt==="[object ArrayBuffer]"||jt.buffer&&Jn.call(jt.buffer)==="[object ArrayBuffer]")){var vn,En=jn;jt instanceof ArrayBuffer?(vn=jt,En+=Ln):(vn=jt.buffer,Xt==="[object Int8Array]"?En+=kn:Xt==="[object Uint8Array]"?En+=en:Xt==="[object Uint8ClampedArray]"?En+=hn:Xt==="[object Int16Array]"?En+=Tn:Xt==="[object Uint16Array]"?En+=In:Xt==="[object Int32Array]"?En+=On:Xt==="[object Uint32Array]"?En+=Zn:Xt==="[object Float32Array]"?En+=Qn:Xt==="[object Float64Array]"?En+=Kn:on(new Error("Failed to get type for BinaryArray"))),on(En+tr(vn))}else if(Xt==="[object Blob]"){var mn=new FileReader;mn.onload=function(){var Fn=Nn+jt.type+"~"+tr(this.result);on(jn+Un+Fn)},mn.readAsArrayBuffer(jt)}else try{on(JSON.stringify(jt))}catch(Fn){console.error("Couldn't convert value into a JSON string: ",jt),on(null,Fn)}}function St(jt){if(jt.substring(0,Xn)!==jn)return JSON.parse(jt);var on=jt.substring(er),Xt=jt.substring(Xn,er),vn;if(Xt===Un&&wn.test(on)){var En=on.match(wn);vn=En[1],on=on.substring(En[0].length)}var mn=Yn(on);switch(Xt){case Ln:return mn;case Un:return $([mn],{type:vn});case kn:return new Int8Array(mn);case en:return new Uint8Array(mn);case hn:return new Uint8ClampedArray(mn);case Tn:return new Int16Array(mn);case In:return new Uint16Array(mn);case On:return new Int32Array(mn);case Zn:return new Uint32Array(mn);case Qn:return new Float32Array(mn);case Kn:return new Float64Array(mn);default:throw new Error("Unkown type: "+Xt)}}var zt={serialize:Cn,deserialize:St,stringToBuffer:Yn,bufferToString:tr};function sn(jt,on,Xt,vn){jt.executeSql("CREATE TABLE IF NOT EXISTS "+on.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],Xt,vn)}function gn(jt){var on=this,Xt={db:null};if(jt)for(var vn in jt)Xt[vn]=typeof jt[vn]!="string"?jt[vn].toString():jt[vn];var En=new _e(function(mn,Fn){try{Xt.db=openDatabase(Xt.name,String(Xt.version),Xt.description,Xt.size)}catch($n){return Fn($n)}Xt.db.transaction(function($n){sn($n,Xt,function(){on._dbInfo=Xt,mn()},function(qn,Hn){Fn(Hn)})},Fn)});return Xt.serializer=zt,En}function tn(jt,on,Xt,vn,En,mn){jt.executeSql(Xt,vn,En,function(Fn,$n){$n.code===$n.SYNTAX_ERR?Fn.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[on.storeName],function(qn,Hn){Hn.rows.length?mn(qn,$n):sn(qn,on,function(){qn.executeSql(Xt,vn,En,mn)},mn)},mn):mn(Fn,$n)},mn)}function Sn(jt,on){var Xt=this;jt=ut(jt);var vn=new _e(function(En,mn){Xt.ready().then(function(){var Fn=Xt._dbInfo;Fn.db.transaction(function($n){tn($n,Fn,"SELECT * FROM "+Fn.storeName+" WHERE key = ? LIMIT 1",[jt],function(qn,Hn){var Gn=Hn.rows.length?Hn.rows.item(0).value:null;Gn&&(Gn=Fn.serializer.deserialize(Gn)),En(Gn)},function(qn,Hn){mn(Hn)})})}).catch(mn)});return tt(vn,on),vn}function _t(jt,on){var Xt=this,vn=new _e(function(En,mn){Xt.ready().then(function(){var Fn=Xt._dbInfo;Fn.db.transaction(function($n){tn($n,Fn,"SELECT * FROM "+Fn.storeName,[],function(qn,Hn){for(var Gn=Hn.rows,ir=Gn.length,lr=0;lr<ir;lr++){var cr=Gn.item(lr),dr=cr.value;if(dr&&(dr=Fn.serializer.deserialize(dr)),dr=jt(dr,cr.key,lr+1),dr!==void 0){En(dr);return}}En()},function(qn,Hn){mn(Hn)})})}).catch(mn)});return tt(vn,on),vn}function ln(jt,on,Xt,vn){var En=this;jt=ut(jt);var mn=new _e(function(Fn,$n){En.ready().then(function(){on===void 0&&(on=null);var qn=on,Hn=En._dbInfo;Hn.serializer.serialize(on,function(Gn,ir){ir?$n(ir):Hn.db.transaction(function(lr){tn(lr,Hn,"INSERT OR REPLACE INTO "+Hn.storeName+" (key, value) VALUES (?, ?)",[jt,Gn],function(){Fn(qn)},function(cr,dr){$n(dr)})},function(lr){if(lr.code===lr.QUOTA_ERR){if(vn>0){Fn(ln.apply(En,[jt,qn,Xt,vn-1]));return}$n(lr)}})})}).catch($n)});return tt(mn,Xt),mn}function Pn(jt,on,Xt){return ln.apply(this,[jt,on,Xt,1])}function ft(jt,on){var Xt=this;jt=ut(jt);var vn=new _e(function(En,mn){Xt.ready().then(function(){var Fn=Xt._dbInfo;Fn.db.transaction(function($n){tn($n,Fn,"DELETE FROM "+Fn.storeName+" WHERE key = ?",[jt],function(){En()},function(qn,Hn){mn(Hn)})})}).catch(mn)});return tt(vn,on),vn}function nn(jt){var on=this,Xt=new _e(function(vn,En){on.ready().then(function(){var mn=on._dbInfo;mn.db.transaction(function(Fn){tn(Fn,mn,"DELETE FROM "+mn.storeName,[],function(){vn()},function($n,qn){En(qn)})})}).catch(En)});return tt(Xt,jt),Xt}function cn(jt){var on=this,Xt=new _e(function(vn,En){on.ready().then(function(){var mn=on._dbInfo;mn.db.transaction(function(Fn){tn(Fn,mn,"SELECT COUNT(key) as c FROM "+mn.storeName,[],function($n,qn){var Hn=qn.rows.item(0).c;vn(Hn)},function($n,qn){En(qn)})})}).catch(En)});return tt(Xt,jt),Xt}function Rt(jt,on){var Xt=this,vn=new _e(function(En,mn){Xt.ready().then(function(){var Fn=Xt._dbInfo;Fn.db.transaction(function($n){tn($n,Fn,"SELECT key FROM "+Fn.storeName+" WHERE id = ? LIMIT 1",[jt+1],function(qn,Hn){var Gn=Hn.rows.length?Hn.rows.item(0).key:null;En(Gn)},function(qn,Hn){mn(Hn)})})}).catch(mn)});return tt(vn,on),vn}function Bt(jt){var on=this,Xt=new _e(function(vn,En){on.ready().then(function(){var mn=on._dbInfo;mn.db.transaction(function(Fn){tn(Fn,mn,"SELECT key FROM "+mn.storeName,[],function($n,qn){for(var Hn=[],Gn=0;Gn<qn.rows.length;Gn++)Hn.push(qn.rows.item(Gn).key);vn(Hn)},function($n,qn){En(qn)})})}).catch(En)});return tt(Xt,jt),Xt}function dn(jt){return new _e(function(on,Xt){jt.transaction(function(vn){vn.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(En,mn){for(var Fn=[],$n=0;$n<mn.rows.length;$n++)Fn.push(mn.rows.item($n).name);on({db:jt,storeNames:Fn})},function(En,mn){Xt(mn)})},function(vn){Xt(vn)})})}function Rn(jt,on){on=ht.apply(this,arguments);var Xt=this.config();jt=typeof jt!="function"&&jt||{},jt.name||(jt.name=jt.name||Xt.name,jt.storeName=jt.storeName||Xt.storeName);var vn=this,En;return jt.name?En=new _e(function(mn){var Fn;jt.name===Xt.name?Fn=vn._dbInfo.db:Fn=openDatabase(jt.name,"","",0),jt.storeName?mn({db:Fn,storeNames:[jt.storeName]}):mn(dn(Fn))}).then(function(mn){return new _e(function(Fn,$n){mn.db.transaction(function(qn){function Hn(cr){return new _e(function(dr,vr){qn.executeSql("DROP TABLE IF EXISTS "+cr,[],function(){dr()},function(gr,_r){vr(_r)})})}for(var Gn=[],ir=0,lr=mn.storeNames.length;ir<lr;ir++)Gn.push(Hn(mn.storeNames[ir]));_e.all(Gn).then(function(){Fn()}).catch(function(cr){$n(cr)})},function(qn){$n(qn)})})}):En=_e.reject("Invalid arguments"),tt(En,on),En}var Ot={_driver:"webSQLStorage",_initStorage:gn,_support:bn(),iterate:_t,getItem:Sn,setItem:Pn,removeItem:ft,clear:nn,length:cn,key:Rt,keys:Bt,dropInstance:Rn};function yt(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Pt(jt,on){var Xt=jt.name+"/";return jt.storeName!==on.storeName&&(Xt+=jt.storeName+"/"),Xt}function Ht(){var jt="_localforage_support_test";try{return localStorage.setItem(jt,!0),localStorage.removeItem(jt),!1}catch{return!0}}function Kt(){return!Ht()||localStorage.length>0}function Qt(jt){var on=this,Xt={};if(jt)for(var vn in jt)Xt[vn]=jt[vn];return Xt.keyPrefix=Pt(jt,on._defaultConfig),Kt()?(on._dbInfo=Xt,Xt.serializer=zt,_e.resolve()):_e.reject()}function pn(jt){var on=this,Xt=on.ready().then(function(){for(var vn=on._dbInfo.keyPrefix,En=localStorage.length-1;En>=0;En--){var mn=localStorage.key(En);mn.indexOf(vn)===0&&localStorage.removeItem(mn)}});return tt(Xt,jt),Xt}function Dn(jt,on){var Xt=this;jt=ut(jt);var vn=Xt.ready().then(function(){var En=Xt._dbInfo,mn=localStorage.getItem(En.keyPrefix+jt);return mn&&(mn=En.serializer.deserialize(mn)),mn});return tt(vn,on),vn}function Mn(jt,on){var Xt=this,vn=Xt.ready().then(function(){for(var En=Xt._dbInfo,mn=En.keyPrefix,Fn=mn.length,$n=localStorage.length,qn=1,Hn=0;Hn<$n;Hn++){var Gn=localStorage.key(Hn);if(Gn.indexOf(mn)===0){var ir=localStorage.getItem(Gn);if(ir&&(ir=En.serializer.deserialize(ir)),ir=jt(ir,Gn.substring(Fn),qn++),ir!==void 0)return ir}}});return tt(vn,on),vn}function zn(jt,on){var Xt=this,vn=Xt.ready().then(function(){var En=Xt._dbInfo,mn;try{mn=localStorage.key(jt)}catch{mn=null}return mn&&(mn=mn.substring(En.keyPrefix.length)),mn});return tt(vn,on),vn}function nr(jt){var on=this,Xt=on.ready().then(function(){for(var vn=on._dbInfo,En=localStorage.length,mn=[],Fn=0;Fn<En;Fn++){var $n=localStorage.key(Fn);$n.indexOf(vn.keyPrefix)===0&&mn.push($n.substring(vn.keyPrefix.length))}return mn});return tt(Xt,jt),Xt}function Bn(jt){var on=this,Xt=on.keys().then(function(vn){return vn.length});return tt(Xt,jt),Xt}function Vn(jt,on){var Xt=this;jt=ut(jt);var vn=Xt.ready().then(function(){var En=Xt._dbInfo;localStorage.removeItem(En.keyPrefix+jt)});return tt(vn,on),vn}function Wn(jt,on,Xt){var vn=this;jt=ut(jt);var En=vn.ready().then(function(){on===void 0&&(on=null);var mn=on;return new _e(function(Fn,$n){var qn=vn._dbInfo;qn.serializer.serialize(on,function(Hn,Gn){if(Gn)$n(Gn);else try{localStorage.setItem(qn.keyPrefix+jt,Hn),Fn(mn)}catch(ir){(ir.name==="QuotaExceededError"||ir.name==="NS_ERROR_DOM_QUOTA_REACHED")&&$n(ir),$n(ir)}})})});return tt(En,Xt),En}function rr(jt,on){if(on=ht.apply(this,arguments),jt=typeof jt!="function"&&jt||{},!jt.name){var Xt=this.config();jt.name=jt.name||Xt.name,jt.storeName=jt.storeName||Xt.storeName}var vn=this,En;return jt.name?En=new _e(function(mn){jt.storeName?mn(Pt(jt,vn._defaultConfig)):mn(jt.name+"/")}).then(function(mn){for(var Fn=localStorage.length-1;Fn>=0;Fn--){var $n=localStorage.key(Fn);$n.indexOf(mn)===0&&localStorage.removeItem($n)}}):En=_e.reject("Invalid arguments"),tt(En,on),En}var sr={_driver:"localStorageWrapper",_initStorage:Qt,_support:yt(),iterate:Mn,getItem:Dn,setItem:Wn,removeItem:Vn,clear:pn,length:Bn,key:zn,keys:nr,dropInstance:rr},ar=function(on,Xt){return on===Xt||typeof on=="number"&&typeof Xt=="number"&&isNaN(on)&&isNaN(Xt)},mr=function(on,Xt){for(var vn=on.length,En=0;En<vn;){if(ar(on[En],Xt))return!0;En++}return!1},ur=Array.isArray||function(jt){return Object.prototype.toString.call(jt)==="[object Array]"},yr={},Er={},br={INDEXEDDB:rn,WEBSQL:Ot,LOCALSTORAGE:sr},Ur=[br.INDEXEDDB._driver,br.WEBSQL._driver,br.LOCALSTORAGE._driver],$r=["dropInstance"],rs=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat($r),Co={description:"",driver:Ur.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ko(jt,on){jt[on]=function(){var Xt=arguments;return jt.ready().then(function(){return jt[on].apply(jt,Xt)})}}function ss(){for(var jt=1;jt<arguments.length;jt++){var on=arguments[jt];if(on)for(var Xt in on)on.hasOwnProperty(Xt)&&(ur(on[Xt])?arguments[0][Xt]=on[Xt].slice():arguments[0][Xt]=on[Xt])}return arguments[0]}var To=function(){function jt(on){g(this,jt);for(var Xt in br)if(br.hasOwnProperty(Xt)){var vn=br[Xt],En=vn._driver;this[Xt]=En,yr[En]||this.defineDriver(vn)}this._defaultConfig=ss({},Co),this._config=ss({},this._defaultConfig,on),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return jt.prototype.config=function(Xt){if((typeof Xt>"u"?"undefined":h(Xt))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var vn in Xt){if(vn==="storeName"&&(Xt[vn]=Xt[vn].replace(/\W/g,"_")),vn==="version"&&typeof Xt[vn]!="number")return new Error("Database version must be a number.");this._config[vn]=Xt[vn]}return"driver"in Xt&&Xt.driver?this.setDriver(this._config.driver):!0}else return typeof Xt=="string"?this._config[Xt]:this._config},jt.prototype.defineDriver=function(Xt,vn,En){var mn=new _e(function(Fn,$n){try{var qn=Xt._driver,Hn=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!Xt._driver){$n(Hn);return}for(var Gn=rs.concat("_initStorage"),ir=0,lr=Gn.length;ir<lr;ir++){var cr=Gn[ir],dr=!mr($r,cr);if((dr||Xt[cr])&&typeof Xt[cr]!="function"){$n(Hn);return}}var vr=function(){for(var Nr=function(Po){return function(){var No=new Error("Method "+Po+" is not implemented by the current driver"),$s=_e.reject(No);return tt($s,arguments[arguments.length-1]),$s}},os=0,Ro=$r.length;os<Ro;os++){var as=$r[os];Xt[as]||(Xt[as]=Nr(as))}};vr();var gr=function(Nr){yr[qn]&&console.info("Redefining LocalForage driver: "+qn),yr[qn]=Xt,Er[qn]=Nr,Fn()};"_support"in Xt?Xt._support&&typeof Xt._support=="function"?Xt._support().then(gr,$n):gr(!!Xt._support):gr(!0)}catch(_r){$n(_r)}});return et(mn,vn,En),mn},jt.prototype.driver=function(){return this._driver||null},jt.prototype.getDriver=function(Xt,vn,En){var mn=yr[Xt]?_e.resolve(yr[Xt]):_e.reject(new Error("Driver not found."));return et(mn,vn,En),mn},jt.prototype.getSerializer=function(Xt){var vn=_e.resolve(zt);return et(vn,Xt),vn},jt.prototype.ready=function(Xt){var vn=this,En=vn._driverSet.then(function(){return vn._ready===null&&(vn._ready=vn._initDriver()),vn._ready});return et(En,Xt,Xt),En},jt.prototype.setDriver=function(Xt,vn,En){var mn=this;ur(Xt)||(Xt=[Xt]);var Fn=this._getSupportedDrivers(Xt);function $n(){mn._config.driver=mn.driver()}function qn(ir){return mn._extend(ir),$n(),mn._ready=mn._initStorage(mn._config),mn._ready}function Hn(ir){return function(){var lr=0;function cr(){for(;lr<ir.length;){var dr=ir[lr];return lr++,mn._dbInfo=null,mn._ready=null,mn.getDriver(dr).then(qn).catch(cr)}$n();var vr=new Error("No available storage method found.");return mn._driverSet=_e.reject(vr),mn._driverSet}return cr()}}var Gn=this._driverSet!==null?this._driverSet.catch(function(){return _e.resolve()}):_e.resolve();return this._driverSet=Gn.then(function(){var ir=Fn[0];return mn._dbInfo=null,mn._ready=null,mn.getDriver(ir).then(function(lr){mn._driver=lr._driver,$n(),mn._wrapLibraryMethodsWithReady(),mn._initDriver=Hn(Fn)})}).catch(function(){$n();var ir=new Error("No available storage method found.");return mn._driverSet=_e.reject(ir),mn._driverSet}),et(this._driverSet,vn,En),this._driverSet},jt.prototype.supports=function(Xt){return!!Er[Xt]},jt.prototype._extend=function(Xt){ss(this,Xt)},jt.prototype._getSupportedDrivers=function(Xt){for(var vn=[],En=0,mn=Xt.length;En<mn;En++){var Fn=Xt[En];this.supports(Fn)&&vn.push(Fn)}return vn},jt.prototype._wrapLibraryMethodsWithReady=function(){for(var Xt=0,vn=rs.length;Xt<vn;Xt++)ko(this,rs[Xt])},jt.prototype.createInstance=function(Xt){return new jt(Xt)},jt}(),Do=new To;a.exports=Do},{3:3}]},{},[4])(4)})})(localforage$1);var localforageExports=localforage$1.exports;const localforage=getDefaultExportFromCjs(localforageExports);class Store{constructor(e,o,a){this.urlCache={},this.storage=void 0,this.name=e,this.requester=o||request,this.resolver=a,this.online=!0,this.checkRequirements(),this.addListeners()}checkRequirements(){try{let e;typeof localforage>"u"&&(e=localforage),this.storage=e.createInstance({name:this.name})}catch{throw new Error("localForage lib not loaded")}}addListeners(){this._status=this.status.bind(this),window.addEventListener("online",this._status),window.addEventListener("offline",this._status)}removeListeners(){window.removeEventListener("online",this._status),window.removeEventListener("offline",this._status),this._status=void 0}status(e){let o=navigator.onLine;this.online=o,o?this.emit("online",this):this.emit("offline",this)}add(e,o){let a=e.resources.map(c=>{let{href:h}=c,g=this.resolver(h),b=window.encodeURIComponent(g);return this.storage.getItem(b).then(_=>!_||o?this.requester(g,"binary").then(j=>this.storage.setItem(b,j)):_)});return Promise.all(a)}put(e,o,a){let c=window.encodeURIComponent(e);return this.storage.getItem(c).then(h=>h||this.requester(e,"binary",o,a).then(g=>this.storage.setItem(c,g)))}request(e,o,a,c){return this.online?this.requester(e,o,a,c).then(h=>(this.put(e),h)):this.retrieve(e,o)}retrieve(e,o){new defer;var a,c=new Path(e);return o||(o=c.extension),o=="blob"?a=this.getBlob(e):a=this.getText(e),a.then(h=>{var g=new defer,b;return h?(b=this.handleResponse(h,o),g.resolve(b)):g.reject({message:"File not found in storage: "+e,stack:new Error().stack}),g.promise})}handleResponse(e,o){var a;return o=="json"?a=JSON.parse(e):isXml(o)?a=parse$1(e,"text/xml"):o=="xhtml"?a=parse$1(e,"application/xhtml+xml"):o=="html"||o=="htm"?a=parse$1(e,"text/html"):a=e,a}getBlob(e,o){let a=window.encodeURIComponent(e);return this.storage.getItem(a).then(function(c){if(c)return o=o||mime.lookup(e),new Blob([c],{type:o})})}getText(e,o){let a=window.encodeURIComponent(e);return o=o||mime.lookup(e),this.storage.getItem(a).then(function(c){var h=new defer,g=new FileReader,b;if(c)return b=new Blob([c],{type:o}),g.addEventListener("loadend",()=>{h.resolve(g.result)}),g.readAsText(b,o),h.promise})}getBase64(e,o){let a=window.encodeURIComponent(e);return o=o||mime.lookup(e),this.storage.getItem(a).then(c=>{var h=new defer,g=new FileReader,b;if(c)return b=new Blob([c],{type:o}),g.addEventListener("loadend",()=>{h.resolve(g.result)}),g.readAsDataURL(b,o),h.promise})}createUrl(e,o){var a=new defer,c=window.URL||window.webkitURL||window.mozURL,h,g,b=o&&o.base64;return e in this.urlCache?(a.resolve(this.urlCache[e]),a.promise):(b?(g=this.getBase64(e),g&&g.then((function(_){this.urlCache[e]=_,a.resolve(_)}).bind(this))):(g=this.getBlob(e),g&&g.then((function(_){h=c.createObjectURL(_),this.urlCache[e]=h,a.resolve(h)}).bind(this))),g||a.reject({message:"File not found in storage: "+e,stack:new Error().stack}),a.promise)}revokeUrl(e){var o=window.URL||window.webkitURL||window.mozURL,a=this.urlCache[e];a&&o.revokeObjectURL(a)}destroy(){var e=window.URL||window.webkitURL||window.mozURL;for(let o in this.urlCache)e.revokeObjectURL(o);this.urlCache={},this.removeListeners()}}EventEmitter(Store.prototype);class DisplayOptions{constructor(e){this.interactive="",this.fixedLayout="",this.openToSpread="",this.orientationLock="",e&&this.parse(e)}parse(e){if(!e)return this;const o=qs(e,"display_options");return o?(qsa(o,"option").forEach(c=>{let h="";switch(c.childNodes.length&&(h=c.childNodes[0].nodeValue),c.attributes.name.value){case"interactive":this.interactive=h;break;case"fixed-layout":this.fixedLayout=h;break;case"open-to-spread":this.openToSpread=h;break;case"orientation-lock":this.orientationLock=h;break}}),this):this}destroy(){this.interactive=void 0,this.fixedLayout=void 0,this.openToSpread=void 0,this.orientationLock=void 0}}const CONTAINER_PATH="META-INF/container.xml",IBOOKS_DISPLAY_OPTIONS_PATH="META-INF/com.apple.ibooks.display-options.xml",INPUT_TYPE={BINARY:"binary",BASE64:"base64",EPUB:"epub",OPF:"opf",MANIFEST:"json",DIRECTORY:"directory"};class Book{constructor(e,o){typeof o>"u"&&typeof e!="string"&&!(e instanceof Blob)&&!(e instanceof ArrayBuffer)&&(o=e,e=void 0),this.settings=extend(this.settings||{},{requestMethod:void 0,requestCredentials:void 0,requestHeaders:void 0,encoding:void 0,replacements:void 0,canonical:void 0,openAs:void 0,store:void 0}),extend(this.settings,o),this.opening=new defer,this.opened=this.opening.promise,this.isOpen=!1,this.loading={manifest:new defer,spine:new defer,metadata:new defer,cover:new defer,navigation:new defer,pageList:new defer,resources:new defer,displayOptions:new defer},this.loaded={manifest:this.loading.manifest.promise,spine:this.loading.spine.promise,metadata:this.loading.metadata.promise,cover:this.loading.cover.promise,navigation:this.loading.navigation.promise,pageList:this.loading.pageList.promise,resources:this.loading.resources.promise,displayOptions:this.loading.displayOptions.promise},this.ready=Promise.all([this.loaded.manifest,this.loaded.spine,this.loaded.metadata,this.loaded.cover,this.loaded.navigation,this.loaded.resources,this.loaded.displayOptions]),this.isRendered=!1,this.request=this.settings.requestMethod||request,this.spine=new Spine,this.locations=new Locations(this.spine,this.load.bind(this)),this.navigation=void 0,this.pageList=void 0,this.url=void 0,this.path=void 0,this.archived=!1,this.archive=void 0,this.storage=void 0,this.resources=void 0,this.rendition=void 0,this.container=void 0,this.packaging=void 0,this.displayOptions=void 0,this.settings.store&&this.store(this.settings.store),e&&this.open(e,this.settings.openAs).catch(a=>{var c=new Error("Cannot load book at "+e);this.emit(EVENTS.BOOK.OPEN_FAILED,c)})}open(e,o){var a,c=o||this.determineType(e);return c===INPUT_TYPE.BINARY?(this.archived=!0,this.url=new Url$1("/",""),a=this.openEpub(e)):c===INPUT_TYPE.BASE64?(this.archived=!0,this.url=new Url$1("/",""),a=this.openEpub(e,c)):c===INPUT_TYPE.EPUB?(this.archived=!0,this.url=new Url$1("/",""),a=this.request(e,"binary",this.settings.requestCredentials,this.settings.requestHeaders).then(this.openEpub.bind(this))):c==INPUT_TYPE.OPF?(this.url=new Url$1(e),a=this.openPackaging(this.url.Path.toString())):c==INPUT_TYPE.MANIFEST?(this.url=new Url$1(e),a=this.openManifest(this.url.Path.toString())):(this.url=new Url$1(e),a=this.openContainer(CONTAINER_PATH).then(this.openPackaging.bind(this))),a}openEpub(e,o){return this.unarchive(e,o||this.settings.encoding).then(()=>this.openContainer(CONTAINER_PATH)).then(a=>this.openPackaging(a))}openContainer(e){return this.load(e).then(o=>(this.container=new Container(o),this.resolve(this.container.packagePath)))}openPackaging(e){return this.path=new Path(e),this.load(e).then(o=>(this.packaging=new Packaging(o),this.unpack(this.packaging)))}openManifest(e){return this.path=new Path(e),this.load(e).then(o=>(this.packaging=new Packaging,this.packaging.load(o),this.unpack(this.packaging)))}load(e){var o=this.resolve(e);return this.archived?this.archive.request(o):this.request(o,null,this.settings.requestCredentials,this.settings.requestHeaders)}resolve(e,o){if(e){var a=e,c=e.indexOf("://")>-1;return c?e:(this.path&&(a=this.path.resolve(e)),o!=!1&&this.url&&(a=this.url.resolve(a)),a)}}canonical(e){var o=e;return e?(this.settings.canonical?o=this.settings.canonical(e):o=this.resolve(e,!0),o):""}determineType(e){var o,a,c;if(this.settings.encoding==="base64")return INPUT_TYPE.BASE64;if(typeof e!="string")return INPUT_TYPE.BINARY;if(o=new Url$1(e),a=o.path(),c=a.extension,c&&(c=c.replace(/\?.*$/,"")),!c)return INPUT_TYPE.DIRECTORY;if(c==="epub")return INPUT_TYPE.EPUB;if(c==="opf")return INPUT_TYPE.OPF;if(c==="json")return INPUT_TYPE.MANIFEST}unpack(e){this.package=e,this.packaging.metadata.layout===""?this.load(this.url.resolve(IBOOKS_DISPLAY_OPTIONS_PATH)).then(o=>{this.displayOptions=new DisplayOptions(o),this.loading.displayOptions.resolve(this.displayOptions)}).catch(o=>{this.displayOptions=new DisplayOptions,this.loading.displayOptions.resolve(this.displayOptions)}):(this.displayOptions=new DisplayOptions,this.loading.displayOptions.resolve(this.displayOptions)),this.spine.unpack(this.packaging,this.resolve.bind(this),this.canonical.bind(this)),this.resources=new Resources(this.packaging.manifest,{archive:this.archive,resolver:this.resolve.bind(this),request:this.request.bind(this),replacements:this.settings.replacements||(this.archived?"blobUrl":"base64")}),this.loadNavigation(this.packaging).then(()=>{this.loading.navigation.resolve(this.navigation)}),this.packaging.coverPath&&(this.cover=this.resolve(this.packaging.coverPath)),this.loading.manifest.resolve(this.packaging.manifest),this.loading.metadata.resolve(this.packaging.metadata),this.loading.spine.resolve(this.spine),this.loading.cover.resolve(this.cover),this.loading.resources.resolve(this.resources),this.loading.pageList.resolve(this.pageList),this.isOpen=!0,this.archived||this.settings.replacements&&this.settings.replacements!="none"?this.replacements().then(()=>{this.loaded.displayOptions.then(()=>{this.opening.resolve(this)})}).catch(o=>{console.error(o)}):this.loaded.displayOptions.then(()=>{this.opening.resolve(this)})}loadNavigation(e){let o=e.navPath||e.ncxPath,a=e.toc;return a?new Promise((c,h)=>{this.navigation=new Navigation(a),e.pageList&&(this.pageList=new PageList(e.pageList)),c(this.navigation)}):o?this.load(o,"xml").then(c=>(this.navigation=new Navigation(c),this.pageList=new PageList(c),this.navigation)):new Promise((c,h)=>{this.navigation=new Navigation,this.pageList=new PageList,c(this.navigation)})}section(e){return this.spine.get(e)}renderTo(e,o){return this.rendition=new Rendition(this,o),this.rendition.attachTo(e),this.rendition}setRequestCredentials(e){this.settings.requestCredentials=e}setRequestHeaders(e){this.settings.requestHeaders=e}unarchive(e,o){return this.archive=new Archive,this.archive.open(e,o)}store(e){let o=this.settings.replacements&&this.settings.replacements!=="none",a=this.url,c=this.settings.requestMethod||request.bind(this);return this.storage=new Store(e,c,this.resolve.bind(this)),this.request=this.storage.request.bind(this.storage),this.opened.then(()=>{this.archived&&(this.storage.requester=this.archive.request.bind(this.archive));let h=(g,b)=>{b.output=this.resources.substitute(g,b.url)};this.resources.settings.replacements=o||"blobUrl",this.resources.replacements().then(()=>this.resources.replaceCss()),this.storage.on("offline",()=>{this.url=new Url$1("/",""),this.spine.hooks.serialize.register(h)}),this.storage.on("online",()=>{this.url=a,this.spine.hooks.serialize.deregister(h)})}),this.storage}coverUrl(){return this.loaded.cover.then(()=>this.cover?this.archived?this.archive.createUrl(this.cover):this.cover:null)}replacements(){return this.spine.hooks.serialize.register((e,o)=>{o.output=this.resources.substitute(e,o.url)}),this.resources.replacements().then(()=>this.resources.replaceCss())}getRange(e){var o=new EpubCFI(e),a=this.spine.get(o.spinePos),c=this.load.bind(this);return a?a.load(c).then(function(h){var g=o.toRange(a.document);return g}):new Promise((h,g)=>{g("CFI could not be found")})}key(e){var o=e||this.packaging.metadata.identifier||this.url.filename;return`epubjs:${EPUBJS_VERSION}:${o}`}destroy(){this.opened=void 0,this.loading=void 0,this.loaded=void 0,this.ready=void 0,this.isOpen=!1,this.isRendered=!1,this.spine&&this.spine.destroy(),this.locations&&this.locations.destroy(),this.pageList&&this.pageList.destroy(),this.archive&&this.archive.destroy(),this.resources&&this.resources.destroy(),this.container&&this.container.destroy(),this.packaging&&this.packaging.destroy(),this.rendition&&this.rendition.destroy(),this.displayOptions&&this.displayOptions.destroy(),this.spine=void 0,this.locations=void 0,this.pageList=void 0,this.archive=void 0,this.resources=void 0,this.container=void 0,this.packaging=void 0,this.rendition=void 0,this.navigation=void 0,this.url=void 0,this.path=void 0,this.archived=!1}}EventEmitter(Book.prototype);function ePub(s,e){return new Book(s,e)}ePub.VERSION=EPUBJS_VERSION;typeof globalThis<"u"&&(globalThis.EPUBJS_VERSION=EPUBJS_VERSION);ePub.Book=Book;ePub.Rendition=Rendition;ePub.Contents=Contents;ePub.CFI=EpubCFI;ePub.utils=utils$2;var pdf$1={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(e,o){module.exports=e.pdfjsLib=o()})(globalThis,()=>(()=>{var __webpack_modules__=[,(s,e)=>{var tr;Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.RenderingIntentFlag=e.PromiseCapability=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.MAX_IMAGE_SIZE_TO_CACHE=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.BASELINE_FACTOR=e.AnnotationType=e.AnnotationReplyType=e.AnnotationPrefix=e.AnnotationMode=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.assert=Jt,e.bytesToString=Wt,e.createValidAbsoluteUrl=_n,e.getModificationDate=In,e.getUuid=Jn,e.getVerbosityLevel=qt,e.info=Vt,e.isArrayBuffer=Tn,e.isArrayEqual=On,e.isNodeJS=void 0,e.normalizeUnicode=er,e.objectFromMap=An,e.objectSize=bn,e.setVerbosityLevel=Tt,e.shadow=xn,e.string32=rn,e.stringToBytes=un,e.stringToPDFString=kn,e.stringToUTF8String=en,e.unreachable=It,e.utf8StringToString=hn,e.warn=Zt;const o=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=o;const a=[1,0,0,1,0,0];e.IDENTITY_MATRIX=a;const c=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=c;const h=1e7;e.MAX_IMAGE_SIZE_TO_CACHE=h;const g=1.35;e.LINE_FACTOR=g;const b=.35;e.LINE_DESCENT_FACTOR=b;const _=b/g;e.BASELINE_FACTOR=_;const j={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=j;const $={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=$;const _e="pdfjs_internal_editor_";e.AnnotationEditorPrefix=_e;const tt={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};e.AnnotationEditorType=tt;const et={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};e.AnnotationEditorParamsType=et;const ut={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=ut;const ht={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=ht;const st={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=st;const nt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=nt;const rt={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=rt;const at={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=at;const dt={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=dt;const ot={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=ot;const ct={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=ct;const vt={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=vt;const mt={O:"PageOpen",C:"PageClose"};e.PageActionEventType=mt;const pt={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=pt;const Et={NONE:0,BINARY:1};e.CMapCompressionType=Et;const Ct={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=Ct;const Nt={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=Nt;let Ut=pt.WARNINGS;function Tt(Cn){Number.isInteger(Cn)&&(Ut=Cn)}function qt(){return Ut}function Vt(Cn){Ut>=pt.INFOS&&console.log(`Info: ${Cn}`)}function Zt(Cn){Ut>=pt.WARNINGS&&console.log(`Warning: ${Cn}`)}function It(Cn){throw new Error(Cn)}function Jt(Cn,St){Cn||It(St)}function fn(Cn){switch(Cn==null?void 0:Cn.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function _n(Cn,St=null,zt=null){if(!Cn)return null;try{if(zt&&typeof Cn=="string"){if(zt.addDefaultProtocol&&Cn.startsWith("www.")){const gn=Cn.match(/\./g);(gn==null?void 0:gn.length)>=2&&(Cn=`http://${Cn}`)}if(zt.tryConvertEncoding)try{Cn=en(Cn)}catch{}}const sn=St?new URL(Cn,St):new URL(Cn);if(fn(sn))return sn}catch{}return null}function xn(Cn,St,zt,sn=!1){return Object.defineProperty(Cn,St,{value:zt,enumerable:!sn,configurable:!0,writable:!1}),zt}const Mt=function(){function St(zt,sn){this.constructor===St&&It("Cannot initialize BaseException."),this.message=zt,this.name=sn}return St.prototype=new Error,St.constructor=St,St}();e.BaseException=Mt;class xt extends Mt{constructor(St,zt){super(St,"PasswordException"),this.code=zt}}e.PasswordException=xt;class At extends Mt{constructor(St,zt){super(St,"UnknownErrorException"),this.details=zt}}e.UnknownErrorException=At;class wt extends Mt{constructor(St){super(St,"InvalidPDFException")}}e.InvalidPDFException=wt;class kt extends Mt{constructor(St){super(St,"MissingPDFException")}}e.MissingPDFException=kt;class Dt extends Mt{constructor(St,zt){super(St,"UnexpectedResponseException"),this.status=zt}}e.UnexpectedResponseException=Dt;class Ft extends Mt{constructor(St){super(St,"FormatError")}}e.FormatError=Ft;class $t extends Mt{constructor(St){super(St,"AbortException")}}e.AbortException=$t;function Wt(Cn){(typeof Cn!="object"||(Cn==null?void 0:Cn.length)===void 0)&&It("Invalid argument for bytesToString");const St=Cn.length,zt=8192;if(St<zt)return String.fromCharCode.apply(null,Cn);const sn=[];for(let gn=0;gn<St;gn+=zt){const tn=Math.min(gn+zt,St),Sn=Cn.subarray(gn,tn);sn.push(String.fromCharCode.apply(null,Sn))}return sn.join("")}function un(Cn){typeof Cn!="string"&&It("Invalid argument for stringToBytes");const St=Cn.length,zt=new Uint8Array(St);for(let sn=0;sn<St;++sn)zt[sn]=Cn.charCodeAt(sn)&255;return zt}function rn(Cn){return String.fromCharCode(Cn>>24&255,Cn>>16&255,Cn>>8&255,Cn&255)}function bn(Cn){return Object.keys(Cn).length}function An(Cn){const St=Object.create(null);for(const[zt,sn]of Cn)St[zt]=sn;return St}function Nn(){const Cn=new Uint8Array(4);return Cn[0]=1,new Uint32Array(Cn.buffer,0,1)[0]===1}function wn(){try{return new Function(""),!0}catch{return!1}}class jn{static get isLittleEndian(){return xn(this,"isLittleEndian",Nn())}static get isEvalSupported(){return xn(this,"isEvalSupported",wn())}static get isOffscreenCanvasSupported(){return xn(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?xn(this,"platform",{isWin:!1,isMac:!1}):xn(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var St,zt;return xn(this,"isCSSRoundSupported",(zt=(St=globalThis.CSS)==null?void 0:St.supports)==null?void 0:zt.call(St,"width: round(1.5px, 1px)"))}}e.FeatureTest=jn;const Xn=[...Array(256).keys()].map(Cn=>Cn.toString(16).padStart(2,"0"));class Ln{static makeHexColor(St,zt,sn){return`#${Xn[St]}${Xn[zt]}${Xn[sn]}`}static scaleMinMax(St,zt){let sn;St[0]?(St[0]<0&&(sn=zt[0],zt[0]=zt[1],zt[1]=sn),zt[0]*=St[0],zt[1]*=St[0],St[3]<0&&(sn=zt[2],zt[2]=zt[3],zt[3]=sn),zt[2]*=St[3],zt[3]*=St[3]):(sn=zt[0],zt[0]=zt[2],zt[2]=sn,sn=zt[1],zt[1]=zt[3],zt[3]=sn,St[1]<0&&(sn=zt[2],zt[2]=zt[3],zt[3]=sn),zt[2]*=St[1],zt[3]*=St[1],St[2]<0&&(sn=zt[0],zt[0]=zt[1],zt[1]=sn),zt[0]*=St[2],zt[1]*=St[2]),zt[0]+=St[4],zt[1]+=St[4],zt[2]+=St[5],zt[3]+=St[5]}static transform(St,zt){return[St[0]*zt[0]+St[2]*zt[1],St[1]*zt[0]+St[3]*zt[1],St[0]*zt[2]+St[2]*zt[3],St[1]*zt[2]+St[3]*zt[3],St[0]*zt[4]+St[2]*zt[5]+St[4],St[1]*zt[4]+St[3]*zt[5]+St[5]]}static applyTransform(St,zt){const sn=St[0]*zt[0]+St[1]*zt[2]+zt[4],gn=St[0]*zt[1]+St[1]*zt[3]+zt[5];return[sn,gn]}static applyInverseTransform(St,zt){const sn=zt[0]*zt[3]-zt[1]*zt[2],gn=(St[0]*zt[3]-St[1]*zt[2]+zt[2]*zt[5]-zt[4]*zt[3])/sn,tn=(-St[0]*zt[1]+St[1]*zt[0]+zt[4]*zt[1]-zt[5]*zt[0])/sn;return[gn,tn]}static getAxialAlignedBoundingBox(St,zt){const sn=this.applyTransform(St,zt),gn=this.applyTransform(St.slice(2,4),zt),tn=this.applyTransform([St[0],St[3]],zt),Sn=this.applyTransform([St[2],St[1]],zt);return[Math.min(sn[0],gn[0],tn[0],Sn[0]),Math.min(sn[1],gn[1],tn[1],Sn[1]),Math.max(sn[0],gn[0],tn[0],Sn[0]),Math.max(sn[1],gn[1],tn[1],Sn[1])]}static inverseTransform(St){const zt=St[0]*St[3]-St[1]*St[2];return[St[3]/zt,-St[1]/zt,-St[2]/zt,St[0]/zt,(St[2]*St[5]-St[4]*St[3])/zt,(St[4]*St[1]-St[5]*St[0])/zt]}static singularValueDecompose2dScale(St){const zt=[St[0],St[2],St[1],St[3]],sn=St[0]*zt[0]+St[1]*zt[2],gn=St[0]*zt[1]+St[1]*zt[3],tn=St[2]*zt[0]+St[3]*zt[2],Sn=St[2]*zt[1]+St[3]*zt[3],_t=(sn+Sn)/2,ln=Math.sqrt((sn+Sn)**2-4*(sn*Sn-tn*gn))/2,Pn=_t+ln||1,ft=_t-ln||1;return[Math.sqrt(Pn),Math.sqrt(ft)]}static normalizeRect(St){const zt=St.slice(0);return St[0]>St[2]&&(zt[0]=St[2],zt[2]=St[0]),St[1]>St[3]&&(zt[1]=St[3],zt[3]=St[1]),zt}static intersect(St,zt){const sn=Math.max(Math.min(St[0],St[2]),Math.min(zt[0],zt[2])),gn=Math.min(Math.max(St[0],St[2]),Math.max(zt[0],zt[2]));if(sn>gn)return null;const tn=Math.max(Math.min(St[1],St[3]),Math.min(zt[1],zt[3])),Sn=Math.min(Math.max(St[1],St[3]),Math.max(zt[1],zt[3]));return tn>Sn?null:[sn,tn,gn,Sn]}static bezierBoundingBox(St,zt,sn,gn,tn,Sn,_t,ln){const Pn=[],ft=[[],[]];let nn,cn,Rt,Bt,dn,Rn,Ot,yt;for(let Qt=0;Qt<2;++Qt){if(Qt===0?(cn=6*St-12*sn+6*tn,nn=-3*St+9*sn-9*tn+3*_t,Rt=3*sn-3*St):(cn=6*zt-12*gn+6*Sn,nn=-3*zt+9*gn-9*Sn+3*ln,Rt=3*gn-3*zt),Math.abs(nn)<1e-12){if(Math.abs(cn)<1e-12)continue;Bt=-Rt/cn,0<Bt&&Bt<1&&Pn.push(Bt);continue}Ot=cn*cn-4*Rt*nn,yt=Math.sqrt(Ot),!(Ot<0)&&(dn=(-cn+yt)/(2*nn),0<dn&&dn<1&&Pn.push(dn),Rn=(-cn-yt)/(2*nn),0<Rn&&Rn<1&&Pn.push(Rn))}let Pt=Pn.length,Ht;const Kt=Pt;for(;Pt--;)Bt=Pn[Pt],Ht=1-Bt,ft[0][Pt]=Ht*Ht*Ht*St+3*Ht*Ht*Bt*sn+3*Ht*Bt*Bt*tn+Bt*Bt*Bt*_t,ft[1][Pt]=Ht*Ht*Ht*zt+3*Ht*Ht*Bt*gn+3*Ht*Bt*Bt*Sn+Bt*Bt*Bt*ln;return ft[0][Kt]=St,ft[1][Kt]=zt,ft[0][Kt+1]=_t,ft[1][Kt+1]=ln,ft[0].length=ft[1].length=Kt+2,[Math.min(...ft[0]),Math.min(...ft[1]),Math.max(...ft[0]),Math.max(...ft[1])]}}e.Util=Ln;const Un=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function kn(Cn){if(Cn[0]>=""){let zt;if(Cn[0]===""&&Cn[1]===""?zt="utf-16be":Cn[0]===""&&Cn[1]===""?zt="utf-16le":Cn[0]===""&&Cn[1]===""&&Cn[2]===""&&(zt="utf-8"),zt)try{const sn=new TextDecoder(zt,{fatal:!0}),gn=un(Cn);return sn.decode(gn)}catch(sn){Zt(`stringToPDFString: "${sn}".`)}}const St=[];for(let zt=0,sn=Cn.length;zt<sn;zt++){const gn=Un[Cn.charCodeAt(zt)];St.push(gn?String.fromCharCode(gn):Cn.charAt(zt))}return St.join("")}function en(Cn){return decodeURIComponent(escape(Cn))}function hn(Cn){return unescape(encodeURIComponent(Cn))}function Tn(Cn){return typeof Cn=="object"&&(Cn==null?void 0:Cn.byteLength)!==void 0}function On(Cn,St){if(Cn.length!==St.length)return!1;for(let zt=0,sn=Cn.length;zt<sn;zt++)if(Cn[zt]!==St[zt])return!1;return!0}function In(Cn=new Date){return[Cn.getUTCFullYear().toString(),(Cn.getUTCMonth()+1).toString().padStart(2,"0"),Cn.getUTCDate().toString().padStart(2,"0"),Cn.getUTCHours().toString().padStart(2,"0"),Cn.getUTCMinutes().toString().padStart(2,"0"),Cn.getUTCSeconds().toString().padStart(2,"0")].join("")}class Zn{constructor(){Yt(this,tr,!1);this.promise=new Promise((St,zt)=>{this.resolve=sn=>{yn(this,tr,!0),St(sn)},this.reject=sn=>{yn(this,tr,!0),zt(sn)}})}get settled(){return bt(this,tr)}}tr=new WeakMap,e.PromiseCapability=Zn;let Qn=null,Kn=null;function er(Cn){return Qn||(Qn=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Kn=new Map([["","t"]])),Cn.replaceAll(Qn,(St,zt,sn)=>zt?zt.normalize("NFKC"):Kn.get(sn))}function Jn(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const Cn=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(Cn);else for(let St=0;St<32;St++)Cn[St]=Math.floor(Math.random()*255);return Wt(Cn)}const Yn="pdfjs_internal_id_";e.AnnotationPrefix=Yn},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var s,o,a,c,Cr,g,qr,_,j,$,_e,tt,et,ut,ht,st,Hr,rt,at,cs,ot,ct;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(mt){if(typeof mt=="string"||mt instanceof URL?mt={url:mt}:(0,_util.isArrayBuffer)(mt)&&(mt={data:mt}),typeof mt!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!mt.url&&!mt.data&&!mt.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const pt=new PDFDocumentLoadingTask,{docId:Et}=pt,Ct=mt.url?getUrlProp(mt.url):null,Nt=mt.data?getDataProp(mt.data):null,Ut=mt.httpHeaders||null,Tt=mt.withCredentials===!0,qt=mt.password??null,Vt=mt.range instanceof PDFDataRangeTransport?mt.range:null,Zt=Number.isInteger(mt.rangeChunkSize)&&mt.rangeChunkSize>0?mt.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let It=mt.worker instanceof PDFWorker?mt.worker:null;const Jt=mt.verbosity,fn=typeof mt.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(mt.docBaseUrl)?mt.docBaseUrl:null,_n=typeof mt.cMapUrl=="string"?mt.cMapUrl:null,xn=mt.cMapPacked!==!1,Mt=mt.CMapReaderFactory||DefaultCMapReaderFactory,xt=typeof mt.standardFontDataUrl=="string"?mt.standardFontDataUrl:null,At=mt.StandardFontDataFactory||DefaultStandardFontDataFactory,wt=mt.stopAtErrors!==!0,kt=Number.isInteger(mt.maxImageSize)&&mt.maxImageSize>-1?mt.maxImageSize:-1,Dt=mt.isEvalSupported!==!1,Ft=typeof mt.isOffscreenCanvasSupported=="boolean"?mt.isOffscreenCanvasSupported:!_util.isNodeJS,$t=Number.isInteger(mt.canvasMaxAreaInBytes)?mt.canvasMaxAreaInBytes:-1,Wt=typeof mt.disableFontFace=="boolean"?mt.disableFontFace:_util.isNodeJS,un=mt.fontExtraProperties===!0,rn=mt.enableXfa===!0,bn=mt.ownerDocument||globalThis.document,An=mt.disableRange===!0,Nn=mt.disableStream===!0,wn=mt.disableAutoFetch===!0,jn=mt.pdfBug===!0,Xn=Vt?Vt.length:mt.length??NaN,Ln=typeof mt.useSystemFonts=="boolean"?mt.useSystemFonts:!_util.isNodeJS&&!Wt,Un=typeof mt.useWorkerFetch=="boolean"?mt.useWorkerFetch:Mt===_display_utils.DOMCMapReaderFactory&&At===_display_utils.DOMStandardFontDataFactory&&_n&&xt&&(0,_display_utils.isValidFetchUrl)(_n,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(xt,document.baseURI),kn=mt.canvasFactory||new DefaultCanvasFactory({ownerDocument:bn}),en=mt.filterFactory||new DefaultFilterFactory({docId:Et,ownerDocument:bn}),hn=null;(0,_util.setVerbosityLevel)(Jt);const Tn={canvasFactory:kn,filterFactory:en};if(Un||(Tn.cMapReaderFactory=new Mt({baseUrl:_n,isCompressed:xn}),Tn.standardFontDataFactory=new At({baseUrl:xt})),!It){const Zn={verbosity:Jt,port:_worker_options.GlobalWorkerOptions.workerPort};It=Zn.port?PDFWorker.fromPort(Zn):new PDFWorker(Zn),pt._worker=It}const On={docId:Et,apiVersion:"3.11.174",data:Nt,password:qt,disableAutoFetch:wn,rangeChunkSize:Zt,length:Xn,docBaseUrl:fn,enableXfa:rn,evaluatorOptions:{maxImageSize:kt,disableFontFace:Wt,ignoreErrors:wt,isEvalSupported:Dt,isOffscreenCanvasSupported:Ft,canvasMaxAreaInBytes:$t,fontExtraProperties:un,useSystemFonts:Ln,cMapUrl:Un?_n:null,standardFontDataUrl:Un?xt:null}},In={ignoreErrors:wt,isEvalSupported:Dt,disableFontFace:Wt,fontExtraProperties:un,enableXfa:rn,ownerDocument:bn,disableAutoFetch:wn,pdfBug:jn,styleElement:hn};return It.promise.then(function(){if(pt.destroyed)throw new Error("Loading aborted");const Zn=_fetchDocument(It,On),Qn=new Promise(function(Kn){let er;Vt?er=new _transport_stream.PDFDataTransportStream({length:Xn,initialData:Vt.initialData,progressiveDone:Vt.progressiveDone,contentDispositionFilename:Vt.contentDispositionFilename,disableRange:An,disableStream:Nn},Vt):Nt||(er=(Yn=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Yn):(0,_display_utils.isValidFetchUrl)(Yn.url)?new _displayFetch_stream.PDFFetchStream(Yn):new _displayNetwork.PDFNetworkStream(Yn))({url:Ct,length:Xn,httpHeaders:Ut,withCredentials:Tt,rangeChunkSize:Zt,disableRange:An,disableStream:Nn})),Kn(er)});return Promise.all([Zn,Qn]).then(function([Kn,er]){if(pt.destroyed)throw new Error("Loading aborted");const Jn=new _message_handler.MessageHandler(Et,Kn,It.port),Yn=new WorkerTransport(Jn,pt,er,In,Tn);pt._transport=Yn,Jn.send("Ready",null)})}).catch(pt._capability.reject),pt}async function _fetchDocument(mt,pt){if(mt.destroyed)throw new Error("Worker was destroyed");const Et=await mt.messageHandler.sendWithPromise("GetDocRequest",pt,pt.data?[pt.data.buffer]:null);if(mt.destroyed)throw new Error("Worker was destroyed");return Et}function getUrlProp(mt){if(mt instanceof URL)return mt.href;try{return new URL(mt,window.location).href}catch{if(_util.isNodeJS&&typeof mt=="string")return mt}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(mt){if(_util.isNodeJS&&typeof Buffer<"u"&&mt instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(mt instanceof Uint8Array&&mt.byteLength===mt.buffer.byteLength)return mt;if(typeof mt=="string")return(0,_util.stringToBytes)(mt);if(typeof mt=="object"&&!isNaN(mt==null?void 0:mt.length)||(0,_util.isArrayBuffer)(mt))return new Uint8Array(mt);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const e=class e{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${Lr(e,s)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var pt,Et,Ct;this.destroyed=!0;try{(pt=this._worker)!=null&&pt.port&&(this._worker._pendingDestroy=!0),await((Et=this._transport)==null?void 0:Et.destroy())}catch(Nt){throw(Ct=this._worker)!=null&&Ct.port&&delete this._worker._pendingDestroy,Nt}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};s=new WeakMap,Yt(e,s,0);let PDFDocumentLoadingTask=e;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(pt,Et,Ct=!1,Nt=null){this.length=pt,this.initialData=Et,this.progressiveDone=Ct,this.contentDispositionFilename=Nt,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(pt){this._rangeListeners.push(pt)}addProgressListener(pt){this._progressListeners.push(pt)}addProgressiveReadListener(pt){this._progressiveReadListeners.push(pt)}addProgressiveDoneListener(pt){this._progressiveDoneListeners.push(pt)}onDataRange(pt,Et){for(const Ct of this._rangeListeners)Ct(pt,Et)}onDataProgress(pt,Et){this._readyCapability.promise.then(()=>{for(const Ct of this._progressListeners)Ct(pt,Et)})}onDataProgressiveRead(pt){this._readyCapability.promise.then(()=>{for(const Et of this._progressiveReadListeners)Et(pt)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const pt of this._progressiveDoneListeners)pt()})}transportReady(){this._readyCapability.resolve()}requestDataRange(pt,Et){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(pt,Et){this._pdfInfo=pt,this._transport=Et,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(Ct=>{if(!Ct)return Ct;const Nt=[];for(const Ut in Ct)Nt.push(...Ct[Ut]);return Nt}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(pt){return this._transport.getPage(pt)}getPageIndex(pt){return this._transport.getPageIndex(pt)}getDestinations(){return this._transport.getDestinations()}getDestination(pt){return this._transport.getDestination(pt)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(pt=!1){return this._transport.startCleanup(pt||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(pt,Et,Ct,Nt=!1){Yt(this,c);Yt(this,g);Yt(this,o,null);Yt(this,a,!1);this._pageIndex=pt,this._pageInfo=Et,this._transport=Ct,this._stats=Nt?new _display_utils.StatTimer:null,this._pdfBug=Nt,this.commonObjs=Ct.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:pt,rotation:Et=this.rotate,offsetX:Ct=0,offsetY:Nt=0,dontFlip:Ut=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:pt,rotation:Et,offsetX:Ct,offsetY:Nt,dontFlip:Ut})}getAnnotations({intent:pt="display"}={}){const Et=this._transport.getRenderingIntent(pt);return this._transport.getAnnotations(this._pageIndex,Et.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var pt;return((pt=this._transport._htmlForXfa)==null?void 0:pt.children[this._pageIndex])||null}render({canvasContext:pt,viewport:Et,intent:Ct="display",annotationMode:Nt=_util.AnnotationMode.ENABLE,transform:Ut=null,background:Tt=null,optionalContentConfigPromise:qt=null,annotationCanvasMap:Vt=null,pageColors:Zt=null,printAnnotationStorage:It=null}){var At,wt;(At=this._stats)==null||At.time("Overall");const Jt=this._transport.getRenderingIntent(Ct,Nt,It);yn(this,a,!1),an(this,g,qr).call(this),qt||(qt=this._transport.getOptionalContentConfig());let fn=this._intentStates.get(Jt.cacheKey);fn||(fn=Object.create(null),this._intentStates.set(Jt.cacheKey,fn)),fn.streamReaderCancelTimeout&&(clearTimeout(fn.streamReaderCancelTimeout),fn.streamReaderCancelTimeout=null);const _n=!!(Jt.renderingIntent&_util.RenderingIntentFlag.PRINT);fn.displayReadyCapability||(fn.displayReadyCapability=new _util.PromiseCapability,fn.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(wt=this._stats)==null||wt.time("Page Request"),this._pumpOperatorList(Jt));const xn=kt=>{var Dt,Ft;fn.renderTasks.delete(Mt),(this._maybeCleanupAfterRender||_n)&&yn(this,a,!0),an(this,c,Cr).call(this,!_n),kt?(Mt.capability.reject(kt),this._abortOperatorList({intentState:fn,reason:kt instanceof Error?kt:new Error(kt)})):Mt.capability.resolve(),(Dt=this._stats)==null||Dt.timeEnd("Rendering"),(Ft=this._stats)==null||Ft.timeEnd("Overall")},Mt=new InternalRenderTask({callback:xn,params:{canvasContext:pt,viewport:Et,transform:Ut,background:Tt},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Vt,operatorList:fn.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!_n,pdfBug:this._pdfBug,pageColors:Zt});(fn.renderTasks||(fn.renderTasks=new Set)).add(Mt);const xt=Mt.task;return Promise.all([fn.displayReadyCapability.promise,qt]).then(([kt,Dt])=>{var Ft;if(this.destroyed){xn();return}(Ft=this._stats)==null||Ft.time("Rendering"),Mt.initializeGraphics({transparency:kt,optionalContentConfig:Dt}),Mt.operatorListChanged()}).catch(xn),xt}getOperatorList({intent:pt="display",annotationMode:Et=_util.AnnotationMode.ENABLE,printAnnotationStorage:Ct=null}={}){var Vt;function Nt(){Tt.operatorList.lastChunk&&(Tt.opListReadCapability.resolve(Tt.operatorList),Tt.renderTasks.delete(qt))}const Ut=this._transport.getRenderingIntent(pt,Et,Ct,!0);let Tt=this._intentStates.get(Ut.cacheKey);Tt||(Tt=Object.create(null),this._intentStates.set(Ut.cacheKey,Tt));let qt;return Tt.opListReadCapability||(qt=Object.create(null),qt.operatorListChanged=Nt,Tt.opListReadCapability=new _util.PromiseCapability,(Tt.renderTasks||(Tt.renderTasks=new Set)).add(qt),Tt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Vt=this._stats)==null||Vt.time("Page Request"),this._pumpOperatorList(Ut)),Tt.opListReadCapability.promise}streamTextContent({includeMarkedContent:pt=!1,disableNormalization:Et=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:pt===!0,disableNormalization:Et===!0},{highWaterMark:100,size(Nt){return Nt.items.length}})}getTextContent(pt={}){if(this._transport._htmlForXfa)return this.getXfa().then(Ct=>_xfa_text.XfaText.textContent(Ct));const Et=this.streamTextContent(pt);return new Promise(function(Ct,Nt){function Ut(){Tt.read().then(function({value:Vt,done:Zt}){if(Zt){Ct(qt);return}Object.assign(qt.styles,Vt.styles),qt.items.push(...Vt.items),Ut()},Nt)}const Tt=Et.getReader(),qt={items:[],styles:Object.create(null)};Ut()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const pt=[];for(const Et of this._intentStates.values())if(this._abortOperatorList({intentState:Et,reason:new Error("Page was destroyed."),force:!0}),!Et.opListReadCapability)for(const Ct of Et.renderTasks)pt.push(Ct.completed),Ct.cancel();return this.objs.clear(),yn(this,a,!1),an(this,g,qr).call(this),Promise.all(pt)}cleanup(pt=!1){yn(this,a,!0);const Et=an(this,c,Cr).call(this,!1);return pt&&Et&&this._stats&&(this._stats=new _display_utils.StatTimer),Et}_startRenderPage(pt,Et){var Nt,Ut;const Ct=this._intentStates.get(Et);Ct&&((Nt=this._stats)==null||Nt.timeEnd("Page Request"),(Ut=Ct.displayReadyCapability)==null||Ut.resolve(pt))}_renderPageChunk(pt,Et){for(let Ct=0,Nt=pt.length;Ct<Nt;Ct++)Et.operatorList.fnArray.push(pt.fnArray[Ct]),Et.operatorList.argsArray.push(pt.argsArray[Ct]);Et.operatorList.lastChunk=pt.lastChunk,Et.operatorList.separateAnnots=pt.separateAnnots;for(const Ct of Et.renderTasks)Ct.operatorListChanged();pt.lastChunk&&an(this,c,Cr).call(this,!0)}_pumpOperatorList({renderingIntent:pt,cacheKey:Et,annotationStorageSerializable:Ct}){const{map:Nt,transfers:Ut}=Ct,qt=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:pt,cacheKey:Et,annotationStorage:Nt},Ut).getReader(),Vt=this._intentStates.get(Et);Vt.streamReader=qt;const Zt=()=>{qt.read().then(({value:It,done:Jt})=>{if(Jt){Vt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(It,Vt),Zt())},It=>{if(Vt.streamReader=null,!this._transport.destroyed){if(Vt.operatorList){Vt.operatorList.lastChunk=!0;for(const Jt of Vt.renderTasks)Jt.operatorListChanged();an(this,c,Cr).call(this,!0)}if(Vt.displayReadyCapability)Vt.displayReadyCapability.reject(It);else if(Vt.opListReadCapability)Vt.opListReadCapability.reject(It);else throw It}})};Zt()}_abortOperatorList({intentState:pt,reason:Et,force:Ct=!1}){if(pt.streamReader){if(pt.streamReaderCancelTimeout&&(clearTimeout(pt.streamReaderCancelTimeout),pt.streamReaderCancelTimeout=null),!Ct){if(pt.renderTasks.size>0)return;if(Et instanceof _display_utils.RenderingCancelledException){let Nt=RENDERING_CANCELLED_TIMEOUT;Et.extraDelay>0&&Et.extraDelay<1e3&&(Nt+=Et.extraDelay),pt.streamReaderCancelTimeout=setTimeout(()=>{pt.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:pt,reason:Et,force:!0})},Nt);return}}if(pt.streamReader.cancel(new _util.AbortException(Et.message)).catch(()=>{}),pt.streamReader=null,!this._transport.destroyed){for(const[Nt,Ut]of this._intentStates)if(Ut===pt){this._intentStates.delete(Nt);break}this.cleanup()}}}get stats(){return this._stats}}o=new WeakMap,a=new WeakMap,c=new WeakSet,Cr=function(pt=!1){if(an(this,g,qr).call(this),!bt(this,a)||this.destroyed)return!1;if(pt)return yn(this,o,setTimeout(()=>{yn(this,o,null),an(this,c,Cr).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:Et,operatorList:Ct}of this._intentStates.values())if(Et.size>0||!Ct.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),yn(this,a,!1),!0},g=new WeakSet,qr=function(){bt(this,o)&&(clearTimeout(bt(this,o)),yn(this,o,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){Yt(this,_,new Set);Yt(this,j,Promise.resolve())}postMessage(pt,Et){const Ct={data:structuredClone(pt,Et?{transfer:Et}:null)};bt(this,j).then(()=>{for(const Nt of bt(this,_))Nt.call(this,Ct)})}addEventListener(pt,Et){bt(this,_).add(Et)}removeEventListener(pt,Et){bt(this,_).delete(Et)}terminate(){bt(this,_).clear()}}_=new WeakMap,j=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const mt=($=document==null?void 0:document.currentScript)==null?void 0:$.src;mt&&(PDFWorkerUtil.fallbackWorkerSrc=mt.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(mt,pt){let Et;try{if(Et=new URL(mt),!Et.origin||Et.origin==="null")return!1}catch{return!1}const Ct=new URL(pt,Et);return Et.origin===Ct.origin},PDFWorkerUtil.createCDNWrapper=function(mt){const pt=`importScripts("${mt}");`;return URL.createObjectURL(new Blob([pt]))}}const _PDFWorker=class _PDFWorker{constructor({name:mt=null,port:pt=null,verbosity:Et=(0,_util.getVerbosityLevel)()}={}){var Ct;if(this.name=mt,this.destroyed=!1,this.verbosity=Et,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,pt){if((Ct=bt(_PDFWorker,_e))!=null&&Ct.has(pt))throw new Error("Cannot use more than one PDFWorker per port.");(bt(_PDFWorker,_e)||yn(_PDFWorker,_e,new WeakMap)).set(pt,this),this._initializeFromPort(pt);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(mt){this._port=mt,this._messageHandler=new _message_handler.MessageHandler("main","worker",mt),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:mt}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,mt)||(mt=PDFWorkerUtil.createCDNWrapper(new URL(mt,window.location).href));const pt=new Worker(mt),Et=new _message_handler.MessageHandler("main","worker",pt),Ct=()=>{pt.removeEventListener("error",Nt),Et.destroy(),pt.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},Nt=()=>{this._webWorker||Ct()};pt.addEventListener("error",Nt),Et.on("test",Tt=>{if(pt.removeEventListener("error",Nt),this.destroyed){Ct();return}Tt?(this._messageHandler=Et,this._port=pt,this._webWorker=pt,this._readyCapability.resolve(),Et.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),Et.destroy(),pt.terminate())}),Et.on("ready",Tt=>{if(pt.removeEventListener("error",Nt),this.destroyed){Ct();return}try{Ut()}catch{this._setupFakeWorker()}});const Ut=()=>{const Tt=new Uint8Array;Et.send("test",Tt,[Tt.buffer])};Ut();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(mt=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const pt=new LoopbackPort;this._port=pt;const Et=`fake${PDFWorkerUtil.fakeWorkerId++}`,Ct=new _message_handler.MessageHandler(Et+"_worker",Et,pt);mt.setup(Ct,pt);const Nt=new _message_handler.MessageHandler(Et,Et+"_worker",pt);this._messageHandler=Nt,this._readyCapability.resolve(),Nt.send("configure",{verbosity:this.verbosity})}).catch(mt=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${mt.message}".`))})}destroy(){var mt;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(mt=bt(_PDFWorker,_e))==null||mt.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(mt){var Et;if(!(mt!=null&&mt.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const pt=(Et=bt(this,_e))==null?void 0:Et.get(mt.port);if(pt){if(pt._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return pt}return new _PDFWorker(mt)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var mt;try{return((mt=globalThis.pdfjsWorker)==null?void 0:mt.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};_e=new WeakMap,Yt(_PDFWorker,_e,void 0);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(pt,Et,Ct,Nt,Ut){Yt(this,st);Yt(this,tt,new Map);Yt(this,et,new Map);Yt(this,ut,new Map);Yt(this,ht,null);this.messageHandler=pt,this.loadingTask=Et,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:Nt.ownerDocument,styleElement:Nt.styleElement}),this._params=Nt,this.canvasFactory=Ut.canvasFactory,this.filterFactory=Ut.filterFactory,this.cMapReaderFactory=Ut.cMapReaderFactory,this.standardFontDataFactory=Ut.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=Ct,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(pt,Et=_util.AnnotationMode.ENABLE,Ct=null,Nt=!1){let Ut=_util.RenderingIntentFlag.DISPLAY,Tt=_annotation_storage.SerializableEmpty;switch(pt){case"any":Ut=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":Ut=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${pt}`)}switch(Et){case _util.AnnotationMode.DISABLE:Ut+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:Ut+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:Ut+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,Tt=(Ut&_util.RenderingIntentFlag.PRINT&&Ct instanceof _annotation_storage.PrintAnnotationStorage?Ct:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${Et}`)}return Nt&&(Ut+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:Ut,cacheKey:`${Ut}_${Tt.hash}`,annotationStorageSerializable:Tt}}destroy(){var Ct;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(Ct=bt(this,ht))==null||Ct.reject(new Error("Worker was destroyed during onPassword callback"));const pt=[];for(const Nt of bt(this,et).values())pt.push(Nt._destroy());bt(this,et).clear(),bt(this,ut).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const Et=this.messageHandler.sendWithPromise("Terminate",null);return pt.push(Et),Promise.all(pt).then(()=>{var Nt;this.commonObjs.clear(),this.fontLoader.clear(),bt(this,tt).clear(),this.filterFactory.destroy(),(Nt=this._networkStream)==null||Nt.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:pt,loadingTask:Et}=this;pt.on("GetReader",(Ct,Nt)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=Ut=>{this._lastProgress={loaded:Ut.loaded,total:Ut.total}},Nt.onPull=()=>{this._fullReader.read().then(function({value:Ut,done:Tt}){if(Tt){Nt.close();return}(0,_util.assert)(Ut instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),Nt.enqueue(new Uint8Array(Ut),1,[Ut])}).catch(Ut=>{Nt.error(Ut)})},Nt.onCancel=Ut=>{this._fullReader.cancel(Ut),Nt.ready.catch(Tt=>{if(!this.destroyed)throw Tt})}}),pt.on("ReaderHeadersReady",Ct=>{const Nt=new _util.PromiseCapability,Ut=this._fullReader;return Ut.headersReady.then(()=>{var Tt;(!Ut.isStreamingSupported||!Ut.isRangeSupported)&&(this._lastProgress&&((Tt=Et.onProgress)==null||Tt.call(Et,this._lastProgress)),Ut.onProgress=qt=>{var Vt;(Vt=Et.onProgress)==null||Vt.call(Et,{loaded:qt.loaded,total:qt.total})}),Nt.resolve({isStreamingSupported:Ut.isStreamingSupported,isRangeSupported:Ut.isRangeSupported,contentLength:Ut.contentLength})},Nt.reject),Nt.promise}),pt.on("GetRangeReader",(Ct,Nt)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const Ut=this._networkStream.getRangeReader(Ct.begin,Ct.end);if(!Ut){Nt.close();return}Nt.onPull=()=>{Ut.read().then(function({value:Tt,done:qt}){if(qt){Nt.close();return}(0,_util.assert)(Tt instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),Nt.enqueue(new Uint8Array(Tt),1,[Tt])}).catch(Tt=>{Nt.error(Tt)})},Nt.onCancel=Tt=>{Ut.cancel(Tt),Nt.ready.catch(qt=>{if(!this.destroyed)throw qt})}}),pt.on("GetDoc",({pdfInfo:Ct})=>{this._numPages=Ct.numPages,this._htmlForXfa=Ct.htmlForXfa,delete Ct.htmlForXfa,Et._capability.resolve(new PDFDocumentProxy(Ct,this))}),pt.on("DocException",function(Ct){let Nt;switch(Ct.name){case"PasswordException":Nt=new _util.PasswordException(Ct.message,Ct.code);break;case"InvalidPDFException":Nt=new _util.InvalidPDFException(Ct.message);break;case"MissingPDFException":Nt=new _util.MissingPDFException(Ct.message);break;case"UnexpectedResponseException":Nt=new _util.UnexpectedResponseException(Ct.message,Ct.status);break;case"UnknownErrorException":Nt=new _util.UnknownErrorException(Ct.message,Ct.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}Et._capability.reject(Nt)}),pt.on("PasswordRequest",Ct=>{if(yn(this,ht,new _util.PromiseCapability),Et.onPassword){const Nt=Ut=>{Ut instanceof Error?bt(this,ht).reject(Ut):bt(this,ht).resolve({password:Ut})};try{Et.onPassword(Nt,Ct.code)}catch(Ut){bt(this,ht).reject(Ut)}}else bt(this,ht).reject(new _util.PasswordException(Ct.message,Ct.code));return bt(this,ht).promise}),pt.on("DataLoaded",Ct=>{var Nt;(Nt=Et.onProgress)==null||Nt.call(Et,{loaded:Ct.length,total:Ct.length}),this.downloadInfoCapability.resolve(Ct)}),pt.on("StartRenderPage",Ct=>{if(this.destroyed)return;bt(this,et).get(Ct.pageIndex)._startRenderPage(Ct.transparency,Ct.cacheKey)}),pt.on("commonobj",([Ct,Nt,Ut])=>{var Tt;if(!this.destroyed&&!this.commonObjs.has(Ct))switch(Nt){case"Font":const qt=this._params;if("error"in Ut){const It=Ut.error;(0,_util.warn)(`Error during font loading: ${It}`),this.commonObjs.resolve(Ct,It);break}const Vt=qt.pdfBug&&((Tt=globalThis.FontInspector)!=null&&Tt.enabled)?(It,Jt)=>globalThis.FontInspector.fontAdded(It,Jt):null,Zt=new _font_loader.FontFaceObject(Ut,{isEvalSupported:qt.isEvalSupported,disableFontFace:qt.disableFontFace,ignoreErrors:qt.ignoreErrors,inspectFont:Vt});this.fontLoader.bind(Zt).catch(It=>pt.sendWithPromise("FontFallback",{id:Ct})).finally(()=>{!qt.fontExtraProperties&&Zt.data&&(Zt.data=null),this.commonObjs.resolve(Ct,Zt)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(Ct,Ut);break;default:throw new Error(`Got unknown common object type ${Nt}`)}}),pt.on("obj",([Ct,Nt,Ut,Tt])=>{var Vt;if(this.destroyed)return;const qt=bt(this,et).get(Nt);if(!qt.objs.has(Ct))switch(Ut){case"Image":if(qt.objs.resolve(Ct,Tt),Tt){let Zt;if(Tt.bitmap){const{width:It,height:Jt}=Tt;Zt=It*Jt*4}else Zt=((Vt=Tt.data)==null?void 0:Vt.length)||0;Zt>_util.MAX_IMAGE_SIZE_TO_CACHE&&(qt._maybeCleanupAfterRender=!0)}break;case"Pattern":qt.objs.resolve(Ct,Tt);break;default:throw new Error(`Got unknown object type ${Ut}`)}}),pt.on("DocProgress",Ct=>{var Nt;this.destroyed||(Nt=Et.onProgress)==null||Nt.call(Et,{loaded:Ct.loaded,total:Ct.total})}),pt.on("FetchBuiltInCMap",Ct=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(Ct):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),pt.on("FetchStandardFontData",Ct=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(Ct):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var Ct;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:pt,transfers:Et}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:pt,filename:((Ct=this._fullReader)==null?void 0:Ct.filename)??null},Et).finally(()=>{this.annotationStorage.resetModified()})}getPage(pt){if(!Number.isInteger(pt)||pt<=0||pt>this._numPages)return Promise.reject(new Error("Invalid page request."));const Et=pt-1,Ct=bt(this,ut).get(Et);if(Ct)return Ct;const Nt=this.messageHandler.sendWithPromise("GetPage",{pageIndex:Et}).then(Ut=>{if(this.destroyed)throw new Error("Transport destroyed");const Tt=new PDFPageProxy(Et,Ut,this,this._params.pdfBug);return bt(this,et).set(Et,Tt),Tt});return bt(this,ut).set(Et,Nt),Nt}getPageIndex(pt){return typeof pt!="object"||pt===null||!Number.isInteger(pt.num)||pt.num<0||!Number.isInteger(pt.gen)||pt.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:pt.num,gen:pt.gen})}getAnnotations(pt,Et){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:pt,intent:Et})}getFieldObjects(){return an(this,st,Hr).call(this,"GetFieldObjects")}hasJSActions(){return an(this,st,Hr).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(pt){return typeof pt!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:pt})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return an(this,st,Hr).call(this,"GetDocJSActions")}getPageJSActions(pt){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:pt})}getStructTree(pt){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:pt})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(pt=>new _optional_content_config.OptionalContentConfig(pt))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const pt="GetMetadata",Et=bt(this,tt).get(pt);if(Et)return Et;const Ct=this.messageHandler.sendWithPromise(pt,null).then(Nt=>{var Ut,Tt;return{info:Nt[0],metadata:Nt[1]?new _metadata.Metadata(Nt[1]):null,contentDispositionFilename:((Ut=this._fullReader)==null?void 0:Ut.filename)??null,contentLength:((Tt=this._fullReader)==null?void 0:Tt.contentLength)??null}});return bt(this,tt).set(pt,Ct),Ct}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(pt=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const Et of bt(this,et).values())if(!Et.cleanup())throw new Error(`startCleanup: Page ${Et.pageNumber} is currently rendering.`);this.commonObjs.clear(),pt||this.fontLoader.clear(),bt(this,tt).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:pt,enableXfa:Et}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:pt,enableXfa:Et})}}tt=new WeakMap,et=new WeakMap,ut=new WeakMap,ht=new WeakMap,st=new WeakSet,Hr=function(pt,Et=null){const Ct=bt(this,tt).get(pt);if(Ct)return Ct;const Nt=this.messageHandler.sendWithPromise(pt,Et);return bt(this,tt).set(pt,Nt),Nt};class PDFObjects{constructor(){Yt(this,at);Yt(this,rt,Object.create(null))}get(pt,Et=null){if(Et){const Nt=an(this,at,cs).call(this,pt);return Nt.capability.promise.then(()=>Et(Nt.data)),null}const Ct=bt(this,rt)[pt];if(!(Ct!=null&&Ct.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${pt}.`);return Ct.data}has(pt){const Et=bt(this,rt)[pt];return(Et==null?void 0:Et.capability.settled)||!1}resolve(pt,Et=null){const Ct=an(this,at,cs).call(this,pt);Ct.data=Et,Ct.capability.resolve()}clear(){var pt;for(const Et in bt(this,rt)){const{data:Ct}=bt(this,rt)[Et];(pt=Ct==null?void 0:Ct.bitmap)==null||pt.close()}yn(this,rt,Object.create(null))}}rt=new WeakMap,at=new WeakSet,cs=function(pt){var Et;return(Et=bt(this,rt))[pt]||(Et[pt]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(pt){Yt(this,ot,null);yn(this,ot,pt),this.onContinue=null}get promise(){return bt(this,ot).capability.promise}cancel(pt=0){bt(this,ot).cancel(null,pt)}get separateAnnots(){const{separateAnnots:pt}=bt(this,ot).operatorList;if(!pt)return!1;const{annotationCanvasMap:Et}=bt(this,ot);return pt.form||pt.canvas&&(Et==null?void 0:Et.size)>0}}ot=new WeakMap,exports.RenderTask=RenderTask;const vt=class vt{constructor({callback:pt,params:Et,objs:Ct,commonObjs:Nt,annotationCanvasMap:Ut,operatorList:Tt,pageIndex:qt,canvasFactory:Vt,filterFactory:Zt,useRequestAnimationFrame:It=!1,pdfBug:Jt=!1,pageColors:fn=null}){this.callback=pt,this.params=Et,this.objs=Ct,this.commonObjs=Nt,this.annotationCanvasMap=Ut,this.operatorListIdx=null,this.operatorList=Tt,this._pageIndex=qt,this.canvasFactory=Vt,this.filterFactory=Zt,this._pdfBug=Jt,this.pageColors=fn,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=It===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=Et.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:pt=!1,optionalContentConfig:Et}){var qt,Vt;if(this.cancelled)return;if(this._canvas){if(bt(vt,ct).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");bt(vt,ct).add(this._canvas)}this._pdfBug&&((qt=globalThis.StepperManager)!=null&&qt.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:Ct,viewport:Nt,transform:Ut,background:Tt}=this.params;this.gfx=new _canvas.CanvasGraphics(Ct,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:Et},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:Ut,viewport:Nt,transparency:pt,background:Tt}),this.operatorListIdx=0,this.graphicsReady=!0,(Vt=this.graphicsReadyCallback)==null||Vt.call(this)}cancel(pt=null,Et=0){var Ct;this.running=!1,this.cancelled=!0,(Ct=this.gfx)==null||Ct.endDrawing(),bt(vt,ct).delete(this._canvas),this.callback(pt||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,Et))}operatorListChanged(){var pt;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(pt=this.stepper)==null||pt.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),bt(vt,ct).delete(this._canvas),this.callback())))}};ct=new WeakMap,Yt(vt,ct,new WeakSet);let InternalRenderTask=vt;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(s,e,o)=>{var j,$,_e,Hs,et;Object.defineProperty(e,"__esModule",{value:!0}),e.SerializableEmpty=e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var a=o(1),c=o(4),h=o(8);const g=Object.freeze({map:null,hash:"",transfers:void 0});e.SerializableEmpty=g;class b{constructor(){Yt(this,_e);Yt(this,j,!1);Yt(this,$,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(ht,st){const nt=bt(this,$).get(ht);return nt===void 0?st:Object.assign(st,nt)}getRawValue(ht){return bt(this,$).get(ht)}remove(ht){if(bt(this,$).delete(ht),bt(this,$).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const st of bt(this,$).values())if(st instanceof c.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(ht,st){const nt=bt(this,$).get(ht);let rt=!1;if(nt!==void 0)for(const[at,dt]of Object.entries(st))nt[at]!==dt&&(rt=!0,nt[at]=dt);else rt=!0,bt(this,$).set(ht,st);rt&&an(this,_e,Hs).call(this),st instanceof c.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(st.constructor._type)}has(ht){return bt(this,$).has(ht)}getAll(){return bt(this,$).size>0?(0,a.objectFromMap)(bt(this,$)):null}setAll(ht){for(const[st,nt]of Object.entries(ht))this.setValue(st,nt)}get size(){return bt(this,$).size}resetModified(){bt(this,j)&&(yn(this,j,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new _(this)}get serializable(){if(bt(this,$).size===0)return g;const ht=new Map,st=new h.MurmurHash3_64,nt=[],rt=Object.create(null);let at=!1;for(const[dt,ot]of bt(this,$)){const ct=ot instanceof c.AnnotationEditor?ot.serialize(!1,rt):ot;ct&&(ht.set(dt,ct),st.update(`${dt}:${JSON.stringify(ct)}`),at||(at=!!ct.bitmap))}if(at)for(const dt of ht.values())dt.bitmap&&nt.push(dt.bitmap);return ht.size>0?{map:ht,hash:st.hexdigest(),transfers:nt}:g}}j=new WeakMap,$=new WeakMap,_e=new WeakSet,Hs=function(){bt(this,j)||(yn(this,j,!0),typeof this.onSetModified=="function"&&this.onSetModified())},e.AnnotationStorage=b;class _ extends b{constructor(st){super();Yt(this,et,void 0);const{map:nt,hash:rt,transfers:at}=st.serializable,dt=structuredClone(nt,at?{transfer:at}:null);yn(this,et,{map:dt,hash:rt,transfers:at})}get print(){(0,a.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return bt(this,et)}}et=new WeakMap,e.PrintAnnotationStorage=_},(s,e,o)=>{var _,j,$,_e,tt,et,ut,ht,st,nt,rt,at,dt,ot,ct,us,mt,hs,Et,ds,Nt,fs,Tt,Ws,Vt,Gs,It,Xs,fn,ps,xn,Ys;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var a=o(5),c=o(1),h=o(6);const xt=class xt{constructor(wt){Yt(this,ct);Yt(this,mt);Yt(this,Nt);Yt(this,Tt);Yt(this,Vt);Yt(this,It);Yt(this,fn);Yt(this,xn);Yt(this,_,"");Yt(this,j,!1);Yt(this,$,null);Yt(this,_e,null);Yt(this,tt,null);Yt(this,et,!1);Yt(this,ut,null);Yt(this,ht,this.focusin.bind(this));Yt(this,st,this.focusout.bind(this));Yt(this,nt,!1);Yt(this,rt,!1);Yt(this,at,!1);fr(this,"_initialOptions",Object.create(null));fr(this,"_uiManager",null);fr(this,"_focusEventsAllowed",!0);fr(this,"_l10nPromise",null);Yt(this,dt,!1);Yt(this,ot,xt._zIndex++);this.constructor===xt&&(0,c.unreachable)("Cannot initialize AnnotationEditor."),this.parent=wt.parent,this.id=wt.id,this.width=this.height=null,this.pageIndex=wt.parent.pageIndex,this.name=wt.name,this.div=null,this._uiManager=wt.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=wt.isCentered,this._structTreeParentId=null;const{rotation:kt,rawDims:{pageWidth:Dt,pageHeight:Ft,pageX:$t,pageY:Wt}}=this.parent.viewport;this.rotation=kt,this.pageRotation=(360+kt-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[Dt,Ft],this.pageTranslation=[$t,Wt];const[un,rn]=this.parentDimensions;this.x=wt.x/un,this.y=wt.y/rn,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,c.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(wt){const kt=new b({id:wt.parent.getNextId(),parent:wt.parent,uiManager:wt._uiManager});kt.annotationElementId=wt.annotationElementId,kt.deleted=!0,kt._uiManager.addToAnnotationStorage(kt)}static initialize(wt,kt=null){if(xt._l10nPromise||(xt._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(Ft=>[Ft,wt.get(Ft)]))),kt!=null&&kt.strings)for(const Ft of kt.strings)xt._l10nPromise.set(Ft,wt.get(Ft));if(xt._borderLineWidth!==-1)return;const Dt=getComputedStyle(document.documentElement);xt._borderLineWidth=parseFloat(Dt.getPropertyValue("--outline-width"))||0}static updateDefaultParams(wt,kt){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(wt){return!1}static paste(wt,kt){(0,c.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return bt(this,dt)}set _isDraggable(wt){var kt;yn(this,dt,wt),(kt=this.div)==null||kt.classList.toggle("draggable",wt)}center(){const[wt,kt]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*kt/(wt*2),this.y+=this.width*wt/(kt*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*kt/(wt*2),this.y-=this.width*wt/(kt*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(wt){this._uiManager.addCommands(wt)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=bt(this,ot)}setParent(wt){wt!==null&&(this.pageIndex=wt.pageIndex,this.pageDimensions=wt.pageDimensions),this.parent=wt}focusin(wt){this._focusEventsAllowed&&(bt(this,nt)?yn(this,nt,!1):this.parent.setSelected(this))}focusout(wt){var Dt;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const kt=wt.relatedTarget;kt!=null&&kt.closest(`#${this.id}`)||(wt.preventDefault(),(Dt=this.parent)!=null&&Dt.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(wt,kt,Dt,Ft){const[$t,Wt]=this.parentDimensions;[Dt,Ft]=this.screenToPageTranslation(Dt,Ft),this.x=(wt+Dt)/$t,this.y=(kt+Ft)/Wt,this.fixAndSetPosition()}translate(wt,kt){an(this,ct,us).call(this,this.parentDimensions,wt,kt)}translateInPage(wt,kt){an(this,ct,us).call(this,this.pageDimensions,wt,kt),this.div.scrollIntoView({block:"nearest"})}drag(wt,kt){const[Dt,Ft]=this.parentDimensions;if(this.x+=wt/Dt,this.y+=kt/Ft,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:bn,y:An}=this.div.getBoundingClientRect();this.parent.findNewParent(this,bn,An)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:$t,y:Wt}=this;const[un,rn]=an(this,mt,hs).call(this);$t+=un,Wt+=rn,this.div.style.left=`${(100*$t).toFixed(2)}%`,this.div.style.top=`${(100*Wt).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[wt,kt]=this.pageDimensions;let{x:Dt,y:Ft,width:$t,height:Wt}=this;switch($t*=wt,Wt*=kt,Dt*=wt,Ft*=kt,this.rotation){case 0:Dt=Math.max(0,Math.min(wt-$t,Dt)),Ft=Math.max(0,Math.min(kt-Wt,Ft));break;case 90:Dt=Math.max(0,Math.min(wt-Wt,Dt)),Ft=Math.min(kt,Math.max($t,Ft));break;case 180:Dt=Math.min(wt,Math.max($t,Dt)),Ft=Math.min(kt,Math.max(Wt,Ft));break;case 270:Dt=Math.min(wt,Math.max(Wt,Dt)),Ft=Math.max(0,Math.min(kt-$t,Ft));break}this.x=Dt/=wt,this.y=Ft/=kt;const[un,rn]=an(this,mt,hs).call(this);Dt+=un,Ft+=rn;const{style:bn}=this.div;bn.left=`${(100*Dt).toFixed(2)}%`,bn.top=`${(100*Ft).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(wt,kt){var Dt;return an(Dt=xt,Et,ds).call(Dt,wt,kt,this.parentRotation)}pageTranslationToScreen(wt,kt){var Dt;return an(Dt=xt,Et,ds).call(Dt,wt,kt,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:wt,pageDimensions:[kt,Dt]}=this,Ft=kt*wt,$t=Dt*wt;return c.FeatureTest.isCSSRoundSupported?[Math.round(Ft),Math.round($t)]:[Ft,$t]}setDims(wt,kt){var $t;const[Dt,Ft]=this.parentDimensions;this.div.style.width=`${(100*wt/Dt).toFixed(2)}%`,bt(this,et)||(this.div.style.height=`${(100*kt/Ft).toFixed(2)}%`),($t=bt(this,$))==null||$t.classList.toggle("small",wt<xt.SMALL_EDITOR_SIZE||kt<xt.SMALL_EDITOR_SIZE)}fixDims(){const{style:wt}=this.div,{height:kt,width:Dt}=wt,Ft=Dt.endsWith("%"),$t=!bt(this,et)&&kt.endsWith("%");if(Ft&&$t)return;const[Wt,un]=this.parentDimensions;Ft||(wt.width=`${(100*parseFloat(Dt)/Wt).toFixed(2)}%`),!bt(this,et)&&!$t&&(wt.height=`${(100*parseFloat(kt)/un).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(bt(this,$))return;const wt=yn(this,$,document.createElement("button"));wt.className="altText";const kt=await xt._l10nPromise.get("editor_alt_text_button_label");wt.textContent=kt,wt.setAttribute("aria-label",kt),wt.tabIndex="0",wt.addEventListener("contextmenu",h.noContextMenu),wt.addEventListener("pointerdown",Dt=>Dt.stopPropagation()),wt.addEventListener("click",Dt=>{Dt.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),wt.addEventListener("keydown",Dt=>{Dt.target===wt&&Dt.key==="Enter"&&(Dt.preventDefault(),this._uiManager.editAltText(this))}),an(this,fn,ps).call(this),this.div.append(wt),xt.SMALL_EDITOR_SIZE||(xt.SMALL_EDITOR_SIZE=Math.min(128,Math.round(wt.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:bt(this,_),decorative:bt(this,j)}}set altTextData({altText:wt,decorative:kt}){bt(this,_)===wt&&bt(this,j)===kt||(yn(this,_,wt),yn(this,j,kt),an(this,fn,ps).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",bt(this,ht)),this.div.addEventListener("focusout",bt(this,st));const[wt,kt]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*kt/wt).toFixed(2)}%`,this.div.style.maxHeight=`${(100*wt/kt).toFixed(2)}%`);const[Dt,Ft]=this.getInitialTranslation();return this.translate(Dt,Ft),(0,a.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(wt){const{isMac:kt}=c.FeatureTest.platform;if(wt.button!==0||wt.ctrlKey&&kt){wt.preventDefault();return}yn(this,nt,!0),an(this,xn,Ys).call(this,wt)}moveInDOM(){var wt;(wt=this.parent)==null||wt.moveEditorInDOM(this)}_setParentAndPosition(wt,kt,Dt){wt.changeParent(this),this.x=kt,this.y=Dt,this.fixAndSetPosition()}getRect(wt,kt){const Dt=this.parentScale,[Ft,$t]=this.pageDimensions,[Wt,un]=this.pageTranslation,rn=wt/Dt,bn=kt/Dt,An=this.x*Ft,Nn=this.y*$t,wn=this.width*Ft,jn=this.height*$t;switch(this.rotation){case 0:return[An+rn+Wt,$t-Nn-bn-jn+un,An+rn+wn+Wt,$t-Nn-bn+un];case 90:return[An+bn+Wt,$t-Nn+rn+un,An+bn+jn+Wt,$t-Nn+rn+wn+un];case 180:return[An-rn-wn+Wt,$t-Nn+bn+un,An-rn+Wt,$t-Nn+bn+jn+un];case 270:return[An-bn-jn+Wt,$t-Nn-rn-wn+un,An-bn+Wt,$t-Nn-rn+un];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(wt,kt){const[Dt,Ft,$t,Wt]=wt,un=$t-Dt,rn=Wt-Ft;switch(this.rotation){case 0:return[Dt,kt-Wt,un,rn];case 90:return[Dt,kt-Ft,rn,un];case 180:return[$t,kt-Ft,un,rn];case 270:return[$t,kt-Wt,rn,un];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){yn(this,at,!0)}disableEditMode(){yn(this,at,!1)}isInEditMode(){return bt(this,at)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var wt,kt;(wt=this.div)==null||wt.addEventListener("focusin",bt(this,ht)),(kt=this.div)==null||kt.addEventListener("focusout",bt(this,st))}serialize(wt=!1,kt=null){(0,c.unreachable)("An editor must be serializable")}static deserialize(wt,kt,Dt){const Ft=new this.prototype.constructor({parent:kt,id:kt.getNextId(),uiManager:Dt});Ft.rotation=wt.rotation;const[$t,Wt]=Ft.pageDimensions,[un,rn,bn,An]=Ft.getRectInCurrentCoords(wt.rect,Wt);return Ft.x=un/$t,Ft.y=rn/Wt,Ft.width=bn/$t,Ft.height=An/Wt,Ft}remove(){var wt;this.div.removeEventListener("focusin",bt(this,ht)),this.div.removeEventListener("focusout",bt(this,st)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(wt=bt(this,$))==null||wt.remove(),yn(this,$,null),yn(this,_e,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(an(this,Tt,Ws).call(this),bt(this,ut).classList.remove("hidden"))}select(){var wt;this.makeResizable(),(wt=this.div)==null||wt.classList.add("selectedEditor")}unselect(){var wt,kt,Dt;(wt=bt(this,ut))==null||wt.classList.add("hidden"),(kt=this.div)==null||kt.classList.remove("selectedEditor"),(Dt=this.div)!=null&&Dt.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(wt,kt){}disableEditing(){bt(this,$)&&(bt(this,$).hidden=!0)}enableEditing(){bt(this,$)&&(bt(this,$).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return bt(this,rt)}set isEditing(wt){yn(this,rt,wt),this.parent&&(wt?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(wt,kt){yn(this,et,!0);const Dt=wt/kt,{style:Ft}=this.div;Ft.aspectRatio=Dt,Ft.height="auto"}static get MIN_SIZE(){return 16}};_=new WeakMap,j=new WeakMap,$=new WeakMap,_e=new WeakMap,tt=new WeakMap,et=new WeakMap,ut=new WeakMap,ht=new WeakMap,st=new WeakMap,nt=new WeakMap,rt=new WeakMap,at=new WeakMap,dt=new WeakMap,ot=new WeakMap,ct=new WeakSet,us=function([wt,kt],Dt,Ft){[Dt,Ft]=this.screenToPageTranslation(Dt,Ft),this.x+=Dt/wt,this.y+=Ft/kt,this.fixAndSetPosition()},mt=new WeakSet,hs=function(){const[wt,kt]=this.parentDimensions,{_borderLineWidth:Dt}=xt,Ft=Dt/wt,$t=Dt/kt;switch(this.rotation){case 90:return[-Ft,$t];case 180:return[Ft,$t];case 270:return[Ft,-$t];default:return[-Ft,-$t]}},Et=new WeakSet,ds=function(wt,kt,Dt){switch(Dt){case 90:return[kt,-wt];case 180:return[-wt,-kt];case 270:return[-kt,wt];default:return[wt,kt]}},Nt=new WeakSet,fs=function(wt){switch(wt){case 90:{const[kt,Dt]=this.pageDimensions;return[0,-kt/Dt,Dt/kt,0]}case 180:return[-1,0,0,-1];case 270:{const[kt,Dt]=this.pageDimensions;return[0,kt/Dt,-Dt/kt,0]}default:return[1,0,0,1]}},Tt=new WeakSet,Ws=function(){if(bt(this,ut))return;yn(this,ut,document.createElement("div")),bt(this,ut).classList.add("resizers");const wt=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||wt.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const kt of wt){const Dt=document.createElement("div");bt(this,ut).append(Dt),Dt.classList.add("resizer",kt),Dt.addEventListener("pointerdown",an(this,Vt,Gs).bind(this,kt)),Dt.addEventListener("contextmenu",h.noContextMenu)}this.div.prepend(bt(this,ut))},Vt=new WeakSet,Gs=function(wt,kt){kt.preventDefault();const{isMac:Dt}=c.FeatureTest.platform;if(kt.button!==0||kt.ctrlKey&&Dt)return;const Ft=an(this,It,Xs).bind(this,wt),$t=this._isDraggable;this._isDraggable=!1;const Wt={passive:!0,capture:!0};window.addEventListener("pointermove",Ft,Wt);const un=this.x,rn=this.y,bn=this.width,An=this.height,Nn=this.parent.div.style.cursor,wn=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(kt.target).cursor;const jn=()=>{this._isDraggable=$t,window.removeEventListener("pointerup",jn),window.removeEventListener("blur",jn),window.removeEventListener("pointermove",Ft,Wt),this.parent.div.style.cursor=Nn,this.div.style.cursor=wn;const Xn=this.x,Ln=this.y,Un=this.width,kn=this.height;Xn===un&&Ln===rn&&Un===bn&&kn===An||this.addCommands({cmd:()=>{this.width=Un,this.height=kn,this.x=Xn,this.y=Ln;const[en,hn]=this.parentDimensions;this.setDims(en*Un,hn*kn),this.fixAndSetPosition()},undo:()=>{this.width=bn,this.height=An,this.x=un,this.y=rn;const[en,hn]=this.parentDimensions;this.setDims(en*bn,hn*An),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",jn),window.addEventListener("blur",jn)},It=new WeakSet,Xs=function(wt,kt){const[Dt,Ft]=this.parentDimensions,$t=this.x,Wt=this.y,un=this.width,rn=this.height,bn=xt.MIN_SIZE/Dt,An=xt.MIN_SIZE/Ft,Nn=sn=>Math.round(sn*1e4)/1e4,wn=an(this,Nt,fs).call(this,this.rotation),jn=(sn,gn)=>[wn[0]*sn+wn[2]*gn,wn[1]*sn+wn[3]*gn],Xn=an(this,Nt,fs).call(this,360-this.rotation),Ln=(sn,gn)=>[Xn[0]*sn+Xn[2]*gn,Xn[1]*sn+Xn[3]*gn];let Un,kn,en=!1,hn=!1;switch(wt){case"topLeft":en=!0,Un=(sn,gn)=>[0,0],kn=(sn,gn)=>[sn,gn];break;case"topMiddle":Un=(sn,gn)=>[sn/2,0],kn=(sn,gn)=>[sn/2,gn];break;case"topRight":en=!0,Un=(sn,gn)=>[sn,0],kn=(sn,gn)=>[0,gn];break;case"middleRight":hn=!0,Un=(sn,gn)=>[sn,gn/2],kn=(sn,gn)=>[0,gn/2];break;case"bottomRight":en=!0,Un=(sn,gn)=>[sn,gn],kn=(sn,gn)=>[0,0];break;case"bottomMiddle":Un=(sn,gn)=>[sn/2,gn],kn=(sn,gn)=>[sn/2,0];break;case"bottomLeft":en=!0,Un=(sn,gn)=>[0,gn],kn=(sn,gn)=>[sn,0];break;case"middleLeft":hn=!0,Un=(sn,gn)=>[0,gn/2],kn=(sn,gn)=>[sn,gn/2];break}const Tn=Un(un,rn),On=kn(un,rn);let In=jn(...On);const Zn=Nn($t+In[0]),Qn=Nn(Wt+In[1]);let Kn=1,er=1,[Jn,Yn]=this.screenToPageTranslation(kt.movementX,kt.movementY);if([Jn,Yn]=Ln(Jn/Dt,Yn/Ft),en){const sn=Math.hypot(un,rn);Kn=er=Math.max(Math.min(Math.hypot(On[0]-Tn[0]-Jn,On[1]-Tn[1]-Yn)/sn,1/un,1/rn),bn/un,An/rn)}else hn?Kn=Math.max(bn,Math.min(1,Math.abs(On[0]-Tn[0]-Jn)))/un:er=Math.max(An,Math.min(1,Math.abs(On[1]-Tn[1]-Yn)))/rn;const tr=Nn(un*Kn),Cn=Nn(rn*er);In=jn(...kn(tr,Cn));const St=Zn-In[0],zt=Qn-In[1];this.width=tr,this.height=Cn,this.x=St,this.y=zt,this.setDims(Dt*tr,Ft*Cn),this.fixAndSetPosition()},fn=new WeakSet,ps=async function(){var Dt;const wt=bt(this,$);if(!wt)return;if(!bt(this,_)&&!bt(this,j)){wt.classList.remove("done"),(Dt=bt(this,_e))==null||Dt.remove();return}xt._l10nPromise.get("editor_alt_text_edit_button_label").then(Ft=>{wt.setAttribute("aria-label",Ft)});let kt=bt(this,_e);if(!kt){yn(this,_e,kt=document.createElement("span")),kt.className="tooltip",kt.setAttribute("role","tooltip");const Ft=kt.id=`alt-text-tooltip-${this.id}`;wt.setAttribute("aria-describedby",Ft);const $t=100;wt.addEventListener("mouseenter",()=>{yn(this,tt,setTimeout(()=>{yn(this,tt,null),bt(this,_e).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},$t))}),wt.addEventListener("mouseleave",()=>{var Wt;clearTimeout(bt(this,tt)),yn(this,tt,null),(Wt=bt(this,_e))==null||Wt.classList.remove("show")})}wt.classList.add("done"),kt.innerText=bt(this,j)?await xt._l10nPromise.get("editor_alt_text_decorative_tooltip"):bt(this,_),kt.parentNode||wt.append(kt)},xn=new WeakSet,Ys=function(wt){if(!this._isDraggable)return;const kt=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let Dt,Ft;kt&&(Dt={passive:!0,capture:!0},Ft=Wt=>{const[un,rn]=this.screenToPageTranslation(Wt.movementX,Wt.movementY);this._uiManager.dragSelectedEditors(un,rn)},window.addEventListener("pointermove",Ft,Dt));const $t=()=>{if(window.removeEventListener("pointerup",$t),window.removeEventListener("blur",$t),kt&&window.removeEventListener("pointermove",Ft,Dt),yn(this,nt,!1),!this._uiManager.endDragSession()){const{isMac:Wt}=c.FeatureTest.platform;wt.ctrlKey&&!Wt||wt.shiftKey||wt.metaKey&&Wt?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",$t),window.addEventListener("blur",$t)},Yt(xt,Et),fr(xt,"_borderLineWidth",-1),fr(xt,"_colorManager",new a.ColorManager),fr(xt,"_zIndex",1),fr(xt,"SMALL_EDITOR_SIZE",0);let g=xt;e.AnnotationEditor=g;class b extends g{constructor(wt){super(wt),this.annotationElementId=wt.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(s,e,o)=>{var et,ut,ht,st,nt,ms,dt,ot,ct,vt,mt,Ks,Ct,Nt,Ut,Tt,qt,Vt,Zt,It,Jt,fn,_n,xn,Mt,xt,At,wt,kt,Dt,Ft,$t,Wt,un,rn,bn,An,Nn,wn,jn,Xn,Ln,Un,kn,en,hn,Tn,Zs,In,gs,Qn,vs,er,Wr,Yn,ys,Cn,bs,zt,xr,gn,Ir,Sn,Qs,ln,Js,ft,_s,cn,Fr,Bt,xs;Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=h,e.opacityToHex=g;var a=o(1),c=o(6);function h(Ot,yt,Pt){for(const Ht of Pt)yt.addEventListener(Ht,Ot[Ht].bind(Ot))}function g(Ot){return Math.round(Math.min(255,Math.max(1,255*Ot))).toString(16).padStart(2,"0")}class b{constructor(){Yt(this,et,0)}getId(){return`${a.AnnotationEditorPrefix}${Lr(this,et)._++}`}}et=new WeakMap;const at=class at{constructor(){Yt(this,nt);Yt(this,ut,(0,a.getUuid)());Yt(this,ht,0);Yt(this,st,null)}static get _isSVGFittingCanvas(){const yt='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',Ht=new OffscreenCanvas(1,3).getContext("2d"),Kt=new Image;Kt.src=yt;const Qt=Kt.decode().then(()=>(Ht.drawImage(Kt,0,0,1,1,0,0,1,3),new Uint32Array(Ht.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,a.shadow)(this,"_isSVGFittingCanvas",Qt)}async getFromFile(yt){const{lastModified:Pt,name:Ht,size:Kt,type:Qt}=yt;return an(this,nt,ms).call(this,`${Pt}_${Ht}_${Kt}_${Qt}`,yt)}async getFromUrl(yt){return an(this,nt,ms).call(this,yt,yt)}async getFromId(yt){bt(this,st)||yn(this,st,new Map);const Pt=bt(this,st).get(yt);return Pt?Pt.bitmap?(Pt.refCounter+=1,Pt):Pt.file?this.getFromFile(Pt.file):this.getFromUrl(Pt.url):null}getSvgUrl(yt){const Pt=bt(this,st).get(yt);return Pt!=null&&Pt.isSvg?Pt.svgUrl:null}deleteId(yt){bt(this,st)||yn(this,st,new Map);const Pt=bt(this,st).get(yt);Pt&&(Pt.refCounter-=1,Pt.refCounter===0&&(Pt.bitmap=null))}isValidId(yt){return yt.startsWith(`image_${bt(this,ut)}_`)}};ut=new WeakMap,ht=new WeakMap,st=new WeakMap,nt=new WeakSet,ms=async function(yt,Pt){bt(this,st)||yn(this,st,new Map);let Ht=bt(this,st).get(yt);if(Ht===null)return null;if(Ht!=null&&Ht.bitmap)return Ht.refCounter+=1,Ht;try{Ht||(Ht={bitmap:null,id:`image_${bt(this,ut)}_${Lr(this,ht)._++}`,refCounter:0,isSvg:!1});let Kt;if(typeof Pt=="string"){Ht.url=Pt;const Qt=await fetch(Pt);if(!Qt.ok)throw new Error(Qt.statusText);Kt=await Qt.blob()}else Kt=Ht.file=Pt;if(Kt.type==="image/svg+xml"){const Qt=at._isSVGFittingCanvas,pn=new FileReader,Dn=new Image,Mn=new Promise((zn,nr)=>{Dn.onload=()=>{Ht.bitmap=Dn,Ht.isSvg=!0,zn()},pn.onload=async()=>{const Bn=Ht.svgUrl=pn.result;Dn.src=await Qt?`${Bn}#svgView(preserveAspectRatio(none))`:Bn},Dn.onerror=pn.onerror=nr});pn.readAsDataURL(Kt),await Mn}else Ht.bitmap=await createImageBitmap(Kt);Ht.refCounter=1}catch(Kt){console.error(Kt),Ht=null}return bt(this,st).set(yt,Ht),Ht&&bt(this,st).set(Ht.id,Ht),Ht};let _=at;class j{constructor(yt=128){Yt(this,dt,[]);Yt(this,ot,!1);Yt(this,ct,void 0);Yt(this,vt,-1);yn(this,ct,yt)}add({cmd:yt,undo:Pt,mustExec:Ht,type:Kt=NaN,overwriteIfSameType:Qt=!1,keepUndo:pn=!1}){if(Ht&&yt(),bt(this,ot))return;const Dn={cmd:yt,undo:Pt,type:Kt};if(bt(this,vt)===-1){bt(this,dt).length>0&&(bt(this,dt).length=0),yn(this,vt,0),bt(this,dt).push(Dn);return}if(Qt&&bt(this,dt)[bt(this,vt)].type===Kt){pn&&(Dn.undo=bt(this,dt)[bt(this,vt)].undo),bt(this,dt)[bt(this,vt)]=Dn;return}const Mn=bt(this,vt)+1;Mn===bt(this,ct)?bt(this,dt).splice(0,1):(yn(this,vt,Mn),Mn<bt(this,dt).length&&bt(this,dt).splice(Mn)),bt(this,dt).push(Dn)}undo(){bt(this,vt)!==-1&&(yn(this,ot,!0),bt(this,dt)[bt(this,vt)].undo(),yn(this,ot,!1),yn(this,vt,bt(this,vt)-1))}redo(){bt(this,vt)<bt(this,dt).length-1&&(yn(this,vt,bt(this,vt)+1),yn(this,ot,!0),bt(this,dt)[bt(this,vt)].cmd(),yn(this,ot,!1))}hasSomethingToUndo(){return bt(this,vt)!==-1}hasSomethingToRedo(){return bt(this,vt)<bt(this,dt).length-1}destroy(){yn(this,dt,null)}}dt=new WeakMap,ot=new WeakMap,ct=new WeakMap,vt=new WeakMap,e.CommandManager=j;class ${constructor(yt){Yt(this,mt);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:Pt}=a.FeatureTest.platform;for(const[Ht,Kt,Qt={}]of yt)for(const pn of Ht){const Dn=pn.startsWith("mac+");Pt&&Dn?(this.callbacks.set(pn.slice(4),{callback:Kt,options:Qt}),this.allKeys.add(pn.split("+").at(-1))):!Pt&&!Dn&&(this.callbacks.set(pn,{callback:Kt,options:Qt}),this.allKeys.add(pn.split("+").at(-1)))}}exec(yt,Pt){if(!this.allKeys.has(Pt.key))return;const Ht=this.callbacks.get(an(this,mt,Ks).call(this,Pt));if(!Ht)return;const{callback:Kt,options:{bubbles:Qt=!1,args:pn=[],checker:Dn=null}}=Ht;Dn&&!Dn(yt,Pt)||(Kt.bind(yt,...pn)(),Qt||(Pt.stopPropagation(),Pt.preventDefault()))}}mt=new WeakSet,Ks=function(yt){yt.altKey&&this.buffer.push("alt"),yt.ctrlKey&&this.buffer.push("ctrl"),yt.metaKey&&this.buffer.push("meta"),yt.shiftKey&&this.buffer.push("shift"),this.buffer.push(yt.key);const Pt=this.buffer.join("+");return this.buffer.length=0,Pt},e.KeyboardManager=$;const Et=class Et{get _colors(){const yt=new Map([["CanvasText",null],["Canvas",null]]);return(0,c.getColorValues)(yt),(0,a.shadow)(this,"_colors",yt)}convert(yt){const Pt=(0,c.getRGB)(yt);if(!window.matchMedia("(forced-colors: active)").matches)return Pt;for(const[Ht,Kt]of this._colors)if(Kt.every((Qt,pn)=>Qt===Pt[pn]))return Et._colorsMapping.get(Ht);return Pt}getHexCode(yt){const Pt=this._colors.get(yt);return Pt?a.Util.makeHexColor(...Pt):yt}};fr(Et,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let _e=Et;e.ColorManager=_e;const Rn=class Rn{constructor(yt,Pt,Ht,Kt,Qt,pn){Yt(this,Tn);Yt(this,In);Yt(this,Qn);Yt(this,er);Yt(this,Yn);Yt(this,Cn);Yt(this,zt);Yt(this,gn);Yt(this,Sn);Yt(this,ln);Yt(this,ft);Yt(this,cn);Yt(this,Bt);Yt(this,Ct,null);Yt(this,Nt,new Map);Yt(this,Ut,new Map);Yt(this,Tt,null);Yt(this,qt,null);Yt(this,Vt,new j);Yt(this,Zt,0);Yt(this,It,new Set);Yt(this,Jt,null);Yt(this,fn,null);Yt(this,_n,new Set);Yt(this,xn,null);Yt(this,Mt,new b);Yt(this,xt,!1);Yt(this,At,!1);Yt(this,wt,null);Yt(this,kt,a.AnnotationEditorType.NONE);Yt(this,Dt,new Set);Yt(this,Ft,null);Yt(this,$t,this.blur.bind(this));Yt(this,Wt,this.focus.bind(this));Yt(this,un,this.copy.bind(this));Yt(this,rn,this.cut.bind(this));Yt(this,bn,this.paste.bind(this));Yt(this,An,this.keydown.bind(this));Yt(this,Nn,this.onEditingAction.bind(this));Yt(this,wn,this.onPageChanging.bind(this));Yt(this,jn,this.onScaleChanging.bind(this));Yt(this,Xn,this.onRotationChanging.bind(this));Yt(this,Ln,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});Yt(this,Un,[0,0]);Yt(this,kn,null);Yt(this,en,null);Yt(this,hn,null);yn(this,en,yt),yn(this,hn,Pt),yn(this,Tt,Ht),this._eventBus=Kt,this._eventBus._on("editingaction",bt(this,Nn)),this._eventBus._on("pagechanging",bt(this,wn)),this._eventBus._on("scalechanging",bt(this,jn)),this._eventBus._on("rotationchanging",bt(this,Xn)),yn(this,qt,Qt.annotationStorage),yn(this,xn,Qt.filterFactory),yn(this,Ft,pn),this.viewParameters={realScale:c.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const yt=Rn.prototype,Pt=Qt=>{const{activeElement:pn}=document;return pn&&bt(Qt,en).contains(pn)&&Qt.hasSomethingToControl()},Ht=this.TRANSLATE_SMALL,Kt=this.TRANSLATE_BIG;return(0,a.shadow)(this,"_keyboardManager",new $([[["ctrl+a","mac+meta+a"],yt.selectAll],[["ctrl+z","mac+meta+z"],yt.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],yt.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],yt.delete],[["Escape","mac+Escape"],yt.unselectAll],[["ArrowLeft","mac+ArrowLeft"],yt.translateSelectedEditors,{args:[-Ht,0],checker:Pt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],yt.translateSelectedEditors,{args:[-Kt,0],checker:Pt}],[["ArrowRight","mac+ArrowRight"],yt.translateSelectedEditors,{args:[Ht,0],checker:Pt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],yt.translateSelectedEditors,{args:[Kt,0],checker:Pt}],[["ArrowUp","mac+ArrowUp"],yt.translateSelectedEditors,{args:[0,-Ht],checker:Pt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],yt.translateSelectedEditors,{args:[0,-Kt],checker:Pt}],[["ArrowDown","mac+ArrowDown"],yt.translateSelectedEditors,{args:[0,Ht],checker:Pt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],yt.translateSelectedEditors,{args:[0,Kt],checker:Pt}]]))}destroy(){an(this,er,Wr).call(this),an(this,In,gs).call(this),this._eventBus._off("editingaction",bt(this,Nn)),this._eventBus._off("pagechanging",bt(this,wn)),this._eventBus._off("scalechanging",bt(this,jn)),this._eventBus._off("rotationchanging",bt(this,Xn));for(const yt of bt(this,Ut).values())yt.destroy();bt(this,Ut).clear(),bt(this,Nt).clear(),bt(this,_n).clear(),yn(this,Ct,null),bt(this,Dt).clear(),bt(this,Vt).destroy(),bt(this,Tt).destroy()}get hcmFilter(){return(0,a.shadow)(this,"hcmFilter",bt(this,Ft)?bt(this,xn).addHCMFilter(bt(this,Ft).foreground,bt(this,Ft).background):"none")}get direction(){return(0,a.shadow)(this,"direction",getComputedStyle(bt(this,en)).direction)}editAltText(yt){var Pt;(Pt=bt(this,Tt))==null||Pt.editAltText(this,yt)}onPageChanging({pageNumber:yt}){yn(this,Zt,yt-1)}focusMainContainer(){bt(this,en).focus()}findParent(yt,Pt){for(const Ht of bt(this,Ut).values()){const{x:Kt,y:Qt,width:pn,height:Dn}=Ht.div.getBoundingClientRect();if(yt>=Kt&&yt<=Kt+pn&&Pt>=Qt&&Pt<=Qt+Dn)return Ht}return null}disableUserSelect(yt=!1){bt(this,hn).classList.toggle("noUserSelect",yt)}addShouldRescale(yt){bt(this,_n).add(yt)}removeShouldRescale(yt){bt(this,_n).delete(yt)}onScaleChanging({scale:yt}){this.commitOrRemove(),this.viewParameters.realScale=yt*c.PixelsPerInch.PDF_TO_CSS_UNITS;for(const Pt of bt(this,_n))Pt.onScaleChanging()}onRotationChanging({pagesRotation:yt}){this.commitOrRemove(),this.viewParameters.rotation=yt}addToAnnotationStorage(yt){!yt.isEmpty()&&bt(this,qt)&&!bt(this,qt).has(yt.id)&&bt(this,qt).setValue(yt.id,yt)}blur(){if(!this.hasSelection)return;const{activeElement:yt}=document;for(const Pt of bt(this,Dt))if(Pt.div.contains(yt)){yn(this,wt,[Pt,yt]),Pt._focusEventsAllowed=!1;break}}focus(){if(!bt(this,wt))return;const[yt,Pt]=bt(this,wt);yn(this,wt,null),Pt.addEventListener("focusin",()=>{yt._focusEventsAllowed=!0},{once:!0}),Pt.focus()}addEditListeners(){an(this,Qn,vs).call(this),an(this,Yn,ys).call(this)}removeEditListeners(){an(this,er,Wr).call(this),an(this,Cn,bs).call(this)}copy(yt){var Ht;if(yt.preventDefault(),(Ht=bt(this,Ct))==null||Ht.commitOrRemove(),!this.hasSelection)return;const Pt=[];for(const Kt of bt(this,Dt)){const Qt=Kt.serialize(!0);Qt&&Pt.push(Qt)}Pt.length!==0&&yt.clipboardData.setData("application/pdfjs",JSON.stringify(Pt))}cut(yt){this.copy(yt),this.delete()}paste(yt){yt.preventDefault();const{clipboardData:Pt}=yt;for(const Qt of Pt.items)for(const pn of bt(this,fn))if(pn.isHandlingMimeForPasting(Qt.type)){pn.paste(Qt,this.currentLayer);return}let Ht=Pt.getData("application/pdfjs");if(!Ht)return;try{Ht=JSON.parse(Ht)}catch(Qt){(0,a.warn)(`paste: "${Qt.message}".`);return}if(!Array.isArray(Ht))return;this.unselectAll();const Kt=this.currentLayer;try{const Qt=[];for(const Mn of Ht){const zn=Kt.deserialize(Mn);if(!zn)return;Qt.push(zn)}const pn=()=>{for(const Mn of Qt)an(this,ft,_s).call(this,Mn);an(this,Bt,xs).call(this,Qt)},Dn=()=>{for(const Mn of Qt)Mn.remove()};this.addCommands({cmd:pn,undo:Dn,mustExec:!0})}catch(Qt){(0,a.warn)(`paste: "${Qt.message}".`)}}keydown(yt){var Pt;(Pt=this.getActive())!=null&&Pt.shouldGetKeyboardEvents()||Rn._keyboardManager.exec(this,yt)}onEditingAction(yt){["undo","redo","delete","selectAll"].includes(yt.name)&&this[yt.name]()}setEditingState(yt){yt?(an(this,Tn,Zs).call(this),an(this,Qn,vs).call(this),an(this,Yn,ys).call(this),an(this,zt,xr).call(this,{isEditing:bt(this,kt)!==a.AnnotationEditorType.NONE,isEmpty:an(this,cn,Fr).call(this),hasSomethingToUndo:bt(this,Vt).hasSomethingToUndo(),hasSomethingToRedo:bt(this,Vt).hasSomethingToRedo(),hasSelectedEditor:!1})):(an(this,In,gs).call(this),an(this,er,Wr).call(this),an(this,Cn,bs).call(this),an(this,zt,xr).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(yt){if(!bt(this,fn)){yn(this,fn,yt);for(const Pt of bt(this,fn))an(this,gn,Ir).call(this,Pt.defaultPropertiesToUpdate)}}getId(){return bt(this,Mt).getId()}get currentLayer(){return bt(this,Ut).get(bt(this,Zt))}getLayer(yt){return bt(this,Ut).get(yt)}get currentPageIndex(){return bt(this,Zt)}addLayer(yt){bt(this,Ut).set(yt.pageIndex,yt),bt(this,xt)?yt.enable():yt.disable()}removeLayer(yt){bt(this,Ut).delete(yt.pageIndex)}updateMode(yt,Pt=null){if(bt(this,kt)!==yt){if(yn(this,kt,yt),yt===a.AnnotationEditorType.NONE){this.setEditingState(!1),an(this,ln,Js).call(this);return}this.setEditingState(!0),an(this,Sn,Qs).call(this),this.unselectAll();for(const Ht of bt(this,Ut).values())Ht.updateMode(yt);if(Pt){for(const Ht of bt(this,Nt).values())if(Ht.annotationElementId===Pt){this.setSelected(Ht),Ht.enterInEditMode();break}}}}updateToolbar(yt){yt!==bt(this,kt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:yt})}updateParams(yt,Pt){if(bt(this,fn)){if(yt===a.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(yt);return}for(const Ht of bt(this,Dt))Ht.updateParams(yt,Pt);for(const Ht of bt(this,fn))Ht.updateDefaultParams(yt,Pt)}}enableWaiting(yt=!1){if(bt(this,At)!==yt){yn(this,At,yt);for(const Pt of bt(this,Ut).values())yt?Pt.disableClick():Pt.enableClick(),Pt.div.classList.toggle("waiting",yt)}}getEditors(yt){const Pt=[];for(const Ht of bt(this,Nt).values())Ht.pageIndex===yt&&Pt.push(Ht);return Pt}getEditor(yt){return bt(this,Nt).get(yt)}addEditor(yt){bt(this,Nt).set(yt.id,yt)}removeEditor(yt){var Pt;bt(this,Nt).delete(yt.id),this.unselect(yt),(!yt.annotationElementId||!bt(this,It).has(yt.annotationElementId))&&((Pt=bt(this,qt))==null||Pt.remove(yt.id))}addDeletedAnnotationElement(yt){bt(this,It).add(yt.annotationElementId),yt.deleted=!0}isDeletedAnnotationElement(yt){return bt(this,It).has(yt)}removeDeletedAnnotationElement(yt){bt(this,It).delete(yt.annotationElementId),yt.deleted=!1}setActiveEditor(yt){bt(this,Ct)!==yt&&(yn(this,Ct,yt),yt&&an(this,gn,Ir).call(this,yt.propertiesToUpdate))}toggleSelected(yt){if(bt(this,Dt).has(yt)){bt(this,Dt).delete(yt),yt.unselect(),an(this,zt,xr).call(this,{hasSelectedEditor:this.hasSelection});return}bt(this,Dt).add(yt),yt.select(),an(this,gn,Ir).call(this,yt.propertiesToUpdate),an(this,zt,xr).call(this,{hasSelectedEditor:!0})}setSelected(yt){for(const Pt of bt(this,Dt))Pt!==yt&&Pt.unselect();bt(this,Dt).clear(),bt(this,Dt).add(yt),yt.select(),an(this,gn,Ir).call(this,yt.propertiesToUpdate),an(this,zt,xr).call(this,{hasSelectedEditor:!0})}isSelected(yt){return bt(this,Dt).has(yt)}unselect(yt){yt.unselect(),bt(this,Dt).delete(yt),an(this,zt,xr).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return bt(this,Dt).size!==0}undo(){bt(this,Vt).undo(),an(this,zt,xr).call(this,{hasSomethingToUndo:bt(this,Vt).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:an(this,cn,Fr).call(this)})}redo(){bt(this,Vt).redo(),an(this,zt,xr).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:bt(this,Vt).hasSomethingToRedo(),isEmpty:an(this,cn,Fr).call(this)})}addCommands(yt){bt(this,Vt).add(yt),an(this,zt,xr).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:an(this,cn,Fr).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const yt=[...bt(this,Dt)],Pt=()=>{for(const Kt of yt)Kt.remove()},Ht=()=>{for(const Kt of yt)an(this,ft,_s).call(this,Kt)};this.addCommands({cmd:Pt,undo:Ht,mustExec:!0})}commitOrRemove(){var yt;(yt=bt(this,Ct))==null||yt.commitOrRemove()}hasSomethingToControl(){return bt(this,Ct)||this.hasSelection}selectAll(){for(const yt of bt(this,Dt))yt.commit();an(this,Bt,xs).call(this,bt(this,Nt).values())}unselectAll(){if(bt(this,Ct)){bt(this,Ct).commitOrRemove();return}if(this.hasSelection){for(const yt of bt(this,Dt))yt.unselect();bt(this,Dt).clear(),an(this,zt,xr).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(yt,Pt,Ht=!1){if(Ht||this.commitOrRemove(),!this.hasSelection)return;bt(this,Un)[0]+=yt,bt(this,Un)[1]+=Pt;const[Kt,Qt]=bt(this,Un),pn=[...bt(this,Dt)],Dn=1e3;bt(this,kn)&&clearTimeout(bt(this,kn)),yn(this,kn,setTimeout(()=>{yn(this,kn,null),bt(this,Un)[0]=bt(this,Un)[1]=0,this.addCommands({cmd:()=>{for(const Mn of pn)bt(this,Nt).has(Mn.id)&&Mn.translateInPage(Kt,Qt)},undo:()=>{for(const Mn of pn)bt(this,Nt).has(Mn.id)&&Mn.translateInPage(-Kt,-Qt)},mustExec:!1})},Dn));for(const Mn of pn)Mn.translateInPage(yt,Pt)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),yn(this,Jt,new Map);for(const yt of bt(this,Dt))bt(this,Jt).set(yt,{savedX:yt.x,savedY:yt.y,savedPageIndex:yt.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!bt(this,Jt))return!1;this.disableUserSelect(!1);const yt=bt(this,Jt);yn(this,Jt,null);let Pt=!1;for(const[{x:Kt,y:Qt,pageIndex:pn},Dn]of yt)Dn.newX=Kt,Dn.newY=Qt,Dn.newPageIndex=pn,Pt||(Pt=Kt!==Dn.savedX||Qt!==Dn.savedY||pn!==Dn.savedPageIndex);if(!Pt)return!1;const Ht=(Kt,Qt,pn,Dn)=>{if(bt(this,Nt).has(Kt.id)){const Mn=bt(this,Ut).get(Dn);Mn?Kt._setParentAndPosition(Mn,Qt,pn):(Kt.pageIndex=Dn,Kt.x=Qt,Kt.y=pn)}};return this.addCommands({cmd:()=>{for(const[Kt,{newX:Qt,newY:pn,newPageIndex:Dn}]of yt)Ht(Kt,Qt,pn,Dn)},undo:()=>{for(const[Kt,{savedX:Qt,savedY:pn,savedPageIndex:Dn}]of yt)Ht(Kt,Qt,pn,Dn)},mustExec:!0}),!0}dragSelectedEditors(yt,Pt){if(bt(this,Jt))for(const Ht of bt(this,Jt).keys())Ht.drag(yt,Pt)}rebuild(yt){if(yt.parent===null){const Pt=this.getLayer(yt.pageIndex);Pt?(Pt.changeParent(yt),Pt.addOrRebuild(yt)):(this.addEditor(yt),this.addToAnnotationStorage(yt),yt.rebuild())}else yt.parent.addOrRebuild(yt)}isActive(yt){return bt(this,Ct)===yt}getActive(){return bt(this,Ct)}getMode(){return bt(this,kt)}get imageManager(){return(0,a.shadow)(this,"imageManager",new _)}};Ct=new WeakMap,Nt=new WeakMap,Ut=new WeakMap,Tt=new WeakMap,qt=new WeakMap,Vt=new WeakMap,Zt=new WeakMap,It=new WeakMap,Jt=new WeakMap,fn=new WeakMap,_n=new WeakMap,xn=new WeakMap,Mt=new WeakMap,xt=new WeakMap,At=new WeakMap,wt=new WeakMap,kt=new WeakMap,Dt=new WeakMap,Ft=new WeakMap,$t=new WeakMap,Wt=new WeakMap,un=new WeakMap,rn=new WeakMap,bn=new WeakMap,An=new WeakMap,Nn=new WeakMap,wn=new WeakMap,jn=new WeakMap,Xn=new WeakMap,Ln=new WeakMap,Un=new WeakMap,kn=new WeakMap,en=new WeakMap,hn=new WeakMap,Tn=new WeakSet,Zs=function(){window.addEventListener("focus",bt(this,Wt)),window.addEventListener("blur",bt(this,$t))},In=new WeakSet,gs=function(){window.removeEventListener("focus",bt(this,Wt)),window.removeEventListener("blur",bt(this,$t))},Qn=new WeakSet,vs=function(){window.addEventListener("keydown",bt(this,An),{capture:!0})},er=new WeakSet,Wr=function(){window.removeEventListener("keydown",bt(this,An),{capture:!0})},Yn=new WeakSet,ys=function(){document.addEventListener("copy",bt(this,un)),document.addEventListener("cut",bt(this,rn)),document.addEventListener("paste",bt(this,bn))},Cn=new WeakSet,bs=function(){document.removeEventListener("copy",bt(this,un)),document.removeEventListener("cut",bt(this,rn)),document.removeEventListener("paste",bt(this,bn))},zt=new WeakSet,xr=function(yt){Object.entries(yt).some(([Ht,Kt])=>bt(this,Ln)[Ht]!==Kt)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(bt(this,Ln),yt)})},gn=new WeakSet,Ir=function(yt){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:yt})},Sn=new WeakSet,Qs=function(){if(!bt(this,xt)){yn(this,xt,!0);for(const yt of bt(this,Ut).values())yt.enable()}},ln=new WeakSet,Js=function(){if(this.unselectAll(),bt(this,xt)){yn(this,xt,!1);for(const yt of bt(this,Ut).values())yt.disable()}},ft=new WeakSet,_s=function(yt){const Pt=bt(this,Ut).get(yt.pageIndex);Pt?Pt.addOrRebuild(yt):this.addEditor(yt)},cn=new WeakSet,Fr=function(){if(bt(this,Nt).size===0)return!0;if(bt(this,Nt).size===1)for(const yt of bt(this,Nt).values())return yt.isEmpty();return!1},Bt=new WeakSet,xs=function(yt){bt(this,Dt).clear();for(const Pt of yt)Pt.isEmpty()||(bt(this,Dt).add(Pt),Pt.select());an(this,zt,xr).call(this,{hasSelectedEditor:!0})},fr(Rn,"TRANSLATE_SMALL",1),fr(Rn,"TRANSLATE_BIG",10);let tt=Rn;e.AnnotationEditorUIManager=tt},(s,e,o)=>{var Zt,It,Jt,fn,_n,xn,Mt,xt,At,wt,kt,Dt,kr,$t,Tr,un,Es,bn,Gr,Nn,Xr,jn,Mr,Ln,Br;Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMFilterFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=void 0,e.deprecated=vt,e.getColorValues=Nt,e.getCurrentTransform=Ut,e.getCurrentTransformInverse=Tt,e.getFilenameFromUrl=nt,e.getPdfFilenameFromUrl=rt,e.getRGB=Ct,e.getXfaPageViewport=Et,e.isDataScheme=ht,e.isPdfFile=st,e.isValidFetchUrl=dt,e.loadScript=ct,e.noContextMenu=ot,e.setLayerDimensions=qt;var a=o(7),c=o(1);const h="http://www.w3.org/2000/svg",Vt=class Vt{};fr(Vt,"CSS",96),fr(Vt,"PDF",72),fr(Vt,"PDF_TO_CSS_UNITS",Vt.CSS/Vt.PDF);let g=Vt;e.PixelsPerInch=g;class b extends a.BaseFilterFactory{constructor({docId:hn,ownerDocument:Tn=globalThis.document}={}){super();Yt(this,Dt);Yt(this,$t);Yt(this,un);Yt(this,bn);Yt(this,Nn);Yt(this,jn);Yt(this,Ln);Yt(this,Zt,void 0);Yt(this,It,void 0);Yt(this,Jt,void 0);Yt(this,fn,void 0);Yt(this,_n,void 0);Yt(this,xn,void 0);Yt(this,Mt,void 0);Yt(this,xt,void 0);Yt(this,At,void 0);Yt(this,wt,void 0);Yt(this,kt,0);yn(this,Jt,hn),yn(this,fn,Tn)}addFilter(hn){if(!hn)return"none";let Tn=bt(this,Dt,kr).get(hn);if(Tn)return Tn;let On,In,Zn,Qn;if(hn.length===1){const Yn=hn[0],tr=new Array(256);for(let Cn=0;Cn<256;Cn++)tr[Cn]=Yn[Cn]/255;Qn=On=In=Zn=tr.join(",")}else{const[Yn,tr,Cn]=hn,St=new Array(256),zt=new Array(256),sn=new Array(256);for(let gn=0;gn<256;gn++)St[gn]=Yn[gn]/255,zt[gn]=tr[gn]/255,sn[gn]=Cn[gn]/255;On=St.join(","),In=zt.join(","),Zn=sn.join(","),Qn=`${On}${In}${Zn}`}if(Tn=bt(this,Dt,kr).get(Qn),Tn)return bt(this,Dt,kr).set(hn,Tn),Tn;const Kn=`g_${bt(this,Jt)}_transfer_map_${Lr(this,kt)._++}`,er=`url(#${Kn})`;bt(this,Dt,kr).set(hn,er),bt(this,Dt,kr).set(Qn,er);const Jn=an(this,bn,Gr).call(this,Kn);return an(this,jn,Mr).call(this,On,In,Zn,Jn),er}addHCMFilter(hn,Tn){var tr;const On=`${hn}-${Tn}`;if(bt(this,xn)===On)return bt(this,Mt);if(yn(this,xn,On),yn(this,Mt,"none"),(tr=bt(this,_n))==null||tr.remove(),!hn||!Tn)return bt(this,Mt);const In=an(this,Ln,Br).call(this,hn);hn=c.Util.makeHexColor(...In);const Zn=an(this,Ln,Br).call(this,Tn);if(Tn=c.Util.makeHexColor(...Zn),bt(this,$t,Tr).style.color="",hn==="#000000"&&Tn==="#ffffff"||hn===Tn)return bt(this,Mt);const Qn=new Array(256);for(let Cn=0;Cn<=255;Cn++){const St=Cn/255;Qn[Cn]=St<=.03928?St/12.92:((St+.055)/1.055)**2.4}const Kn=Qn.join(","),er=`g_${bt(this,Jt)}_hcm_filter`,Jn=yn(this,xt,an(this,bn,Gr).call(this,er));an(this,jn,Mr).call(this,Kn,Kn,Kn,Jn),an(this,un,Es).call(this,Jn);const Yn=(Cn,St)=>{const zt=In[Cn]/255,sn=Zn[Cn]/255,gn=new Array(St+1);for(let tn=0;tn<=St;tn++)gn[tn]=zt+tn/St*(sn-zt);return gn.join(",")};return an(this,jn,Mr).call(this,Yn(0,5),Yn(1,5),Yn(2,5),Jn),yn(this,Mt,`url(#${er})`),bt(this,Mt)}addHighlightHCMFilter(hn,Tn,On,In){var sn;const Zn=`${hn}-${Tn}-${On}-${In}`;if(bt(this,At)===Zn)return bt(this,wt);if(yn(this,At,Zn),yn(this,wt,"none"),(sn=bt(this,xt))==null||sn.remove(),!hn||!Tn)return bt(this,wt);const[Qn,Kn]=[hn,Tn].map(an(this,Ln,Br).bind(this));let er=Math.round(.2126*Qn[0]+.7152*Qn[1]+.0722*Qn[2]),Jn=Math.round(.2126*Kn[0]+.7152*Kn[1]+.0722*Kn[2]),[Yn,tr]=[On,In].map(an(this,Ln,Br).bind(this));Jn<er&&([er,Jn,Yn,tr]=[Jn,er,tr,Yn]),bt(this,$t,Tr).style.color="";const Cn=(gn,tn,Sn)=>{const _t=new Array(256),ln=(Jn-er)/Sn,Pn=gn/255,ft=(tn-gn)/(255*Sn);let nn=0;for(let cn=0;cn<=Sn;cn++){const Rt=Math.round(er+cn*ln),Bt=Pn+cn*ft;for(let dn=nn;dn<=Rt;dn++)_t[dn]=Bt;nn=Rt+1}for(let cn=nn;cn<256;cn++)_t[cn]=_t[nn-1];return _t.join(",")},St=`g_${bt(this,Jt)}_hcm_highlight_filter`,zt=yn(this,xt,an(this,bn,Gr).call(this,St));return an(this,un,Es).call(this,zt),an(this,jn,Mr).call(this,Cn(Yn[0],tr[0],5),Cn(Yn[1],tr[1],5),Cn(Yn[2],tr[2],5),zt),yn(this,wt,`url(#${St})`),bt(this,wt)}destroy(hn=!1){hn&&(bt(this,Mt)||bt(this,wt))||(bt(this,It)&&(bt(this,It).parentNode.parentNode.remove(),yn(this,It,null)),bt(this,Zt)&&(bt(this,Zt).clear(),yn(this,Zt,null)),yn(this,kt,0))}}Zt=new WeakMap,It=new WeakMap,Jt=new WeakMap,fn=new WeakMap,_n=new WeakMap,xn=new WeakMap,Mt=new WeakMap,xt=new WeakMap,At=new WeakMap,wt=new WeakMap,kt=new WeakMap,Dt=new WeakSet,kr=function(){return bt(this,Zt)||yn(this,Zt,new Map)},$t=new WeakSet,Tr=function(){if(!bt(this,It)){const hn=bt(this,fn).createElement("div"),{style:Tn}=hn;Tn.visibility="hidden",Tn.contain="strict",Tn.width=Tn.height=0,Tn.position="absolute",Tn.top=Tn.left=0,Tn.zIndex=-1;const On=bt(this,fn).createElementNS(h,"svg");On.setAttribute("width",0),On.setAttribute("height",0),yn(this,It,bt(this,fn).createElementNS(h,"defs")),hn.append(On),On.append(bt(this,It)),bt(this,fn).body.append(hn)}return bt(this,It)},un=new WeakSet,Es=function(hn){const Tn=bt(this,fn).createElementNS(h,"feColorMatrix");Tn.setAttribute("type","matrix"),Tn.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),hn.append(Tn)},bn=new WeakSet,Gr=function(hn){const Tn=bt(this,fn).createElementNS(h,"filter");return Tn.setAttribute("color-interpolation-filters","sRGB"),Tn.setAttribute("id",hn),bt(this,$t,Tr).append(Tn),Tn},Nn=new WeakSet,Xr=function(hn,Tn,On){const In=bt(this,fn).createElementNS(h,Tn);In.setAttribute("type","discrete"),In.setAttribute("tableValues",On),hn.append(In)},jn=new WeakSet,Mr=function(hn,Tn,On,In){const Zn=bt(this,fn).createElementNS(h,"feComponentTransfer");In.append(Zn),an(this,Nn,Xr).call(this,Zn,"feFuncR",hn),an(this,Nn,Xr).call(this,Zn,"feFuncG",Tn),an(this,Nn,Xr).call(this,Zn,"feFuncB",On)},Ln=new WeakSet,Br=function(hn){return bt(this,$t,Tr).style.color=hn,Ct(getComputedStyle(bt(this,$t,Tr)).getPropertyValue("color"))},e.DOMFilterFactory=b;class _ extends a.BaseCanvasFactory{constructor({ownerDocument:en=globalThis.document}={}){super(),this._document=en}_createCanvas(en,hn){const Tn=this._document.createElement("canvas");return Tn.width=en,Tn.height=hn,Tn}}e.DOMCanvasFactory=_;async function j(kn,en=!1){if(dt(kn,document.baseURI)){const hn=await fetch(kn);if(!hn.ok)throw new Error(hn.statusText);return en?new Uint8Array(await hn.arrayBuffer()):(0,c.stringToBytes)(await hn.text())}return new Promise((hn,Tn)=>{const On=new XMLHttpRequest;On.open("GET",kn,!0),en&&(On.responseType="arraybuffer"),On.onreadystatechange=()=>{if(On.readyState===XMLHttpRequest.DONE){if(On.status===200||On.status===0){let In;if(en&&On.response?In=new Uint8Array(On.response):!en&&On.responseText&&(In=(0,c.stringToBytes)(On.responseText)),In){hn(In);return}}Tn(new Error(On.statusText))}},On.send(null)})}class $ extends a.BaseCMapReaderFactory{_fetchData(en,hn){return j(en,this.isCompressed).then(Tn=>({cMapData:Tn,compressionType:hn}))}}e.DOMCMapReaderFactory=$;class _e extends a.BaseStandardFontDataFactory{_fetchData(en){return j(en,!0)}}e.DOMStandardFontDataFactory=_e;class tt extends a.BaseSVGFactory{_createSVG(en){return document.createElementNS(h,en)}}e.DOMSVGFactory=tt;class et{constructor({viewBox:en,scale:hn,rotation:Tn,offsetX:On=0,offsetY:In=0,dontFlip:Zn=!1}){this.viewBox=en,this.scale=hn,this.rotation=Tn,this.offsetX=On,this.offsetY=In;const Qn=(en[2]+en[0])/2,Kn=(en[3]+en[1])/2;let er,Jn,Yn,tr;switch(Tn%=360,Tn<0&&(Tn+=360),Tn){case 180:er=-1,Jn=0,Yn=0,tr=1;break;case 90:er=0,Jn=1,Yn=1,tr=0;break;case 270:er=0,Jn=-1,Yn=-1,tr=0;break;case 0:er=1,Jn=0,Yn=0,tr=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Zn&&(Yn=-Yn,tr=-tr);let Cn,St,zt,sn;er===0?(Cn=Math.abs(Kn-en[1])*hn+On,St=Math.abs(Qn-en[0])*hn+In,zt=(en[3]-en[1])*hn,sn=(en[2]-en[0])*hn):(Cn=Math.abs(Qn-en[0])*hn+On,St=Math.abs(Kn-en[1])*hn+In,zt=(en[2]-en[0])*hn,sn=(en[3]-en[1])*hn),this.transform=[er*hn,Jn*hn,Yn*hn,tr*hn,Cn-er*hn*Qn-Yn*hn*Kn,St-Jn*hn*Qn-tr*hn*Kn],this.width=zt,this.height=sn}get rawDims(){const{viewBox:en}=this;return(0,c.shadow)(this,"rawDims",{pageWidth:en[2]-en[0],pageHeight:en[3]-en[1],pageX:en[0],pageY:en[1]})}clone({scale:en=this.scale,rotation:hn=this.rotation,offsetX:Tn=this.offsetX,offsetY:On=this.offsetY,dontFlip:In=!1}={}){return new et({viewBox:this.viewBox.slice(),scale:en,rotation:hn,offsetX:Tn,offsetY:On,dontFlip:In})}convertToViewportPoint(en,hn){return c.Util.applyTransform([en,hn],this.transform)}convertToViewportRectangle(en){const hn=c.Util.applyTransform([en[0],en[1]],this.transform),Tn=c.Util.applyTransform([en[2],en[3]],this.transform);return[hn[0],hn[1],Tn[0],Tn[1]]}convertToPdfPoint(en,hn){return c.Util.applyInverseTransform([en,hn],this.transform)}}e.PageViewport=et;class ut extends c.BaseException{constructor(en,hn=0){super(en,"RenderingCancelledException"),this.extraDelay=hn}}e.RenderingCancelledException=ut;function ht(kn){const en=kn.length;let hn=0;for(;hn<en&&kn[hn].trim()==="";)hn++;return kn.substring(hn,hn+5).toLowerCase()==="data:"}function st(kn){return typeof kn=="string"&&/\.pdf$/i.test(kn)}function nt(kn,en=!1){return en||([kn]=kn.split(/[#?]/,1)),kn.substring(kn.lastIndexOf("/")+1)}function rt(kn,en="document.pdf"){if(typeof kn!="string")return en;if(ht(kn))return(0,c.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),en;const hn=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,Tn=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,On=hn.exec(kn);let In=Tn.exec(On[1])||Tn.exec(On[2])||Tn.exec(On[3]);if(In&&(In=In[0],In.includes("%")))try{In=Tn.exec(decodeURIComponent(In))[0]}catch{}return In||en}class at{constructor(){fr(this,"started",Object.create(null));fr(this,"times",[])}time(en){en in this.started&&(0,c.warn)(`Timer is already running for ${en}`),this.started[en]=Date.now()}timeEnd(en){en in this.started||(0,c.warn)(`Timer has not been started for ${en}`),this.times.push({name:en,start:this.started[en],end:Date.now()}),delete this.started[en]}toString(){const en=[];let hn=0;for(const{name:Tn}of this.times)hn=Math.max(Tn.length,hn);for(const{name:Tn,start:On,end:In}of this.times)en.push(`${Tn.padEnd(hn)} ${In-On}ms
`);return en.join("")}}e.StatTimer=at;function dt(kn,en){try{const{protocol:hn}=en?new URL(kn,en):new URL(kn);return hn==="http:"||hn==="https:"}catch{return!1}}function ot(kn){kn.preventDefault()}function ct(kn,en=!1){return new Promise((hn,Tn)=>{const On=document.createElement("script");On.src=kn,On.onload=function(In){en&&On.remove(),hn(In)},On.onerror=function(){Tn(new Error(`Cannot load script at: ${On.src}`))},(document.head||document.documentElement).append(On)})}function vt(kn){console.log("Deprecated API usage: "+kn)}let mt;class pt{static toDateObject(en){if(!en||typeof en!="string")return null;mt||(mt=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const hn=mt.exec(en);if(!hn)return null;const Tn=parseInt(hn[1],10);let On=parseInt(hn[2],10);On=On>=1&&On<=12?On-1:0;let In=parseInt(hn[3],10);In=In>=1&&In<=31?In:1;let Zn=parseInt(hn[4],10);Zn=Zn>=0&&Zn<=23?Zn:0;let Qn=parseInt(hn[5],10);Qn=Qn>=0&&Qn<=59?Qn:0;let Kn=parseInt(hn[6],10);Kn=Kn>=0&&Kn<=59?Kn:0;const er=hn[7]||"Z";let Jn=parseInt(hn[8],10);Jn=Jn>=0&&Jn<=23?Jn:0;let Yn=parseInt(hn[9],10)||0;return Yn=Yn>=0&&Yn<=59?Yn:0,er==="-"?(Zn+=Jn,Qn+=Yn):er==="+"&&(Zn-=Jn,Qn-=Yn),new Date(Date.UTC(Tn,On,In,Zn,Qn,Kn))}}e.PDFDateString=pt;function Et(kn,{scale:en=1,rotation:hn=0}){const{width:Tn,height:On}=kn.attributes.style,In=[0,0,parseInt(Tn),parseInt(On)];return new et({viewBox:In,scale:en,rotation:hn})}function Ct(kn){if(kn.startsWith("#")){const en=parseInt(kn.slice(1),16);return[(en&16711680)>>16,(en&65280)>>8,en&255]}return kn.startsWith("rgb(")?kn.slice(4,-1).split(",").map(en=>parseInt(en)):kn.startsWith("rgba(")?kn.slice(5,-1).split(",").map(en=>parseInt(en)).slice(0,3):((0,c.warn)(`Not a valid color format: "${kn}"`),[0,0,0])}function Nt(kn){const en=document.createElement("span");en.style.visibility="hidden",document.body.append(en);for(const hn of kn.keys()){en.style.color=hn;const Tn=window.getComputedStyle(en).color;kn.set(hn,Ct(Tn))}en.remove()}function Ut(kn){const{a:en,b:hn,c:Tn,d:On,e:In,f:Zn}=kn.getTransform();return[en,hn,Tn,On,In,Zn]}function Tt(kn){const{a:en,b:hn,c:Tn,d:On,e:In,f:Zn}=kn.getTransform().invertSelf();return[en,hn,Tn,On,In,Zn]}function qt(kn,en,hn=!1,Tn=!0){if(en instanceof et){const{pageWidth:On,pageHeight:In}=en.rawDims,{style:Zn}=kn,Qn=c.FeatureTest.isCSSRoundSupported,Kn=`var(--scale-factor) * ${On}px`,er=`var(--scale-factor) * ${In}px`,Jn=Qn?`round(${Kn}, 1px)`:`calc(${Kn})`,Yn=Qn?`round(${er}, 1px)`:`calc(${er})`;!hn||en.rotation%180===0?(Zn.width=Jn,Zn.height=Yn):(Zn.width=Yn,Zn.height=Jn)}Tn&&kn.setAttribute("data-main-rotation",en.rotation)}},(s,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseFilterFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var a=o(1);class c{constructor(){this.constructor===c&&(0,a.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter($){return"none"}addHCMFilter($,_e){return"none"}addHighlightHCMFilter($,_e,tt,et){return"none"}destroy($=!1){}}e.BaseFilterFactory=c;class h{constructor(){this.constructor===h&&(0,a.unreachable)("Cannot initialize BaseCanvasFactory.")}create($,_e){if($<=0||_e<=0)throw new Error("Invalid canvas size");const tt=this._createCanvas($,_e);return{canvas:tt,context:tt.getContext("2d")}}reset($,_e,tt){if(!$.canvas)throw new Error("Canvas is not specified");if(_e<=0||tt<=0)throw new Error("Invalid canvas size");$.canvas.width=_e,$.canvas.height=tt}destroy($){if(!$.canvas)throw new Error("Canvas is not specified");$.canvas.width=0,$.canvas.height=0,$.canvas=null,$.context=null}_createCanvas($,_e){(0,a.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=h;class g{constructor({baseUrl:$=null,isCompressed:_e=!0}){this.constructor===g&&(0,a.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=$,this.isCompressed=_e}async fetch({name:$}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!$)throw new Error("CMap name must be specified.");const _e=this.baseUrl+$+(this.isCompressed?".bcmap":""),tt=this.isCompressed?a.CMapCompressionType.BINARY:a.CMapCompressionType.NONE;return this._fetchData(_e,tt).catch(et=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${_e}`)})}_fetchData($,_e){(0,a.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=g;class b{constructor({baseUrl:$=null}){this.constructor===b&&(0,a.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=$}async fetch({filename:$}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!$)throw new Error("Font filename must be specified.");const _e=`${this.baseUrl}${$}`;return this._fetchData(_e).catch(tt=>{throw new Error(`Unable to load font data at: ${_e}`)})}_fetchData($){(0,a.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=b;class _{constructor(){this.constructor===_&&(0,a.unreachable)("Cannot initialize BaseSVGFactory.")}create($,_e,tt=!1){if($<=0||_e<=0)throw new Error("Invalid SVG dimensions");const et=this._createSVG("svg:svg");return et.setAttribute("version","1.1"),tt||(et.setAttribute("width",`${$}px`),et.setAttribute("height",`${_e}px`)),et.setAttribute("preserveAspectRatio","none"),et.setAttribute("viewBox",`0 0 ${$} ${_e}`),et}createElement($){if(typeof $!="string")throw new Error("Invalid SVG element type");return this._createSVG($)}_createSVG($){(0,a.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=_},(s,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var a=o(1);const c=3285377520,h=4294901760,g=65535;class b{constructor(j){this.h1=j?j&4294967295:c,this.h2=j?j&4294967295:c}update(j){let $,_e;if(typeof j=="string"){$=new Uint8Array(j.length*2),_e=0;for(let vt=0,mt=j.length;vt<mt;vt++){const pt=j.charCodeAt(vt);pt<=255?$[_e++]=pt:($[_e++]=pt>>>8,$[_e++]=pt&255)}}else if((0,a.isArrayBuffer)(j))$=j.slice(),_e=$.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const tt=_e>>2,et=_e-tt*4,ut=new Uint32Array($.buffer,0,tt);let ht=0,st=0,nt=this.h1,rt=this.h2;const at=3432918353,dt=461845907,ot=at&g,ct=dt&g;for(let vt=0;vt<tt;vt++)vt&1?(ht=ut[vt],ht=ht*at&h|ht*ot&g,ht=ht<<15|ht>>>17,ht=ht*dt&h|ht*ct&g,nt^=ht,nt=nt<<13|nt>>>19,nt=nt*5+3864292196):(st=ut[vt],st=st*at&h|st*ot&g,st=st<<15|st>>>17,st=st*dt&h|st*ct&g,rt^=st,rt=rt<<13|rt>>>19,rt=rt*5+3864292196);switch(ht=0,et){case 3:ht^=$[tt*4+2]<<16;case 2:ht^=$[tt*4+1]<<8;case 1:ht^=$[tt*4],ht=ht*at&h|ht*ot&g,ht=ht<<15|ht>>>17,ht=ht*dt&h|ht*ct&g,tt&1?nt^=ht:rt^=ht}this.h1=nt,this.h2=rt}hexdigest(){let j=this.h1,$=this.h2;return j^=$>>>1,j=j*3981806797&h|j*36045&g,$=$*4283543511&h|(($<<16|j>>>16)*2950163797&h)>>>16,j^=$>>>1,j=j*444984403&h|j*60499&g,$=$*3301882366&h|(($<<16|j>>>16)*3120437893&h)>>>16,j^=$>>>1,(j>>>0).toString(16).padStart(8,"0")+($>>>0).toString(16).padStart(8,"0")}}e.MurmurHash3_64=b},(s,e,o)=>{var g;Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var a=o(1);class c{constructor({ownerDocument:_=globalThis.document,styleElement:j=null}){Yt(this,g,new Set);this._document=_,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(_){this.nativeFontFaces.add(_),this._document.fonts.add(_)}removeNativeFontFace(_){this.nativeFontFaces.delete(_),this._document.fonts.delete(_)}insertRule(_){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const j=this.styleElement.sheet;j.insertRule(_,j.cssRules.length)}clear(){for(const _ of this.nativeFontFaces)this._document.fonts.delete(_);this.nativeFontFaces.clear(),bt(this,g).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(_){if(!(!_||bt(this,g).has(_.loadedName))){if((0,a.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:j,src:$,style:_e}=_,tt=new FontFace(j,$,_e);this.addNativeFontFace(tt);try{await tt.load(),bt(this,g).add(j)}catch{(0,a.warn)(`Cannot load system font: ${_.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(tt)}return}(0,a.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(_){if(_.attached||_.missingFile&&!_.systemFontInfo)return;if(_.attached=!0,_.systemFontInfo){await this.loadSystemFont(_.systemFontInfo);return}if(this.isFontLoadingAPISupported){const $=_.createNativeFontFace();if($){this.addNativeFontFace($);try{await $.loaded}catch(_e){throw(0,a.warn)(`Failed to load font '${$.family}': '${_e}'.`),_.disableFontFace=!0,_e}}return}const j=_.createFontFaceRule();if(j){if(this.insertRule(j),this.isSyncFontLoadingSupported)return;await new Promise($=>{const _e=this._queueLoadingCallback($);this._prepareFontLoadEvent(_,_e)})}}get isFontLoadingAPISupported(){var j;const _=!!((j=this._document)!=null&&j.fonts);return(0,a.shadow)(this,"isFontLoadingAPISupported",_)}get isSyncFontLoadingSupported(){let _=!1;return(a.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(_=!0),(0,a.shadow)(this,"isSyncFontLoadingSupported",_)}_queueLoadingCallback(_){function j(){for((0,a.assert)(!_e.done,"completeRequest() cannot be called twice."),_e.done=!0;$.length>0&&$[0].done;){const tt=$.shift();setTimeout(tt.callback,0)}}const{loadingRequests:$}=this,_e={done:!1,complete:j,callback:_};return $.push(_e),_e}get _loadTestFont(){const _=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,a.shadow)(this,"_loadTestFont",_)}_prepareFontLoadEvent(_,j){function $(Ct,Nt){return Ct.charCodeAt(Nt)<<24|Ct.charCodeAt(Nt+1)<<16|Ct.charCodeAt(Nt+2)<<8|Ct.charCodeAt(Nt+3)&255}function _e(Ct,Nt,Ut,Tt){const qt=Ct.substring(0,Nt),Vt=Ct.substring(Nt+Ut);return qt+Tt+Vt}let tt,et;const ut=this._document.createElement("canvas");ut.width=1,ut.height=1;const ht=ut.getContext("2d");let st=0;function nt(Ct,Nt){if(++st>30){(0,a.warn)("Load test font never loaded."),Nt();return}if(ht.font="30px "+Ct,ht.fillText(".",0,20),ht.getImageData(0,0,1,1).data[3]>0){Nt();return}setTimeout(nt.bind(null,Ct,Nt))}const rt=`lt${Date.now()}${this.loadTestFontId++}`;let at=this._loadTestFont;at=_e(at,976,rt.length,rt);const ot=16,ct=1482184792;let vt=$(at,ot);for(tt=0,et=rt.length-3;tt<et;tt+=4)vt=vt-ct+$(rt,tt)|0;tt<rt.length&&(vt=vt-ct+$(rt+"XXX",tt)|0),at=_e(at,ot,4,(0,a.string32)(vt));const mt=`url(data:font/opentype;base64,${btoa(at)});`,pt=`@font-face {font-family:"${rt}";src:${mt}}`;this.insertRule(pt);const Et=this._document.createElement("div");Et.style.visibility="hidden",Et.style.width=Et.style.height="10px",Et.style.position="absolute",Et.style.top=Et.style.left="0px";for(const Ct of[_.loadedName,rt]){const Nt=this._document.createElement("span");Nt.textContent="Hi",Nt.style.fontFamily=Ct,Et.append(Nt)}this._document.body.append(Et),nt(rt,()=>{Et.remove(),j.complete()})}}g=new WeakMap,e.FontLoader=c;class h{constructor(_,{isEvalSupported:j=!0,disableFontFace:$=!1,ignoreErrors:_e=!1,inspectFont:tt=null}){this.compiledGlyphs=Object.create(null);for(const et in _)this[et]=_[et];this.isEvalSupported=j!==!1,this.disableFontFace=$===!0,this.ignoreErrors=_e===!0,this._inspectFont=tt}createNativeFontFace(){var j;if(!this.data||this.disableFontFace)return null;let _;if(!this.cssFontInfo)_=new FontFace(this.loadedName,this.data,{});else{const $={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&($.style=`oblique ${this.cssFontInfo.italicAngle}deg`),_=new FontFace(this.cssFontInfo.fontFamily,this.data,$)}return(j=this._inspectFont)==null||j.call(this,this),_}createFontFaceRule(){var _e;if(!this.data||this.disableFontFace)return null;const _=(0,a.bytesToString)(this.data),j=`url(data:${this.mimetype};base64,${btoa(_)});`;let $;if(!this.cssFontInfo)$=`@font-face {font-family:"${this.loadedName}";src:${j}}`;else{let tt=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(tt+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),$=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${tt}src:${j}}`}return(_e=this._inspectFont)==null||_e.call(this,this,j),$}getPathGenerator(_,j){if(this.compiledGlyphs[j]!==void 0)return this.compiledGlyphs[j];let $;try{$=_.get(this.loadedName+"_path_"+j)}catch(_e){if(!this.ignoreErrors)throw _e;return(0,a.warn)(`getPathGenerator - ignoring character: "${_e}".`),this.compiledGlyphs[j]=function(tt,et){}}if(this.isEvalSupported&&a.FeatureTest.isEvalSupported){const _e=[];for(const tt of $){const et=tt.args!==void 0?tt.args.join(","):"";_e.push("c.",tt.cmd,"(",et,`);
`)}return this.compiledGlyphs[j]=new Function("c","size",_e.join(""))}return this.compiledGlyphs[j]=function(_e,tt){for(const et of $)et.cmd==="scale"&&(et.args=[tt,-tt]),_e[et.cmd].apply(_e,et.args)}}}e.FontFaceObject=h},(s,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeFilterFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var a=o(7);o(1);const c=function(j){return new Promise(($,_e)=>{require$$5.readFile(j,(et,ut)=>{if(et||!ut){_e(new Error(et));return}$(new Uint8Array(ut))})})};class h extends a.BaseFilterFactory{}e.NodeFilterFactory=h;class g extends a.BaseCanvasFactory{_createCanvas($,_e){return require$$5.createCanvas($,_e)}}e.NodeCanvasFactory=g;class b extends a.BaseCMapReaderFactory{_fetchData($,_e){return c($).then(tt=>({cMapData:tt,compressionType:_e}))}}e.NodeCMapReaderFactory=b;class _ extends a.BaseStandardFontDataFactory{_fetchData($){return c($)}}e.NodeStandardFontDataFactory=_},(s,e,o)=>{var It,ws,fn,As;Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var a=o(1),c=o(6),h=o(12),g=o(13);const b=16,_=100,j=4096,$=15,_e=10,tt=1e3,et=16;function ut(Mt,xt){if(Mt._removeMirroring)throw new Error("Context is already forwarding operations.");Mt.__originalSave=Mt.save,Mt.__originalRestore=Mt.restore,Mt.__originalRotate=Mt.rotate,Mt.__originalScale=Mt.scale,Mt.__originalTranslate=Mt.translate,Mt.__originalTransform=Mt.transform,Mt.__originalSetTransform=Mt.setTransform,Mt.__originalResetTransform=Mt.resetTransform,Mt.__originalClip=Mt.clip,Mt.__originalMoveTo=Mt.moveTo,Mt.__originalLineTo=Mt.lineTo,Mt.__originalBezierCurveTo=Mt.bezierCurveTo,Mt.__originalRect=Mt.rect,Mt.__originalClosePath=Mt.closePath,Mt.__originalBeginPath=Mt.beginPath,Mt._removeMirroring=()=>{Mt.save=Mt.__originalSave,Mt.restore=Mt.__originalRestore,Mt.rotate=Mt.__originalRotate,Mt.scale=Mt.__originalScale,Mt.translate=Mt.__originalTranslate,Mt.transform=Mt.__originalTransform,Mt.setTransform=Mt.__originalSetTransform,Mt.resetTransform=Mt.__originalResetTransform,Mt.clip=Mt.__originalClip,Mt.moveTo=Mt.__originalMoveTo,Mt.lineTo=Mt.__originalLineTo,Mt.bezierCurveTo=Mt.__originalBezierCurveTo,Mt.rect=Mt.__originalRect,Mt.closePath=Mt.__originalClosePath,Mt.beginPath=Mt.__originalBeginPath,delete Mt._removeMirroring},Mt.save=function(){xt.save(),this.__originalSave()},Mt.restore=function(){xt.restore(),this.__originalRestore()},Mt.translate=function(wt,kt){xt.translate(wt,kt),this.__originalTranslate(wt,kt)},Mt.scale=function(wt,kt){xt.scale(wt,kt),this.__originalScale(wt,kt)},Mt.transform=function(wt,kt,Dt,Ft,$t,Wt){xt.transform(wt,kt,Dt,Ft,$t,Wt),this.__originalTransform(wt,kt,Dt,Ft,$t,Wt)},Mt.setTransform=function(wt,kt,Dt,Ft,$t,Wt){xt.setTransform(wt,kt,Dt,Ft,$t,Wt),this.__originalSetTransform(wt,kt,Dt,Ft,$t,Wt)},Mt.resetTransform=function(){xt.resetTransform(),this.__originalResetTransform()},Mt.rotate=function(wt){xt.rotate(wt),this.__originalRotate(wt)},Mt.clip=function(wt){xt.clip(wt),this.__originalClip(wt)},Mt.moveTo=function(At,wt){xt.moveTo(At,wt),this.__originalMoveTo(At,wt)},Mt.lineTo=function(At,wt){xt.lineTo(At,wt),this.__originalLineTo(At,wt)},Mt.bezierCurveTo=function(At,wt,kt,Dt,Ft,$t){xt.bezierCurveTo(At,wt,kt,Dt,Ft,$t),this.__originalBezierCurveTo(At,wt,kt,Dt,Ft,$t)},Mt.rect=function(At,wt,kt,Dt){xt.rect(At,wt,kt,Dt),this.__originalRect(At,wt,kt,Dt)},Mt.closePath=function(){xt.closePath(),this.__originalClosePath()},Mt.beginPath=function(){xt.beginPath(),this.__originalBeginPath()}}class ht{constructor(xt){this.canvasFactory=xt,this.cache=Object.create(null)}getCanvas(xt,At,wt){let kt;return this.cache[xt]!==void 0?(kt=this.cache[xt],this.canvasFactory.reset(kt,At,wt)):(kt=this.canvasFactory.create(At,wt),this.cache[xt]=kt),kt}delete(xt){delete this.cache[xt]}clear(){for(const xt in this.cache){const At=this.cache[xt];this.canvasFactory.destroy(At),delete this.cache[xt]}}}function st(Mt,xt,At,wt,kt,Dt,Ft,$t,Wt,un){const[rn,bn,An,Nn,wn,jn]=(0,c.getCurrentTransform)(Mt);if(bn===0&&An===0){const Un=Ft*rn+wn,kn=Math.round(Un),en=$t*Nn+jn,hn=Math.round(en),Tn=(Ft+Wt)*rn+wn,On=Math.abs(Math.round(Tn)-kn)||1,In=($t+un)*Nn+jn,Zn=Math.abs(Math.round(In)-hn)||1;return Mt.setTransform(Math.sign(rn),0,0,Math.sign(Nn),kn,hn),Mt.drawImage(xt,At,wt,kt,Dt,0,0,On,Zn),Mt.setTransform(rn,bn,An,Nn,wn,jn),[On,Zn]}if(rn===0&&Nn===0){const Un=$t*An+wn,kn=Math.round(Un),en=Ft*bn+jn,hn=Math.round(en),Tn=($t+un)*An+wn,On=Math.abs(Math.round(Tn)-kn)||1,In=(Ft+Wt)*bn+jn,Zn=Math.abs(Math.round(In)-hn)||1;return Mt.setTransform(0,Math.sign(bn),Math.sign(An),0,kn,hn),Mt.drawImage(xt,At,wt,kt,Dt,0,0,Zn,On),Mt.setTransform(rn,bn,An,Nn,wn,jn),[Zn,On]}Mt.drawImage(xt,At,wt,kt,Dt,Ft,$t,Wt,un);const Xn=Math.hypot(rn,bn),Ln=Math.hypot(An,Nn);return[Xn*Wt,Ln*un]}function nt(Mt){const{width:xt,height:At}=Mt;if(xt>tt||At>tt)return null;const wt=1e3,kt=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),Dt=xt+1;let Ft=new Uint8Array(Dt*(At+1)),$t,Wt,un;const rn=xt+7&-8;let bn=new Uint8Array(rn*At),An=0;for(const Ln of Mt.data){let Un=128;for(;Un>0;)bn[An++]=Ln&Un?0:255,Un>>=1}let Nn=0;for(An=0,bn[An]!==0&&(Ft[0]=1,++Nn),Wt=1;Wt<xt;Wt++)bn[An]!==bn[An+1]&&(Ft[Wt]=bn[An]?2:1,++Nn),An++;for(bn[An]!==0&&(Ft[Wt]=2,++Nn),$t=1;$t<At;$t++){An=$t*rn,un=$t*Dt,bn[An-rn]!==bn[An]&&(Ft[un]=bn[An]?1:8,++Nn);let Ln=(bn[An]?4:0)+(bn[An-rn]?8:0);for(Wt=1;Wt<xt;Wt++)Ln=(Ln>>2)+(bn[An+1]?4:0)+(bn[An-rn+1]?8:0),kt[Ln]&&(Ft[un+Wt]=kt[Ln],++Nn),An++;if(bn[An-rn]!==bn[An]&&(Ft[un+Wt]=bn[An]?2:4,++Nn),Nn>wt)return null}for(An=rn*(At-1),un=$t*Dt,bn[An]!==0&&(Ft[un]=8,++Nn),Wt=1;Wt<xt;Wt++)bn[An]!==bn[An+1]&&(Ft[un+Wt]=bn[An]?4:8,++Nn),An++;if(bn[An]!==0&&(Ft[un+Wt]=4,++Nn),Nn>wt)return null;const wn=new Int32Array([0,Dt,-1,0,-Dt,0,0,0,1]),jn=new Path2D;for($t=0;Nn&&$t<=At;$t++){let Ln=$t*Dt;const Un=Ln+xt;for(;Ln<Un&&!Ft[Ln];)Ln++;if(Ln===Un)continue;jn.moveTo(Ln%Dt,$t);const kn=Ln;let en=Ft[Ln];do{const hn=wn[en];do Ln+=hn;while(!Ft[Ln]);const Tn=Ft[Ln];Tn!==5&&Tn!==10?(en=Tn,Ft[Ln]=0):(en=Tn&51*en>>4,Ft[Ln]&=en>>2|en<<2),jn.lineTo(Ln%Dt,Ln/Dt|0),Ft[Ln]||--Nn}while(kn!==Ln);--$t}return bn=null,Ft=null,function(Ln){Ln.save(),Ln.scale(1/xt,-1/At),Ln.translate(0,-At),Ln.fill(jn),Ln.beginPath(),Ln.restore()}}class rt{constructor(xt,At){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=a.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=a.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=a.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,xt,At])}clone(){const xt=Object.create(this);return xt.clipBox=this.clipBox.slice(),xt}setCurrentPoint(xt,At){this.x=xt,this.y=At}updatePathMinMax(xt,At,wt){[At,wt]=a.Util.applyTransform([At,wt],xt),this.minX=Math.min(this.minX,At),this.minY=Math.min(this.minY,wt),this.maxX=Math.max(this.maxX,At),this.maxY=Math.max(this.maxY,wt)}updateRectMinMax(xt,At){const wt=a.Util.applyTransform(At,xt),kt=a.Util.applyTransform(At.slice(2),xt);this.minX=Math.min(this.minX,wt[0],kt[0]),this.minY=Math.min(this.minY,wt[1],kt[1]),this.maxX=Math.max(this.maxX,wt[0],kt[0]),this.maxY=Math.max(this.maxY,wt[1],kt[1])}updateScalingPathMinMax(xt,At){a.Util.scaleMinMax(xt,At),this.minX=Math.min(this.minX,At[0]),this.maxX=Math.max(this.maxX,At[1]),this.minY=Math.min(this.minY,At[2]),this.maxY=Math.max(this.maxY,At[3])}updateCurvePathMinMax(xt,At,wt,kt,Dt,Ft,$t,Wt,un,rn){const bn=a.Util.bezierBoundingBox(At,wt,kt,Dt,Ft,$t,Wt,un);if(rn){rn[0]=Math.min(rn[0],bn[0],bn[2]),rn[1]=Math.max(rn[1],bn[0],bn[2]),rn[2]=Math.min(rn[2],bn[1],bn[3]),rn[3]=Math.max(rn[3],bn[1],bn[3]);return}this.updateRectMinMax(xt,bn)}getPathBoundingBox(xt=h.PathType.FILL,At=null){const wt=[this.minX,this.minY,this.maxX,this.maxY];if(xt===h.PathType.STROKE){At||(0,a.unreachable)("Stroke bounding box must include transform.");const kt=a.Util.singularValueDecompose2dScale(At),Dt=kt[0]*this.lineWidth/2,Ft=kt[1]*this.lineWidth/2;wt[0]-=Dt,wt[1]-=Ft,wt[2]+=Dt,wt[3]+=Ft}return wt}updateClipFromPath(){const xt=a.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(xt||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(xt){this.clipBox=xt,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(xt=h.PathType.FILL,At=null){return a.Util.intersect(this.clipBox,this.getPathBoundingBox(xt,At))}}function at(Mt,xt){if(typeof ImageData<"u"&&xt instanceof ImageData){Mt.putImageData(xt,0,0);return}const At=xt.height,wt=xt.width,kt=At%et,Dt=(At-kt)/et,Ft=kt===0?Dt:Dt+1,$t=Mt.createImageData(wt,et);let Wt=0,un;const rn=xt.data,bn=$t.data;let An,Nn,wn,jn;if(xt.kind===a.ImageKind.GRAYSCALE_1BPP){const Xn=rn.byteLength,Ln=new Uint32Array(bn.buffer,0,bn.byteLength>>2),Un=Ln.length,kn=wt+7>>3,en=4294967295,hn=a.FeatureTest.isLittleEndian?4278190080:255;for(An=0;An<Ft;An++){for(wn=An<Dt?et:kt,un=0,Nn=0;Nn<wn;Nn++){const Tn=Xn-Wt;let On=0;const In=Tn>kn?wt:Tn*8-7,Zn=In&-8;let Qn=0,Kn=0;for(;On<Zn;On+=8)Kn=rn[Wt++],Ln[un++]=Kn&128?en:hn,Ln[un++]=Kn&64?en:hn,Ln[un++]=Kn&32?en:hn,Ln[un++]=Kn&16?en:hn,Ln[un++]=Kn&8?en:hn,Ln[un++]=Kn&4?en:hn,Ln[un++]=Kn&2?en:hn,Ln[un++]=Kn&1?en:hn;for(;On<In;On++)Qn===0&&(Kn=rn[Wt++],Qn=128),Ln[un++]=Kn&Qn?en:hn,Qn>>=1}for(;un<Un;)Ln[un++]=0;Mt.putImageData($t,0,An*et)}}else if(xt.kind===a.ImageKind.RGBA_32BPP){for(Nn=0,jn=wt*et*4,An=0;An<Dt;An++)bn.set(rn.subarray(Wt,Wt+jn)),Wt+=jn,Mt.putImageData($t,0,Nn),Nn+=et;An<Ft&&(jn=wt*kt*4,bn.set(rn.subarray(Wt,Wt+jn)),Mt.putImageData($t,0,Nn))}else if(xt.kind===a.ImageKind.RGB_24BPP)for(wn=et,jn=wt*wn,An=0;An<Ft;An++){for(An>=Dt&&(wn=kt,jn=wt*wn),un=0,Nn=jn;Nn--;)bn[un++]=rn[Wt++],bn[un++]=rn[Wt++],bn[un++]=rn[Wt++],bn[un++]=255;Mt.putImageData($t,0,An*et)}else throw new Error(`bad image kind: ${xt.kind}`)}function dt(Mt,xt){if(xt.bitmap){Mt.drawImage(xt.bitmap,0,0);return}const At=xt.height,wt=xt.width,kt=At%et,Dt=(At-kt)/et,Ft=kt===0?Dt:Dt+1,$t=Mt.createImageData(wt,et);let Wt=0;const un=xt.data,rn=$t.data;for(let bn=0;bn<Ft;bn++){const An=bn<Dt?et:kt;({srcPos:Wt}=(0,g.convertBlackAndWhiteToRGBA)({src:un,srcPos:Wt,dest:rn,width:wt,height:An,nonBlackColor:0})),Mt.putImageData($t,0,bn*et)}}function ot(Mt,xt){const At=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const wt of At)Mt[wt]!==void 0&&(xt[wt]=Mt[wt]);Mt.setLineDash!==void 0&&(xt.setLineDash(Mt.getLineDash()),xt.lineDashOffset=Mt.lineDashOffset)}function ct(Mt){if(Mt.strokeStyle=Mt.fillStyle="#000000",Mt.fillRule="nonzero",Mt.globalAlpha=1,Mt.lineWidth=1,Mt.lineCap="butt",Mt.lineJoin="miter",Mt.miterLimit=10,Mt.globalCompositeOperation="source-over",Mt.font="10px sans-serif",Mt.setLineDash!==void 0&&(Mt.setLineDash([]),Mt.lineDashOffset=0),!a.isNodeJS){const{filter:xt}=Mt;xt!=="none"&&xt!==""&&(Mt.filter="none")}}function vt(Mt,xt,At,wt){const kt=Mt.length;for(let Dt=3;Dt<kt;Dt+=4){const Ft=Mt[Dt];if(Ft===0)Mt[Dt-3]=xt,Mt[Dt-2]=At,Mt[Dt-1]=wt;else if(Ft<255){const $t=255-Ft;Mt[Dt-3]=Mt[Dt-3]*Ft+xt*$t>>8,Mt[Dt-2]=Mt[Dt-2]*Ft+At*$t>>8,Mt[Dt-1]=Mt[Dt-1]*Ft+wt*$t>>8}}}function mt(Mt,xt,At){const wt=Mt.length,kt=1/255;for(let Dt=3;Dt<wt;Dt+=4){const Ft=At?At[Mt[Dt]]:Mt[Dt];xt[Dt]=xt[Dt]*Ft*kt|0}}function pt(Mt,xt,At){const wt=Mt.length;for(let kt=3;kt<wt;kt+=4){const Dt=Mt[kt-3]*77+Mt[kt-2]*152+Mt[kt-1]*28;xt[kt]=At?xt[kt]*At[Dt>>8]>>8:xt[kt]*Dt>>16}}function Et(Mt,xt,At,wt,kt,Dt,Ft,$t,Wt,un,rn){const bn=!!Dt,An=bn?Dt[0]:0,Nn=bn?Dt[1]:0,wn=bn?Dt[2]:0,jn=kt==="Luminosity"?pt:mt,Ln=Math.min(wt,Math.ceil(1048576/At));for(let Un=0;Un<wt;Un+=Ln){const kn=Math.min(Ln,wt-Un),en=Mt.getImageData($t-un,Un+(Wt-rn),At,kn),hn=xt.getImageData($t,Un+Wt,At,kn);bn&&vt(en.data,An,Nn,wn),jn(en.data,hn.data,Ft),xt.putImageData(hn,$t,Un+Wt)}}function Ct(Mt,xt,At,wt){const kt=wt[0],Dt=wt[1],Ft=wt[2]-kt,$t=wt[3]-Dt;Ft===0||$t===0||(Et(xt.context,At,Ft,$t,xt.subtype,xt.backdrop,xt.transferMap,kt,Dt,xt.offsetX,xt.offsetY),Mt.save(),Mt.globalAlpha=1,Mt.globalCompositeOperation="source-over",Mt.setTransform(1,0,0,1,0,0),Mt.drawImage(At.canvas,0,0),Mt.restore())}function Nt(Mt,xt){const At=a.Util.singularValueDecompose2dScale(Mt);At[0]=Math.fround(At[0]),At[1]=Math.fround(At[1]);const wt=Math.fround((globalThis.devicePixelRatio||1)*c.PixelsPerInch.PDF_TO_CSS_UNITS);return xt!==void 0?xt:At[0]<=wt||At[1]<=wt}const Ut=["butt","round","square"],Tt=["miter","round","bevel"],qt={},Vt={},xn=class xn{constructor(xt,At,wt,kt,Dt,{optionalContentConfig:Ft,markedContentStack:$t=null},Wt,un){Yt(this,It);Yt(this,fn);this.ctx=xt,this.current=new rt(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=At,this.objs=wt,this.canvasFactory=kt,this.filterFactory=Dt,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=$t||[],this.optionalContentConfig=Ft,this.cachedCanvases=new ht(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=Wt,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=un,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(xt,At=null){return typeof xt=="string"?xt.startsWith("g_")?this.commonObjs.get(xt):this.objs.get(xt):At}beginDrawing({transform:xt,viewport:At,transparency:wt=!1,background:kt=null}){const Dt=this.ctx.canvas.width,Ft=this.ctx.canvas.height,$t=this.ctx.fillStyle;if(this.ctx.fillStyle=kt||"#ffffff",this.ctx.fillRect(0,0,Dt,Ft),this.ctx.fillStyle=$t,wt){const Wt=this.cachedCanvases.getCanvas("transparent",Dt,Ft);this.compositeCtx=this.ctx,this.transparentCanvas=Wt.canvas,this.ctx=Wt.context,this.ctx.save(),this.ctx.transform(...(0,c.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),ct(this.ctx),xt&&(this.ctx.transform(...xt),this.outputScaleX=xt[0],this.outputScaleY=xt[0]),this.ctx.transform(...At.transform),this.viewportScale=At.scale,this.baseTransform=(0,c.getCurrentTransform)(this.ctx)}executeOperatorList(xt,At,wt,kt){const Dt=xt.argsArray,Ft=xt.fnArray;let $t=At||0;const Wt=Dt.length;if(Wt===$t)return $t;const un=Wt-$t>_e&&typeof wt=="function",rn=un?Date.now()+$:0;let bn=0;const An=this.commonObjs,Nn=this.objs;let wn;for(;;){if(kt!==void 0&&$t===kt.nextBreakPoint)return kt.breakIt($t,wt),$t;if(wn=Ft[$t],wn!==a.OPS.dependency)this[wn].apply(this,Dt[$t]);else for(const jn of Dt[$t]){const Xn=jn.startsWith("g_")?An:Nn;if(!Xn.has(jn))return Xn.get(jn,wt),$t}if($t++,$t===Wt)return $t;if(un&&++bn>_e){if(Date.now()>rn)return wt(),$t;bn=0}}}endDrawing(){an(this,It,ws).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const xt of this._cachedBitmapsMap.values()){for(const At of xt.values())typeof HTMLCanvasElement<"u"&&At instanceof HTMLCanvasElement&&(At.width=At.height=0);xt.clear()}this._cachedBitmapsMap.clear(),an(this,fn,As).call(this)}_scaleImage(xt,At){const wt=xt.width,kt=xt.height;let Dt=Math.max(Math.hypot(At[0],At[1]),1),Ft=Math.max(Math.hypot(At[2],At[3]),1),$t=wt,Wt=kt,un="prescale1",rn,bn;for(;Dt>2&&$t>1||Ft>2&&Wt>1;){let An=$t,Nn=Wt;Dt>2&&$t>1&&(An=$t>=16384?Math.floor($t/2)-1||1:Math.ceil($t/2),Dt/=$t/An),Ft>2&&Wt>1&&(Nn=Wt>=16384?Math.floor(Wt/2)-1||1:Math.ceil(Wt)/2,Ft/=Wt/Nn),rn=this.cachedCanvases.getCanvas(un,An,Nn),bn=rn.context,bn.clearRect(0,0,An,Nn),bn.drawImage(xt,0,0,$t,Wt,0,0,An,Nn),xt=rn.canvas,$t=An,Wt=Nn,un=un==="prescale1"?"prescale2":"prescale1"}return{img:xt,paintWidth:$t,paintHeight:Wt}}_createMaskCanvas(xt){const At=this.ctx,{width:wt,height:kt}=xt,Dt=this.current.fillColor,Ft=this.current.patternFill,$t=(0,c.getCurrentTransform)(At);let Wt,un,rn,bn;if((xt.bitmap||xt.data)&&xt.count>1){const On=xt.bitmap||xt.data.buffer;un=JSON.stringify(Ft?$t:[$t.slice(0,4),Dt]),Wt=this._cachedBitmapsMap.get(On),Wt||(Wt=new Map,this._cachedBitmapsMap.set(On,Wt));const In=Wt.get(un);if(In&&!Ft){const Zn=Math.round(Math.min($t[0],$t[2])+$t[4]),Qn=Math.round(Math.min($t[1],$t[3])+$t[5]);return{canvas:In,offsetX:Zn,offsetY:Qn}}rn=In}rn||(bn=this.cachedCanvases.getCanvas("maskCanvas",wt,kt),dt(bn.context,xt));let An=a.Util.transform($t,[1/wt,0,0,-1/kt,0,0]);An=a.Util.transform(An,[1,0,0,1,0,-kt]);const Nn=a.Util.applyTransform([0,0],An),wn=a.Util.applyTransform([wt,kt],An),jn=a.Util.normalizeRect([Nn[0],Nn[1],wn[0],wn[1]]),Xn=Math.round(jn[2]-jn[0])||1,Ln=Math.round(jn[3]-jn[1])||1,Un=this.cachedCanvases.getCanvas("fillCanvas",Xn,Ln),kn=Un.context,en=Math.min(Nn[0],wn[0]),hn=Math.min(Nn[1],wn[1]);kn.translate(-en,-hn),kn.transform(...An),rn||(rn=this._scaleImage(bn.canvas,(0,c.getCurrentTransformInverse)(kn)),rn=rn.img,Wt&&Ft&&Wt.set(un,rn)),kn.imageSmoothingEnabled=Nt((0,c.getCurrentTransform)(kn),xt.interpolate),st(kn,rn,0,0,rn.width,rn.height,0,0,wt,kt),kn.globalCompositeOperation="source-in";const Tn=a.Util.transform((0,c.getCurrentTransformInverse)(kn),[1,0,0,1,-en,-hn]);return kn.fillStyle=Ft?Dt.getPattern(At,this,Tn,h.PathType.FILL):Dt,kn.fillRect(0,0,wt,kt),Wt&&!Ft&&(this.cachedCanvases.delete("fillCanvas"),Wt.set(un,Un.canvas)),{canvas:Un.canvas,offsetX:Math.round(en),offsetY:Math.round(hn)}}setLineWidth(xt){xt!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=xt,this.ctx.lineWidth=xt}setLineCap(xt){this.ctx.lineCap=Ut[xt]}setLineJoin(xt){this.ctx.lineJoin=Tt[xt]}setMiterLimit(xt){this.ctx.miterLimit=xt}setDash(xt,At){const wt=this.ctx;wt.setLineDash!==void 0&&(wt.setLineDash(xt),wt.lineDashOffset=At)}setRenderingIntent(xt){}setFlatness(xt){}setGState(xt){for(const[At,wt]of xt)switch(At){case"LW":this.setLineWidth(wt);break;case"LC":this.setLineCap(wt);break;case"LJ":this.setLineJoin(wt);break;case"ML":this.setMiterLimit(wt);break;case"D":this.setDash(wt[0],wt[1]);break;case"RI":this.setRenderingIntent(wt);break;case"FL":this.setFlatness(wt);break;case"Font":this.setFont(wt[0],wt[1]);break;case"CA":this.current.strokeAlpha=wt;break;case"ca":this.current.fillAlpha=wt,this.ctx.globalAlpha=wt;break;case"BM":this.ctx.globalCompositeOperation=wt;break;case"SMask":this.current.activeSMask=wt?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(wt);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const xt=this.inSMaskMode;this.current.activeSMask&&!xt?this.beginSMaskMode():!this.current.activeSMask&&xt&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const xt=this.ctx.canvas.width,At=this.ctx.canvas.height,wt="smaskGroupAt"+this.groupLevel,kt=this.cachedCanvases.getCanvas(wt,xt,At);this.suspendedCtx=this.ctx,this.ctx=kt.context;const Dt=this.ctx;Dt.setTransform(...(0,c.getCurrentTransform)(this.suspendedCtx)),ot(this.suspendedCtx,Dt),ut(Dt,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),ot(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(xt){if(!this.current.activeSMask)return;xt?(xt[0]=Math.floor(xt[0]),xt[1]=Math.floor(xt[1]),xt[2]=Math.ceil(xt[2]),xt[3]=Math.ceil(xt[3])):xt=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const At=this.current.activeSMask,wt=this.suspendedCtx;Ct(wt,At,this.ctx,xt),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(ot(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const xt=this.current;this.stateStack.push(xt),this.current=xt.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),ot(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(xt,At,wt,kt,Dt,Ft){this.ctx.transform(xt,At,wt,kt,Dt,Ft),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(xt,At,wt){const kt=this.ctx,Dt=this.current;let Ft=Dt.x,$t=Dt.y,Wt,un;const rn=(0,c.getCurrentTransform)(kt),bn=rn[0]===0&&rn[3]===0||rn[1]===0&&rn[2]===0,An=bn?wt.slice(0):null;for(let Nn=0,wn=0,jn=xt.length;Nn<jn;Nn++)switch(xt[Nn]|0){case a.OPS.rectangle:Ft=At[wn++],$t=At[wn++];const Xn=At[wn++],Ln=At[wn++],Un=Ft+Xn,kn=$t+Ln;kt.moveTo(Ft,$t),Xn===0||Ln===0?kt.lineTo(Un,kn):(kt.lineTo(Un,$t),kt.lineTo(Un,kn),kt.lineTo(Ft,kn)),bn||Dt.updateRectMinMax(rn,[Ft,$t,Un,kn]),kt.closePath();break;case a.OPS.moveTo:Ft=At[wn++],$t=At[wn++],kt.moveTo(Ft,$t),bn||Dt.updatePathMinMax(rn,Ft,$t);break;case a.OPS.lineTo:Ft=At[wn++],$t=At[wn++],kt.lineTo(Ft,$t),bn||Dt.updatePathMinMax(rn,Ft,$t);break;case a.OPS.curveTo:Wt=Ft,un=$t,Ft=At[wn+4],$t=At[wn+5],kt.bezierCurveTo(At[wn],At[wn+1],At[wn+2],At[wn+3],Ft,$t),Dt.updateCurvePathMinMax(rn,Wt,un,At[wn],At[wn+1],At[wn+2],At[wn+3],Ft,$t,An),wn+=6;break;case a.OPS.curveTo2:Wt=Ft,un=$t,kt.bezierCurveTo(Ft,$t,At[wn],At[wn+1],At[wn+2],At[wn+3]),Dt.updateCurvePathMinMax(rn,Wt,un,Ft,$t,At[wn],At[wn+1],At[wn+2],At[wn+3],An),Ft=At[wn+2],$t=At[wn+3],wn+=4;break;case a.OPS.curveTo3:Wt=Ft,un=$t,Ft=At[wn+2],$t=At[wn+3],kt.bezierCurveTo(At[wn],At[wn+1],Ft,$t,Ft,$t),Dt.updateCurvePathMinMax(rn,Wt,un,At[wn],At[wn+1],Ft,$t,Ft,$t,An),wn+=4;break;case a.OPS.closePath:kt.closePath();break}bn&&Dt.updateScalingPathMinMax(rn,An),Dt.setCurrentPoint(Ft,$t)}closePath(){this.ctx.closePath()}stroke(xt=!0){const At=this.ctx,wt=this.current.strokeColor;At.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof wt=="object"&&(wt!=null&&wt.getPattern)?(At.save(),At.strokeStyle=wt.getPattern(At,this,(0,c.getCurrentTransformInverse)(At),h.PathType.STROKE),this.rescaleAndStroke(!1),At.restore()):this.rescaleAndStroke(!0)),xt&&this.consumePath(this.current.getClippedPathBoundingBox()),At.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(xt=!0){const At=this.ctx,wt=this.current.fillColor,kt=this.current.patternFill;let Dt=!1;kt&&(At.save(),At.fillStyle=wt.getPattern(At,this,(0,c.getCurrentTransformInverse)(At),h.PathType.FILL),Dt=!0);const Ft=this.current.getClippedPathBoundingBox();this.contentVisible&&Ft!==null&&(this.pendingEOFill?(At.fill("evenodd"),this.pendingEOFill=!1):At.fill()),Dt&&At.restore(),xt&&this.consumePath(Ft)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=qt}eoClip(){this.pendingClip=Vt}beginText(){this.current.textMatrix=a.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const xt=this.pendingTextPaths,At=this.ctx;if(xt===void 0){At.beginPath();return}At.save(),At.beginPath();for(const wt of xt)At.setTransform(...wt.transform),At.translate(wt.x,wt.y),wt.addToPath(At,wt.fontSize);At.restore(),At.clip(),At.beginPath(),delete this.pendingTextPaths}setCharSpacing(xt){this.current.charSpacing=xt}setWordSpacing(xt){this.current.wordSpacing=xt}setHScale(xt){this.current.textHScale=xt/100}setLeading(xt){this.current.leading=-xt}setFont(xt,At){var rn;const wt=this.commonObjs.get(xt),kt=this.current;if(!wt)throw new Error(`Can't find font for ${xt}`);if(kt.fontMatrix=wt.fontMatrix||a.FONT_IDENTITY_MATRIX,(kt.fontMatrix[0]===0||kt.fontMatrix[3]===0)&&(0,a.warn)("Invalid font matrix for font "+xt),At<0?(At=-At,kt.fontDirection=-1):kt.fontDirection=1,this.current.font=wt,this.current.fontSize=At,wt.isType3Font)return;const Dt=wt.loadedName||"sans-serif",Ft=((rn=wt.systemFontInfo)==null?void 0:rn.css)||`"${Dt}", ${wt.fallbackName}`;let $t="normal";wt.black?$t="900":wt.bold&&($t="bold");const Wt=wt.italic?"italic":"normal";let un=At;At<b?un=b:At>_&&(un=_),this.current.fontSizeScale=At/un,this.ctx.font=`${Wt} ${$t} ${un}px ${Ft}`}setTextRenderingMode(xt){this.current.textRenderingMode=xt}setTextRise(xt){this.current.textRise=xt}moveText(xt,At){this.current.x=this.current.lineX+=xt,this.current.y=this.current.lineY+=At}setLeadingMoveText(xt,At){this.setLeading(-At),this.moveText(xt,At)}setTextMatrix(xt,At,wt,kt,Dt,Ft){this.current.textMatrix=[xt,At,wt,kt,Dt,Ft],this.current.textMatrixScale=Math.hypot(xt,At),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(xt,At,wt,kt){const Dt=this.ctx,Ft=this.current,$t=Ft.font,Wt=Ft.textRenderingMode,un=Ft.fontSize/Ft.fontSizeScale,rn=Wt&a.TextRenderingMode.FILL_STROKE_MASK,bn=!!(Wt&a.TextRenderingMode.ADD_TO_PATH_FLAG),An=Ft.patternFill&&!$t.missingFile;let Nn;($t.disableFontFace||bn||An)&&(Nn=$t.getPathGenerator(this.commonObjs,xt)),$t.disableFontFace||An?(Dt.save(),Dt.translate(At,wt),Dt.beginPath(),Nn(Dt,un),kt&&Dt.setTransform(...kt),(rn===a.TextRenderingMode.FILL||rn===a.TextRenderingMode.FILL_STROKE)&&Dt.fill(),(rn===a.TextRenderingMode.STROKE||rn===a.TextRenderingMode.FILL_STROKE)&&Dt.stroke(),Dt.restore()):((rn===a.TextRenderingMode.FILL||rn===a.TextRenderingMode.FILL_STROKE)&&Dt.fillText(xt,At,wt),(rn===a.TextRenderingMode.STROKE||rn===a.TextRenderingMode.FILL_STROKE)&&Dt.strokeText(xt,At,wt)),bn&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,c.getCurrentTransform)(Dt),x:At,y:wt,fontSize:un,addToPath:Nn})}get isFontSubpixelAAEnabled(){const{context:xt}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);xt.scale(1.5,1),xt.fillText("I",0,10);const At=xt.getImageData(0,0,10,10).data;let wt=!1;for(let kt=3;kt<At.length;kt+=4)if(At[kt]>0&&At[kt]<255){wt=!0;break}return(0,a.shadow)(this,"isFontSubpixelAAEnabled",wt)}showText(xt){const At=this.current,wt=At.font;if(wt.isType3Font)return this.showType3Text(xt);const kt=At.fontSize;if(kt===0)return;const Dt=this.ctx,Ft=At.fontSizeScale,$t=At.charSpacing,Wt=At.wordSpacing,un=At.fontDirection,rn=At.textHScale*un,bn=xt.length,An=wt.vertical,Nn=An?1:-1,wn=wt.defaultVMetrics,jn=kt*At.fontMatrix[0],Xn=At.textRenderingMode===a.TextRenderingMode.FILL&&!wt.disableFontFace&&!At.patternFill;Dt.save(),Dt.transform(...At.textMatrix),Dt.translate(At.x,At.y+At.textRise),un>0?Dt.scale(rn,-1):Dt.scale(rn,1);let Ln;if(At.patternFill){Dt.save();const Tn=At.fillColor.getPattern(Dt,this,(0,c.getCurrentTransformInverse)(Dt),h.PathType.FILL);Ln=(0,c.getCurrentTransform)(Dt),Dt.restore(),Dt.fillStyle=Tn}let Un=At.lineWidth;const kn=At.textMatrixScale;if(kn===0||Un===0){const Tn=At.textRenderingMode&a.TextRenderingMode.FILL_STROKE_MASK;(Tn===a.TextRenderingMode.STROKE||Tn===a.TextRenderingMode.FILL_STROKE)&&(Un=this.getSinglePixelWidth())}else Un/=kn;if(Ft!==1&&(Dt.scale(Ft,Ft),Un/=Ft),Dt.lineWidth=Un,wt.isInvalidPDFjsFont){const Tn=[];let On=0;for(const In of xt)Tn.push(In.unicode),On+=In.width;Dt.fillText(Tn.join(""),0,0),At.x+=On*jn*rn,Dt.restore(),this.compose();return}let en=0,hn;for(hn=0;hn<bn;++hn){const Tn=xt[hn];if(typeof Tn=="number"){en+=Nn*Tn*kt/1e3;continue}let On=!1;const In=(Tn.isSpace?Wt:0)+$t,Zn=Tn.fontChar,Qn=Tn.accent;let Kn,er,Jn=Tn.width;if(An){const tr=Tn.vmetric||wn,Cn=-(Tn.vmetric?tr[1]:Jn*.5)*jn,St=tr[2]*jn;Jn=tr?-tr[0]:Jn,Kn=Cn/Ft,er=(en+St)/Ft}else Kn=en/Ft,er=0;if(wt.remeasure&&Jn>0){const tr=Dt.measureText(Zn).width*1e3/kt*Ft;if(Jn<tr&&this.isFontSubpixelAAEnabled){const Cn=Jn/tr;On=!0,Dt.save(),Dt.scale(Cn,1),Kn/=Cn}else Jn!==tr&&(Kn+=(Jn-tr)/2e3*kt/Ft)}if(this.contentVisible&&(Tn.isInFont||wt.missingFile)){if(Xn&&!Qn)Dt.fillText(Zn,Kn,er);else if(this.paintChar(Zn,Kn,er,Ln),Qn){const tr=Kn+kt*Qn.offset.x/Ft,Cn=er-kt*Qn.offset.y/Ft;this.paintChar(Qn.fontChar,tr,Cn,Ln)}}const Yn=An?Jn*jn-In*un:Jn*jn+In*un;en+=Yn,On&&Dt.restore()}An?At.y-=en:At.x+=en*rn,Dt.restore(),this.compose()}showType3Text(xt){const At=this.ctx,wt=this.current,kt=wt.font,Dt=wt.fontSize,Ft=wt.fontDirection,$t=kt.vertical?1:-1,Wt=wt.charSpacing,un=wt.wordSpacing,rn=wt.textHScale*Ft,bn=wt.fontMatrix||a.FONT_IDENTITY_MATRIX,An=xt.length,Nn=wt.textRenderingMode===a.TextRenderingMode.INVISIBLE;let wn,jn,Xn,Ln;if(!(Nn||Dt===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,At.save(),At.transform(...wt.textMatrix),At.translate(wt.x,wt.y),At.scale(rn,Ft),wn=0;wn<An;++wn){if(jn=xt[wn],typeof jn=="number"){Ln=$t*jn*Dt/1e3,this.ctx.translate(Ln,0),wt.x+=Ln*rn;continue}const Un=(jn.isSpace?un:0)+Wt,kn=kt.charProcOperatorList[jn.operatorListId];if(!kn){(0,a.warn)(`Type3 character "${jn.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=jn,this.save(),At.scale(Dt,Dt),At.transform(...bn),this.executeOperatorList(kn),this.restore()),Xn=a.Util.applyTransform([jn.width,0],bn)[0]*Dt+Un,At.translate(Xn,0),wt.x+=Xn*rn}At.restore(),this.processingType3=null}}setCharWidth(xt,At){}setCharWidthAndBounds(xt,At,wt,kt,Dt,Ft){this.ctx.rect(wt,kt,Dt-wt,Ft-kt),this.ctx.clip(),this.endPath()}getColorN_Pattern(xt){let At;if(xt[0]==="TilingPattern"){const wt=xt[1],kt=this.baseTransform||(0,c.getCurrentTransform)(this.ctx),Dt={createCanvasGraphics:Ft=>new xn(Ft,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};At=new h.TilingPattern(xt,wt,this.ctx,Dt,kt)}else At=this._getPattern(xt[1],xt[2]);return At}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(xt,At,wt){const kt=a.Util.makeHexColor(xt,At,wt);this.ctx.strokeStyle=kt,this.current.strokeColor=kt}setFillRGBColor(xt,At,wt){const kt=a.Util.makeHexColor(xt,At,wt);this.ctx.fillStyle=kt,this.current.fillColor=kt,this.current.patternFill=!1}_getPattern(xt,At=null){let wt;return this.cachedPatterns.has(xt)?wt=this.cachedPatterns.get(xt):(wt=(0,h.getShadingPattern)(this.getObject(xt)),this.cachedPatterns.set(xt,wt)),At&&(wt.matrix=At),wt}shadingFill(xt){if(!this.contentVisible)return;const At=this.ctx;this.save();const wt=this._getPattern(xt);At.fillStyle=wt.getPattern(At,this,(0,c.getCurrentTransformInverse)(At),h.PathType.SHADING);const kt=(0,c.getCurrentTransformInverse)(At);if(kt){const{width:Dt,height:Ft}=At.canvas,[$t,Wt,un,rn]=a.Util.getAxialAlignedBoundingBox([0,0,Dt,Ft],kt);this.ctx.fillRect($t,Wt,un-$t,rn-Wt)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,a.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,a.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(xt,At){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(xt)&&xt.length===6&&this.transform(...xt),this.baseTransform=(0,c.getCurrentTransform)(this.ctx),At)){const wt=At[2]-At[0],kt=At[3]-At[1];this.ctx.rect(At[0],At[1],wt,kt),this.current.updateRectMinMax((0,c.getCurrentTransform)(this.ctx),At),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(xt){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const At=this.ctx;xt.isolated||(0,a.info)("TODO: Support non-isolated groups."),xt.knockout&&(0,a.warn)("Knockout groups not supported.");const wt=(0,c.getCurrentTransform)(At);if(xt.matrix&&At.transform(...xt.matrix),!xt.bbox)throw new Error("Bounding box is required.");let kt=a.Util.getAxialAlignedBoundingBox(xt.bbox,(0,c.getCurrentTransform)(At));const Dt=[0,0,At.canvas.width,At.canvas.height];kt=a.Util.intersect(kt,Dt)||[0,0,0,0];const Ft=Math.floor(kt[0]),$t=Math.floor(kt[1]);let Wt=Math.max(Math.ceil(kt[2])-Ft,1),un=Math.max(Math.ceil(kt[3])-$t,1),rn=1,bn=1;Wt>j&&(rn=Wt/j,Wt=j),un>j&&(bn=un/j,un=j),this.current.startNewPathAndClipBox([0,0,Wt,un]);let An="groupAt"+this.groupLevel;xt.smask&&(An+="_smask_"+this.smaskCounter++%2);const Nn=this.cachedCanvases.getCanvas(An,Wt,un),wn=Nn.context;wn.scale(1/rn,1/bn),wn.translate(-Ft,-$t),wn.transform(...wt),xt.smask?this.smaskStack.push({canvas:Nn.canvas,context:wn,offsetX:Ft,offsetY:$t,scaleX:rn,scaleY:bn,subtype:xt.smask.subtype,backdrop:xt.smask.backdrop,transferMap:xt.smask.transferMap||null,startTransformInverse:null}):(At.setTransform(1,0,0,1,0,0),At.translate(Ft,$t),At.scale(rn,bn),At.save()),ot(At,wn),this.ctx=wn,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(At),this.groupLevel++}endGroup(xt){if(!this.contentVisible)return;this.groupLevel--;const At=this.ctx,wt=this.groupStack.pop();if(this.ctx=wt,this.ctx.imageSmoothingEnabled=!1,xt.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const kt=(0,c.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...kt);const Dt=a.Util.getAxialAlignedBoundingBox([0,0,At.canvas.width,At.canvas.height],kt);this.ctx.drawImage(At.canvas,0,0),this.ctx.restore(),this.compose(Dt)}}beginAnnotation(xt,At,wt,kt,Dt){if(an(this,It,ws).call(this),ct(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(At)&&At.length===4){const Ft=At[2]-At[0],$t=At[3]-At[1];if(Dt&&this.annotationCanvasMap){wt=wt.slice(),wt[4]-=At[0],wt[5]-=At[1],At=At.slice(),At[0]=At[1]=0,At[2]=Ft,At[3]=$t;const[Wt,un]=a.Util.singularValueDecompose2dScale((0,c.getCurrentTransform)(this.ctx)),{viewportScale:rn}=this,bn=Math.ceil(Ft*this.outputScaleX*rn),An=Math.ceil($t*this.outputScaleY*rn);this.annotationCanvas=this.canvasFactory.create(bn,An);const{canvas:Nn,context:wn}=this.annotationCanvas;this.annotationCanvasMap.set(xt,Nn),this.annotationCanvas.savedCtx=this.ctx,this.ctx=wn,this.ctx.save(),this.ctx.setTransform(Wt,0,0,-un,0,$t*un),ct(this.ctx)}else ct(this.ctx),this.ctx.rect(At[0],At[1],Ft,$t),this.ctx.clip(),this.endPath()}this.current=new rt(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...wt),this.transform(...kt)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),an(this,fn,As).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(xt){if(!this.contentVisible)return;const At=xt.count;xt=this.getObject(xt.data,xt),xt.count=At;const wt=this.ctx,kt=this.processingType3;if(kt&&(kt.compiled===void 0&&(kt.compiled=nt(xt)),kt.compiled)){kt.compiled(wt);return}const Dt=this._createMaskCanvas(xt),Ft=Dt.canvas;wt.save(),wt.setTransform(1,0,0,1,0,0),wt.drawImage(Ft,Dt.offsetX,Dt.offsetY),wt.restore(),this.compose()}paintImageMaskXObjectRepeat(xt,At,wt=0,kt=0,Dt,Ft){if(!this.contentVisible)return;xt=this.getObject(xt.data,xt);const $t=this.ctx;$t.save();const Wt=(0,c.getCurrentTransform)($t);$t.transform(At,wt,kt,Dt,0,0);const un=this._createMaskCanvas(xt);$t.setTransform(1,0,0,1,un.offsetX-Wt[4],un.offsetY-Wt[5]);for(let rn=0,bn=Ft.length;rn<bn;rn+=2){const An=a.Util.transform(Wt,[At,wt,kt,Dt,Ft[rn],Ft[rn+1]]),[Nn,wn]=a.Util.applyTransform([0,0],An);$t.drawImage(un.canvas,Nn,wn)}$t.restore(),this.compose()}paintImageMaskXObjectGroup(xt){if(!this.contentVisible)return;const At=this.ctx,wt=this.current.fillColor,kt=this.current.patternFill;for(const Dt of xt){const{data:Ft,width:$t,height:Wt,transform:un}=Dt,rn=this.cachedCanvases.getCanvas("maskCanvas",$t,Wt),bn=rn.context;bn.save();const An=this.getObject(Ft,Dt);dt(bn,An),bn.globalCompositeOperation="source-in",bn.fillStyle=kt?wt.getPattern(bn,this,(0,c.getCurrentTransformInverse)(At),h.PathType.FILL):wt,bn.fillRect(0,0,$t,Wt),bn.restore(),At.save(),At.transform(...un),At.scale(1,-1),st(At,rn.canvas,0,0,$t,Wt,0,-1,1,1),At.restore()}this.compose()}paintImageXObject(xt){if(!this.contentVisible)return;const At=this.getObject(xt);if(!At){(0,a.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(At)}paintImageXObjectRepeat(xt,At,wt,kt){if(!this.contentVisible)return;const Dt=this.getObject(xt);if(!Dt){(0,a.warn)("Dependent image isn't ready yet");return}const Ft=Dt.width,$t=Dt.height,Wt=[];for(let un=0,rn=kt.length;un<rn;un+=2)Wt.push({transform:[At,0,0,wt,kt[un],kt[un+1]],x:0,y:0,w:Ft,h:$t});this.paintInlineImageXObjectGroup(Dt,Wt)}applyTransferMapsToCanvas(xt){return this.current.transferMaps!=="none"&&(xt.filter=this.current.transferMaps,xt.drawImage(xt.canvas,0,0),xt.filter="none"),xt.canvas}applyTransferMapsToBitmap(xt){if(this.current.transferMaps==="none")return xt.bitmap;const{bitmap:At,width:wt,height:kt}=xt,Dt=this.cachedCanvases.getCanvas("inlineImage",wt,kt),Ft=Dt.context;return Ft.filter=this.current.transferMaps,Ft.drawImage(At,0,0),Ft.filter="none",Dt.canvas}paintInlineImageXObject(xt){if(!this.contentVisible)return;const At=xt.width,wt=xt.height,kt=this.ctx;if(this.save(),!a.isNodeJS){const{filter:$t}=kt;$t!=="none"&&$t!==""&&(kt.filter="none")}kt.scale(1/At,-1/wt);let Dt;if(xt.bitmap)Dt=this.applyTransferMapsToBitmap(xt);else if(typeof HTMLElement=="function"&&xt instanceof HTMLElement||!xt.data)Dt=xt;else{const Wt=this.cachedCanvases.getCanvas("inlineImage",At,wt).context;at(Wt,xt),Dt=this.applyTransferMapsToCanvas(Wt)}const Ft=this._scaleImage(Dt,(0,c.getCurrentTransformInverse)(kt));kt.imageSmoothingEnabled=Nt((0,c.getCurrentTransform)(kt),xt.interpolate),st(kt,Ft.img,0,0,Ft.paintWidth,Ft.paintHeight,0,-wt,At,wt),this.compose(),this.restore()}paintInlineImageXObjectGroup(xt,At){if(!this.contentVisible)return;const wt=this.ctx;let kt;if(xt.bitmap)kt=xt.bitmap;else{const Dt=xt.width,Ft=xt.height,Wt=this.cachedCanvases.getCanvas("inlineImage",Dt,Ft).context;at(Wt,xt),kt=this.applyTransferMapsToCanvas(Wt)}for(const Dt of At)wt.save(),wt.transform(...Dt.transform),wt.scale(1,-1),st(wt,kt,Dt.x,Dt.y,Dt.w,Dt.h,0,-1,1,1),wt.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(xt){}markPointProps(xt,At){}beginMarkedContent(xt){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(xt,At){xt==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(At)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(xt){const At=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(xt);const wt=this.ctx;this.pendingClip&&(At||(this.pendingClip===Vt?wt.clip("evenodd"):wt.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),wt.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const xt=(0,c.getCurrentTransform)(this.ctx);if(xt[1]===0&&xt[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(xt[0]),Math.abs(xt[3]));else{const At=Math.abs(xt[0]*xt[3]-xt[2]*xt[1]),wt=Math.hypot(xt[0],xt[2]),kt=Math.hypot(xt[1],xt[3]);this._cachedGetSinglePixelWidth=Math.max(wt,kt)/At}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:xt}=this.current,{a:At,b:wt,c:kt,d:Dt}=this.ctx.getTransform();let Ft,$t;if(wt===0&&kt===0){const Wt=Math.abs(At),un=Math.abs(Dt);if(Wt===un)if(xt===0)Ft=$t=1/Wt;else{const rn=Wt*xt;Ft=$t=rn<1?1/rn:1}else if(xt===0)Ft=1/Wt,$t=1/un;else{const rn=Wt*xt,bn=un*xt;Ft=rn<1?1/rn:1,$t=bn<1?1/bn:1}}else{const Wt=Math.abs(At*Dt-wt*kt),un=Math.hypot(At,wt),rn=Math.hypot(kt,Dt);if(xt===0)Ft=rn/Wt,$t=un/Wt;else{const bn=xt*Wt;Ft=rn>bn?rn/bn:1,$t=un>bn?un/bn:1}}this._cachedScaleForStroking[0]=Ft,this._cachedScaleForStroking[1]=$t}return this._cachedScaleForStroking}rescaleAndStroke(xt){const{ctx:At}=this,{lineWidth:wt}=this.current,[kt,Dt]=this.getScaleForStroking();if(At.lineWidth=wt||1,kt===1&&Dt===1){At.stroke();return}const Ft=At.getLineDash();if(xt&&At.save(),At.scale(kt,Dt),Ft.length>0){const $t=Math.max(kt,Dt);At.setLineDash(Ft.map(Wt=>Wt/$t)),At.lineDashOffset/=$t}At.stroke(),xt&&At.restore()}isContentVisible(){for(let xt=this.markedContentStack.length-1;xt>=0;xt--)if(!this.markedContentStack[xt].visible)return!1;return!0}};It=new WeakSet,ws=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},fn=new WeakSet,As=function(){if(this.pageColors){const xt=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(xt!=="none"){const At=this.ctx.filter;this.ctx.filter=xt,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=At}}};let Zt=xn;e.CanvasGraphics=Zt;for(const Mt in a.OPS)Zt.prototype[Mt]!==void 0&&(Zt.prototype[a.OPS[Mt]]=Zt.prototype[Mt])},(s,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=et;var a=o(1),c=o(6);const h={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=h;function g(nt,rt){if(!rt)return;const at=rt[2]-rt[0],dt=rt[3]-rt[1],ot=new Path2D;ot.rect(rt[0],rt[1],at,dt),nt.clip(ot)}class b{constructor(){this.constructor===b&&(0,a.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,a.unreachable)("Abstract method `getPattern` called.")}}class _ extends b{constructor(rt){super(),this._type=rt[1],this._bbox=rt[2],this._colorStops=rt[3],this._p0=rt[4],this._p1=rt[5],this._r0=rt[6],this._r1=rt[7],this.matrix=null}_createGradient(rt){let at;this._type==="axial"?at=rt.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(at=rt.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const dt of this._colorStops)at.addColorStop(dt[0],dt[1]);return at}getPattern(rt,at,dt,ot){let ct;if(ot===h.STROKE||ot===h.FILL){const vt=at.current.getClippedPathBoundingBox(ot,(0,c.getCurrentTransform)(rt))||[0,0,0,0],mt=Math.ceil(vt[2]-vt[0])||1,pt=Math.ceil(vt[3]-vt[1])||1,Et=at.cachedCanvases.getCanvas("pattern",mt,pt,!0),Ct=Et.context;Ct.clearRect(0,0,Ct.canvas.width,Ct.canvas.height),Ct.beginPath(),Ct.rect(0,0,Ct.canvas.width,Ct.canvas.height),Ct.translate(-vt[0],-vt[1]),dt=a.Util.transform(dt,[1,0,0,1,vt[0],vt[1]]),Ct.transform(...at.baseTransform),this.matrix&&Ct.transform(...this.matrix),g(Ct,this._bbox),Ct.fillStyle=this._createGradient(Ct),Ct.fill(),ct=rt.createPattern(Et.canvas,"no-repeat");const Nt=new DOMMatrix(dt);ct.setTransform(Nt)}else g(rt,this._bbox),ct=this._createGradient(rt);return ct}}function j(nt,rt,at,dt,ot,ct,vt,mt){const pt=rt.coords,Et=rt.colors,Ct=nt.data,Nt=nt.width*4;let Ut;pt[at+1]>pt[dt+1]&&(Ut=at,at=dt,dt=Ut,Ut=ct,ct=vt,vt=Ut),pt[dt+1]>pt[ot+1]&&(Ut=dt,dt=ot,ot=Ut,Ut=vt,vt=mt,mt=Ut),pt[at+1]>pt[dt+1]&&(Ut=at,at=dt,dt=Ut,Ut=ct,ct=vt,vt=Ut);const Tt=(pt[at]+rt.offsetX)*rt.scaleX,qt=(pt[at+1]+rt.offsetY)*rt.scaleY,Vt=(pt[dt]+rt.offsetX)*rt.scaleX,Zt=(pt[dt+1]+rt.offsetY)*rt.scaleY,It=(pt[ot]+rt.offsetX)*rt.scaleX,Jt=(pt[ot+1]+rt.offsetY)*rt.scaleY;if(qt>=Jt)return;const fn=Et[ct],_n=Et[ct+1],xn=Et[ct+2],Mt=Et[vt],xt=Et[vt+1],At=Et[vt+2],wt=Et[mt],kt=Et[mt+1],Dt=Et[mt+2],Ft=Math.round(qt),$t=Math.round(Jt);let Wt,un,rn,bn,An,Nn,wn,jn;for(let Xn=Ft;Xn<=$t;Xn++){if(Xn<Zt){const hn=Xn<qt?0:(qt-Xn)/(qt-Zt);Wt=Tt-(Tt-Vt)*hn,un=fn-(fn-Mt)*hn,rn=_n-(_n-xt)*hn,bn=xn-(xn-At)*hn}else{let hn;Xn>Jt?hn=1:Zt===Jt?hn=0:hn=(Zt-Xn)/(Zt-Jt),Wt=Vt-(Vt-It)*hn,un=Mt-(Mt-wt)*hn,rn=xt-(xt-kt)*hn,bn=At-(At-Dt)*hn}let Ln;Xn<qt?Ln=0:Xn>Jt?Ln=1:Ln=(qt-Xn)/(qt-Jt),An=Tt-(Tt-It)*Ln,Nn=fn-(fn-wt)*Ln,wn=_n-(_n-kt)*Ln,jn=xn-(xn-Dt)*Ln;const Un=Math.round(Math.min(Wt,An)),kn=Math.round(Math.max(Wt,An));let en=Nt*Xn+Un*4;for(let hn=Un;hn<=kn;hn++)Ln=(Wt-hn)/(Wt-An),Ln<0?Ln=0:Ln>1&&(Ln=1),Ct[en++]=un-(un-Nn)*Ln|0,Ct[en++]=rn-(rn-wn)*Ln|0,Ct[en++]=bn-(bn-jn)*Ln|0,Ct[en++]=255}}function $(nt,rt,at){const dt=rt.coords,ot=rt.colors;let ct,vt;switch(rt.type){case"lattice":const mt=rt.verticesPerRow,pt=Math.floor(dt.length/mt)-1,Et=mt-1;for(ct=0;ct<pt;ct++){let Ct=ct*mt;for(let Nt=0;Nt<Et;Nt++,Ct++)j(nt,at,dt[Ct],dt[Ct+1],dt[Ct+mt],ot[Ct],ot[Ct+1],ot[Ct+mt]),j(nt,at,dt[Ct+mt+1],dt[Ct+1],dt[Ct+mt],ot[Ct+mt+1],ot[Ct+1],ot[Ct+mt])}break;case"triangles":for(ct=0,vt=dt.length;ct<vt;ct+=3)j(nt,at,dt[ct],dt[ct+1],dt[ct+2],ot[ct],ot[ct+1],ot[ct+2]);break;default:throw new Error("illegal figure")}}class _e extends b{constructor(rt){super(),this._coords=rt[2],this._colors=rt[3],this._figures=rt[4],this._bounds=rt[5],this._bbox=rt[7],this._background=rt[8],this.matrix=null}_createMeshCanvas(rt,at,dt){const mt=Math.floor(this._bounds[0]),pt=Math.floor(this._bounds[1]),Et=Math.ceil(this._bounds[2])-mt,Ct=Math.ceil(this._bounds[3])-pt,Nt=Math.min(Math.ceil(Math.abs(Et*rt[0]*1.1)),3e3),Ut=Math.min(Math.ceil(Math.abs(Ct*rt[1]*1.1)),3e3),Tt=Et/Nt,qt=Ct/Ut,Vt={coords:this._coords,colors:this._colors,offsetX:-mt,offsetY:-pt,scaleX:1/Tt,scaleY:1/qt},Zt=Nt+2*2,It=Ut+2*2,Jt=dt.getCanvas("mesh",Zt,It,!1),fn=Jt.context,_n=fn.createImageData(Nt,Ut);if(at){const Mt=_n.data;for(let xt=0,At=Mt.length;xt<At;xt+=4)Mt[xt]=at[0],Mt[xt+1]=at[1],Mt[xt+2]=at[2],Mt[xt+3]=255}for(const Mt of this._figures)$(_n,Mt,Vt);return fn.putImageData(_n,2,2),{canvas:Jt.canvas,offsetX:mt-2*Tt,offsetY:pt-2*qt,scaleX:Tt,scaleY:qt}}getPattern(rt,at,dt,ot){g(rt,this._bbox);let ct;if(ot===h.SHADING)ct=a.Util.singularValueDecompose2dScale((0,c.getCurrentTransform)(rt));else if(ct=a.Util.singularValueDecompose2dScale(at.baseTransform),this.matrix){const mt=a.Util.singularValueDecompose2dScale(this.matrix);ct=[ct[0]*mt[0],ct[1]*mt[1]]}const vt=this._createMeshCanvas(ct,ot===h.SHADING?null:this._background,at.cachedCanvases);return ot!==h.SHADING&&(rt.setTransform(...at.baseTransform),this.matrix&&rt.transform(...this.matrix)),rt.translate(vt.offsetX,vt.offsetY),rt.scale(vt.scaleX,vt.scaleY),rt.createPattern(vt.canvas,"no-repeat")}}class tt extends b{getPattern(){return"hotpink"}}function et(nt){switch(nt[0]){case"RadialAxial":return new _(nt);case"Mesh":return new _e(nt);case"Dummy":return new tt}throw new Error(`Unknown IR type: ${nt[0]}`)}const ut={COLORED:1,UNCOLORED:2},st=class st{constructor(rt,at,dt,ot,ct){this.operatorList=rt[2],this.matrix=rt[3]||[1,0,0,1,0,0],this.bbox=rt[4],this.xstep=rt[5],this.ystep=rt[6],this.paintType=rt[7],this.tilingType=rt[8],this.color=at,this.ctx=dt,this.canvasGraphicsFactory=ot,this.baseTransform=ct}createPatternCanvas(rt){const at=this.operatorList,dt=this.bbox,ot=this.xstep,ct=this.ystep,vt=this.paintType,mt=this.tilingType,pt=this.color,Et=this.canvasGraphicsFactory;(0,a.info)("TilingType: "+mt);const Ct=dt[0],Nt=dt[1],Ut=dt[2],Tt=dt[3],qt=a.Util.singularValueDecompose2dScale(this.matrix),Vt=a.Util.singularValueDecompose2dScale(this.baseTransform),Zt=[qt[0]*Vt[0],qt[1]*Vt[1]],It=this.getSizeAndScale(ot,this.ctx.canvas.width,Zt[0]),Jt=this.getSizeAndScale(ct,this.ctx.canvas.height,Zt[1]),fn=rt.cachedCanvases.getCanvas("pattern",It.size,Jt.size,!0),_n=fn.context,xn=Et.createCanvasGraphics(_n);xn.groupLevel=rt.groupLevel,this.setFillAndStrokeStyleToContext(xn,vt,pt);let Mt=Ct,xt=Nt,At=Ut,wt=Tt;return Ct<0&&(Mt=0,At+=Math.abs(Ct)),Nt<0&&(xt=0,wt+=Math.abs(Nt)),_n.translate(-(It.scale*Mt),-(Jt.scale*xt)),xn.transform(It.scale,0,0,Jt.scale,0,0),_n.save(),this.clipBbox(xn,Mt,xt,At,wt),xn.baseTransform=(0,c.getCurrentTransform)(xn.ctx),xn.executeOperatorList(at),xn.endDrawing(),{canvas:fn.canvas,scaleX:It.scale,scaleY:Jt.scale,offsetX:Mt,offsetY:xt}}getSizeAndScale(rt,at,dt){rt=Math.abs(rt);const ot=Math.max(st.MAX_PATTERN_SIZE,at);let ct=Math.ceil(rt*dt);return ct>=ot?ct=ot:dt=ct/rt,{scale:dt,size:ct}}clipBbox(rt,at,dt,ot,ct){const vt=ot-at,mt=ct-dt;rt.ctx.rect(at,dt,vt,mt),rt.current.updateRectMinMax((0,c.getCurrentTransform)(rt.ctx),[at,dt,ot,ct]),rt.clip(),rt.endPath()}setFillAndStrokeStyleToContext(rt,at,dt){const ot=rt.ctx,ct=rt.current;switch(at){case ut.COLORED:const vt=this.ctx;ot.fillStyle=vt.fillStyle,ot.strokeStyle=vt.strokeStyle,ct.fillColor=vt.fillStyle,ct.strokeColor=vt.strokeStyle;break;case ut.UNCOLORED:const mt=a.Util.makeHexColor(dt[0],dt[1],dt[2]);ot.fillStyle=mt,ot.strokeStyle=mt,ct.fillColor=mt,ct.strokeColor=mt;break;default:throw new a.FormatError(`Unsupported paint type: ${at}`)}}getPattern(rt,at,dt,ot){let ct=dt;ot!==h.SHADING&&(ct=a.Util.transform(ct,at.baseTransform),this.matrix&&(ct=a.Util.transform(ct,this.matrix)));const vt=this.createPatternCanvas(at);let mt=new DOMMatrix(ct);mt=mt.translate(vt.offsetX,vt.offsetY),mt=mt.scale(1/vt.scaleX,1/vt.scaleY);const pt=rt.createPattern(vt.canvas,"repeat");return pt.setTransform(mt),pt}};fr(st,"MAX_PATTERN_SIZE",3e3);let ht=st;e.TilingPattern=ht},(s,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.convertBlackAndWhiteToRGBA=h,e.convertToRGBA=c,e.grayToRGBA=b;var a=o(1);function c(_){switch(_.kind){case a.ImageKind.GRAYSCALE_1BPP:return h(_);case a.ImageKind.RGB_24BPP:return g(_)}return null}function h({src:_,srcPos:j=0,dest:$,width:_e,height:tt,nonBlackColor:et=4294967295,inverseDecode:ut=!1}){const ht=a.FeatureTest.isLittleEndian?4278190080:255,[st,nt]=ut?[et,ht]:[ht,et],rt=_e>>3,at=_e&7,dt=_.length;$=new Uint32Array($.buffer);let ot=0;for(let ct=0;ct<tt;ct++){for(const mt=j+rt;j<mt;j++){const pt=j<dt?_[j]:255;$[ot++]=pt&128?nt:st,$[ot++]=pt&64?nt:st,$[ot++]=pt&32?nt:st,$[ot++]=pt&16?nt:st,$[ot++]=pt&8?nt:st,$[ot++]=pt&4?nt:st,$[ot++]=pt&2?nt:st,$[ot++]=pt&1?nt:st}if(at===0)continue;const vt=j<dt?_[j++]:255;for(let mt=0;mt<at;mt++)$[ot++]=vt&1<<7-mt?nt:st}return{srcPos:j,destPos:ot}}function g({src:_,srcPos:j=0,dest:$,destPos:_e=0,width:tt,height:et}){let ut=0;const ht=_.length>>2,st=new Uint32Array(_.buffer,j,ht);if(a.FeatureTest.isLittleEndian){for(;ut<ht-2;ut+=3,_e+=4){const nt=st[ut],rt=st[ut+1],at=st[ut+2];$[_e]=nt|4278190080,$[_e+1]=nt>>>24|rt<<8|4278190080,$[_e+2]=rt>>>16|at<<16|4278190080,$[_e+3]=at>>>8|4278190080}for(let nt=ut*4,rt=_.length;nt<rt;nt+=3)$[_e++]=_[nt]|_[nt+1]<<8|_[nt+2]<<16|4278190080}else{for(;ut<ht-2;ut+=3,_e+=4){const nt=st[ut],rt=st[ut+1],at=st[ut+2];$[_e]=nt|255,$[_e+1]=nt<<24|rt>>>8|255,$[_e+2]=rt<<16|at>>>16|255,$[_e+3]=at<<8|255}for(let nt=ut*4,rt=_.length;nt<rt;nt+=3)$[_e++]=_[nt]<<24|_[nt+1]<<16|_[nt+2]<<8|255}return{srcPos:j,destPos:_e}}function b(_,j){if(a.FeatureTest.isLittleEndian)for(let $=0,_e=_.length;$<_e;$++)j[$]=_[$]*65793|4278190080;else for(let $=0,_e=_.length;$<_e;$++)j[$]=_[$]*16843008|255}},(s,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const o=Object.create(null);e.GlobalWorkerOptions=o,o.workerPort=null,o.workerSrc=""},(s,e,o)=>{var _,eo,$,to,tt,Yr;Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var a=o(1);const c={UNKNOWN:0,DATA:1,ERROR:2},h={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function g(ut){switch(ut instanceof Error||typeof ut=="object"&&ut!==null||(0,a.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),ut.name){case"AbortException":return new a.AbortException(ut.message);case"MissingPDFException":return new a.MissingPDFException(ut.message);case"PasswordException":return new a.PasswordException(ut.message,ut.code);case"UnexpectedResponseException":return new a.UnexpectedResponseException(ut.message,ut.status);case"UnknownErrorException":return new a.UnknownErrorException(ut.message,ut.details);default:return new a.UnknownErrorException(ut.message,ut.toString())}}class b{constructor(ht,st,nt){Yt(this,_);Yt(this,$);Yt(this,tt);this.sourceName=ht,this.targetName=st,this.comObj=nt,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=rt=>{const at=rt.data;if(at.targetName!==this.sourceName)return;if(at.stream){an(this,$,to).call(this,at);return}if(at.callback){const ot=at.callbackId,ct=this.callbackCapabilities[ot];if(!ct)throw new Error(`Cannot resolve callback ${ot}`);if(delete this.callbackCapabilities[ot],at.callback===c.DATA)ct.resolve(at.data);else if(at.callback===c.ERROR)ct.reject(g(at.reason));else throw new Error("Unexpected callback case");return}const dt=this.actionHandler[at.action];if(!dt)throw new Error(`Unknown action from worker: ${at.action}`);if(at.callbackId){const ot=this.sourceName,ct=at.sourceName;new Promise(function(vt){vt(dt(at.data))}).then(function(vt){nt.postMessage({sourceName:ot,targetName:ct,callback:c.DATA,callbackId:at.callbackId,data:vt})},function(vt){nt.postMessage({sourceName:ot,targetName:ct,callback:c.ERROR,callbackId:at.callbackId,reason:g(vt)})});return}if(at.streamId){an(this,_,eo).call(this,at);return}dt(at.data)},nt.addEventListener("message",this._onComObjOnMessage)}on(ht,st){const nt=this.actionHandler;if(nt[ht])throw new Error(`There is already an actionName called "${ht}"`);nt[ht]=st}send(ht,st,nt){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:ht,data:st},nt)}sendWithPromise(ht,st,nt){const rt=this.callbackId++,at=new a.PromiseCapability;this.callbackCapabilities[rt]=at;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:ht,callbackId:rt,data:st},nt)}catch(dt){at.reject(dt)}return at.promise}sendWithStream(ht,st,nt,rt){const at=this.streamId++,dt=this.sourceName,ot=this.targetName,ct=this.comObj;return new ReadableStream({start:vt=>{const mt=new a.PromiseCapability;return this.streamControllers[at]={controller:vt,startCall:mt,pullCall:null,cancelCall:null,isClosed:!1},ct.postMessage({sourceName:dt,targetName:ot,action:ht,streamId:at,data:st,desiredSize:vt.desiredSize},rt),mt.promise},pull:vt=>{const mt=new a.PromiseCapability;return this.streamControllers[at].pullCall=mt,ct.postMessage({sourceName:dt,targetName:ot,stream:h.PULL,streamId:at,desiredSize:vt.desiredSize}),mt.promise},cancel:vt=>{(0,a.assert)(vt instanceof Error,"cancel must have a valid reason");const mt=new a.PromiseCapability;return this.streamControllers[at].cancelCall=mt,this.streamControllers[at].isClosed=!0,ct.postMessage({sourceName:dt,targetName:ot,stream:h.CANCEL,streamId:at,reason:g(vt)}),mt.promise}},nt)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}_=new WeakSet,eo=function(ht){const st=ht.streamId,nt=this.sourceName,rt=ht.sourceName,at=this.comObj,dt=this,ot=this.actionHandler[ht.action],ct={enqueue(vt,mt=1,pt){if(this.isCancelled)return;const Et=this.desiredSize;this.desiredSize-=mt,Et>0&&this.desiredSize<=0&&(this.sinkCapability=new a.PromiseCapability,this.ready=this.sinkCapability.promise),at.postMessage({sourceName:nt,targetName:rt,stream:h.ENQUEUE,streamId:st,chunk:vt},pt)},close(){this.isCancelled||(this.isCancelled=!0,at.postMessage({sourceName:nt,targetName:rt,stream:h.CLOSE,streamId:st}),delete dt.streamSinks[st])},error(vt){(0,a.assert)(vt instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,at.postMessage({sourceName:nt,targetName:rt,stream:h.ERROR,streamId:st,reason:g(vt)}))},sinkCapability:new a.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:ht.desiredSize,ready:null};ct.sinkCapability.resolve(),ct.ready=ct.sinkCapability.promise,this.streamSinks[st]=ct,new Promise(function(vt){vt(ot(ht.data,ct))}).then(function(){at.postMessage({sourceName:nt,targetName:rt,stream:h.START_COMPLETE,streamId:st,success:!0})},function(vt){at.postMessage({sourceName:nt,targetName:rt,stream:h.START_COMPLETE,streamId:st,reason:g(vt)})})},$=new WeakSet,to=function(ht){const st=ht.streamId,nt=this.sourceName,rt=ht.sourceName,at=this.comObj,dt=this.streamControllers[st],ot=this.streamSinks[st];switch(ht.stream){case h.START_COMPLETE:ht.success?dt.startCall.resolve():dt.startCall.reject(g(ht.reason));break;case h.PULL_COMPLETE:ht.success?dt.pullCall.resolve():dt.pullCall.reject(g(ht.reason));break;case h.PULL:if(!ot){at.postMessage({sourceName:nt,targetName:rt,stream:h.PULL_COMPLETE,streamId:st,success:!0});break}ot.desiredSize<=0&&ht.desiredSize>0&&ot.sinkCapability.resolve(),ot.desiredSize=ht.desiredSize,new Promise(function(ct){var vt;ct((vt=ot.onPull)==null?void 0:vt.call(ot))}).then(function(){at.postMessage({sourceName:nt,targetName:rt,stream:h.PULL_COMPLETE,streamId:st,success:!0})},function(ct){at.postMessage({sourceName:nt,targetName:rt,stream:h.PULL_COMPLETE,streamId:st,reason:g(ct)})});break;case h.ENQUEUE:if((0,a.assert)(dt,"enqueue should have stream controller"),dt.isClosed)break;dt.controller.enqueue(ht.chunk);break;case h.CLOSE:if((0,a.assert)(dt,"close should have stream controller"),dt.isClosed)break;dt.isClosed=!0,dt.controller.close(),an(this,tt,Yr).call(this,dt,st);break;case h.ERROR:(0,a.assert)(dt,"error should have stream controller"),dt.controller.error(g(ht.reason)),an(this,tt,Yr).call(this,dt,st);break;case h.CANCEL_COMPLETE:ht.success?dt.cancelCall.resolve():dt.cancelCall.reject(g(ht.reason)),an(this,tt,Yr).call(this,dt,st);break;case h.CANCEL:if(!ot)break;new Promise(function(ct){var vt;ct((vt=ot.onCancel)==null?void 0:vt.call(ot,g(ht.reason)))}).then(function(){at.postMessage({sourceName:nt,targetName:rt,stream:h.CANCEL_COMPLETE,streamId:st,success:!0})},function(ct){at.postMessage({sourceName:nt,targetName:rt,stream:h.CANCEL_COMPLETE,streamId:st,reason:g(ct)})}),ot.sinkCapability.reject(g(ht.reason)),ot.isCancelled=!0,delete this.streamSinks[st];break;default:throw new Error("Unexpected stream case")}},tt=new WeakSet,Yr=async function(ht,st){var nt,rt,at;await Promise.allSettled([(nt=ht.startCall)==null?void 0:nt.promise,(rt=ht.pullCall)==null?void 0:rt.promise,(at=ht.cancelCall)==null?void 0:at.promise]),delete this.streamControllers[st]},e.MessageHandler=b},(s,e,o)=>{var h,g;Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var a=o(1);class c{constructor({parsedData:_,rawData:j}){Yt(this,h,void 0);Yt(this,g,void 0);yn(this,h,_),yn(this,g,j)}getRaw(){return bt(this,g)}get(_){return bt(this,h).get(_)??null}getAll(){return(0,a.objectFromMap)(bt(this,h))}has(_){return bt(this,h).has(_)}}h=new WeakMap,g=new WeakMap,e.Metadata=c},(s,e,o)=>{var _,j,$,_e,tt,et,Ss;Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var a=o(1),c=o(8);const h=Symbol("INTERNAL");class g{constructor(st,nt){Yt(this,_,!0);this.name=st,this.intent=nt}get visible(){return bt(this,_)}_setVisible(st,nt){st!==h&&(0,a.unreachable)("Internal method `_setVisible` called."),yn(this,_,nt)}}_=new WeakMap;class b{constructor(st){Yt(this,et);Yt(this,j,null);Yt(this,$,new Map);Yt(this,_e,null);Yt(this,tt,null);if(this.name=null,this.creator=null,st!==null){this.name=st.name,this.creator=st.creator,yn(this,tt,st.order);for(const nt of st.groups)bt(this,$).set(nt.id,new g(nt.name,nt.intent));if(st.baseState==="OFF")for(const nt of bt(this,$).values())nt._setVisible(h,!1);for(const nt of st.on)bt(this,$).get(nt)._setVisible(h,!0);for(const nt of st.off)bt(this,$).get(nt)._setVisible(h,!1);yn(this,_e,this.getHash())}}isVisible(st){if(bt(this,$).size===0)return!0;if(!st)return(0,a.warn)("Optional content group not defined."),!0;if(st.type==="OCG")return bt(this,$).has(st.id)?bt(this,$).get(st.id).visible:((0,a.warn)(`Optional content group not found: ${st.id}`),!0);if(st.type==="OCMD"){if(st.expression)return an(this,et,Ss).call(this,st.expression);if(!st.policy||st.policy==="AnyOn"){for(const nt of st.ids){if(!bt(this,$).has(nt))return(0,a.warn)(`Optional content group not found: ${nt}`),!0;if(bt(this,$).get(nt).visible)return!0}return!1}else if(st.policy==="AllOn"){for(const nt of st.ids){if(!bt(this,$).has(nt))return(0,a.warn)(`Optional content group not found: ${nt}`),!0;if(!bt(this,$).get(nt).visible)return!1}return!0}else if(st.policy==="AnyOff"){for(const nt of st.ids){if(!bt(this,$).has(nt))return(0,a.warn)(`Optional content group not found: ${nt}`),!0;if(!bt(this,$).get(nt).visible)return!0}return!1}else if(st.policy==="AllOff"){for(const nt of st.ids){if(!bt(this,$).has(nt))return(0,a.warn)(`Optional content group not found: ${nt}`),!0;if(bt(this,$).get(nt).visible)return!1}return!0}return(0,a.warn)(`Unknown optional content policy ${st.policy}.`),!0}return(0,a.warn)(`Unknown group type ${st.type}.`),!0}setVisibility(st,nt=!0){if(!bt(this,$).has(st)){(0,a.warn)(`Optional content group not found: ${st}`);return}bt(this,$).get(st)._setVisible(h,!!nt),yn(this,j,null)}get hasInitialVisibility(){return bt(this,_e)===null||this.getHash()===bt(this,_e)}getOrder(){return bt(this,$).size?bt(this,tt)?bt(this,tt).slice():[...bt(this,$).keys()]:null}getGroups(){return bt(this,$).size>0?(0,a.objectFromMap)(bt(this,$)):null}getGroup(st){return bt(this,$).get(st)||null}getHash(){if(bt(this,j)!==null)return bt(this,j);const st=new c.MurmurHash3_64;for(const[nt,rt]of bt(this,$))st.update(`${nt}:${rt.visible}`);return yn(this,j,st.hexdigest())}}j=new WeakMap,$=new WeakMap,_e=new WeakMap,tt=new WeakMap,et=new WeakSet,Ss=function(st){const nt=st.length;if(nt<2)return!0;const rt=st[0];for(let at=1;at<nt;at++){const dt=st[at];let ot;if(Array.isArray(dt))ot=an(this,et,Ss).call(this,dt);else if(bt(this,$).has(dt))ot=bt(this,$).get(dt).visible;else return(0,a.warn)(`Optional content group not found: ${dt}`),!0;switch(rt){case"And":if(!ot)return!1;break;case"Or":if(ot)return!0;break;case"Not":return!ot;default:return!0}}return rt==="And"},e.OptionalContentConfig=b},(s,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var a=o(1),c=o(6);class h{constructor({length:j,initialData:$,progressiveDone:_e=!1,contentDispositionFilename:tt=null,disableRange:et=!1,disableStream:ut=!1},ht){if((0,a.assert)(ht,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=_e,this._contentDispositionFilename=tt,($==null?void 0:$.length)>0){const st=$ instanceof Uint8Array&&$.byteLength===$.buffer.byteLength?$.buffer:new Uint8Array($).buffer;this._queuedChunks.push(st)}this._pdfDataRangeTransport=ht,this._isStreamingSupported=!ut,this._isRangeSupported=!et,this._contentLength=j,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((st,nt)=>{this._onReceiveData({begin:st,chunk:nt})}),this._pdfDataRangeTransport.addProgressListener((st,nt)=>{this._onProgress({loaded:st,total:nt})}),this._pdfDataRangeTransport.addProgressiveReadListener(st=>{this._onReceiveData({chunk:st})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:j,chunk:$}){const _e=$ instanceof Uint8Array&&$.byteLength===$.buffer.byteLength?$.buffer:new Uint8Array($).buffer;if(j===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(_e):this._queuedChunks.push(_e);else{const tt=this._rangeReaders.some(function(et){return et._begin!==j?!1:(et._enqueue(_e),!0)});(0,a.assert)(tt,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var j;return((j=this._fullRequestReader)==null?void 0:j._loaded)??0}_onProgress(j){var $,_e,tt,et;j.total===void 0?(_e=($=this._rangeReaders[0])==null?void 0:$.onProgress)==null||_e.call($,{loaded:j.loaded}):(et=(tt=this._fullRequestReader)==null?void 0:tt.onProgress)==null||et.call(tt,{loaded:j.loaded,total:j.total})}_onProgressiveDone(){var j;(j=this._fullRequestReader)==null||j.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(j){const $=this._rangeReaders.indexOf(j);$>=0&&this._rangeReaders.splice($,1)}getFullReader(){(0,a.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const j=this._queuedChunks;return this._queuedChunks=null,new g(this,j,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(j,$){if($<=this._progressiveDataLength)return null;const _e=new b(this,j,$);return this._pdfDataRangeTransport.requestDataRange(j,$),this._rangeReaders.push(_e),_e}cancelAllRequests(j){var $;($=this._fullRequestReader)==null||$.cancel(j);for(const _e of this._rangeReaders.slice(0))_e.cancel(j);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=h;class g{constructor(j,$,_e=!1,tt=null){this._stream=j,this._done=_e||!1,this._filename=(0,c.isPdfFile)(tt)?tt:null,this._queuedChunks=$||[],this._loaded=0;for(const et of this._queuedChunks)this._loaded+=et.byteLength;this._requests=[],this._headersReady=Promise.resolve(),j._fullRequestReader=this,this.onProgress=null}_enqueue(j){this._done||(this._requests.length>0?this._requests.shift().resolve({value:j,done:!1}):this._queuedChunks.push(j),this._loaded+=j.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const j=new a.PromiseCapability;return this._requests.push(j),j.promise}cancel(j){this._done=!0;for(const $ of this._requests)$.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class b{constructor(j,$,_e){this._stream=j,this._begin=$,this._end=_e,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(j){if(!this._done){if(this._requests.length===0)this._queuedChunk=j;else{this._requests.shift().resolve({value:j,done:!1});for(const _e of this._requests)_e.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const $=this._queuedChunk;return this._queuedChunk=null,{value:$,done:!1}}if(this._done)return{value:void 0,done:!0};const j=new a.PromiseCapability;return this._requests.push(j),j.promise}cancel(j){this._done=!0;for(const $ of this._requests)$.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(s,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var a=o(1),c=o(20);function h(_e,tt,et){return{method:"GET",headers:_e,signal:et.signal,mode:"cors",credentials:tt?"include":"same-origin",redirect:"follow"}}function g(_e){const tt=new Headers;for(const et in _e){const ut=_e[et];ut!==void 0&&tt.append(et,ut)}return tt}function b(_e){return _e instanceof Uint8Array?_e.buffer:_e instanceof ArrayBuffer?_e:((0,a.warn)(`getArrayBuffer - unexpected data format: ${_e}`),new Uint8Array(_e).buffer)}class _{constructor(tt){this.source=tt,this.isHttp=/^https?:/i.test(tt.url),this.httpHeaders=this.isHttp&&tt.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var tt;return((tt=this._fullRequestReader)==null?void 0:tt._loaded)??0}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new j(this),this._fullRequestReader}getRangeReader(tt,et){if(et<=this._progressiveDataLength)return null;const ut=new $(this,tt,et);return this._rangeRequestReaders.push(ut),ut}cancelAllRequests(tt){var et;(et=this._fullRequestReader)==null||et.cancel(tt);for(const ut of this._rangeRequestReaders.slice(0))ut.cancel(tt)}}e.PDFFetchStream=_;class j{constructor(tt){this._stream=tt,this._reader=null,this._loaded=0,this._filename=null;const et=tt.source;this._withCredentials=et.withCredentials||!1,this._contentLength=et.length,this._headersCapability=new a.PromiseCapability,this._disableRange=et.disableRange||!1,this._rangeChunkSize=et.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!et.disableStream,this._isRangeSupported=!et.disableRange,this._headers=g(this._stream.httpHeaders);const ut=et.url;fetch(ut,h(this._headers,this._withCredentials,this._abortController)).then(ht=>{if(!(0,c.validateResponseStatus)(ht.status))throw(0,c.createResponseStatusError)(ht.status,ut);this._reader=ht.body.getReader(),this._headersCapability.resolve();const st=at=>ht.headers.get(at),{allowRangeRequests:nt,suggestedLength:rt}=(0,c.validateRangeRequestCapabilities)({getResponseHeader:st,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=nt,this._contentLength=rt||this._contentLength,this._filename=(0,c.extractFilenameFromHeader)(st),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new a.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ut;await this._headersCapability.promise;const{value:tt,done:et}=await this._reader.read();return et?{value:tt,done:et}:(this._loaded+=tt.byteLength,(ut=this.onProgress)==null||ut.call(this,{loaded:this._loaded,total:this._contentLength}),{value:b(tt),done:!1})}cancel(tt){var et;(et=this._reader)==null||et.cancel(tt),this._abortController.abort()}}class ${constructor(tt,et,ut){this._stream=tt,this._reader=null,this._loaded=0;const ht=tt.source;this._withCredentials=ht.withCredentials||!1,this._readCapability=new a.PromiseCapability,this._isStreamingSupported=!ht.disableStream,this._abortController=new AbortController,this._headers=g(this._stream.httpHeaders),this._headers.append("Range",`bytes=${et}-${ut-1}`);const st=ht.url;fetch(st,h(this._headers,this._withCredentials,this._abortController)).then(nt=>{if(!(0,c.validateResponseStatus)(nt.status))throw(0,c.createResponseStatusError)(nt.status,st);this._readCapability.resolve(),this._reader=nt.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ut;await this._readCapability.promise;const{value:tt,done:et}=await this._reader.read();return et?{value:tt,done:et}:(this._loaded+=tt.byteLength,(ut=this.onProgress)==null||ut.call(this,{loaded:this._loaded}),{value:b(tt),done:!1})}cancel(tt){var et;(et=this._reader)==null||et.cancel(tt),this._abortController.abort()}}},(s,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=_,e.extractFilenameFromHeader=b,e.validateRangeRequestCapabilities=g,e.validateResponseStatus=j;var a=o(1),c=o(21),h=o(6);function g({getResponseHeader:$,isHttp:_e,rangeChunkSize:tt,disableRange:et}){const ut={allowRangeRequests:!1,suggestedLength:void 0},ht=parseInt($("Content-Length"),10);return!Number.isInteger(ht)||(ut.suggestedLength=ht,ht<=2*tt)||et||!_e||$("Accept-Ranges")!=="bytes"||($("Content-Encoding")||"identity")!=="identity"||(ut.allowRangeRequests=!0),ut}function b($){const _e=$("Content-Disposition");if(_e){let tt=(0,c.getFilenameFromContentDispositionHeader)(_e);if(tt.includes("%"))try{tt=decodeURIComponent(tt)}catch{}if((0,h.isPdfFile)(tt))return tt}return null}function _($,_e){return $===404||$===0&&_e.startsWith("file:")?new a.MissingPDFException('Missing PDF "'+_e+'".'):new a.UnexpectedResponseException(`Unexpected server response (${$}) while retrieving PDF "${_e}".`,$)}function j($){return $===200||$===206}},(s,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=c;var a=o(1);function c(h){let g=!0,b=_("filename\\*","i").exec(h);if(b){b=b[1];let ht=tt(b);return ht=unescape(ht),ht=et(ht),ht=ut(ht),$(ht)}if(b=_e(h),b){const ht=ut(b);return $(ht)}if(b=_("filename","i").exec(h),b){b=b[1];let ht=tt(b);return ht=ut(ht),$(ht)}function _(ht,st){return new RegExp("(?:^|;)\\s*"+ht+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',st)}function j(ht,st){if(ht){if(!/^[\x00-\xFF]+$/.test(st))return st;try{const nt=new TextDecoder(ht,{fatal:!0}),rt=(0,a.stringToBytes)(st);st=nt.decode(rt),g=!1}catch{}}return st}function $(ht){return g&&/[\x80-\xff]/.test(ht)&&(ht=j("utf-8",ht),g&&(ht=j("iso-8859-1",ht))),ht}function _e(ht){const st=[];let nt;const rt=_("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(nt=rt.exec(ht))!==null;){let[,dt,ot,ct]=nt;if(dt=parseInt(dt,10),dt in st){if(dt===0)break;continue}st[dt]=[ot,ct]}const at=[];for(let dt=0;dt<st.length&&dt in st;++dt){let[ot,ct]=st[dt];ct=tt(ct),ot&&(ct=unescape(ct),dt===0&&(ct=et(ct))),at.push(ct)}return at.join("")}function tt(ht){if(ht.startsWith('"')){const st=ht.slice(1).split('\\"');for(let nt=0;nt<st.length;++nt){const rt=st[nt].indexOf('"');rt!==-1&&(st[nt]=st[nt].slice(0,rt),st.length=nt+1),st[nt]=st[nt].replaceAll(/\\(.)/g,"$1")}ht=st.join('"')}return ht}function et(ht){const st=ht.indexOf("'");if(st===-1)return ht;const nt=ht.slice(0,st),at=ht.slice(st+1).replace(/^[^']*'/,"");return j(nt,at)}function ut(ht){return!ht.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(ht)?ht:ht.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(st,nt,rt,at){if(rt==="q"||rt==="Q")return at=at.replaceAll("_"," "),at=at.replaceAll(/=([0-9a-fA-F]{2})/g,function(dt,ot){return String.fromCharCode(parseInt(ot,16))}),j(nt,at);try{at=atob(at)}catch{}return j(nt,at)})}return""}},(s,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var a=o(1),c=o(20);const h=200,g=206;function b(tt){const et=tt.response;return typeof et!="string"?et:(0,a.stringToBytes)(et).buffer}class _{constructor(et,ut={}){this.url=et,this.isHttp=/^https?:/i.test(et),this.httpHeaders=this.isHttp&&ut.httpHeaders||Object.create(null),this.withCredentials=ut.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(et,ut,ht){const st={begin:et,end:ut};for(const nt in ht)st[nt]=ht[nt];return this.request(st)}requestFull(et){return this.request(et)}request(et){const ut=new XMLHttpRequest,ht=this.currXhrId++,st=this.pendingRequests[ht]={xhr:ut};ut.open("GET",this.url),ut.withCredentials=this.withCredentials;for(const nt in this.httpHeaders){const rt=this.httpHeaders[nt];rt!==void 0&&ut.setRequestHeader(nt,rt)}return this.isHttp&&"begin"in et&&"end"in et?(ut.setRequestHeader("Range",`bytes=${et.begin}-${et.end-1}`),st.expectedStatus=g):st.expectedStatus=h,ut.responseType="arraybuffer",et.onError&&(ut.onerror=function(nt){et.onError(ut.status)}),ut.onreadystatechange=this.onStateChange.bind(this,ht),ut.onprogress=this.onProgress.bind(this,ht),st.onHeadersReceived=et.onHeadersReceived,st.onDone=et.onDone,st.onError=et.onError,st.onProgress=et.onProgress,ut.send(null),ht}onProgress(et,ut){var st;const ht=this.pendingRequests[et];ht&&((st=ht.onProgress)==null||st.call(ht,ut))}onStateChange(et,ut){var dt,ot,ct;const ht=this.pendingRequests[et];if(!ht)return;const st=ht.xhr;if(st.readyState>=2&&ht.onHeadersReceived&&(ht.onHeadersReceived(),delete ht.onHeadersReceived),st.readyState!==4||!(et in this.pendingRequests))return;if(delete this.pendingRequests[et],st.status===0&&this.isHttp){(dt=ht.onError)==null||dt.call(ht,st.status);return}const nt=st.status||h;if(!(nt===h&&ht.expectedStatus===g)&&nt!==ht.expectedStatus){(ot=ht.onError)==null||ot.call(ht,st.status);return}const at=b(st);if(nt===g){const vt=st.getResponseHeader("Content-Range"),mt=/bytes (\d+)-(\d+)\/(\d+)/.exec(vt);ht.onDone({begin:parseInt(mt[1],10),chunk:at})}else at?ht.onDone({begin:0,chunk:at}):(ct=ht.onError)==null||ct.call(ht,st.status)}getRequestXhr(et){return this.pendingRequests[et].xhr}isPendingRequest(et){return et in this.pendingRequests}abortRequest(et){const ut=this.pendingRequests[et].xhr;delete this.pendingRequests[et],ut.abort()}}class j{constructor(et){this._source=et,this._manager=new _(et.url,{httpHeaders:et.httpHeaders,withCredentials:et.withCredentials}),this._rangeChunkSize=et.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(et){const ut=this._rangeRequestReaders.indexOf(et);ut>=0&&this._rangeRequestReaders.splice(ut,1)}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new $(this._manager,this._source),this._fullRequestReader}getRangeReader(et,ut){const ht=new _e(this._manager,et,ut);return ht.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(ht),ht}cancelAllRequests(et){var ut;(ut=this._fullRequestReader)==null||ut.cancel(et);for(const ht of this._rangeRequestReaders.slice(0))ht.cancel(et)}}e.PDFNetworkStream=j;class ${constructor(et,ut){this._manager=et;const ht={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=ut.url,this._fullRequestId=et.requestFull(ht),this._headersReceivedCapability=new a.PromiseCapability,this._disableRange=ut.disableRange||!1,this._contentLength=ut.length,this._rangeChunkSize=ut.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const et=this._fullRequestId,ut=this._manager.getRequestXhr(et),ht=rt=>ut.getResponseHeader(rt),{allowRangeRequests:st,suggestedLength:nt}=(0,c.validateRangeRequestCapabilities)({getResponseHeader:ht,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});st&&(this._isRangeSupported=!0),this._contentLength=nt||this._contentLength,this._filename=(0,c.extractFilenameFromHeader)(ht),this._isRangeSupported&&this._manager.abortRequest(et),this._headersReceivedCapability.resolve()}_onDone(et){if(et&&(this._requests.length>0?this._requests.shift().resolve({value:et.chunk,done:!1}):this._cachedChunks.push(et.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const ut of this._requests)ut.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(et){this._storedError=(0,c.createResponseStatusError)(et,this._url),this._headersReceivedCapability.reject(this._storedError);for(const ut of this._requests)ut.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(et){var ut;(ut=this.onProgress)==null||ut.call(this,{loaded:et.loaded,total:et.lengthComputable?et.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const et=new a.PromiseCapability;return this._requests.push(et),et.promise}cancel(et){this._done=!0,this._headersReceivedCapability.reject(et);for(const ut of this._requests)ut.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class _e{constructor(et,ut,ht){this._manager=et;const st={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=et.url,this._requestId=et.requestRange(ut,ht,st),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var et;(et=this.onClosed)==null||et.call(this,this)}_onDone(et){const ut=et.chunk;this._requests.length>0?this._requests.shift().resolve({value:ut,done:!1}):this._queuedChunk=ut,this._done=!0;for(const ht of this._requests)ht.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(et){this._storedError=(0,c.createResponseStatusError)(et,this._url);for(const ut of this._requests)ut.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(et){var ut;this.isStreamingSupported||(ut=this.onProgress)==null||ut.call(this,{loaded:et.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const ut=this._queuedChunk;return this._queuedChunk=null,{value:ut,done:!1}}if(this._done)return{value:void 0,done:!0};const et=new a.PromiseCapability;return this._requests.push(et),et.promise}cancel(et){this._done=!0;for(const ut of this._requests)ut.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(s,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var a=o(1),c=o(20);const h=/^file:\/\/\/[a-zA-Z]:\//;function g(ht){const st=require$$5,nt=st.parse(ht);return nt.protocol==="file:"||nt.host?nt:/^[a-z]:[/\\]/i.test(ht)?st.parse(`file:///${ht}`):(nt.host||(nt.protocol="file:"),nt)}class b{constructor(st){this.source=st,this.url=g(st.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&st.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var st;return((st=this._fullRequestReader)==null?void 0:st._loaded)??0}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new et(this):new _e(this),this._fullRequestReader}getRangeReader(st,nt){if(nt<=this._progressiveDataLength)return null;const rt=this.isFsUrl?new ut(this,st,nt):new tt(this,st,nt);return this._rangeRequestReaders.push(rt),rt}cancelAllRequests(st){var nt;(nt=this._fullRequestReader)==null||nt.cancel(st);for(const rt of this._rangeRequestReaders.slice(0))rt.cancel(st)}}e.PDFNodeStream=b;class _{constructor(st){this._url=st.url,this._done=!1,this._storedError=null,this.onProgress=null;const nt=st.source;this._contentLength=nt.length,this._loaded=0,this._filename=null,this._disableRange=nt.disableRange||!1,this._rangeChunkSize=nt.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!nt.disableStream,this._isRangeSupported=!nt.disableRange,this._readableStream=null,this._readCapability=new a.PromiseCapability,this._headersCapability=new a.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var rt;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const st=this._readableStream.read();return st===null?(this._readCapability=new a.PromiseCapability,this.read()):(this._loaded+=st.length,(rt=this.onProgress)==null||rt.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(st).buffer,done:!1})}cancel(st){if(!this._readableStream){this._error(st);return}this._readableStream.destroy(st)}_error(st){this._storedError=st,this._readCapability.resolve()}_setReadableStream(st){this._readableStream=st,st.on("readable",()=>{this._readCapability.resolve()}),st.on("end",()=>{st.destroy(),this._done=!0,this._readCapability.resolve()}),st.on("error",nt=>{this._error(nt)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new a.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class j{constructor(st){this._url=st.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new a.PromiseCapability;const nt=st.source;this._isStreamingSupported=!nt.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var rt;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const st=this._readableStream.read();return st===null?(this._readCapability=new a.PromiseCapability,this.read()):(this._loaded+=st.length,(rt=this.onProgress)==null||rt.call(this,{loaded:this._loaded}),{value:new Uint8Array(st).buffer,done:!1})}cancel(st){if(!this._readableStream){this._error(st);return}this._readableStream.destroy(st)}_error(st){this._storedError=st,this._readCapability.resolve()}_setReadableStream(st){this._readableStream=st,st.on("readable",()=>{this._readCapability.resolve()}),st.on("end",()=>{st.destroy(),this._done=!0,this._readCapability.resolve()}),st.on("error",nt=>{this._error(nt)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function $(ht,st){return{protocol:ht.protocol,auth:ht.auth,host:ht.hostname,port:ht.port,path:ht.path,method:"GET",headers:st}}class _e extends _{constructor(st){super(st);const nt=rt=>{if(rt.statusCode===404){const ct=new a.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=ct,this._headersCapability.reject(ct);return}this._headersCapability.resolve(),this._setReadableStream(rt);const at=ct=>this._readableStream.headers[ct.toLowerCase()],{allowRangeRequests:dt,suggestedLength:ot}=(0,c.validateRangeRequestCapabilities)({getResponseHeader:at,isHttp:st.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=dt,this._contentLength=ot||this._contentLength,this._filename=(0,c.extractFilenameFromHeader)(at)};if(this._request=null,this._url.protocol==="http:"){const rt=require$$5;this._request=rt.request($(this._url,st.httpHeaders),nt)}else{const rt=require$$5;this._request=rt.request($(this._url,st.httpHeaders),nt)}this._request.on("error",rt=>{this._storedError=rt,this._headersCapability.reject(rt)}),this._request.end()}}class tt extends j{constructor(st,nt,rt){super(st),this._httpHeaders={};for(const dt in st.httpHeaders){const ot=st.httpHeaders[dt];ot!==void 0&&(this._httpHeaders[dt]=ot)}this._httpHeaders.Range=`bytes=${nt}-${rt-1}`;const at=dt=>{if(dt.statusCode===404){const ot=new a.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=ot;return}this._setReadableStream(dt)};if(this._request=null,this._url.protocol==="http:"){const dt=require$$5;this._request=dt.request($(this._url,this._httpHeaders),at)}else{const dt=require$$5;this._request=dt.request($(this._url,this._httpHeaders),at)}this._request.on("error",dt=>{this._storedError=dt}),this._request.end()}}class et extends _{constructor(st){super(st);let nt=decodeURIComponent(this._url.path);h.test(this._url.href)&&(nt=nt.replace(/^\//,""));const rt=require$$5;rt.lstat(nt,(at,dt)=>{if(at){at.code==="ENOENT"&&(at=new a.MissingPDFException(`Missing PDF "${nt}".`)),this._storedError=at,this._headersCapability.reject(at);return}this._contentLength=dt.size,this._setReadableStream(rt.createReadStream(nt)),this._headersCapability.resolve()})}}class ut extends j{constructor(st,nt,rt){super(st);let at=decodeURIComponent(this._url.path);h.test(this._url.href)&&(at=at.replace(/^\//,""));const dt=require$$5;this._setReadableStream(dt.createReadStream(at,{start:nt,end:rt-1}))}}},(s,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var a=o(6),c=o(1);const h={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},g="http://www.w3.org/XML/1998/namespace",b="http://www.w3.org/1999/xlink",_=["butt","round","square"],j=["miter","round","bevel"],$=function(dt,ot="",ct=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!ct)return URL.createObjectURL(new Blob([dt],{type:ot}));const vt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let mt=`data:${ot};base64,`;for(let pt=0,Et=dt.length;pt<Et;pt+=3){const Ct=dt[pt]&255,Nt=dt[pt+1]&255,Ut=dt[pt+2]&255,Tt=Ct>>2,qt=(Ct&3)<<4|Nt>>4,Vt=pt+1<Et?(Nt&15)<<2|Ut>>6:64,Zt=pt+2<Et?Ut&63:64;mt+=vt[Tt]+vt[qt]+vt[Vt]+vt[Zt]}return mt},_e=function(){const dt=new Uint8Array([137,80,78,71,13,10,26,10]),ot=12,ct=new Int32Array(256);for(let Ut=0;Ut<256;Ut++){let Tt=Ut;for(let qt=0;qt<8;qt++)Tt=Tt&1?3988292384^Tt>>1&2147483647:Tt>>1&2147483647;ct[Ut]=Tt}function vt(Ut,Tt,qt){let Vt=-1;for(let Zt=Tt;Zt<qt;Zt++){const It=(Vt^Ut[Zt])&255,Jt=ct[It];Vt=Vt>>>8^Jt}return Vt^-1}function mt(Ut,Tt,qt,Vt){let Zt=Vt;const It=Tt.length;qt[Zt]=It>>24&255,qt[Zt+1]=It>>16&255,qt[Zt+2]=It>>8&255,qt[Zt+3]=It&255,Zt+=4,qt[Zt]=Ut.charCodeAt(0)&255,qt[Zt+1]=Ut.charCodeAt(1)&255,qt[Zt+2]=Ut.charCodeAt(2)&255,qt[Zt+3]=Ut.charCodeAt(3)&255,Zt+=4,qt.set(Tt,Zt),Zt+=Tt.length;const Jt=vt(qt,Vt+4,Zt);qt[Zt]=Jt>>24&255,qt[Zt+1]=Jt>>16&255,qt[Zt+2]=Jt>>8&255,qt[Zt+3]=Jt&255}function pt(Ut,Tt,qt){let Vt=1,Zt=0;for(let It=Tt;It<qt;++It)Vt=(Vt+(Ut[It]&255))%65521,Zt=(Zt+Vt)%65521;return Zt<<16|Vt}function Et(Ut){if(!c.isNodeJS)return Ct(Ut);try{const Tt=parseInt(process.versions.node)>=8?Ut:Buffer.from(Ut),qt=require$$5.deflateSync(Tt,{level:9});return qt instanceof Uint8Array?qt:new Uint8Array(qt)}catch(Tt){(0,c.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Tt)}return Ct(Ut)}function Ct(Ut){let Tt=Ut.length;const qt=65535,Vt=Math.ceil(Tt/qt),Zt=new Uint8Array(2+Tt+Vt*5+4);let It=0;Zt[It++]=120,Zt[It++]=156;let Jt=0;for(;Tt>qt;)Zt[It++]=0,Zt[It++]=255,Zt[It++]=255,Zt[It++]=0,Zt[It++]=0,Zt.set(Ut.subarray(Jt,Jt+qt),It),It+=qt,Jt+=qt,Tt-=qt;Zt[It++]=1,Zt[It++]=Tt&255,Zt[It++]=Tt>>8&255,Zt[It++]=~Tt&65535&255,Zt[It++]=(~Tt&65535)>>8&255,Zt.set(Ut.subarray(Jt),It),It+=Ut.length-Jt;const fn=pt(Ut,0,Ut.length);return Zt[It++]=fn>>24&255,Zt[It++]=fn>>16&255,Zt[It++]=fn>>8&255,Zt[It++]=fn&255,Zt}function Nt(Ut,Tt,qt,Vt){const Zt=Ut.width,It=Ut.height;let Jt,fn,_n;const xn=Ut.data;switch(Tt){case c.ImageKind.GRAYSCALE_1BPP:fn=0,Jt=1,_n=Zt+7>>3;break;case c.ImageKind.RGB_24BPP:fn=2,Jt=8,_n=Zt*3;break;case c.ImageKind.RGBA_32BPP:fn=6,Jt=8,_n=Zt*4;break;default:throw new Error("invalid format")}const Mt=new Uint8Array((1+_n)*It);let xt=0,At=0;for(let Wt=0;Wt<It;++Wt)Mt[xt++]=0,Mt.set(xn.subarray(At,At+_n),xt),At+=_n,xt+=_n;if(Tt===c.ImageKind.GRAYSCALE_1BPP&&Vt){xt=0;for(let Wt=0;Wt<It;Wt++){xt++;for(let un=0;un<_n;un++)Mt[xt++]^=255}}const wt=new Uint8Array([Zt>>24&255,Zt>>16&255,Zt>>8&255,Zt&255,It>>24&255,It>>16&255,It>>8&255,It&255,Jt,fn,0,0,0]),kt=Et(Mt),Dt=dt.length+ot*3+wt.length+kt.length,Ft=new Uint8Array(Dt);let $t=0;return Ft.set(dt,$t),$t+=dt.length,mt("IHDR",wt,Ft,$t),$t+=ot+wt.length,mt("IDATA",kt,Ft,$t),$t+=ot+kt.length,mt("IEND",new Uint8Array(0),Ft,$t),$(Ft,"image/png",qt)}return function(Tt,qt,Vt){const Zt=Tt.kind===void 0?c.ImageKind.GRAYSCALE_1BPP:Tt.kind;return Nt(Tt,Zt,qt,Vt)}}();class tt{constructor(){this.fontSizeScale=1,this.fontWeight=h.fontWeight,this.fontSize=0,this.textMatrix=c.IDENTITY_MATRIX,this.fontMatrix=c.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=c.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=h.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(ot,ct){this.x=ot,this.y=ct}}function et(dt){let ot=[];const ct=[];for(const vt of dt){if(vt.fn==="save"){ot.push({fnId:92,fn:"group",items:[]}),ct.push(ot),ot=ot.at(-1).items;continue}vt.fn==="restore"?ot=ct.pop():ot.push(vt)}return ot}function ut(dt){if(Number.isInteger(dt))return dt.toString();const ot=dt.toFixed(10);let ct=ot.length-1;if(ot[ct]!=="0")return ot;do ct--;while(ot[ct]==="0");return ot.substring(0,ot[ct]==="."?ct:ct+1)}function ht(dt){if(dt[4]===0&&dt[5]===0){if(dt[1]===0&&dt[2]===0)return dt[0]===1&&dt[3]===1?"":`scale(${ut(dt[0])} ${ut(dt[3])})`;if(dt[0]===dt[3]&&dt[1]===-dt[2]){const ot=Math.acos(dt[0])*180/Math.PI;return`rotate(${ut(ot)})`}}else if(dt[0]===1&&dt[1]===0&&dt[2]===0&&dt[3]===1)return`translate(${ut(dt[4])} ${ut(dt[5])})`;return`matrix(${ut(dt[0])} ${ut(dt[1])} ${ut(dt[2])} ${ut(dt[3])} ${ut(dt[4])} ${ut(dt[5])})`}let st=0,nt=0,rt=0;class at{constructor(ot,ct,vt=!1){(0,a.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new a.DOMSVGFactory,this.current=new tt,this.transformMatrix=c.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=ot,this.objs=ct,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!vt,this._operatorIdMapping=[];for(const mt in c.OPS)this._operatorIdMapping[c.OPS[mt]]=mt}getObject(ot,ct=null){return typeof ot=="string"?ot.startsWith("g_")?this.commonObjs.get(ot):this.objs.get(ot):ct}save(){this.transformStack.push(this.transformMatrix);const ot=this.current;this.extraStack.push(ot),this.current=ot.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(ot){this.save(),this.executeOpTree(ot),this.restore()}loadDependencies(ot){const ct=ot.fnArray,vt=ot.argsArray;for(let mt=0,pt=ct.length;mt<pt;mt++)if(ct[mt]===c.OPS.dependency)for(const Et of vt[mt]){const Ct=Et.startsWith("g_")?this.commonObjs:this.objs,Nt=new Promise(Ut=>{Ct.get(Et,Ut)});this.current.dependencies.push(Nt)}return Promise.all(this.current.dependencies)}transform(ot,ct,vt,mt,pt,Et){const Ct=[ot,ct,vt,mt,pt,Et];this.transformMatrix=c.Util.transform(this.transformMatrix,Ct),this.tgrp=null}getSVG(ot,ct){this.viewport=ct;const vt=this._initialize(ct);return this.loadDependencies(ot).then(()=>(this.transformMatrix=c.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(ot)),vt))}convertOpList(ot){const ct=this._operatorIdMapping,vt=ot.argsArray,mt=ot.fnArray,pt=[];for(let Et=0,Ct=mt.length;Et<Ct;Et++){const Nt=mt[Et];pt.push({fnId:Nt,fn:ct[Nt],args:vt[Et]})}return et(pt)}executeOpTree(ot){for(const ct of ot){const vt=ct.fn,mt=ct.fnId,pt=ct.args;switch(mt|0){case c.OPS.beginText:this.beginText();break;case c.OPS.dependency:break;case c.OPS.setLeading:this.setLeading(pt);break;case c.OPS.setLeadingMoveText:this.setLeadingMoveText(pt[0],pt[1]);break;case c.OPS.setFont:this.setFont(pt);break;case c.OPS.showText:this.showText(pt[0]);break;case c.OPS.showSpacedText:this.showText(pt[0]);break;case c.OPS.endText:this.endText();break;case c.OPS.moveText:this.moveText(pt[0],pt[1]);break;case c.OPS.setCharSpacing:this.setCharSpacing(pt[0]);break;case c.OPS.setWordSpacing:this.setWordSpacing(pt[0]);break;case c.OPS.setHScale:this.setHScale(pt[0]);break;case c.OPS.setTextMatrix:this.setTextMatrix(pt[0],pt[1],pt[2],pt[3],pt[4],pt[5]);break;case c.OPS.setTextRise:this.setTextRise(pt[0]);break;case c.OPS.setTextRenderingMode:this.setTextRenderingMode(pt[0]);break;case c.OPS.setLineWidth:this.setLineWidth(pt[0]);break;case c.OPS.setLineJoin:this.setLineJoin(pt[0]);break;case c.OPS.setLineCap:this.setLineCap(pt[0]);break;case c.OPS.setMiterLimit:this.setMiterLimit(pt[0]);break;case c.OPS.setFillRGBColor:this.setFillRGBColor(pt[0],pt[1],pt[2]);break;case c.OPS.setStrokeRGBColor:this.setStrokeRGBColor(pt[0],pt[1],pt[2]);break;case c.OPS.setStrokeColorN:this.setStrokeColorN(pt);break;case c.OPS.setFillColorN:this.setFillColorN(pt);break;case c.OPS.shadingFill:this.shadingFill(pt[0]);break;case c.OPS.setDash:this.setDash(pt[0],pt[1]);break;case c.OPS.setRenderingIntent:this.setRenderingIntent(pt[0]);break;case c.OPS.setFlatness:this.setFlatness(pt[0]);break;case c.OPS.setGState:this.setGState(pt[0]);break;case c.OPS.fill:this.fill();break;case c.OPS.eoFill:this.eoFill();break;case c.OPS.stroke:this.stroke();break;case c.OPS.fillStroke:this.fillStroke();break;case c.OPS.eoFillStroke:this.eoFillStroke();break;case c.OPS.clip:this.clip("nonzero");break;case c.OPS.eoClip:this.clip("evenodd");break;case c.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case c.OPS.paintImageXObject:this.paintImageXObject(pt[0]);break;case c.OPS.paintInlineImageXObject:this.paintInlineImageXObject(pt[0]);break;case c.OPS.paintImageMaskXObject:this.paintImageMaskXObject(pt[0]);break;case c.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(pt[0],pt[1]);break;case c.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case c.OPS.closePath:this.closePath();break;case c.OPS.closeStroke:this.closeStroke();break;case c.OPS.closeFillStroke:this.closeFillStroke();break;case c.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case c.OPS.nextLine:this.nextLine();break;case c.OPS.transform:this.transform(pt[0],pt[1],pt[2],pt[3],pt[4],pt[5]);break;case c.OPS.constructPath:this.constructPath(pt[0],pt[1]);break;case c.OPS.endPath:this.endPath();break;case 92:this.group(ct.items);break;default:(0,c.warn)(`Unimplemented operator ${vt}`);break}}}setWordSpacing(ot){this.current.wordSpacing=ot}setCharSpacing(ot){this.current.charSpacing=ot}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(ot,ct,vt,mt,pt,Et){const Ct=this.current;Ct.textMatrix=Ct.lineMatrix=[ot,ct,vt,mt,pt,Et],Ct.textMatrixScale=Math.hypot(ot,ct),Ct.x=Ct.lineX=0,Ct.y=Ct.lineY=0,Ct.xcoords=[],Ct.ycoords=[],Ct.tspan=this.svgFactory.createElement("svg:tspan"),Ct.tspan.setAttributeNS(null,"font-family",Ct.fontFamily),Ct.tspan.setAttributeNS(null,"font-size",`${ut(Ct.fontSize)}px`),Ct.tspan.setAttributeNS(null,"y",ut(-Ct.y)),Ct.txtElement=this.svgFactory.createElement("svg:text"),Ct.txtElement.append(Ct.tspan)}beginText(){const ot=this.current;ot.x=ot.lineX=0,ot.y=ot.lineY=0,ot.textMatrix=c.IDENTITY_MATRIX,ot.lineMatrix=c.IDENTITY_MATRIX,ot.textMatrixScale=1,ot.tspan=this.svgFactory.createElement("svg:tspan"),ot.txtElement=this.svgFactory.createElement("svg:text"),ot.txtgrp=this.svgFactory.createElement("svg:g"),ot.xcoords=[],ot.ycoords=[]}moveText(ot,ct){const vt=this.current;vt.x=vt.lineX+=ot,vt.y=vt.lineY+=ct,vt.xcoords=[],vt.ycoords=[],vt.tspan=this.svgFactory.createElement("svg:tspan"),vt.tspan.setAttributeNS(null,"font-family",vt.fontFamily),vt.tspan.setAttributeNS(null,"font-size",`${ut(vt.fontSize)}px`),vt.tspan.setAttributeNS(null,"y",ut(-vt.y))}showText(ot){const ct=this.current,vt=ct.font,mt=ct.fontSize;if(mt===0)return;const pt=ct.fontSizeScale,Et=ct.charSpacing,Ct=ct.wordSpacing,Nt=ct.fontDirection,Ut=ct.textHScale*Nt,Tt=vt.vertical,qt=Tt?1:-1,Vt=vt.defaultVMetrics,Zt=mt*ct.fontMatrix[0];let It=0;for(const _n of ot){if(_n===null){It+=Nt*Ct;continue}else if(typeof _n=="number"){It+=qt*_n*mt/1e3;continue}const xn=(_n.isSpace?Ct:0)+Et,Mt=_n.fontChar;let xt,At,wt=_n.width;if(Tt){let Dt;const Ft=_n.vmetric||Vt;Dt=_n.vmetric?Ft[1]:wt*.5,Dt=-Dt*Zt;const $t=Ft[2]*Zt;wt=Ft?-Ft[0]:wt,xt=Dt/pt,At=(It+$t)/pt}else xt=It/pt,At=0;(_n.isInFont||vt.missingFile)&&(ct.xcoords.push(ct.x+xt),Tt&&ct.ycoords.push(-ct.y+At),ct.tspan.textContent+=Mt);const kt=Tt?wt*Zt-xn*Nt:wt*Zt+xn*Nt;It+=kt}ct.tspan.setAttributeNS(null,"x",ct.xcoords.map(ut).join(" ")),Tt?ct.tspan.setAttributeNS(null,"y",ct.ycoords.map(ut).join(" ")):ct.tspan.setAttributeNS(null,"y",ut(-ct.y)),Tt?ct.y-=It:ct.x+=It*Ut,ct.tspan.setAttributeNS(null,"font-family",ct.fontFamily),ct.tspan.setAttributeNS(null,"font-size",`${ut(ct.fontSize)}px`),ct.fontStyle!==h.fontStyle&&ct.tspan.setAttributeNS(null,"font-style",ct.fontStyle),ct.fontWeight!==h.fontWeight&&ct.tspan.setAttributeNS(null,"font-weight",ct.fontWeight);const Jt=ct.textRenderingMode&c.TextRenderingMode.FILL_STROKE_MASK;if(Jt===c.TextRenderingMode.FILL||Jt===c.TextRenderingMode.FILL_STROKE?(ct.fillColor!==h.fillColor&&ct.tspan.setAttributeNS(null,"fill",ct.fillColor),ct.fillAlpha<1&&ct.tspan.setAttributeNS(null,"fill-opacity",ct.fillAlpha)):ct.textRenderingMode===c.TextRenderingMode.ADD_TO_PATH?ct.tspan.setAttributeNS(null,"fill","transparent"):ct.tspan.setAttributeNS(null,"fill","none"),Jt===c.TextRenderingMode.STROKE||Jt===c.TextRenderingMode.FILL_STROKE){const _n=1/(ct.textMatrixScale||1);this._setStrokeAttributes(ct.tspan,_n)}let fn=ct.textMatrix;ct.textRise!==0&&(fn=fn.slice(),fn[5]+=ct.textRise),ct.txtElement.setAttributeNS(null,"transform",`${ht(fn)} scale(${ut(Ut)}, -1)`),ct.txtElement.setAttributeNS(g,"xml:space","preserve"),ct.txtElement.append(ct.tspan),ct.txtgrp.append(ct.txtElement),this._ensureTransformGroup().append(ct.txtElement)}setLeadingMoveText(ot,ct){this.setLeading(-ct),this.moveText(ot,ct)}addFontStyle(ot){if(!ot.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const ct=$(ot.data,ot.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${ot.loadedName}"; src: url(${ct}); }
`}setFont(ot){const ct=this.current,vt=this.commonObjs.get(ot[0]);let mt=ot[1];ct.font=vt,this.embedFonts&&!vt.missingFile&&!this.embeddedFonts[vt.loadedName]&&(this.addFontStyle(vt),this.embeddedFonts[vt.loadedName]=vt),ct.fontMatrix=vt.fontMatrix||c.FONT_IDENTITY_MATRIX;let pt="normal";vt.black?pt="900":vt.bold&&(pt="bold");const Et=vt.italic?"italic":"normal";mt<0?(mt=-mt,ct.fontDirection=-1):ct.fontDirection=1,ct.fontSize=mt,ct.fontFamily=vt.loadedName,ct.fontWeight=pt,ct.fontStyle=Et,ct.tspan=this.svgFactory.createElement("svg:tspan"),ct.tspan.setAttributeNS(null,"y",ut(-ct.y)),ct.xcoords=[],ct.ycoords=[]}endText(){var ct;const ot=this.current;ot.textRenderingMode&c.TextRenderingMode.ADD_TO_PATH_FLAG&&((ct=ot.txtElement)!=null&&ct.hasChildNodes())&&(ot.element=ot.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(ot){ot>0&&(this.current.lineWidth=ot)}setLineCap(ot){this.current.lineCap=_[ot]}setLineJoin(ot){this.current.lineJoin=j[ot]}setMiterLimit(ot){this.current.miterLimit=ot}setStrokeAlpha(ot){this.current.strokeAlpha=ot}setStrokeRGBColor(ot,ct,vt){this.current.strokeColor=c.Util.makeHexColor(ot,ct,vt)}setFillAlpha(ot){this.current.fillAlpha=ot}setFillRGBColor(ot,ct,vt){this.current.fillColor=c.Util.makeHexColor(ot,ct,vt),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(ot){this.current.strokeColor=this._makeColorN_Pattern(ot)}setFillColorN(ot){this.current.fillColor=this._makeColorN_Pattern(ot)}shadingFill(ot){const{width:ct,height:vt}=this.viewport,mt=c.Util.inverseTransform(this.transformMatrix),[pt,Et,Ct,Nt]=c.Util.getAxialAlignedBoundingBox([0,0,ct,vt],mt),Ut=this.svgFactory.createElement("svg:rect");Ut.setAttributeNS(null,"x",pt),Ut.setAttributeNS(null,"y",Et),Ut.setAttributeNS(null,"width",Ct-pt),Ut.setAttributeNS(null,"height",Nt-Et),Ut.setAttributeNS(null,"fill",this._makeShadingPattern(ot)),this.current.fillAlpha<1&&Ut.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(Ut)}_makeColorN_Pattern(ot){return ot[0]==="TilingPattern"?this._makeTilingPattern(ot):this._makeShadingPattern(ot)}_makeTilingPattern(ot){const ct=ot[1],vt=ot[2],mt=ot[3]||c.IDENTITY_MATRIX,[pt,Et,Ct,Nt]=ot[4],Ut=ot[5],Tt=ot[6],qt=ot[7],Vt=`shading${rt++}`,[Zt,It,Jt,fn]=c.Util.normalizeRect([...c.Util.applyTransform([pt,Et],mt),...c.Util.applyTransform([Ct,Nt],mt)]),[_n,xn]=c.Util.singularValueDecompose2dScale(mt),Mt=Ut*_n,xt=Tt*xn,At=this.svgFactory.createElement("svg:pattern");At.setAttributeNS(null,"id",Vt),At.setAttributeNS(null,"patternUnits","userSpaceOnUse"),At.setAttributeNS(null,"width",Mt),At.setAttributeNS(null,"height",xt),At.setAttributeNS(null,"x",`${Zt}`),At.setAttributeNS(null,"y",`${It}`);const wt=this.svg,kt=this.transformMatrix,Dt=this.current.fillColor,Ft=this.current.strokeColor,$t=this.svgFactory.create(Jt-Zt,fn-It);if(this.svg=$t,this.transformMatrix=mt,qt===2){const Wt=c.Util.makeHexColor(...ct);this.current.fillColor=Wt,this.current.strokeColor=Wt}return this.executeOpTree(this.convertOpList(vt)),this.svg=wt,this.transformMatrix=kt,this.current.fillColor=Dt,this.current.strokeColor=Ft,At.append($t.childNodes[0]),this.defs.append(At),`url(#${Vt})`}_makeShadingPattern(ot){switch(typeof ot=="string"&&(ot=this.objs.get(ot)),ot[0]){case"RadialAxial":const ct=`shading${rt++}`,vt=ot[3];let mt;switch(ot[1]){case"axial":const pt=ot[4],Et=ot[5];mt=this.svgFactory.createElement("svg:linearGradient"),mt.setAttributeNS(null,"id",ct),mt.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),mt.setAttributeNS(null,"x1",pt[0]),mt.setAttributeNS(null,"y1",pt[1]),mt.setAttributeNS(null,"x2",Et[0]),mt.setAttributeNS(null,"y2",Et[1]);break;case"radial":const Ct=ot[4],Nt=ot[5],Ut=ot[6],Tt=ot[7];mt=this.svgFactory.createElement("svg:radialGradient"),mt.setAttributeNS(null,"id",ct),mt.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),mt.setAttributeNS(null,"cx",Nt[0]),mt.setAttributeNS(null,"cy",Nt[1]),mt.setAttributeNS(null,"r",Tt),mt.setAttributeNS(null,"fx",Ct[0]),mt.setAttributeNS(null,"fy",Ct[1]),mt.setAttributeNS(null,"fr",Ut);break;default:throw new Error(`Unknown RadialAxial type: ${ot[1]}`)}for(const pt of vt){const Et=this.svgFactory.createElement("svg:stop");Et.setAttributeNS(null,"offset",pt[0]),Et.setAttributeNS(null,"stop-color",pt[1]),mt.append(Et)}return this.defs.append(mt),`url(#${ct})`;case"Mesh":return(0,c.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${ot[0]}`)}}setDash(ot,ct){this.current.dashArray=ot,this.current.dashPhase=ct}constructPath(ot,ct){const vt=this.current;let mt=vt.x,pt=vt.y,Et=[],Ct=0;for(const Nt of ot)switch(Nt|0){case c.OPS.rectangle:mt=ct[Ct++],pt=ct[Ct++];const Ut=ct[Ct++],Tt=ct[Ct++],qt=mt+Ut,Vt=pt+Tt;Et.push("M",ut(mt),ut(pt),"L",ut(qt),ut(pt),"L",ut(qt),ut(Vt),"L",ut(mt),ut(Vt),"Z");break;case c.OPS.moveTo:mt=ct[Ct++],pt=ct[Ct++],Et.push("M",ut(mt),ut(pt));break;case c.OPS.lineTo:mt=ct[Ct++],pt=ct[Ct++],Et.push("L",ut(mt),ut(pt));break;case c.OPS.curveTo:mt=ct[Ct+4],pt=ct[Ct+5],Et.push("C",ut(ct[Ct]),ut(ct[Ct+1]),ut(ct[Ct+2]),ut(ct[Ct+3]),ut(mt),ut(pt)),Ct+=6;break;case c.OPS.curveTo2:Et.push("C",ut(mt),ut(pt),ut(ct[Ct]),ut(ct[Ct+1]),ut(ct[Ct+2]),ut(ct[Ct+3])),mt=ct[Ct+2],pt=ct[Ct+3],Ct+=4;break;case c.OPS.curveTo3:mt=ct[Ct+2],pt=ct[Ct+3],Et.push("C",ut(ct[Ct]),ut(ct[Ct+1]),ut(mt),ut(pt),ut(mt),ut(pt)),Ct+=4;break;case c.OPS.closePath:Et.push("Z");break}Et=Et.join(" "),vt.path&&ot.length>0&&ot[0]!==c.OPS.rectangle&&ot[0]!==c.OPS.moveTo?Et=vt.path.getAttributeNS(null,"d")+Et:(vt.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(vt.path)),vt.path.setAttributeNS(null,"d",Et),vt.path.setAttributeNS(null,"fill","none"),vt.element=vt.path,vt.setCurrentPoint(mt,pt)}endPath(){const ot=this.current;if(ot.path=null,!this.pendingClip)return;if(!ot.element){this.pendingClip=null;return}const ct=`clippath${st++}`,vt=this.svgFactory.createElement("svg:clipPath");vt.setAttributeNS(null,"id",ct),vt.setAttributeNS(null,"transform",ht(this.transformMatrix));const mt=ot.element.cloneNode(!0);if(this.pendingClip==="evenodd"?mt.setAttributeNS(null,"clip-rule","evenodd"):mt.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,vt.append(mt),this.defs.append(vt),ot.activeClipUrl){ot.clipGroup=null;for(const pt of this.extraStack)pt.clipGroup=null;vt.setAttributeNS(null,"clip-path",ot.activeClipUrl)}ot.activeClipUrl=`url(#${ct})`,this.tgrp=null}clip(ot){this.pendingClip=ot}closePath(){const ot=this.current;if(ot.path){const ct=`${ot.path.getAttributeNS(null,"d")}Z`;ot.path.setAttributeNS(null,"d",ct)}}setLeading(ot){this.current.leading=-ot}setTextRise(ot){this.current.textRise=ot}setTextRenderingMode(ot){this.current.textRenderingMode=ot}setHScale(ot){this.current.textHScale=ot/100}setRenderingIntent(ot){}setFlatness(ot){}setGState(ot){for(const[ct,vt]of ot)switch(ct){case"LW":this.setLineWidth(vt);break;case"LC":this.setLineCap(vt);break;case"LJ":this.setLineJoin(vt);break;case"ML":this.setMiterLimit(vt);break;case"D":this.setDash(vt[0],vt[1]);break;case"RI":this.setRenderingIntent(vt);break;case"FL":this.setFlatness(vt);break;case"Font":this.setFont(vt);break;case"CA":this.setStrokeAlpha(vt);break;case"ca":this.setFillAlpha(vt);break;default:(0,c.warn)(`Unimplemented graphic state operator ${ct}`);break}}fill(){const ot=this.current;ot.element&&(ot.element.setAttributeNS(null,"fill",ot.fillColor),ot.element.setAttributeNS(null,"fill-opacity",ot.fillAlpha),this.endPath())}stroke(){const ot=this.current;ot.element&&(this._setStrokeAttributes(ot.element),ot.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(ot,ct=1){const vt=this.current;let mt=vt.dashArray;ct!==1&&mt.length>0&&(mt=mt.map(function(pt){return ct*pt})),ot.setAttributeNS(null,"stroke",vt.strokeColor),ot.setAttributeNS(null,"stroke-opacity",vt.strokeAlpha),ot.setAttributeNS(null,"stroke-miterlimit",ut(vt.miterLimit)),ot.setAttributeNS(null,"stroke-linecap",vt.lineCap),ot.setAttributeNS(null,"stroke-linejoin",vt.lineJoin),ot.setAttributeNS(null,"stroke-width",ut(ct*vt.lineWidth)+"px"),ot.setAttributeNS(null,"stroke-dasharray",mt.map(ut).join(" ")),ot.setAttributeNS(null,"stroke-dashoffset",ut(ct*vt.dashPhase)+"px")}eoFill(){var ot;(ot=this.current.element)==null||ot.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var ot;(ot=this.current.element)==null||ot.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const ot=this.svgFactory.createElement("svg:rect");ot.setAttributeNS(null,"x","0"),ot.setAttributeNS(null,"y","0"),ot.setAttributeNS(null,"width","1px"),ot.setAttributeNS(null,"height","1px"),ot.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(ot)}paintImageXObject(ot){const ct=this.getObject(ot);if(!ct){(0,c.warn)(`Dependent image with object ID ${ot} is not ready yet`);return}this.paintInlineImageXObject(ct)}paintInlineImageXObject(ot,ct){const vt=ot.width,mt=ot.height,pt=_e(ot,this.forceDataSchema,!!ct),Et=this.svgFactory.createElement("svg:rect");Et.setAttributeNS(null,"x","0"),Et.setAttributeNS(null,"y","0"),Et.setAttributeNS(null,"width",ut(vt)),Et.setAttributeNS(null,"height",ut(mt)),this.current.element=Et,this.clip("nonzero");const Ct=this.svgFactory.createElement("svg:image");Ct.setAttributeNS(b,"xlink:href",pt),Ct.setAttributeNS(null,"x","0"),Ct.setAttributeNS(null,"y",ut(-mt)),Ct.setAttributeNS(null,"width",ut(vt)+"px"),Ct.setAttributeNS(null,"height",ut(mt)+"px"),Ct.setAttributeNS(null,"transform",`scale(${ut(1/vt)} ${ut(-1/mt)})`),ct?ct.append(Ct):this._ensureTransformGroup().append(Ct)}paintImageMaskXObject(ot){const ct=this.getObject(ot.data,ot);if(ct.bitmap){(0,c.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const vt=this.current,mt=ct.width,pt=ct.height,Et=vt.fillColor;vt.maskId=`mask${nt++}`;const Ct=this.svgFactory.createElement("svg:mask");Ct.setAttributeNS(null,"id",vt.maskId);const Nt=this.svgFactory.createElement("svg:rect");Nt.setAttributeNS(null,"x","0"),Nt.setAttributeNS(null,"y","0"),Nt.setAttributeNS(null,"width",ut(mt)),Nt.setAttributeNS(null,"height",ut(pt)),Nt.setAttributeNS(null,"fill",Et),Nt.setAttributeNS(null,"mask",`url(#${vt.maskId})`),this.defs.append(Ct),this._ensureTransformGroup().append(Nt),this.paintInlineImageXObject(ct,Ct)}paintFormXObjectBegin(ot,ct){if(Array.isArray(ot)&&ot.length===6&&this.transform(ot[0],ot[1],ot[2],ot[3],ot[4],ot[5]),ct){const vt=ct[2]-ct[0],mt=ct[3]-ct[1],pt=this.svgFactory.createElement("svg:rect");pt.setAttributeNS(null,"x",ct[0]),pt.setAttributeNS(null,"y",ct[1]),pt.setAttributeNS(null,"width",ut(vt)),pt.setAttributeNS(null,"height",ut(mt)),this.current.element=pt,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(ot){const ct=this.svgFactory.create(ot.width,ot.height),vt=this.svgFactory.createElement("svg:defs");ct.append(vt),this.defs=vt;const mt=this.svgFactory.createElement("svg:g");return mt.setAttributeNS(null,"transform",ht(ot.transform)),ct.append(mt),this.svg=mt,ct}_ensureClipGroup(){if(!this.current.clipGroup){const ot=this.svgFactory.createElement("svg:g");ot.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(ot),this.current.clipGroup=ot}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",ht(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}e.SVGGraphics=at},(s,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class o{static textContent(c){const h=[],g={items:h,styles:Object.create(null)};function b(_){var _e;if(!_)return;let j=null;const $=_.name;if($==="#text")j=_.value;else if(o.shouldBuildText($))(_e=_==null?void 0:_.attributes)!=null&&_e.textContent?j=_.attributes.textContent:_.value&&(j=_.value);else return;if(j!==null&&h.push({str:j}),!!_.children)for(const tt of _.children)b(tt)}return b(c),g}static shouldBuildText(c){return!(c==="textarea"||c==="input"||c==="option"||c==="select")}}e.XfaText=o},(s,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=ht,e.updateTextLayer=st;var a=o(1),c=o(6);const h=1e5,g=30,b=.8,_=new Map;function j(nt,rt){let at;if(rt&&a.FeatureTest.isOffscreenCanvasSupported)at=new OffscreenCanvas(nt,nt).getContext("2d",{alpha:!1});else{const dt=document.createElement("canvas");dt.width=dt.height=nt,at=dt.getContext("2d",{alpha:!1})}return at}function $(nt,rt){const at=_.get(nt);if(at)return at;const dt=j(g,rt);dt.font=`${g}px ${nt}`;const ot=dt.measureText("");let ct=ot.fontBoundingBoxAscent,vt=Math.abs(ot.fontBoundingBoxDescent);if(ct){const pt=ct/(ct+vt);return _.set(nt,pt),dt.canvas.width=dt.canvas.height=0,pt}dt.strokeStyle="red",dt.clearRect(0,0,g,g),dt.strokeText("g",0,0);let mt=dt.getImageData(0,0,g,g).data;vt=0;for(let pt=mt.length-1-3;pt>=0;pt-=4)if(mt[pt]>0){vt=Math.ceil(pt/4/g);break}dt.clearRect(0,0,g,g),dt.strokeText("A",0,g),mt=dt.getImageData(0,0,g,g).data,ct=0;for(let pt=0,Et=mt.length;pt<Et;pt+=4)if(mt[pt]>0){ct=g-Math.floor(pt/4/g);break}if(dt.canvas.width=dt.canvas.height=0,ct){const pt=ct/(ct+vt);return _.set(nt,pt),pt}return _.set(nt,b),b}function _e(nt,rt,at){const dt=document.createElement("span"),ot={angle:0,canvasWidth:0,hasText:rt.str!=="",hasEOL:rt.hasEOL,fontSize:0};nt._textDivs.push(dt);const ct=a.Util.transform(nt._transform,rt.transform);let vt=Math.atan2(ct[1],ct[0]);const mt=at[rt.fontName];mt.vertical&&(vt+=Math.PI/2);const pt=Math.hypot(ct[2],ct[3]),Et=pt*$(mt.fontFamily,nt._isOffscreenCanvasSupported);let Ct,Nt;vt===0?(Ct=ct[4],Nt=ct[5]-Et):(Ct=ct[4]+Et*Math.sin(vt),Nt=ct[5]-Et*Math.cos(vt));const Ut="calc(var(--scale-factor)*",Tt=dt.style;nt._container===nt._rootContainer?(Tt.left=`${(100*Ct/nt._pageWidth).toFixed(2)}%`,Tt.top=`${(100*Nt/nt._pageHeight).toFixed(2)}%`):(Tt.left=`${Ut}${Ct.toFixed(2)}px)`,Tt.top=`${Ut}${Nt.toFixed(2)}px)`),Tt.fontSize=`${Ut}${pt.toFixed(2)}px)`,Tt.fontFamily=mt.fontFamily,ot.fontSize=pt,dt.setAttribute("role","presentation"),dt.textContent=rt.str,dt.dir=rt.dir,nt._fontInspectorEnabled&&(dt.dataset.fontName=rt.fontName),vt!==0&&(ot.angle=vt*(180/Math.PI));let qt=!1;if(rt.str.length>1)qt=!0;else if(rt.str!==" "&&rt.transform[0]!==rt.transform[3]){const Vt=Math.abs(rt.transform[0]),Zt=Math.abs(rt.transform[3]);Vt!==Zt&&Math.max(Vt,Zt)/Math.min(Vt,Zt)>1.5&&(qt=!0)}qt&&(ot.canvasWidth=mt.vertical?rt.height:rt.width),nt._textDivProperties.set(dt,ot),nt._isReadableStream&&nt._layoutText(dt)}function tt(nt){const{div:rt,scale:at,properties:dt,ctx:ot,prevFontSize:ct,prevFontFamily:vt}=nt,{style:mt}=rt;let pt="";if(dt.canvasWidth!==0&&dt.hasText){const{fontFamily:Et}=mt,{canvasWidth:Ct,fontSize:Nt}=dt;(ct!==Nt||vt!==Et)&&(ot.font=`${Nt*at}px ${Et}`,nt.prevFontSize=Nt,nt.prevFontFamily=Et);const{width:Ut}=ot.measureText(rt.textContent);Ut>0&&(pt=`scaleX(${Ct*at/Ut})`)}dt.angle!==0&&(pt=`rotate(${dt.angle}deg) ${pt}`),pt.length>0&&(mt.transform=pt)}function et(nt){if(nt._canceled)return;const rt=nt._textDivs,at=nt._capability;if(rt.length>h){at.resolve();return}if(!nt._isReadableStream)for(const ot of rt)nt._layoutText(ot);at.resolve()}class ut{constructor({textContentSource:rt,container:at,viewport:dt,textDivs:ot,textDivProperties:ct,textContentItemsStr:vt,isOffscreenCanvasSupported:mt}){var Ut;this._textContentSource=rt,this._isReadableStream=rt instanceof ReadableStream,this._container=this._rootContainer=at,this._textDivs=ot||[],this._textContentItemsStr=vt||[],this._isOffscreenCanvasSupported=mt,this._fontInspectorEnabled=!!((Ut=globalThis.FontInspector)!=null&&Ut.enabled),this._reader=null,this._textDivProperties=ct||new WeakMap,this._canceled=!1,this._capability=new a.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:dt.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:j(0,mt)};const{pageWidth:pt,pageHeight:Et,pageX:Ct,pageY:Nt}=dt.rawDims;this._transform=[1,0,0,-1,-Ct,Nt+Et],this._pageWidth=pt,this._pageHeight=Et,(0,c.setLayerDimensions)(at,dt),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new a.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new a.AbortException("TextLayer task cancelled."))}_processItems(rt,at){for(const dt of rt){if(dt.str===void 0){if(dt.type==="beginMarkedContentProps"||dt.type==="beginMarkedContent"){const ot=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),dt.id!==null&&this._container.setAttribute("id",`${dt.id}`),ot.append(this._container)}else dt.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(dt.str),_e(this,dt,at)}}_layoutText(rt){const at=this._layoutTextParams.properties=this._textDivProperties.get(rt);if(this._layoutTextParams.div=rt,tt(this._layoutTextParams),at.hasText&&this._container.append(rt),at.hasEOL){const dt=document.createElement("br");dt.setAttribute("role","presentation"),this._container.append(dt)}}_render(){const rt=new a.PromiseCapability;let at=Object.create(null);if(this._isReadableStream){const dt=()=>{this._reader.read().then(({value:ot,done:ct})=>{if(ct){rt.resolve();return}Object.assign(at,ot.styles),this._processItems(ot.items,at),dt()},rt.reject)};this._reader=this._textContentSource.getReader(),dt()}else if(this._textContentSource){const{items:dt,styles:ot}=this._textContentSource;this._processItems(dt,ot),rt.resolve()}else throw new Error('No "textContentSource" parameter specified.');rt.promise.then(()=>{at=null,et(this)},this._capability.reject)}}e.TextLayerRenderTask=ut;function ht(nt){!nt.textContentSource&&(nt.textContent||nt.textContentStream)&&((0,c.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),nt.textContentSource=nt.textContent||nt.textContentStream);const{container:rt,viewport:at}=nt,dt=getComputedStyle(rt),ot=dt.getPropertyValue("visibility"),ct=parseFloat(dt.getPropertyValue("--scale-factor"));ot==="visible"&&(!ct||Math.abs(ct-at.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const vt=new ut(nt);return vt._render(),vt}function st({container:nt,viewport:rt,textDivs:at,textDivProperties:dt,isOffscreenCanvasSupported:ot,mustRotate:ct=!0,mustRescale:vt=!0}){if(ct&&(0,c.setLayerDimensions)(nt,{rotation:rt.rotation}),vt){const mt=j(0,ot),Et={prevFontSize:null,prevFontFamily:null,div:null,scale:rt.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:mt};for(const Ct of at)Et.properties=dt.get(Ct),Et.div=Ct,tt(Et)}}},(s,e,o)=>{var $,_e,tt,et,ut,ht,st,nt,rt,at,dt,Cs,ct,Kr,mt,ks,Et,Ts;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var a=o(1),c=o(4),h=o(28),g=o(33),b=o(6),_=o(34);const Nt=class Nt{constructor({uiManager:Tt,pageIndex:qt,div:Vt,accessibilityManager:Zt,annotationLayer:It,viewport:Jt,l10n:fn}){Yt(this,dt);Yt(this,ct);Yt(this,mt);Yt(this,Et);Yt(this,$,void 0);Yt(this,_e,!1);Yt(this,tt,null);Yt(this,et,this.pointerup.bind(this));Yt(this,ut,this.pointerdown.bind(this));Yt(this,ht,new Map);Yt(this,st,!1);Yt(this,nt,!1);Yt(this,rt,!1);Yt(this,at,void 0);const _n=[h.FreeTextEditor,g.InkEditor,_.StampEditor];if(!Nt._initialized){Nt._initialized=!0;for(const xn of _n)xn.initialize(fn)}Tt.registerEditorTypes(_n),yn(this,at,Tt),this.pageIndex=qt,this.div=Vt,yn(this,$,Zt),yn(this,tt,It),this.viewport=Jt,bt(this,at).addLayer(this)}get isEmpty(){return bt(this,ht).size===0}updateToolbar(Tt){bt(this,at).updateToolbar(Tt)}updateMode(Tt=bt(this,at).getMode()){an(this,Et,Ts).call(this),Tt===a.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),Tt!==a.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",Tt===a.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",Tt===a.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",Tt===a.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(Tt){if(!Tt&&bt(this,at).getMode()!==a.AnnotationEditorType.INK)return;if(!Tt){for(const Vt of bt(this,ht).values())if(Vt.isEmpty()){Vt.setInBackground();return}}an(this,ct,Kr).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(Tt){bt(this,at).setEditingState(Tt)}addCommands(Tt){bt(this,at).addCommands(Tt)}enable(){this.div.style.pointerEvents="auto";const Tt=new Set;for(const Vt of bt(this,ht).values())Vt.enableEditing(),Vt.annotationElementId&&Tt.add(Vt.annotationElementId);if(!bt(this,tt))return;const qt=bt(this,tt).getEditableAnnotations();for(const Vt of qt){if(Vt.hide(),bt(this,at).isDeletedAnnotationElement(Vt.data.id)||Tt.has(Vt.data.id))continue;const Zt=this.deserialize(Vt);Zt&&(this.addOrRebuild(Zt),Zt.enableEditing())}}disable(){var qt;yn(this,rt,!0),this.div.style.pointerEvents="none";const Tt=new Set;for(const Vt of bt(this,ht).values()){if(Vt.disableEditing(),!Vt.annotationElementId||Vt.serialize()!==null){Tt.add(Vt.annotationElementId);continue}(qt=this.getEditableAnnotation(Vt.annotationElementId))==null||qt.show(),Vt.remove()}if(bt(this,tt)){const Vt=bt(this,tt).getEditableAnnotations();for(const Zt of Vt){const{id:It}=Zt.data;Tt.has(It)||bt(this,at).isDeletedAnnotationElement(It)||Zt.show()}}an(this,Et,Ts).call(this),this.isEmpty&&(this.div.hidden=!0),yn(this,rt,!1)}getEditableAnnotation(Tt){var qt;return((qt=bt(this,tt))==null?void 0:qt.getEditableAnnotation(Tt))||null}setActiveEditor(Tt){bt(this,at).getActive()!==Tt&&bt(this,at).setActiveEditor(Tt)}enableClick(){this.div.addEventListener("pointerdown",bt(this,ut)),this.div.addEventListener("pointerup",bt(this,et))}disableClick(){this.div.removeEventListener("pointerdown",bt(this,ut)),this.div.removeEventListener("pointerup",bt(this,et))}attach(Tt){bt(this,ht).set(Tt.id,Tt);const{annotationElementId:qt}=Tt;qt&&bt(this,at).isDeletedAnnotationElement(qt)&&bt(this,at).removeDeletedAnnotationElement(Tt)}detach(Tt){var qt;bt(this,ht).delete(Tt.id),(qt=bt(this,$))==null||qt.removePointerInTextLayer(Tt.contentDiv),!bt(this,rt)&&Tt.annotationElementId&&bt(this,at).addDeletedAnnotationElement(Tt)}remove(Tt){this.detach(Tt),bt(this,at).removeEditor(Tt),Tt.div.contains(document.activeElement)&&setTimeout(()=>{bt(this,at).focusMainContainer()},0),Tt.div.remove(),Tt.isAttachedToDOM=!1,bt(this,nt)||this.addInkEditorIfNeeded(!1)}changeParent(Tt){var qt;Tt.parent!==this&&(Tt.annotationElementId&&(bt(this,at).addDeletedAnnotationElement(Tt.annotationElementId),c.AnnotationEditor.deleteAnnotationElement(Tt),Tt.annotationElementId=null),this.attach(Tt),(qt=Tt.parent)==null||qt.detach(Tt),Tt.setParent(this),Tt.div&&Tt.isAttachedToDOM&&(Tt.div.remove(),this.div.append(Tt.div)))}add(Tt){if(this.changeParent(Tt),bt(this,at).addEditor(Tt),this.attach(Tt),!Tt.isAttachedToDOM){const qt=Tt.render();this.div.append(qt),Tt.isAttachedToDOM=!0}Tt.fixAndSetPosition(),Tt.onceAdded(),bt(this,at).addToAnnotationStorage(Tt)}moveEditorInDOM(Tt){var Vt;if(!Tt.isAttachedToDOM)return;const{activeElement:qt}=document;Tt.div.contains(qt)&&(Tt._focusEventsAllowed=!1,setTimeout(()=>{Tt.div.contains(document.activeElement)?Tt._focusEventsAllowed=!0:(Tt.div.addEventListener("focusin",()=>{Tt._focusEventsAllowed=!0},{once:!0}),qt.focus())},0)),Tt._structTreeParentId=(Vt=bt(this,$))==null?void 0:Vt.moveElementInDOM(this.div,Tt.div,Tt.contentDiv,!0)}addOrRebuild(Tt){Tt.needsToBeRebuilt()?Tt.rebuild():this.add(Tt)}addUndoableEditor(Tt){const qt=()=>Tt._uiManager.rebuild(Tt),Vt=()=>{Tt.remove()};this.addCommands({cmd:qt,undo:Vt,mustExec:!1})}getNextId(){return bt(this,at).getId()}pasteEditor(Tt,qt){bt(this,at).updateToolbar(Tt),bt(this,at).updateMode(Tt);const{offsetX:Vt,offsetY:Zt}=an(this,mt,ks).call(this),It=this.getNextId(),Jt=an(this,dt,Cs).call(this,{parent:this,id:It,x:Vt,y:Zt,uiManager:bt(this,at),isCentered:!0,...qt});Jt&&this.add(Jt)}deserialize(Tt){switch(Tt.annotationType??Tt.annotationEditorType){case a.AnnotationEditorType.FREETEXT:return h.FreeTextEditor.deserialize(Tt,this,bt(this,at));case a.AnnotationEditorType.INK:return g.InkEditor.deserialize(Tt,this,bt(this,at));case a.AnnotationEditorType.STAMP:return _.StampEditor.deserialize(Tt,this,bt(this,at))}return null}addNewEditor(){an(this,ct,Kr).call(this,an(this,mt,ks).call(this),!0)}setSelected(Tt){bt(this,at).setSelected(Tt)}toggleSelected(Tt){bt(this,at).toggleSelected(Tt)}isSelected(Tt){return bt(this,at).isSelected(Tt)}unselect(Tt){bt(this,at).unselect(Tt)}pointerup(Tt){const{isMac:qt}=a.FeatureTest.platform;if(!(Tt.button!==0||Tt.ctrlKey&&qt)&&Tt.target===this.div&&bt(this,st)){if(yn(this,st,!1),!bt(this,_e)){yn(this,_e,!0);return}if(bt(this,at).getMode()===a.AnnotationEditorType.STAMP){bt(this,at).unselectAll();return}an(this,ct,Kr).call(this,Tt,!1)}}pointerdown(Tt){if(bt(this,st)){yn(this,st,!1);return}const{isMac:qt}=a.FeatureTest.platform;if(Tt.button!==0||Tt.ctrlKey&&qt||Tt.target!==this.div)return;yn(this,st,!0);const Vt=bt(this,at).getActive();yn(this,_e,!Vt||Vt.isEmpty())}findNewParent(Tt,qt,Vt){const Zt=bt(this,at).findParent(qt,Vt);return Zt===null||Zt===this?!1:(Zt.changeParent(Tt),!0)}destroy(){var Tt,qt;((Tt=bt(this,at).getActive())==null?void 0:Tt.parent)===this&&(bt(this,at).commitOrRemove(),bt(this,at).setActiveEditor(null));for(const Vt of bt(this,ht).values())(qt=bt(this,$))==null||qt.removePointerInTextLayer(Vt.contentDiv),Vt.setParent(null),Vt.isAttachedToDOM=!1,Vt.div.remove();this.div=null,bt(this,ht).clear(),bt(this,at).removeLayer(this)}render({viewport:Tt}){this.viewport=Tt,(0,b.setLayerDimensions)(this.div,Tt);for(const qt of bt(this,at).getEditors(this.pageIndex))this.add(qt);this.updateMode()}update({viewport:Tt}){bt(this,at).commitOrRemove(),this.viewport=Tt,(0,b.setLayerDimensions)(this.div,{rotation:Tt.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:Tt,pageHeight:qt}=this.viewport.rawDims;return[Tt,qt]}};$=new WeakMap,_e=new WeakMap,tt=new WeakMap,et=new WeakMap,ut=new WeakMap,ht=new WeakMap,st=new WeakMap,nt=new WeakMap,rt=new WeakMap,at=new WeakMap,dt=new WeakSet,Cs=function(Tt){switch(bt(this,at).getMode()){case a.AnnotationEditorType.FREETEXT:return new h.FreeTextEditor(Tt);case a.AnnotationEditorType.INK:return new g.InkEditor(Tt);case a.AnnotationEditorType.STAMP:return new _.StampEditor(Tt)}return null},ct=new WeakSet,Kr=function(Tt,qt){const Vt=this.getNextId(),Zt=an(this,dt,Cs).call(this,{parent:this,id:Vt,x:Tt.offsetX,y:Tt.offsetY,uiManager:bt(this,at),isCentered:qt});return Zt&&this.add(Zt),Zt},mt=new WeakSet,ks=function(){const{x:Tt,y:qt,width:Vt,height:Zt}=this.div.getBoundingClientRect(),It=Math.max(0,Tt),Jt=Math.max(0,qt),fn=Math.min(window.innerWidth,Tt+Vt),_n=Math.min(window.innerHeight,qt+Zt),xn=(It+fn)/2-Tt,Mt=(Jt+_n)/2-qt,[xt,At]=this.viewport.rotation%180===0?[xn,Mt]:[Mt,xn];return{offsetX:xt,offsetY:At}},Et=new WeakSet,Ts=function(){yn(this,nt,!0);for(const Tt of bt(this,ht).values())Tt.isEmpty()&&Tt.remove();yn(this,nt,!1)},fr(Nt,"_initialized",!1);let j=Nt;e.AnnotationEditorLayer=j},(s,e,o)=>{var _,j,$,_e,tt,et,ut,ht,st,nt,no,at,ro,ot,io,vt,jr,pt,Ds,Ct,so,Ut,Rs;Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var a=o(1),c=o(5),h=o(4),g=o(29);const qt=class qt extends h.AnnotationEditor{constructor(It){super({...It,name:"freeTextEditor"});Yt(this,nt);Yt(this,at);Yt(this,ot);Yt(this,vt);Yt(this,pt);Yt(this,Ct);Yt(this,Ut);Yt(this,_,this.editorDivBlur.bind(this));Yt(this,j,this.editorDivFocus.bind(this));Yt(this,$,this.editorDivInput.bind(this));Yt(this,_e,this.editorDivKeydown.bind(this));Yt(this,tt,void 0);Yt(this,et,"");Yt(this,ut,`${this.id}-editor`);Yt(this,ht,void 0);Yt(this,st,null);yn(this,tt,It.color||qt._defaultColor||h.AnnotationEditor._defaultLineColor),yn(this,ht,It.fontSize||qt._defaultFontSize)}static get _keyboardManager(){const It=qt.prototype,Jt=xn=>xn.isEmpty(),fn=c.AnnotationEditorUIManager.TRANSLATE_SMALL,_n=c.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,a.shadow)(this,"_keyboardManager",new c.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],It.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],It.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],It._translateEmpty,{args:[-fn,0],checker:Jt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],It._translateEmpty,{args:[-_n,0],checker:Jt}],[["ArrowRight","mac+ArrowRight"],It._translateEmpty,{args:[fn,0],checker:Jt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],It._translateEmpty,{args:[_n,0],checker:Jt}],[["ArrowUp","mac+ArrowUp"],It._translateEmpty,{args:[0,-fn],checker:Jt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],It._translateEmpty,{args:[0,-_n],checker:Jt}],[["ArrowDown","mac+ArrowDown"],It._translateEmpty,{args:[0,fn],checker:Jt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],It._translateEmpty,{args:[0,_n],checker:Jt}]]))}static initialize(It){h.AnnotationEditor.initialize(It,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const Jt=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(Jt.getPropertyValue("--freetext-padding"))}static updateDefaultParams(It,Jt){switch(It){case a.AnnotationEditorParamsType.FREETEXT_SIZE:qt._defaultFontSize=Jt;break;case a.AnnotationEditorParamsType.FREETEXT_COLOR:qt._defaultColor=Jt;break}}updateParams(It,Jt){switch(It){case a.AnnotationEditorParamsType.FREETEXT_SIZE:an(this,nt,no).call(this,Jt);break;case a.AnnotationEditorParamsType.FREETEXT_COLOR:an(this,at,ro).call(this,Jt);break}}static get defaultPropertiesToUpdate(){return[[a.AnnotationEditorParamsType.FREETEXT_SIZE,qt._defaultFontSize],[a.AnnotationEditorParamsType.FREETEXT_COLOR,qt._defaultColor||h.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[a.AnnotationEditorParamsType.FREETEXT_SIZE,bt(this,ht)],[a.AnnotationEditorParamsType.FREETEXT_COLOR,bt(this,tt)]]}_translateEmpty(It,Jt){this._uiManager.translateSelectedEditors(It,Jt,!0)}getInitialTranslation(){const It=this.parentScale;return[-qt._internalPadding*It,-(qt._internalPadding+bt(this,ht))*It]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(a.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",bt(this,_e)),this.editorDiv.addEventListener("focus",bt(this,j)),this.editorDiv.addEventListener("blur",bt(this,_)),this.editorDiv.addEventListener("input",bt(this,$)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",bt(this,ut)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",bt(this,_e)),this.editorDiv.removeEventListener("focus",bt(this,j)),this.editorDiv.removeEventListener("blur",bt(this,_)),this.editorDiv.removeEventListener("input",bt(this,$)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(It){this._focusEventsAllowed&&(super.focusin(It),It.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var It;if(this.width){an(this,Ut,Rs).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(It=this._initialOptions)!=null&&It.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const It=bt(this,et),Jt=yn(this,et,an(this,ot,io).call(this).trimEnd());if(It===Jt)return;const fn=_n=>{if(yn(this,et,_n),!_n){this.remove();return}an(this,pt,Ds).call(this),this._uiManager.rebuild(this),an(this,vt,jr).call(this)};this.addCommands({cmd:()=>{fn(Jt)},undo:()=>{fn(It)},mustExec:!1}),an(this,vt,jr).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(It){this.enterInEditMode()}keydown(It){It.target===this.div&&It.key==="Enter"&&(this.enterInEditMode(),It.preventDefault())}editorDivKeydown(It){qt._keyboardManager.exec(this,It)}editorDivFocus(It){this.isEditing=!0}editorDivBlur(It){this.isEditing=!1}editorDivInput(It){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let It,Jt;this.width&&(It=this.x,Jt=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",bt(this,ut)),this.enableEditing(),h.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(_n=>{var xn;return(xn=this.editorDiv)==null?void 0:xn.setAttribute("aria-label",_n)}),h.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(_n=>{var xn;return(xn=this.editorDiv)==null?void 0:xn.setAttribute("default-content",_n)}),this.editorDiv.contentEditable=!0;const{style:fn}=this.editorDiv;if(fn.fontSize=`calc(${bt(this,ht)}px * var(--scale-factor))`,fn.color=bt(this,tt),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,c.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[_n,xn]=this.parentDimensions;if(this.annotationElementId){const{position:Mt}=bt(this,st);let[xt,At]=this.getInitialTranslation();[xt,At]=this.pageTranslationToScreen(xt,At);const[wt,kt]=this.pageDimensions,[Dt,Ft]=this.pageTranslation;let $t,Wt;switch(this.rotation){case 0:$t=It+(Mt[0]-Dt)/wt,Wt=Jt+this.height-(Mt[1]-Ft)/kt;break;case 90:$t=It+(Mt[0]-Dt)/wt,Wt=Jt-(Mt[1]-Ft)/kt,[xt,At]=[At,-xt];break;case 180:$t=It-this.width+(Mt[0]-Dt)/wt,Wt=Jt-(Mt[1]-Ft)/kt,[xt,At]=[-xt,-At];break;case 270:$t=It+(Mt[0]-Dt-this.height*kt)/wt,Wt=Jt+(Mt[1]-Ft-this.width*wt)/kt,[xt,At]=[-At,xt];break}this.setAt($t*_n,Wt*xn,xt,At)}else this.setAt(It*_n,Jt*xn,this.width*_n,this.height*xn);an(this,pt,Ds).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(It,Jt,fn){let _n=null;if(It instanceof g.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:Mt,fontColor:xt},rect:At,rotation:wt,id:kt},textContent:Dt,textPosition:Ft,parent:{page:{pageNumber:$t}}}=It;if(!Dt||Dt.length===0)return null;_n=It={annotationType:a.AnnotationEditorType.FREETEXT,color:Array.from(xt),fontSize:Mt,value:Dt.join(`
`),position:Ft,pageIndex:$t-1,rect:At,rotation:wt,id:kt,deleted:!1}}const xn=super.deserialize(It,Jt,fn);return yn(xn,ht,It.fontSize),yn(xn,tt,a.Util.makeHexColor(...It.color)),yn(xn,et,It.value),xn.annotationElementId=It.id||null,yn(xn,st,_n),xn}serialize(It=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const Jt=qt._internalPadding*this.parentScale,fn=this.getRect(Jt,Jt),_n=h.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:bt(this,tt)),xn={annotationType:a.AnnotationEditorType.FREETEXT,color:_n,fontSize:bt(this,ht),value:bt(this,et),pageIndex:this.pageIndex,rect:fn,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return It?xn:this.annotationElementId&&!an(this,Ct,so).call(this,xn)?null:(xn.id=this.annotationElementId,xn)}};_=new WeakMap,j=new WeakMap,$=new WeakMap,_e=new WeakMap,tt=new WeakMap,et=new WeakMap,ut=new WeakMap,ht=new WeakMap,st=new WeakMap,nt=new WeakSet,no=function(It){const Jt=_n=>{this.editorDiv.style.fontSize=`calc(${_n}px * var(--scale-factor))`,this.translate(0,-(_n-bt(this,ht))*this.parentScale),yn(this,ht,_n),an(this,vt,jr).call(this)},fn=bt(this,ht);this.addCommands({cmd:()=>{Jt(It)},undo:()=>{Jt(fn)},mustExec:!0,type:a.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},at=new WeakSet,ro=function(It){const Jt=bt(this,tt);this.addCommands({cmd:()=>{yn(this,tt,this.editorDiv.style.color=It)},undo:()=>{yn(this,tt,this.editorDiv.style.color=Jt)},mustExec:!0,type:a.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},ot=new WeakSet,io=function(){const It=this.editorDiv.getElementsByTagName("div");if(It.length===0)return this.editorDiv.innerText;const Jt=[];for(const fn of It)Jt.push(fn.innerText.replace(/\r\n?|\n/,""));return Jt.join(`
`)},vt=new WeakSet,jr=function(){const[It,Jt]=this.parentDimensions;let fn;if(this.isAttachedToDOM)fn=this.div.getBoundingClientRect();else{const{currentLayer:_n,div:xn}=this,Mt=xn.style.display;xn.style.display="hidden",_n.div.append(this.div),fn=xn.getBoundingClientRect(),xn.remove(),xn.style.display=Mt}this.rotation%180===this.parentRotation%180?(this.width=fn.width/It,this.height=fn.height/Jt):(this.width=fn.height/It,this.height=fn.width/Jt),this.fixAndSetPosition()},pt=new WeakSet,Ds=function(){if(this.editorDiv.replaceChildren(),!!bt(this,et))for(const It of bt(this,et).split(`
`)){const Jt=document.createElement("div");Jt.append(It?document.createTextNode(It):document.createElement("br")),this.editorDiv.append(Jt)}},Ct=new WeakSet,so=function(It){const{value:Jt,fontSize:fn,color:_n,rect:xn,pageIndex:Mt}=bt(this,st);return It.value!==Jt||It.fontSize!==fn||It.rect.some((xt,At)=>Math.abs(xt-xn[At])>=1)||It.color.some((xt,At)=>xt!==_n[At])||It.pageIndex!==Mt},Ut=new WeakSet,Rs=function(It=!1){if(!this.annotationElementId)return;if(an(this,vt,jr).call(this),!It&&(this.width===0||this.height===0)){setTimeout(()=>an(this,Ut,Rs).call(this,!0),0);return}const Jt=qt._internalPadding*this.parentScale;bt(this,st).rect=this.getRect(Jt,Jt)},fr(qt,"_freeTextDefaultContent",""),fr(qt,"_internalPadding",0),fr(qt,"_defaultColor",null),fr(qt,"_defaultFontSize",10),fr(qt,"_type","freetext");let b=qt;e.FreeTextEditor=b},(s,e,o)=>{var At,kt,Sr,Ft,oo,Wt,un,rn,bn,An,Nn,wn,jn,Xn,Ln,Un,kn,en,hn,Tn,On,In,Zn,ao,Kn,Zr,Jn,Ps,tr,Ns,St,zt,sn,gn,tn,Sn,_t,Ls,Pn,ft,nn,cn,lo,Bt,Is;Object.defineProperty(e,"__esModule",{value:!0}),e.StampAnnotationElement=e.InkAnnotationElement=e.FreeTextAnnotationElement=e.AnnotationLayer=void 0;var a=o(1),c=o(6),h=o(3),g=o(30),b=o(31),_=o(32);const j=1e3,$=9,_e=new WeakSet;function tt(Rn){return{width:Rn[2]-Rn[0],height:Rn[3]-Rn[1]}}class et{static create(Ot){switch(Ot.data.annotationType){case a.AnnotationType.LINK:return new ht(Ot);case a.AnnotationType.TEXT:return new st(Ot);case a.AnnotationType.WIDGET:switch(Ot.data.fieldType){case"Tx":return new rt(Ot);case"Btn":return Ot.data.radioButton?new ot(Ot):Ot.data.checkBox?new dt(Ot):new ct(Ot);case"Ch":return new vt(Ot);case"Sig":return new at(Ot)}return new nt(Ot);case a.AnnotationType.POPUP:return new mt(Ot);case a.AnnotationType.FREETEXT:return new Et(Ot);case a.AnnotationType.LINE:return new Ct(Ot);case a.AnnotationType.SQUARE:return new Nt(Ot);case a.AnnotationType.CIRCLE:return new Ut(Ot);case a.AnnotationType.POLYLINE:return new Tt(Ot);case a.AnnotationType.CARET:return new Vt(Ot);case a.AnnotationType.INK:return new Zt(Ot);case a.AnnotationType.POLYGON:return new qt(Ot);case a.AnnotationType.HIGHLIGHT:return new It(Ot);case a.AnnotationType.UNDERLINE:return new Jt(Ot);case a.AnnotationType.SQUIGGLY:return new fn(Ot);case a.AnnotationType.STRIKEOUT:return new _n(Ot);case a.AnnotationType.STAMP:return new xn(Ot);case a.AnnotationType.FILEATTACHMENT:return new Mt(Ot);default:return new ut(Ot)}}}const wt=class wt{constructor(Ot,{isRenderable:yt=!1,ignoreBorder:Pt=!1,createQuadrilaterals:Ht=!1}={}){Yt(this,At,!1);this.isRenderable=yt,this.data=Ot.data,this.layer=Ot.layer,this.linkService=Ot.linkService,this.downloadManager=Ot.downloadManager,this.imageResourcesPath=Ot.imageResourcesPath,this.renderForms=Ot.renderForms,this.svgFactory=Ot.svgFactory,this.annotationStorage=Ot.annotationStorage,this.enableScripting=Ot.enableScripting,this.hasJSActions=Ot.hasJSActions,this._fieldObjects=Ot.fieldObjects,this.parent=Ot.parent,yt&&(this.container=this._createContainer(Pt)),Ht&&this._createQuadrilaterals()}static _hasPopupData({titleObj:Ot,contentsObj:yt,richText:Pt}){return!!(Ot!=null&&Ot.str||yt!=null&&yt.str||Pt!=null&&Pt.str)}get hasPopupData(){return wt._hasPopupData(this.data)}_createContainer(Ot){const{data:yt,parent:{page:Pt,viewport:Ht}}=this,Kt=document.createElement("section");Kt.setAttribute("data-annotation-id",yt.id),this instanceof nt||(Kt.tabIndex=j),Kt.style.zIndex=this.parent.zIndex++,this.data.popupRef&&Kt.setAttribute("aria-haspopup","dialog"),yt.noRotate&&Kt.classList.add("norotate");const{pageWidth:Qt,pageHeight:pn,pageX:Dn,pageY:Mn}=Ht.rawDims;if(!yt.rect||this instanceof mt){const{rotation:Wn}=yt;return!yt.hasOwnCanvas&&Wn!==0&&this.setRotation(Wn,Kt),Kt}const{width:zn,height:nr}=tt(yt.rect),Bn=a.Util.normalizeRect([yt.rect[0],Pt.view[3]-yt.rect[1]+Pt.view[1],yt.rect[2],Pt.view[3]-yt.rect[3]+Pt.view[1]]);if(!Ot&&yt.borderStyle.width>0){Kt.style.borderWidth=`${yt.borderStyle.width}px`;const Wn=yt.borderStyle.horizontalCornerRadius,rr=yt.borderStyle.verticalCornerRadius;if(Wn>0||rr>0){const ar=`calc(${Wn}px * var(--scale-factor)) / calc(${rr}px * var(--scale-factor))`;Kt.style.borderRadius=ar}else if(this instanceof ot){const ar=`calc(${zn}px * var(--scale-factor)) / calc(${nr}px * var(--scale-factor))`;Kt.style.borderRadius=ar}switch(yt.borderStyle.style){case a.AnnotationBorderStyleType.SOLID:Kt.style.borderStyle="solid";break;case a.AnnotationBorderStyleType.DASHED:Kt.style.borderStyle="dashed";break;case a.AnnotationBorderStyleType.BEVELED:(0,a.warn)("Unimplemented border style: beveled");break;case a.AnnotationBorderStyleType.INSET:(0,a.warn)("Unimplemented border style: inset");break;case a.AnnotationBorderStyleType.UNDERLINE:Kt.style.borderBottomStyle="solid";break}const sr=yt.borderColor||null;sr?(yn(this,At,!0),Kt.style.borderColor=a.Util.makeHexColor(sr[0]|0,sr[1]|0,sr[2]|0)):Kt.style.borderWidth=0}Kt.style.left=`${100*(Bn[0]-Dn)/Qt}%`,Kt.style.top=`${100*(Bn[1]-Mn)/pn}%`;const{rotation:Vn}=yt;return yt.hasOwnCanvas||Vn===0?(Kt.style.width=`${100*zn/Qt}%`,Kt.style.height=`${100*nr/pn}%`):this.setRotation(Vn,Kt),Kt}setRotation(Ot,yt=this.container){if(!this.data.rect)return;const{pageWidth:Pt,pageHeight:Ht}=this.parent.viewport.rawDims,{width:Kt,height:Qt}=tt(this.data.rect);let pn,Dn;Ot%180===0?(pn=100*Kt/Pt,Dn=100*Qt/Ht):(pn=100*Qt/Pt,Dn=100*Kt/Ht),yt.style.width=`${pn}%`,yt.style.height=`${Dn}%`,yt.setAttribute("data-main-rotation",(360-Ot)%360)}get _commonActions(){const Ot=(yt,Pt,Ht)=>{const Kt=Ht.detail[yt],Qt=Kt[0],pn=Kt.slice(1);Ht.target.style[Pt]=g.ColorConverters[`${Qt}_HTML`](pn),this.annotationStorage.setValue(this.data.id,{[Pt]:g.ColorConverters[`${Qt}_rgb`](pn)})};return(0,a.shadow)(this,"_commonActions",{display:yt=>{const{display:Pt}=yt.detail,Ht=Pt%2===1;this.container.style.visibility=Ht?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:Ht,noPrint:Pt===1||Pt===2})},print:yt=>{this.annotationStorage.setValue(this.data.id,{noPrint:!yt.detail.print})},hidden:yt=>{const{hidden:Pt}=yt.detail;this.container.style.visibility=Pt?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:Pt,noView:Pt})},focus:yt=>{setTimeout(()=>yt.target.focus({preventScroll:!1}),0)},userName:yt=>{yt.target.title=yt.detail.userName},readonly:yt=>{yt.target.disabled=yt.detail.readonly},required:yt=>{this._setRequired(yt.target,yt.detail.required)},bgColor:yt=>{Ot("bgColor","backgroundColor",yt)},fillColor:yt=>{Ot("fillColor","backgroundColor",yt)},fgColor:yt=>{Ot("fgColor","color",yt)},textColor:yt=>{Ot("textColor","color",yt)},borderColor:yt=>{Ot("borderColor","borderColor",yt)},strokeColor:yt=>{Ot("strokeColor","borderColor",yt)},rotation:yt=>{const Pt=yt.detail.rotation;this.setRotation(Pt),this.annotationStorage.setValue(this.data.id,{rotation:Pt})}})}_dispatchEventFromSandbox(Ot,yt){const Pt=this._commonActions;for(const Ht of Object.keys(yt.detail)){const Kt=Ot[Ht]||Pt[Ht];Kt==null||Kt(yt)}}_setDefaultPropertiesFromJS(Ot){if(!this.enableScripting)return;const yt=this.annotationStorage.getRawValue(this.data.id);if(!yt)return;const Pt=this._commonActions;for(const[Ht,Kt]of Object.entries(yt)){const Qt=Pt[Ht];if(Qt){const pn={detail:{[Ht]:Kt},target:Ot};Qt(pn),delete yt[Ht]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:Ot}=this.data;if(!Ot)return;const[yt,Pt,Ht,Kt]=this.data.rect;if(Ot.length===1){const[,{x:rr,y:sr},{x:ar,y:mr}]=Ot[0];if(Ht===rr&&Kt===sr&&yt===ar&&Pt===mr)return}const{style:Qt}=this.container;let pn;if(bt(this,At)){const{borderColor:rr,borderWidth:sr}=Qt;Qt.borderWidth=0,pn=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${rr}" stroke-width="${sr}">`],this.container.classList.add("hasBorder")}const Dn=Ht-yt,Mn=Kt-Pt,{svgFactory:zn}=this,nr=zn.createElement("svg");nr.classList.add("quadrilateralsContainer"),nr.setAttribute("width",0),nr.setAttribute("height",0);const Bn=zn.createElement("defs");nr.append(Bn);const Vn=zn.createElement("clipPath"),Wn=`clippath_${this.data.id}`;Vn.setAttribute("id",Wn),Vn.setAttribute("clipPathUnits","objectBoundingBox"),Bn.append(Vn);for(const[,{x:rr,y:sr},{x:ar,y:mr}]of Ot){const ur=zn.createElement("rect"),yr=(ar-yt)/Dn,Er=(Kt-sr)/Mn,br=(rr-ar)/Dn,Ur=(sr-mr)/Mn;ur.setAttribute("x",yr),ur.setAttribute("y",Er),ur.setAttribute("width",br),ur.setAttribute("height",Ur),Vn.append(ur),pn==null||pn.push(`<rect vector-effect="non-scaling-stroke" x="${yr}" y="${Er}" width="${br}" height="${Ur}"/>`)}bt(this,At)&&(pn.push("</g></svg>')"),Qt.backgroundImage=pn.join("")),this.container.append(nr),this.container.style.clipPath=`url(#${Wn})`}_createPopup(){const{container:Ot,data:yt}=this;Ot.setAttribute("aria-haspopup","dialog");const Pt=new mt({data:{color:yt.color,titleObj:yt.titleObj,modificationDate:yt.modificationDate,contentsObj:yt.contentsObj,richText:yt.richText,parentRect:yt.rect,borderStyle:0,id:`popup_${yt.id}`,rotation:yt.rotation},parent:this.parent,elements:[this]});this.parent.div.append(Pt.render())}render(){(0,a.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(Ot,yt=null){const Pt=[];if(this._fieldObjects){const Ht=this._fieldObjects[Ot];if(Ht)for(const{page:Kt,id:Qt,exportValues:pn}of Ht){if(Kt===-1||Qt===yt)continue;const Dn=typeof pn=="string"?pn:null,Mn=document.querySelector(`[data-element-id="${Qt}"]`);if(Mn&&!_e.has(Mn)){(0,a.warn)(`_getElementsByName - element not allowed: ${Qt}`);continue}Pt.push({id:Qt,exportValue:Dn,domElement:Mn})}return Pt}for(const Ht of document.getElementsByName(Ot)){const{exportValue:Kt}=Ht,Qt=Ht.getAttribute("data-element-id");Qt!==yt&&_e.has(Ht)&&Pt.push({id:Qt,exportValue:Kt,domElement:Ht})}return Pt}show(){var Ot;this.container&&(this.container.hidden=!1),(Ot=this.popup)==null||Ot.maybeShow()}hide(){var Ot;this.container&&(this.container.hidden=!0),(Ot=this.popup)==null||Ot.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const Ot=this.getElementsToTriggerPopup();if(Array.isArray(Ot))for(const yt of Ot)yt.classList.add("highlightArea");else Ot.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:Ot,data:{id:yt}}=this;this.container.addEventListener("dblclick",()=>{var Pt;(Pt=this.linkService.eventBus)==null||Pt.dispatch("switchannotationeditormode",{source:this,mode:Ot,editId:yt})})}};At=new WeakMap;let ut=wt;class ht extends ut{constructor(yt,Pt=null){super(yt,{isRenderable:!0,ignoreBorder:!!(Pt!=null&&Pt.ignoreBorder),createQuadrilaterals:!0});Yt(this,kt);Yt(this,Ft);this.isTooltipOnly=yt.data.isTooltipOnly}render(){const{data:yt,linkService:Pt}=this,Ht=document.createElement("a");Ht.setAttribute("data-element-id",yt.id);let Kt=!1;return yt.url?(Pt.addLinkAttributes(Ht,yt.url,yt.newWindow),Kt=!0):yt.action?(this._bindNamedAction(Ht,yt.action),Kt=!0):yt.attachment?(this._bindAttachment(Ht,yt.attachment),Kt=!0):yt.setOCGState?(an(this,Ft,oo).call(this,Ht,yt.setOCGState),Kt=!0):yt.dest?(this._bindLink(Ht,yt.dest),Kt=!0):(yt.actions&&(yt.actions.Action||yt.actions["Mouse Up"]||yt.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(Ht,yt),Kt=!0),yt.resetForm?(this._bindResetFormAction(Ht,yt.resetForm),Kt=!0):this.isTooltipOnly&&!Kt&&(this._bindLink(Ht,""),Kt=!0)),this.container.classList.add("linkAnnotation"),Kt&&this.container.append(Ht),this.container}_bindLink(yt,Pt){yt.href=this.linkService.getDestinationHash(Pt),yt.onclick=()=>(Pt&&this.linkService.goToDestination(Pt),!1),(Pt||Pt==="")&&an(this,kt,Sr).call(this)}_bindNamedAction(yt,Pt){yt.href=this.linkService.getAnchorUrl(""),yt.onclick=()=>(this.linkService.executeNamedAction(Pt),!1),an(this,kt,Sr).call(this)}_bindAttachment(yt,Pt){yt.href=this.linkService.getAnchorUrl(""),yt.onclick=()=>{var Ht;return(Ht=this.downloadManager)==null||Ht.openOrDownloadData(this.container,Pt.content,Pt.filename),!1},an(this,kt,Sr).call(this)}_bindJSAction(yt,Pt){yt.href=this.linkService.getAnchorUrl("");const Ht=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const Kt of Object.keys(Pt.actions)){const Qt=Ht.get(Kt);Qt&&(yt[Qt]=()=>{var pn;return(pn=this.linkService.eventBus)==null||pn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Pt.id,name:Kt}}),!1})}yt.onclick||(yt.onclick=()=>!1),an(this,kt,Sr).call(this)}_bindResetFormAction(yt,Pt){const Ht=yt.onclick;if(Ht||(yt.href=this.linkService.getAnchorUrl("")),an(this,kt,Sr).call(this),!this._fieldObjects){(0,a.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),Ht||(yt.onclick=()=>!1);return}yt.onclick=()=>{var nr;Ht==null||Ht();const{fields:Kt,refs:Qt,include:pn}=Pt,Dn=[];if(Kt.length!==0||Qt.length!==0){const Bn=new Set(Qt);for(const Vn of Kt){const Wn=this._fieldObjects[Vn]||[];for(const{id:rr}of Wn)Bn.add(rr)}for(const Vn of Object.values(this._fieldObjects))for(const Wn of Vn)Bn.has(Wn.id)===pn&&Dn.push(Wn)}else for(const Bn of Object.values(this._fieldObjects))Dn.push(...Bn);const Mn=this.annotationStorage,zn=[];for(const Bn of Dn){const{id:Vn}=Bn;switch(zn.push(Vn),Bn.type){case"text":{const rr=Bn.defaultValue||"";Mn.setValue(Vn,{value:rr});break}case"checkbox":case"radiobutton":{const rr=Bn.defaultValue===Bn.exportValues;Mn.setValue(Vn,{value:rr});break}case"combobox":case"listbox":{const rr=Bn.defaultValue||"";Mn.setValue(Vn,{value:rr});break}default:continue}const Wn=document.querySelector(`[data-element-id="${Vn}"]`);if(Wn){if(!_e.has(Wn)){(0,a.warn)(`_bindResetFormAction - element not allowed: ${Vn}`);continue}}else continue;Wn.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((nr=this.linkService.eventBus)==null||nr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:zn,name:"ResetForm"}})),!1}}}kt=new WeakSet,Sr=function(){this.container.setAttribute("data-internal-link","")},Ft=new WeakSet,oo=function(yt,Pt){yt.href=this.linkService.getAnchorUrl(""),yt.onclick=()=>(this.linkService.executeSetOCGState(Pt),!1),an(this,kt,Sr).call(this)};class st extends ut{constructor(Ot){super(Ot,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const Ot=document.createElement("img");return Ot.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",Ot.alt="[{{type}} Annotation]",Ot.dataset.l10nId="text_annotation_type",Ot.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(Ot),this.container}}class nt extends ut{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(Ot){var yt;this.data.hasOwnCanvas&&(((yt=Ot.previousSibling)==null?void 0:yt.nodeName)==="CANVAS"&&(Ot.previousSibling.hidden=!0),Ot.hidden=!1)}_getKeyModifier(Ot){const{isWin:yt,isMac:Pt}=a.FeatureTest.platform;return yt&&Ot.ctrlKey||Pt&&Ot.metaKey}_setEventListener(Ot,yt,Pt,Ht,Kt){Pt.includes("mouse")?Ot.addEventListener(Pt,Qt=>{var pn;(pn=this.linkService.eventBus)==null||pn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Ht,value:Kt(Qt),shift:Qt.shiftKey,modifier:this._getKeyModifier(Qt)}})}):Ot.addEventListener(Pt,Qt=>{var pn;if(Pt==="blur"){if(!yt.focused||!Qt.relatedTarget)return;yt.focused=!1}else if(Pt==="focus"){if(yt.focused)return;yt.focused=!0}Kt&&((pn=this.linkService.eventBus)==null||pn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Ht,value:Kt(Qt)}}))})}_setEventListeners(Ot,yt,Pt,Ht){var Kt,Qt,pn;for(const[Dn,Mn]of Pt)(Mn==="Action"||(Kt=this.data.actions)!=null&&Kt[Mn])&&((Mn==="Focus"||Mn==="Blur")&&(yt||(yt={focused:!1})),this._setEventListener(Ot,yt,Dn,Mn,Ht),Mn==="Focus"&&!((Qt=this.data.actions)!=null&&Qt.Blur)?this._setEventListener(Ot,yt,"blur","Blur",null):Mn==="Blur"&&!((pn=this.data.actions)!=null&&pn.Focus)&&this._setEventListener(Ot,yt,"focus","Focus",null))}_setBackgroundColor(Ot){const yt=this.data.backgroundColor||null;Ot.style.backgroundColor=yt===null?"transparent":a.Util.makeHexColor(yt[0],yt[1],yt[2])}_setTextStyle(Ot){const yt=["left","center","right"],{fontColor:Pt}=this.data.defaultAppearanceData,Ht=this.data.defaultAppearanceData.fontSize||$,Kt=Ot.style;let Qt;const pn=2,Dn=Mn=>Math.round(10*Mn)/10;if(this.data.multiLine){const Mn=Math.abs(this.data.rect[3]-this.data.rect[1]-pn),zn=Math.round(Mn/(a.LINE_FACTOR*Ht))||1,nr=Mn/zn;Qt=Math.min(Ht,Dn(nr/a.LINE_FACTOR))}else{const Mn=Math.abs(this.data.rect[3]-this.data.rect[1]-pn);Qt=Math.min(Ht,Dn(Mn/a.LINE_FACTOR))}Kt.fontSize=`calc(${Qt}px * var(--scale-factor))`,Kt.color=a.Util.makeHexColor(Pt[0],Pt[1],Pt[2]),this.data.textAlignment!==null&&(Kt.textAlign=yt[this.data.textAlignment])}_setRequired(Ot,yt){yt?Ot.setAttribute("required",!0):Ot.removeAttribute("required"),Ot.setAttribute("aria-required",yt)}}class rt extends nt{constructor(Ot){const yt=Ot.renderForms||!Ot.data.hasAppearance&&!!Ot.data.fieldValue;super(Ot,{isRenderable:yt})}setPropertyOnSiblings(Ot,yt,Pt,Ht){const Kt=this.annotationStorage;for(const Qt of this._getElementsByName(Ot.name,Ot.id))Qt.domElement&&(Qt.domElement[yt]=Pt),Kt.setValue(Qt.id,{[Ht]:Pt})}render(){var Ht,Kt;const Ot=this.annotationStorage,yt=this.data.id;this.container.classList.add("textWidgetAnnotation");let Pt=null;if(this.renderForms){const Qt=Ot.getValue(yt,{value:this.data.fieldValue});let pn=Qt.value||"";const Dn=Ot.getValue(yt,{charLimit:this.data.maxLen}).charLimit;Dn&&pn.length>Dn&&(pn=pn.slice(0,Dn));let Mn=Qt.formattedValue||((Ht=this.data.textContent)==null?void 0:Ht.join(`
`))||null;Mn&&this.data.comb&&(Mn=Mn.replaceAll(/\s+/g,""));const zn={userValue:pn,formattedValue:Mn,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(Pt=document.createElement("textarea"),Pt.textContent=Mn??pn,this.data.doNotScroll&&(Pt.style.overflowY="hidden")):(Pt=document.createElement("input"),Pt.type="text",Pt.setAttribute("value",Mn??pn),this.data.doNotScroll&&(Pt.style.overflowX="hidden")),this.data.hasOwnCanvas&&(Pt.hidden=!0),_e.add(Pt),Pt.setAttribute("data-element-id",yt),Pt.disabled=this.data.readOnly,Pt.name=this.data.fieldName,Pt.tabIndex=j,this._setRequired(Pt,this.data.required),Dn&&(Pt.maxLength=Dn),Pt.addEventListener("input",Bn=>{Ot.setValue(yt,{value:Bn.target.value}),this.setPropertyOnSiblings(Pt,"value",Bn.target.value,"value"),zn.formattedValue=null}),Pt.addEventListener("resetform",Bn=>{const Vn=this.data.defaultFieldValue??"";Pt.value=zn.userValue=Vn,zn.formattedValue=null});let nr=Bn=>{const{formattedValue:Vn}=zn;Vn!=null&&(Bn.target.value=Vn),Bn.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){Pt.addEventListener("focus",Vn=>{if(zn.focused)return;const{target:Wn}=Vn;zn.userValue&&(Wn.value=zn.userValue),zn.lastCommittedValue=Wn.value,zn.commitKey=1,zn.focused=!0}),Pt.addEventListener("updatefromsandbox",Vn=>{this.showElementAndHideCanvas(Vn.target);const Wn={value(rr){zn.userValue=rr.detail.value??"",Ot.setValue(yt,{value:zn.userValue.toString()}),rr.target.value=zn.userValue},formattedValue(rr){const{formattedValue:sr}=rr.detail;zn.formattedValue=sr,sr!=null&&rr.target!==document.activeElement&&(rr.target.value=sr),Ot.setValue(yt,{formattedValue:sr})},selRange(rr){rr.target.setSelectionRange(...rr.detail.selRange)},charLimit:rr=>{var ur;const{charLimit:sr}=rr.detail,{target:ar}=rr;if(sr===0){ar.removeAttribute("maxLength");return}ar.setAttribute("maxLength",sr);let mr=zn.userValue;!mr||mr.length<=sr||(mr=mr.slice(0,sr),ar.value=zn.userValue=mr,Ot.setValue(yt,{value:mr}),(ur=this.linkService.eventBus)==null||ur.dispatch("dispatcheventinsandbox",{source:this,detail:{id:yt,name:"Keystroke",value:mr,willCommit:!0,commitKey:1,selStart:ar.selectionStart,selEnd:ar.selectionEnd}}))}};this._dispatchEventFromSandbox(Wn,Vn)}),Pt.addEventListener("keydown",Vn=>{var sr;zn.commitKey=1;let Wn=-1;if(Vn.key==="Escape"?Wn=0:Vn.key==="Enter"&&!this.data.multiLine?Wn=2:Vn.key==="Tab"&&(zn.commitKey=3),Wn===-1)return;const{value:rr}=Vn.target;zn.lastCommittedValue!==rr&&(zn.lastCommittedValue=rr,zn.userValue=rr,(sr=this.linkService.eventBus)==null||sr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:yt,name:"Keystroke",value:rr,willCommit:!0,commitKey:Wn,selStart:Vn.target.selectionStart,selEnd:Vn.target.selectionEnd}}))});const Bn=nr;nr=null,Pt.addEventListener("blur",Vn=>{var rr;if(!zn.focused||!Vn.relatedTarget)return;zn.focused=!1;const{value:Wn}=Vn.target;zn.userValue=Wn,zn.lastCommittedValue!==Wn&&((rr=this.linkService.eventBus)==null||rr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:yt,name:"Keystroke",value:Wn,willCommit:!0,commitKey:zn.commitKey,selStart:Vn.target.selectionStart,selEnd:Vn.target.selectionEnd}})),Bn(Vn)}),(Kt=this.data.actions)!=null&&Kt.Keystroke&&Pt.addEventListener("beforeinput",Vn=>{var Er;zn.lastCommittedValue=null;const{data:Wn,target:rr}=Vn,{value:sr,selectionStart:ar,selectionEnd:mr}=rr;let ur=ar,yr=mr;switch(Vn.inputType){case"deleteWordBackward":{const br=sr.substring(0,ar).match(/\w*[^\w]*$/);br&&(ur-=br[0].length);break}case"deleteWordForward":{const br=sr.substring(ar).match(/^[^\w]*\w*/);br&&(yr+=br[0].length);break}case"deleteContentBackward":ar===mr&&(ur-=1);break;case"deleteContentForward":ar===mr&&(yr+=1);break}Vn.preventDefault(),(Er=this.linkService.eventBus)==null||Er.dispatch("dispatcheventinsandbox",{source:this,detail:{id:yt,name:"Keystroke",value:sr,change:Wn||"",willCommit:!1,selStart:ur,selEnd:yr}})}),this._setEventListeners(Pt,zn,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Vn=>Vn.target.value)}if(nr&&Pt.addEventListener("blur",nr),this.data.comb){const Vn=(this.data.rect[2]-this.data.rect[0])/Dn;Pt.classList.add("comb"),Pt.style.letterSpacing=`calc(${Vn}px * var(--scale-factor) - 1ch)`}}else Pt=document.createElement("div"),Pt.textContent=this.data.fieldValue,Pt.style.verticalAlign="middle",Pt.style.display="table-cell";return this._setTextStyle(Pt),this._setBackgroundColor(Pt),this._setDefaultPropertiesFromJS(Pt),this.container.append(Pt),this.container}}class at extends nt{constructor(Ot){super(Ot,{isRenderable:!!Ot.data.hasOwnCanvas})}}class dt extends nt{constructor(Ot){super(Ot,{isRenderable:Ot.renderForms})}render(){const Ot=this.annotationStorage,yt=this.data,Pt=yt.id;let Ht=Ot.getValue(Pt,{value:yt.exportValue===yt.fieldValue}).value;typeof Ht=="string"&&(Ht=Ht!=="Off",Ot.setValue(Pt,{value:Ht})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const Kt=document.createElement("input");return _e.add(Kt),Kt.setAttribute("data-element-id",Pt),Kt.disabled=yt.readOnly,this._setRequired(Kt,this.data.required),Kt.type="checkbox",Kt.name=yt.fieldName,Ht&&Kt.setAttribute("checked",!0),Kt.setAttribute("exportValue",yt.exportValue),Kt.tabIndex=j,Kt.addEventListener("change",Qt=>{const{name:pn,checked:Dn}=Qt.target;for(const Mn of this._getElementsByName(pn,Pt)){const zn=Dn&&Mn.exportValue===yt.exportValue;Mn.domElement&&(Mn.domElement.checked=zn),Ot.setValue(Mn.id,{value:zn})}Ot.setValue(Pt,{value:Dn})}),Kt.addEventListener("resetform",Qt=>{const pn=yt.defaultFieldValue||"Off";Qt.target.checked=pn===yt.exportValue}),this.enableScripting&&this.hasJSActions&&(Kt.addEventListener("updatefromsandbox",Qt=>{const pn={value(Dn){Dn.target.checked=Dn.detail.value!=="Off",Ot.setValue(Pt,{value:Dn.target.checked})}};this._dispatchEventFromSandbox(pn,Qt)}),this._setEventListeners(Kt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Qt=>Qt.target.checked)),this._setBackgroundColor(Kt),this._setDefaultPropertiesFromJS(Kt),this.container.append(Kt),this.container}}class ot extends nt{constructor(Ot){super(Ot,{isRenderable:Ot.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const Ot=this.annotationStorage,yt=this.data,Pt=yt.id;let Ht=Ot.getValue(Pt,{value:yt.fieldValue===yt.buttonValue}).value;typeof Ht=="string"&&(Ht=Ht!==yt.buttonValue,Ot.setValue(Pt,{value:Ht}));const Kt=document.createElement("input");if(_e.add(Kt),Kt.setAttribute("data-element-id",Pt),Kt.disabled=yt.readOnly,this._setRequired(Kt,this.data.required),Kt.type="radio",Kt.name=yt.fieldName,Ht&&Kt.setAttribute("checked",!0),Kt.tabIndex=j,Kt.addEventListener("change",Qt=>{const{name:pn,checked:Dn}=Qt.target;for(const Mn of this._getElementsByName(pn,Pt))Ot.setValue(Mn.id,{value:!1});Ot.setValue(Pt,{value:Dn})}),Kt.addEventListener("resetform",Qt=>{const pn=yt.defaultFieldValue;Qt.target.checked=pn!=null&&pn===yt.buttonValue}),this.enableScripting&&this.hasJSActions){const Qt=yt.buttonValue;Kt.addEventListener("updatefromsandbox",pn=>{const Dn={value:Mn=>{const zn=Qt===Mn.detail.value;for(const nr of this._getElementsByName(Mn.target.name)){const Bn=zn&&nr.id===Pt;nr.domElement&&(nr.domElement.checked=Bn),Ot.setValue(nr.id,{value:Bn})}}};this._dispatchEventFromSandbox(Dn,pn)}),this._setEventListeners(Kt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],pn=>pn.target.checked)}return this._setBackgroundColor(Kt),this._setDefaultPropertiesFromJS(Kt),this.container.append(Kt),this.container}}class ct extends ht{constructor(Ot){super(Ot,{ignoreBorder:Ot.data.hasAppearance})}render(){const Ot=super.render();Ot.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(Ot.title=this.data.alternativeText);const yt=Ot.lastChild;return this.enableScripting&&this.hasJSActions&&yt&&(this._setDefaultPropertiesFromJS(yt),yt.addEventListener("updatefromsandbox",Pt=>{this._dispatchEventFromSandbox({},Pt)})),Ot}}class vt extends nt{constructor(Ot){super(Ot,{isRenderable:Ot.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const Ot=this.annotationStorage,yt=this.data.id,Pt=Ot.getValue(yt,{value:this.data.fieldValue}),Ht=document.createElement("select");_e.add(Ht),Ht.setAttribute("data-element-id",yt),Ht.disabled=this.data.readOnly,this._setRequired(Ht,this.data.required),Ht.name=this.data.fieldName,Ht.tabIndex=j;let Kt=this.data.combo&&this.data.options.length>0;this.data.combo||(Ht.size=this.data.options.length,this.data.multiSelect&&(Ht.multiple=!0)),Ht.addEventListener("resetform",zn=>{const nr=this.data.defaultFieldValue;for(const Bn of Ht.options)Bn.selected=Bn.value===nr});for(const zn of this.data.options){const nr=document.createElement("option");nr.textContent=zn.displayValue,nr.value=zn.exportValue,Pt.value.includes(zn.exportValue)&&(nr.setAttribute("selected",!0),Kt=!1),Ht.append(nr)}let Qt=null;if(Kt){const zn=document.createElement("option");zn.value=" ",zn.setAttribute("hidden",!0),zn.setAttribute("selected",!0),Ht.prepend(zn),Qt=()=>{zn.remove(),Ht.removeEventListener("input",Qt),Qt=null},Ht.addEventListener("input",Qt)}const pn=zn=>{const nr=zn?"value":"textContent",{options:Bn,multiple:Vn}=Ht;return Vn?Array.prototype.filter.call(Bn,Wn=>Wn.selected).map(Wn=>Wn[nr]):Bn.selectedIndex===-1?null:Bn[Bn.selectedIndex][nr]};let Dn=pn(!1);const Mn=zn=>{const nr=zn.target.options;return Array.prototype.map.call(nr,Bn=>({displayValue:Bn.textContent,exportValue:Bn.value}))};return this.enableScripting&&this.hasJSActions?(Ht.addEventListener("updatefromsandbox",zn=>{const nr={value(Bn){Qt==null||Qt();const Vn=Bn.detail.value,Wn=new Set(Array.isArray(Vn)?Vn:[Vn]);for(const rr of Ht.options)rr.selected=Wn.has(rr.value);Ot.setValue(yt,{value:pn(!0)}),Dn=pn(!1)},multipleSelection(Bn){Ht.multiple=!0},remove(Bn){const Vn=Ht.options,Wn=Bn.detail.remove;Vn[Wn].selected=!1,Ht.remove(Wn),Vn.length>0&&Array.prototype.findIndex.call(Vn,sr=>sr.selected)===-1&&(Vn[0].selected=!0),Ot.setValue(yt,{value:pn(!0),items:Mn(Bn)}),Dn=pn(!1)},clear(Bn){for(;Ht.length!==0;)Ht.remove(0);Ot.setValue(yt,{value:null,items:[]}),Dn=pn(!1)},insert(Bn){const{index:Vn,displayValue:Wn,exportValue:rr}=Bn.detail.insert,sr=Ht.children[Vn],ar=document.createElement("option");ar.textContent=Wn,ar.value=rr,sr?sr.before(ar):Ht.append(ar),Ot.setValue(yt,{value:pn(!0),items:Mn(Bn)}),Dn=pn(!1)},items(Bn){const{items:Vn}=Bn.detail;for(;Ht.length!==0;)Ht.remove(0);for(const Wn of Vn){const{displayValue:rr,exportValue:sr}=Wn,ar=document.createElement("option");ar.textContent=rr,ar.value=sr,Ht.append(ar)}Ht.options.length>0&&(Ht.options[0].selected=!0),Ot.setValue(yt,{value:pn(!0),items:Mn(Bn)}),Dn=pn(!1)},indices(Bn){const Vn=new Set(Bn.detail.indices);for(const Wn of Bn.target.options)Wn.selected=Vn.has(Wn.index);Ot.setValue(yt,{value:pn(!0)}),Dn=pn(!1)},editable(Bn){Bn.target.disabled=!Bn.detail.editable}};this._dispatchEventFromSandbox(nr,zn)}),Ht.addEventListener("input",zn=>{var Bn;const nr=pn(!0);Ot.setValue(yt,{value:nr}),zn.preventDefault(),(Bn=this.linkService.eventBus)==null||Bn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:yt,name:"Keystroke",value:Dn,changeEx:nr,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(Ht,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],zn=>zn.target.value)):Ht.addEventListener("input",function(zn){Ot.setValue(yt,{value:pn(!0)})}),this.data.combo&&this._setTextStyle(Ht),this._setBackgroundColor(Ht),this._setDefaultPropertiesFromJS(Ht),this.container.append(Ht),this.container}}class mt extends ut{constructor(Ot){const{data:yt,elements:Pt}=Ot;super(Ot,{isRenderable:ut._hasPopupData(yt)}),this.elements=Pt}render(){this.container.classList.add("popupAnnotation");const Ot=new pt({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),yt=[];for(const Pt of this.elements)Pt.popup=Ot,yt.push(Pt.data.id),Pt.addHighlightArea();return this.container.setAttribute("aria-controls",yt.map(Pt=>`${a.AnnotationPrefix}${Pt}`).join(",")),this.container}}class pt{constructor({container:Ot,color:yt,elements:Pt,titleObj:Ht,modificationDate:Kt,contentsObj:Qt,richText:pn,parent:Dn,rect:Mn,parentRect:zn,open:nr}){Yt(this,Zn);Yt(this,Kn);Yt(this,Jn);Yt(this,tr);Yt(this,Wt,null);Yt(this,un,an(this,Zn,ao).bind(this));Yt(this,rn,an(this,tr,Ns).bind(this));Yt(this,bn,an(this,Jn,Ps).bind(this));Yt(this,An,an(this,Kn,Zr).bind(this));Yt(this,Nn,null);Yt(this,wn,null);Yt(this,jn,null);Yt(this,Xn,null);Yt(this,Ln,null);Yt(this,Un,null);Yt(this,kn,!1);Yt(this,en,null);Yt(this,hn,null);Yt(this,Tn,null);Yt(this,On,null);Yt(this,In,!1);var Vn;yn(this,wn,Ot),yn(this,On,Ht),yn(this,jn,Qt),yn(this,Tn,pn),yn(this,Ln,Dn),yn(this,Nn,yt),yn(this,hn,Mn),yn(this,Un,zn),yn(this,Xn,Pt);const Bn=c.PDFDateString.toDateObject(Kt);Bn&&yn(this,Wt,Dn.l10n.get("annotation_date_string",{date:Bn.toLocaleDateString(),time:Bn.toLocaleTimeString()})),this.trigger=Pt.flatMap(Wn=>Wn.getElementsToTriggerPopup());for(const Wn of this.trigger)Wn.addEventListener("click",bt(this,An)),Wn.addEventListener("mouseenter",bt(this,bn)),Wn.addEventListener("mouseleave",bt(this,rn)),Wn.classList.add("popupTriggerArea");for(const Wn of Pt)(Vn=Wn.container)==null||Vn.addEventListener("keydown",bt(this,un));bt(this,wn).hidden=!0,nr&&an(this,Kn,Zr).call(this)}render(){if(bt(this,en))return;const{page:{view:Ot},viewport:{rawDims:{pageWidth:yt,pageHeight:Pt,pageX:Ht,pageY:Kt}}}=bt(this,Ln),Qt=yn(this,en,document.createElement("div"));if(Qt.className="popup",bt(this,Nn)){const ur=Qt.style.outlineColor=a.Util.makeHexColor(...bt(this,Nn));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?Qt.style.backgroundColor=`color-mix(in srgb, ${ur} 30%, white)`:Qt.style.backgroundColor=a.Util.makeHexColor(...bt(this,Nn).map(Er=>Math.floor(.7*(255-Er)+Er)))}const pn=document.createElement("span");pn.className="header";const Dn=document.createElement("h1");if(pn.append(Dn),{dir:Dn.dir,str:Dn.textContent}=bt(this,On),Qt.append(pn),bt(this,Wt)){const ur=document.createElement("span");ur.classList.add("popupDate"),bt(this,Wt).then(yr=>{ur.textContent=yr}),pn.append(ur)}const Mn=bt(this,jn),zn=bt(this,Tn);if(zn!=null&&zn.str&&(!(Mn!=null&&Mn.str)||Mn.str===zn.str))_.XfaLayer.render({xfaHtml:zn.html,intent:"richText",div:Qt}),Qt.lastChild.classList.add("richText","popupContent");else{const ur=this._formatContents(Mn);Qt.append(ur)}let nr=!!bt(this,Un),Bn=nr?bt(this,Un):bt(this,hn);for(const ur of bt(this,Xn))if(!Bn||a.Util.intersect(ur.data.rect,Bn)!==null){Bn=ur.data.rect,nr=!0;break}const Vn=a.Util.normalizeRect([Bn[0],Ot[3]-Bn[1]+Ot[1],Bn[2],Ot[3]-Bn[3]+Ot[1]]),Wn=5,rr=nr?Bn[2]-Bn[0]+Wn:0,sr=Vn[0]+rr,ar=Vn[1],{style:mr}=bt(this,wn);mr.left=`${100*(sr-Ht)/yt}%`,mr.top=`${100*(ar-Kt)/Pt}%`,bt(this,wn).append(Qt)}_formatContents({str:Ot,dir:yt}){const Pt=document.createElement("p");Pt.classList.add("popupContent"),Pt.dir=yt;const Ht=Ot.split(/(?:\r\n?|\n)/);for(let Kt=0,Qt=Ht.length;Kt<Qt;++Kt){const pn=Ht[Kt];Pt.append(document.createTextNode(pn)),Kt<Qt-1&&Pt.append(document.createElement("br"))}return Pt}forceHide(){yn(this,In,this.isVisible),bt(this,In)&&(bt(this,wn).hidden=!0)}maybeShow(){bt(this,In)&&(yn(this,In,!1),bt(this,wn).hidden=!1)}get isVisible(){return bt(this,wn).hidden===!1}}Wt=new WeakMap,un=new WeakMap,rn=new WeakMap,bn=new WeakMap,An=new WeakMap,Nn=new WeakMap,wn=new WeakMap,jn=new WeakMap,Xn=new WeakMap,Ln=new WeakMap,Un=new WeakMap,kn=new WeakMap,en=new WeakMap,hn=new WeakMap,Tn=new WeakMap,On=new WeakMap,In=new WeakMap,Zn=new WeakSet,ao=function(Ot){Ot.altKey||Ot.shiftKey||Ot.ctrlKey||Ot.metaKey||(Ot.key==="Enter"||Ot.key==="Escape"&&bt(this,kn))&&an(this,Kn,Zr).call(this)},Kn=new WeakSet,Zr=function(){yn(this,kn,!bt(this,kn)),bt(this,kn)?(an(this,Jn,Ps).call(this),bt(this,wn).addEventListener("click",bt(this,An)),bt(this,wn).addEventListener("keydown",bt(this,un))):(an(this,tr,Ns).call(this),bt(this,wn).removeEventListener("click",bt(this,An)),bt(this,wn).removeEventListener("keydown",bt(this,un)))},Jn=new WeakSet,Ps=function(){bt(this,en)||this.render(),this.isVisible?bt(this,kn)&&bt(this,wn).classList.add("focused"):(bt(this,wn).hidden=!1,bt(this,wn).style.zIndex=parseInt(bt(this,wn).style.zIndex)+1e3)},tr=new WeakSet,Ns=function(){bt(this,wn).classList.remove("focused"),!(bt(this,kn)||!this.isVisible)&&(bt(this,wn).hidden=!0,bt(this,wn).style.zIndex=parseInt(bt(this,wn).style.zIndex)-1e3)};class Et extends ut{constructor(Ot){super(Ot,{isRenderable:!0,ignoreBorder:!0}),this.textContent=Ot.data.textContent,this.textPosition=Ot.data.textPosition,this.annotationEditorType=a.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const Ot=document.createElement("div");Ot.classList.add("annotationTextContent"),Ot.setAttribute("role","comment");for(const yt of this.textContent){const Pt=document.createElement("span");Pt.textContent=yt,Ot.append(Pt)}this.container.append(Ot)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}e.FreeTextAnnotationElement=Et;class Ct extends ut{constructor(yt){super(yt,{isRenderable:!0,ignoreBorder:!0});Yt(this,St,null)}render(){this.container.classList.add("lineAnnotation");const yt=this.data,{width:Pt,height:Ht}=tt(yt.rect),Kt=this.svgFactory.create(Pt,Ht,!0),Qt=yn(this,St,this.svgFactory.createElement("svg:line"));return Qt.setAttribute("x1",yt.rect[2]-yt.lineCoordinates[0]),Qt.setAttribute("y1",yt.rect[3]-yt.lineCoordinates[1]),Qt.setAttribute("x2",yt.rect[2]-yt.lineCoordinates[2]),Qt.setAttribute("y2",yt.rect[3]-yt.lineCoordinates[3]),Qt.setAttribute("stroke-width",yt.borderStyle.width||1),Qt.setAttribute("stroke","transparent"),Qt.setAttribute("fill","transparent"),Kt.append(Qt),this.container.append(Kt),!yt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return bt(this,St)}addHighlightArea(){this.container.classList.add("highlightArea")}}St=new WeakMap;class Nt extends ut{constructor(yt){super(yt,{isRenderable:!0,ignoreBorder:!0});Yt(this,zt,null)}render(){this.container.classList.add("squareAnnotation");const yt=this.data,{width:Pt,height:Ht}=tt(yt.rect),Kt=this.svgFactory.create(Pt,Ht,!0),Qt=yt.borderStyle.width,pn=yn(this,zt,this.svgFactory.createElement("svg:rect"));return pn.setAttribute("x",Qt/2),pn.setAttribute("y",Qt/2),pn.setAttribute("width",Pt-Qt),pn.setAttribute("height",Ht-Qt),pn.setAttribute("stroke-width",Qt||1),pn.setAttribute("stroke","transparent"),pn.setAttribute("fill","transparent"),Kt.append(pn),this.container.append(Kt),!yt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return bt(this,zt)}addHighlightArea(){this.container.classList.add("highlightArea")}}zt=new WeakMap;class Ut extends ut{constructor(yt){super(yt,{isRenderable:!0,ignoreBorder:!0});Yt(this,sn,null)}render(){this.container.classList.add("circleAnnotation");const yt=this.data,{width:Pt,height:Ht}=tt(yt.rect),Kt=this.svgFactory.create(Pt,Ht,!0),Qt=yt.borderStyle.width,pn=yn(this,sn,this.svgFactory.createElement("svg:ellipse"));return pn.setAttribute("cx",Pt/2),pn.setAttribute("cy",Ht/2),pn.setAttribute("rx",Pt/2-Qt/2),pn.setAttribute("ry",Ht/2-Qt/2),pn.setAttribute("stroke-width",Qt||1),pn.setAttribute("stroke","transparent"),pn.setAttribute("fill","transparent"),Kt.append(pn),this.container.append(Kt),!yt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return bt(this,sn)}addHighlightArea(){this.container.classList.add("highlightArea")}}sn=new WeakMap;class Tt extends ut{constructor(yt){super(yt,{isRenderable:!0,ignoreBorder:!0});Yt(this,gn,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const yt=this.data,{width:Pt,height:Ht}=tt(yt.rect),Kt=this.svgFactory.create(Pt,Ht,!0);let Qt=[];for(const Dn of yt.vertices){const Mn=Dn.x-yt.rect[0],zn=yt.rect[3]-Dn.y;Qt.push(Mn+","+zn)}Qt=Qt.join(" ");const pn=yn(this,gn,this.svgFactory.createElement(this.svgElementName));return pn.setAttribute("points",Qt),pn.setAttribute("stroke-width",yt.borderStyle.width||1),pn.setAttribute("stroke","transparent"),pn.setAttribute("fill","transparent"),Kt.append(pn),this.container.append(Kt),!yt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return bt(this,gn)}addHighlightArea(){this.container.classList.add("highlightArea")}}gn=new WeakMap;class qt extends Tt{constructor(Ot){super(Ot),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Vt extends ut{constructor(Ot){super(Ot,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Zt extends ut{constructor(yt){super(yt,{isRenderable:!0,ignoreBorder:!0});Yt(this,tn,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=a.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const yt=this.data,{width:Pt,height:Ht}=tt(yt.rect),Kt=this.svgFactory.create(Pt,Ht,!0);for(const Qt of yt.inkLists){let pn=[];for(const Mn of Qt){const zn=Mn.x-yt.rect[0],nr=yt.rect[3]-Mn.y;pn.push(`${zn},${nr}`)}pn=pn.join(" ");const Dn=this.svgFactory.createElement(this.svgElementName);bt(this,tn).push(Dn),Dn.setAttribute("points",pn),Dn.setAttribute("stroke-width",yt.borderStyle.width||1),Dn.setAttribute("stroke","transparent"),Dn.setAttribute("fill","transparent"),!yt.popupRef&&this.hasPopupData&&this._createPopup(),Kt.append(Dn)}return this.container.append(Kt),this.container}getElementsToTriggerPopup(){return bt(this,tn)}addHighlightArea(){this.container.classList.add("highlightArea")}}tn=new WeakMap,e.InkAnnotationElement=Zt;class It extends ut{constructor(Ot){super(Ot,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class Jt extends ut{constructor(Ot){super(Ot,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class fn extends ut{constructor(Ot){super(Ot,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class _n extends ut{constructor(Ot){super(Ot,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class xn extends ut{constructor(Ot){super(Ot,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}e.StampAnnotationElement=xn;class Mt extends ut{constructor(yt){var Kt;super(yt,{isRenderable:!0});Yt(this,_t);Yt(this,Sn,null);const{filename:Pt,content:Ht}=this.data.file;this.filename=(0,c.getFilenameFromUrl)(Pt,!0),this.content=Ht,(Kt=this.linkService.eventBus)==null||Kt.dispatch("fileattachmentannotation",{source:this,filename:Pt,content:Ht})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:yt,data:Pt}=this;let Ht;Pt.hasAppearance||Pt.fillAlpha===0?Ht=document.createElement("div"):(Ht=document.createElement("img"),Ht.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(Pt.name)?"paperclip":"pushpin"}.svg`,Pt.fillAlpha&&Pt.fillAlpha<1&&(Ht.style=`filter: opacity(${Math.round(Pt.fillAlpha*100)}%);`)),Ht.addEventListener("dblclick",an(this,_t,Ls).bind(this)),yn(this,Sn,Ht);const{isMac:Kt}=a.FeatureTest.platform;return yt.addEventListener("keydown",Qt=>{Qt.key==="Enter"&&(Kt?Qt.metaKey:Qt.ctrlKey)&&an(this,_t,Ls).call(this)}),!Pt.popupRef&&this.hasPopupData?this._createPopup():Ht.classList.add("popupTriggerArea"),yt.append(Ht),yt}getElementsToTriggerPopup(){return bt(this,Sn)}addHighlightArea(){this.container.classList.add("highlightArea")}}Sn=new WeakMap,_t=new WeakSet,Ls=function(){var yt;(yt=this.downloadManager)==null||yt.openOrDownloadData(this.container,this.content,this.filename)};class xt{constructor({div:Ot,accessibilityManager:yt,annotationCanvasMap:Pt,l10n:Ht,page:Kt,viewport:Qt}){Yt(this,cn);Yt(this,Bt);Yt(this,Pn,null);Yt(this,ft,null);Yt(this,nn,new Map);this.div=Ot,yn(this,Pn,yt),yn(this,ft,Pt),this.l10n=Ht,this.page=Kt,this.viewport=Qt,this.zIndex=0,this.l10n||(this.l10n=b.NullL10n)}async render(Ot){const{annotations:yt}=Ot,Pt=this.div;(0,c.setLayerDimensions)(Pt,this.viewport);const Ht=new Map,Kt={data:null,layer:Pt,linkService:Ot.linkService,downloadManager:Ot.downloadManager,imageResourcesPath:Ot.imageResourcesPath||"",renderForms:Ot.renderForms!==!1,svgFactory:new c.DOMSVGFactory,annotationStorage:Ot.annotationStorage||new h.AnnotationStorage,enableScripting:Ot.enableScripting===!0,hasJSActions:Ot.hasJSActions,fieldObjects:Ot.fieldObjects,parent:this,elements:null};for(const Qt of yt){if(Qt.noHTML)continue;const pn=Qt.annotationType===a.AnnotationType.POPUP;if(pn){const zn=Ht.get(Qt.id);if(!zn)continue;Kt.elements=zn}else{const{width:zn,height:nr}=tt(Qt.rect);if(zn<=0||nr<=0)continue}Kt.data=Qt;const Dn=et.create(Kt);if(!Dn.isRenderable)continue;if(!pn&&Qt.popupRef){const zn=Ht.get(Qt.popupRef);zn?zn.push(Dn):Ht.set(Qt.popupRef,[Dn])}Dn.annotationEditorType>0&&bt(this,nn).set(Dn.data.id,Dn);const Mn=Dn.render();Qt.hidden&&(Mn.style.visibility="hidden"),an(this,cn,lo).call(this,Mn,Qt.id)}an(this,Bt,Is).call(this),await this.l10n.translate(Pt)}update({viewport:Ot}){const yt=this.div;this.viewport=Ot,(0,c.setLayerDimensions)(yt,{rotation:Ot.rotation}),an(this,Bt,Is).call(this),yt.hidden=!1}getEditableAnnotations(){return Array.from(bt(this,nn).values())}getEditableAnnotation(Ot){return bt(this,nn).get(Ot)}}Pn=new WeakMap,ft=new WeakMap,nn=new WeakMap,cn=new WeakSet,lo=function(Ot,yt){var Ht;const Pt=Ot.firstChild||Ot;Pt.id=`${a.AnnotationPrefix}${yt}`,this.div.append(Ot),(Ht=bt(this,Pn))==null||Ht.moveElementInDOM(this.div,Ot,Pt,!1)},Bt=new WeakSet,Is=function(){if(!bt(this,ft))return;const Ot=this.div;for(const[yt,Pt]of bt(this,ft)){const Ht=Ot.querySelector(`[data-annotation-id="${yt}"]`);if(!Ht)continue;const{firstChild:Kt}=Ht;Kt?Kt.nodeName==="CANVAS"?Kt.replaceWith(Pt):Kt.before(Pt):Ht.append(Pt)}bt(this,ft).clear()},e.AnnotationLayer=xt},(s,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function o(h){return Math.floor(Math.max(0,Math.min(1,h))*255).toString(16).padStart(2,"0")}function a(h){return Math.max(0,Math.min(255,255*h))}class c{static CMYK_G([g,b,_,j]){return["G",1-Math.min(1,.3*g+.59*_+.11*b+j)]}static G_CMYK([g]){return["CMYK",0,0,0,1-g]}static G_RGB([g]){return["RGB",g,g,g]}static G_rgb([g]){return g=a(g),[g,g,g]}static G_HTML([g]){const b=o(g);return`#${b}${b}${b}`}static RGB_G([g,b,_]){return["G",.3*g+.59*b+.11*_]}static RGB_rgb(g){return g.map(a)}static RGB_HTML(g){return`#${g.map(o).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([g,b,_,j]){return["RGB",1-Math.min(1,g+j),1-Math.min(1,_+j),1-Math.min(1,b+j)]}static CMYK_rgb([g,b,_,j]){return[a(1-Math.min(1,g+j)),a(1-Math.min(1,_+j)),a(1-Math.min(1,b+j))]}static CMYK_HTML(g){const b=this.CMYK_RGB(g).slice(1);return this.RGB_HTML(b)}static RGB_CMYK([g,b,_]){const j=1-g,$=1-b,_e=1-_,tt=Math.min(j,$,_e);return["CMYK",j,$,_e,tt]}}e.ColorConverters=c},(s,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NullL10n=void 0,e.getL10nFallback=a;const o={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};o.print_progress_percent="{{progress}}%";function a(g,b){switch(g){case"find_match_count":g=`find_match_count[${b.total===1?"one":"other"}]`;break;case"find_match_count_limit":g=`find_match_count_limit[${b.limit===1?"one":"other"}]`;break}return o[g]||""}function c(g,b){return b?g.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(_,j)=>j in b?b[j]:"{{"+j+"}}"):g}const h={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(g,b=null,_=a(g,b)){return c(_,b)},async translate(g){}};e.NullL10n=h},(s,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var a=o(25);class c{static setupStorage(g,b,_,j,$){const _e=j.getValue(b,{value:null});switch(_.name){case"textarea":if(_e.value!==null&&(g.textContent=_e.value),$==="print")break;g.addEventListener("input",tt=>{j.setValue(b,{value:tt.target.value})});break;case"input":if(_.attributes.type==="radio"||_.attributes.type==="checkbox"){if(_e.value===_.attributes.xfaOn?g.setAttribute("checked",!0):_e.value===_.attributes.xfaOff&&g.removeAttribute("checked"),$==="print")break;g.addEventListener("change",tt=>{j.setValue(b,{value:tt.target.checked?tt.target.getAttribute("xfaOn"):tt.target.getAttribute("xfaOff")})})}else{if(_e.value!==null&&g.setAttribute("value",_e.value),$==="print")break;g.addEventListener("input",tt=>{j.setValue(b,{value:tt.target.value})})}break;case"select":if(_e.value!==null){g.setAttribute("value",_e.value);for(const tt of _.children)tt.attributes.value===_e.value?tt.attributes.selected=!0:tt.attributes.hasOwnProperty("selected")&&delete tt.attributes.selected}g.addEventListener("input",tt=>{const et=tt.target.options,ut=et.selectedIndex===-1?"":et[et.selectedIndex].value;j.setValue(b,{value:ut})});break}}static setAttributes({html:g,element:b,storage:_=null,intent:j,linkService:$}){const{attributes:_e}=b,tt=g instanceof HTMLAnchorElement;_e.type==="radio"&&(_e.name=`${_e.name}-${j}`);for(const[et,ut]of Object.entries(_e))if(ut!=null)switch(et){case"class":ut.length&&g.setAttribute(et,ut.join(" "));break;case"dataId":break;case"id":g.setAttribute("data-element-id",ut);break;case"style":Object.assign(g.style,ut);break;case"textContent":g.textContent=ut;break;default:(!tt||et!=="href"&&et!=="newWindow")&&g.setAttribute(et,ut)}tt&&$.addLinkAttributes(g,_e.href,_e.newWindow),_&&_e.dataId&&this.setupStorage(g,_e.dataId,b,_)}static render(g){var ht;const b=g.annotationStorage,_=g.linkService,j=g.xfaHtml,$=g.intent||"display",_e=document.createElement(j.name);j.attributes&&this.setAttributes({html:_e,element:j,intent:$,linkService:_});const tt=[[j,-1,_e]],et=g.div;if(et.append(_e),g.viewport){const st=`matrix(${g.viewport.transform.join(",")})`;et.style.transform=st}$!=="richText"&&et.setAttribute("class","xfaLayer xfaFont");const ut=[];for(;tt.length>0;){const[st,nt,rt]=tt.at(-1);if(nt+1===st.children.length){tt.pop();continue}const at=st.children[++tt.at(-1)[1]];if(at===null)continue;const{name:dt}=at;if(dt==="#text"){const ct=document.createTextNode(at.value);ut.push(ct),rt.append(ct);continue}const ot=(ht=at==null?void 0:at.attributes)!=null&&ht.xmlns?document.createElementNS(at.attributes.xmlns,dt):document.createElement(dt);if(rt.append(ot),at.attributes&&this.setAttributes({html:ot,element:at,storage:b,intent:$,linkService:_}),at.children&&at.children.length>0)tt.push([at,-1,ot]);else if(at.value){const ct=document.createTextNode(at.value);a.XfaText.shouldBuildText(dt)&&ut.push(ct),ot.append(ct)}}for(const st of et.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))st.setAttribute("readOnly",!0);return{textDivs:ut}}static update(g){const b=`matrix(${g.viewport.transform.join(",")})`;g.div.style.transform=b,g.div.hidden=!1}}e.XfaLayer=c},(s,e,o)=>{var j,$,_e,tt,et,ut,ht,st,nt,rt,at,dt,ot,ct,vt,co,pt,uo,Ct,ho,Ut,fo,qt,Fs,Zt,po,Jt,Ms,_n,mo,Mt,go,At,vo,kt,yo,Ft,bo,Wt,Ar,rn,Os,An,Qr,wn,Jr,Xn,Dr,Un,Bs,en,_i,Tn,_o,In,js,Qn,xo,er,Eo,Yn,zs,Cn,es,zt,Rr;Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0;var a=o(1),c=o(4),h=o(29),g=o(6),b=o(5);const gn=class gn extends c.AnnotationEditor{constructor(_t){super({..._t,name:"inkEditor"});Yt(this,vt);Yt(this,pt);Yt(this,Ct);Yt(this,Ut);Yt(this,qt);Yt(this,Zt);Yt(this,Jt);Yt(this,_n);Yt(this,Mt);Yt(this,At);Yt(this,kt);Yt(this,Ft);Yt(this,Wt);Yt(this,rn);Yt(this,An);Yt(this,wn);Yt(this,Xn);Yt(this,Un);Yt(this,en);Yt(this,er);Yt(this,Yn);Yt(this,Cn);Yt(this,zt);Yt(this,j,0);Yt(this,$,0);Yt(this,_e,this.canvasPointermove.bind(this));Yt(this,tt,this.canvasPointerleave.bind(this));Yt(this,et,this.canvasPointerup.bind(this));Yt(this,ut,this.canvasPointerdown.bind(this));Yt(this,ht,new Path2D);Yt(this,st,!1);Yt(this,nt,!1);Yt(this,rt,!1);Yt(this,at,null);Yt(this,dt,0);Yt(this,ot,0);Yt(this,ct,null);this.color=_t.color||null,this.thickness=_t.thickness||null,this.opacity=_t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(_t){c.AnnotationEditor.initialize(_t,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(_t,ln){switch(_t){case a.AnnotationEditorParamsType.INK_THICKNESS:gn._defaultThickness=ln;break;case a.AnnotationEditorParamsType.INK_COLOR:gn._defaultColor=ln;break;case a.AnnotationEditorParamsType.INK_OPACITY:gn._defaultOpacity=ln/100;break}}updateParams(_t,ln){switch(_t){case a.AnnotationEditorParamsType.INK_THICKNESS:an(this,vt,co).call(this,ln);break;case a.AnnotationEditorParamsType.INK_COLOR:an(this,pt,uo).call(this,ln);break;case a.AnnotationEditorParamsType.INK_OPACITY:an(this,Ct,ho).call(this,ln);break}}static get defaultPropertiesToUpdate(){return[[a.AnnotationEditorParamsType.INK_THICKNESS,gn._defaultThickness],[a.AnnotationEditorParamsType.INK_COLOR,gn._defaultColor||c.AnnotationEditor._defaultLineColor],[a.AnnotationEditorParamsType.INK_OPACITY,Math.round(gn._defaultOpacity*100)]]}get propertiesToUpdate(){return[[a.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||gn._defaultThickness],[a.AnnotationEditorParamsType.INK_COLOR,this.color||gn._defaultColor||c.AnnotationEditor._defaultLineColor],[a.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??gn._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(an(this,An,Qr).call(this),an(this,wn,Jr).call(this)),this.isAttachedToDOM||(this.parent.add(this),an(this,Xn,Dr).call(this)),an(this,zt,Rr).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,bt(this,at).disconnect(),yn(this,at,null),super.remove())}setParent(_t){!this.parent&&_t?this._uiManager.removeShouldRescale(this):this.parent&&_t===null&&this._uiManager.addShouldRescale(this),super.setParent(_t)}onScaleChanging(){const[_t,ln]=this.parentDimensions,Pn=this.width*_t,ft=this.height*ln;this.setDimensions(Pn,ft)}enableEditMode(){bt(this,st)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",bt(this,ut)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",bt(this,ut)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){bt(this,st)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),yn(this,st,!0),this.div.classList.add("disabled"),an(this,zt,Rr).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(_t){this._focusEventsAllowed&&(super.focusin(_t),this.enableEditMode())}canvasPointerdown(_t){_t.button!==0||!this.isInEditMode()||bt(this,st)||(this.setInForeground(),_t.preventDefault(),_t.type!=="mouse"&&this.div.focus(),an(this,Zt,po).call(this,_t.offsetX,_t.offsetY))}canvasPointermove(_t){_t.preventDefault(),an(this,Jt,Ms).call(this,_t.offsetX,_t.offsetY)}canvasPointerup(_t){_t.preventDefault(),an(this,rn,Os).call(this,_t)}canvasPointerleave(_t){an(this,rn,Os).call(this,_t)}get isResizable(){return!this.isEmpty()&&bt(this,st)}render(){if(this.div)return this.div;let _t,ln;this.width&&(_t=this.x,ln=this.y),super.render(),c.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(Rt=>{var Bt;return(Bt=this.div)==null?void 0:Bt.setAttribute("aria-label",Rt)});const[Pn,ft,nn,cn]=an(this,Ut,fo).call(this);if(this.setAt(Pn,ft,0,0),this.setDims(nn,cn),an(this,An,Qr).call(this),this.width){const[Rt,Bt]=this.parentDimensions;this.setAspectRatio(this.width*Rt,this.height*Bt),this.setAt(_t*Rt,ln*Bt,this.width*Rt,this.height*Bt),yn(this,rt,!0),an(this,Xn,Dr).call(this),this.setDims(this.width*Rt,this.height*Bt),an(this,Wt,Ar).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return an(this,wn,Jr).call(this),this.div}setDimensions(_t,ln){const Pn=Math.round(_t),ft=Math.round(ln);if(bt(this,dt)===Pn&&bt(this,ot)===ft)return;yn(this,dt,Pn),yn(this,ot,ft),this.canvas.style.visibility="hidden";const[nn,cn]=this.parentDimensions;this.width=_t/nn,this.height=ln/cn,this.fixAndSetPosition(),bt(this,st)&&an(this,Un,Bs).call(this,_t,ln),an(this,Xn,Dr).call(this),an(this,Wt,Ar).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(_t,ln,Pn){var Kt,Qt,pn;if(_t instanceof h.InkAnnotationElement)return null;const ft=super.deserialize(_t,ln,Pn);ft.thickness=_t.thickness,ft.color=a.Util.makeHexColor(..._t.color),ft.opacity=_t.opacity;const[nn,cn]=ft.pageDimensions,Rt=ft.width*nn,Bt=ft.height*cn,dn=ft.parentScale,Rn=_t.thickness/2;yn(ft,st,!0),yn(ft,dt,Math.round(Rt)),yn(ft,ot,Math.round(Bt));const{paths:Ot,rect:yt,rotation:Pt}=_t;for(let{bezier:Dn}of Ot){Dn=an(Kt=gn,Qn,xo).call(Kt,Dn,yt,Pt);const Mn=[];ft.paths.push(Mn);let zn=dn*(Dn[0]-Rn),nr=dn*(Dn[1]-Rn);for(let Vn=2,Wn=Dn.length;Vn<Wn;Vn+=6){const rr=dn*(Dn[Vn]-Rn),sr=dn*(Dn[Vn+1]-Rn),ar=dn*(Dn[Vn+2]-Rn),mr=dn*(Dn[Vn+3]-Rn),ur=dn*(Dn[Vn+4]-Rn),yr=dn*(Dn[Vn+5]-Rn);Mn.push([[zn,nr],[rr,sr],[ar,mr],[ur,yr]]),zn=ur,nr=yr}const Bn=an(this,Tn,_o).call(this,Mn);ft.bezierPath2D.push(Bn)}const Ht=an(Qt=ft,Yn,zs).call(Qt);return yn(ft,$,Math.max(c.AnnotationEditor.MIN_SIZE,Ht[2]-Ht[0])),yn(ft,j,Math.max(c.AnnotationEditor.MIN_SIZE,Ht[3]-Ht[1])),an(pn=ft,Un,Bs).call(pn,Rt,Bt),ft}serialize(){if(this.isEmpty())return null;const _t=this.getRect(0,0),ln=c.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:a.AnnotationEditorType.INK,color:ln,thickness:this.thickness,opacity:this.opacity,paths:an(this,er,Eo).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,_t),pageIndex:this.pageIndex,rect:_t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};j=new WeakMap,$=new WeakMap,_e=new WeakMap,tt=new WeakMap,et=new WeakMap,ut=new WeakMap,ht=new WeakMap,st=new WeakMap,nt=new WeakMap,rt=new WeakMap,at=new WeakMap,dt=new WeakMap,ot=new WeakMap,ct=new WeakMap,vt=new WeakSet,co=function(_t){const ln=this.thickness;this.addCommands({cmd:()=>{this.thickness=_t,an(this,zt,Rr).call(this)},undo:()=>{this.thickness=ln,an(this,zt,Rr).call(this)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},pt=new WeakSet,uo=function(_t){const ln=this.color;this.addCommands({cmd:()=>{this.color=_t,an(this,Wt,Ar).call(this)},undo:()=>{this.color=ln,an(this,Wt,Ar).call(this)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Ct=new WeakSet,ho=function(_t){_t/=100;const ln=this.opacity;this.addCommands({cmd:()=>{this.opacity=_t,an(this,Wt,Ar).call(this)},undo:()=>{this.opacity=ln,an(this,Wt,Ar).call(this)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Ut=new WeakSet,fo=function(){const{parentRotation:_t,parentDimensions:[ln,Pn]}=this;switch(_t){case 90:return[0,Pn,Pn,ln];case 180:return[ln,Pn,ln,Pn];case 270:return[ln,0,Pn,ln];default:return[0,0,ln,Pn]}},qt=new WeakSet,Fs=function(){const{ctx:_t,color:ln,opacity:Pn,thickness:ft,parentScale:nn,scaleFactor:cn}=this;_t.lineWidth=ft*nn/cn,_t.lineCap="round",_t.lineJoin="round",_t.miterLimit=10,_t.strokeStyle=`${ln}${(0,b.opacityToHex)(Pn)}`},Zt=new WeakSet,po=function(_t,ln){this.canvas.addEventListener("contextmenu",g.noContextMenu),this.canvas.addEventListener("pointerleave",bt(this,tt)),this.canvas.addEventListener("pointermove",bt(this,_e)),this.canvas.addEventListener("pointerup",bt(this,et)),this.canvas.removeEventListener("pointerdown",bt(this,ut)),this.isEditing=!0,bt(this,rt)||(yn(this,rt,!0),an(this,Xn,Dr).call(this),this.thickness||(this.thickness=gn._defaultThickness),this.color||(this.color=gn._defaultColor||c.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=gn._defaultOpacity)),this.currentPath.push([_t,ln]),yn(this,nt,!1),an(this,qt,Fs).call(this),yn(this,ct,()=>{an(this,At,vo).call(this),bt(this,ct)&&window.requestAnimationFrame(bt(this,ct))}),window.requestAnimationFrame(bt(this,ct))},Jt=new WeakSet,Ms=function(_t,ln){const[Pn,ft]=this.currentPath.at(-1);if(this.currentPath.length>1&&_t===Pn&&ln===ft)return;const nn=this.currentPath;let cn=bt(this,ht);if(nn.push([_t,ln]),yn(this,nt,!0),nn.length<=2){cn.moveTo(...nn[0]),cn.lineTo(_t,ln);return}nn.length===3&&(yn(this,ht,cn=new Path2D),cn.moveTo(...nn[0])),an(this,kt,yo).call(this,cn,...nn.at(-3),...nn.at(-2),_t,ln)},_n=new WeakSet,mo=function(){if(this.currentPath.length===0)return;const _t=this.currentPath.at(-1);bt(this,ht).lineTo(..._t)},Mt=new WeakSet,go=function(_t,ln){yn(this,ct,null),_t=Math.min(Math.max(_t,0),this.canvas.width),ln=Math.min(Math.max(ln,0),this.canvas.height),an(this,Jt,Ms).call(this,_t,ln),an(this,_n,mo).call(this);let Pn;if(this.currentPath.length!==1)Pn=an(this,Ft,bo).call(this);else{const Bt=[_t,ln];Pn=[[Bt,Bt.slice(),Bt.slice(),Bt]]}const ft=bt(this,ht),nn=this.currentPath;this.currentPath=[],yn(this,ht,new Path2D);const cn=()=>{this.allRawPaths.push(nn),this.paths.push(Pn),this.bezierPath2D.push(ft),this.rebuild()},Rt=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(an(this,An,Qr).call(this),an(this,wn,Jr).call(this)),an(this,zt,Rr).call(this))};this.addCommands({cmd:cn,undo:Rt,mustExec:!0})},At=new WeakSet,vo=function(){if(!bt(this,nt))return;yn(this,nt,!1);const _t=Math.ceil(this.thickness*this.parentScale),ln=this.currentPath.slice(-3),Pn=ln.map(cn=>cn[0]),ft=ln.map(cn=>cn[1]);Math.min(...Pn)-_t,Math.max(...Pn)+_t,Math.min(...ft)-_t,Math.max(...ft)+_t;const{ctx:nn}=this;nn.save(),nn.clearRect(0,0,this.canvas.width,this.canvas.height);for(const cn of this.bezierPath2D)nn.stroke(cn);nn.stroke(bt(this,ht)),nn.restore()},kt=new WeakSet,yo=function(_t,ln,Pn,ft,nn,cn,Rt){const Bt=(ln+ft)/2,dn=(Pn+nn)/2,Rn=(ft+cn)/2,Ot=(nn+Rt)/2;_t.bezierCurveTo(Bt+2*(ft-Bt)/3,dn+2*(nn-dn)/3,Rn+2*(ft-Rn)/3,Ot+2*(nn-Ot)/3,Rn,Ot)},Ft=new WeakSet,bo=function(){const _t=this.currentPath;if(_t.length<=2)return[[_t[0],_t[0],_t.at(-1),_t.at(-1)]];const ln=[];let Pn,[ft,nn]=_t[0];for(Pn=1;Pn<_t.length-2;Pn++){const[yt,Pt]=_t[Pn],[Ht,Kt]=_t[Pn+1],Qt=(yt+Ht)/2,pn=(Pt+Kt)/2,Dn=[ft+2*(yt-ft)/3,nn+2*(Pt-nn)/3],Mn=[Qt+2*(yt-Qt)/3,pn+2*(Pt-pn)/3];ln.push([[ft,nn],Dn,Mn,[Qt,pn]]),[ft,nn]=[Qt,pn]}const[cn,Rt]=_t[Pn],[Bt,dn]=_t[Pn+1],Rn=[ft+2*(cn-ft)/3,nn+2*(Rt-nn)/3],Ot=[Bt+2*(cn-Bt)/3,dn+2*(Rt-dn)/3];return ln.push([[ft,nn],Rn,Ot,[Bt,dn]]),ln},Wt=new WeakSet,Ar=function(){if(this.isEmpty()){an(this,en,_i).call(this);return}an(this,qt,Fs).call(this);const{canvas:_t,ctx:ln}=this;ln.setTransform(1,0,0,1,0,0),ln.clearRect(0,0,_t.width,_t.height),an(this,en,_i).call(this);for(const Pn of this.bezierPath2D)ln.stroke(Pn)},rn=new WeakSet,Os=function(_t){this.canvas.removeEventListener("pointerleave",bt(this,tt)),this.canvas.removeEventListener("pointermove",bt(this,_e)),this.canvas.removeEventListener("pointerup",bt(this,et)),this.canvas.addEventListener("pointerdown",bt(this,ut)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",g.noContextMenu)},10),an(this,Mt,go).call(this,_t.offsetX,_t.offsetY),this.addToAnnotationStorage(),this.setInBackground()},An=new WeakSet,Qr=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",c.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(_t=>{var ln;return(ln=this.canvas)==null?void 0:ln.setAttribute("aria-label",_t)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},wn=new WeakSet,Jr=function(){yn(this,at,new ResizeObserver(_t=>{const ln=_t[0].contentRect;ln.width&&ln.height&&this.setDimensions(ln.width,ln.height)})),bt(this,at).observe(this.div)},Xn=new WeakSet,Dr=function(){if(!bt(this,rt))return;const[_t,ln]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*_t),this.canvas.height=Math.ceil(this.height*ln),an(this,en,_i).call(this)},Un=new WeakSet,Bs=function(_t,ln){const Pn=an(this,Cn,es).call(this),ft=(_t-Pn)/bt(this,$),nn=(ln-Pn)/bt(this,j);this.scaleFactor=Math.min(ft,nn)},en=new WeakSet,_i=function(){const _t=an(this,Cn,es).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+_t,this.translationY*this.scaleFactor+_t)},Tn=new WeakSet,_o=function(_t){const ln=new Path2D;for(let Pn=0,ft=_t.length;Pn<ft;Pn++){const[nn,cn,Rt,Bt]=_t[Pn];Pn===0&&ln.moveTo(...nn),ln.bezierCurveTo(cn[0],cn[1],Rt[0],Rt[1],Bt[0],Bt[1])}return ln},In=new WeakSet,js=function(_t,ln,Pn){const[ft,nn,cn,Rt]=ln;switch(Pn){case 0:for(let Bt=0,dn=_t.length;Bt<dn;Bt+=2)_t[Bt]+=ft,_t[Bt+1]=Rt-_t[Bt+1];break;case 90:for(let Bt=0,dn=_t.length;Bt<dn;Bt+=2){const Rn=_t[Bt];_t[Bt]=_t[Bt+1]+ft,_t[Bt+1]=Rn+nn}break;case 180:for(let Bt=0,dn=_t.length;Bt<dn;Bt+=2)_t[Bt]=cn-_t[Bt],_t[Bt+1]+=nn;break;case 270:for(let Bt=0,dn=_t.length;Bt<dn;Bt+=2){const Rn=_t[Bt];_t[Bt]=cn-_t[Bt+1],_t[Bt+1]=Rt-Rn}break;default:throw new Error("Invalid rotation")}return _t},Qn=new WeakSet,xo=function(_t,ln,Pn){const[ft,nn,cn,Rt]=ln;switch(Pn){case 0:for(let Bt=0,dn=_t.length;Bt<dn;Bt+=2)_t[Bt]-=ft,_t[Bt+1]=Rt-_t[Bt+1];break;case 90:for(let Bt=0,dn=_t.length;Bt<dn;Bt+=2){const Rn=_t[Bt];_t[Bt]=_t[Bt+1]-nn,_t[Bt+1]=Rn-ft}break;case 180:for(let Bt=0,dn=_t.length;Bt<dn;Bt+=2)_t[Bt]=cn-_t[Bt],_t[Bt+1]-=nn;break;case 270:for(let Bt=0,dn=_t.length;Bt<dn;Bt+=2){const Rn=_t[Bt];_t[Bt]=Rt-_t[Bt+1],_t[Bt+1]=cn-Rn}break;default:throw new Error("Invalid rotation")}return _t},er=new WeakSet,Eo=function(_t,ln,Pn,ft){var dn,Rn;const nn=[],cn=this.thickness/2,Rt=_t*ln+cn,Bt=_t*Pn+cn;for(const Ot of this.paths){const yt=[],Pt=[];for(let Ht=0,Kt=Ot.length;Ht<Kt;Ht++){const[Qt,pn,Dn,Mn]=Ot[Ht],zn=_t*Qt[0]+Rt,nr=_t*Qt[1]+Bt,Bn=_t*pn[0]+Rt,Vn=_t*pn[1]+Bt,Wn=_t*Dn[0]+Rt,rr=_t*Dn[1]+Bt,sr=_t*Mn[0]+Rt,ar=_t*Mn[1]+Bt;Ht===0&&(yt.push(zn,nr),Pt.push(zn,nr)),yt.push(Bn,Vn,Wn,rr,sr,ar),Pt.push(Bn,Vn),Ht===Kt-1&&Pt.push(sr,ar)}nn.push({bezier:an(dn=gn,In,js).call(dn,yt,ft,this.rotation),points:an(Rn=gn,In,js).call(Rn,Pt,ft,this.rotation)})}return nn},Yn=new WeakSet,zs=function(){let _t=1/0,ln=-1/0,Pn=1/0,ft=-1/0;for(const nn of this.paths)for(const[cn,Rt,Bt,dn]of nn){const Rn=a.Util.bezierBoundingBox(...cn,...Rt,...Bt,...dn);_t=Math.min(_t,Rn[0]),Pn=Math.min(Pn,Rn[1]),ln=Math.max(ln,Rn[2]),ft=Math.max(ft,Rn[3])}return[_t,Pn,ln,ft]},Cn=new WeakSet,es=function(){return bt(this,st)?Math.ceil(this.thickness*this.parentScale):0},zt=new WeakSet,Rr=function(_t=!1){if(this.isEmpty())return;if(!bt(this,st)){an(this,Wt,Ar).call(this);return}const ln=an(this,Yn,zs).call(this),Pn=an(this,Cn,es).call(this);yn(this,$,Math.max(c.AnnotationEditor.MIN_SIZE,ln[2]-ln[0])),yn(this,j,Math.max(c.AnnotationEditor.MIN_SIZE,ln[3]-ln[1]));const ft=Math.ceil(Pn+bt(this,$)*this.scaleFactor),nn=Math.ceil(Pn+bt(this,j)*this.scaleFactor),[cn,Rt]=this.parentDimensions;this.width=ft/cn,this.height=nn/Rt,this.setAspectRatio(ft,nn);const Bt=this.translationX,dn=this.translationY;this.translationX=-ln[0],this.translationY=-ln[1],an(this,Xn,Dr).call(this),an(this,Wt,Ar).call(this),yn(this,dt,ft),yn(this,ot,nn),this.setDims(ft,nn);const Rn=_t?Pn/this.scaleFactor/2:0;this.translate(Bt-this.translationX-Rn,dn-this.translationY-Rn)},Yt(gn,Tn),Yt(gn,In),Yt(gn,Qn),fr(gn,"_defaultColor",null),fr(gn,"_defaultOpacity",1),fr(gn,"_defaultThickness",1),fr(gn,"_type","ink");let _=gn;e.InkEditor=_},(s,e,o)=>{var _,j,$,_e,tt,et,ut,ht,st,nt,rt,zr,dt,Vr,ct,ts,mt,Vs,Et,wo,Nt,Ao,Tt,Us,Vt,ns,It,So;Object.defineProperty(e,"__esModule",{value:!0}),e.StampEditor=void 0;var a=o(1),c=o(4),h=o(6),g=o(29);const fn=class fn extends c.AnnotationEditor{constructor(Mt){super({...Mt,name:"stampEditor"});Yt(this,rt);Yt(this,dt);Yt(this,ct);Yt(this,mt);Yt(this,Et);Yt(this,Nt);Yt(this,Tt);Yt(this,Vt);Yt(this,It);Yt(this,_,null);Yt(this,j,null);Yt(this,$,null);Yt(this,_e,null);Yt(this,tt,null);Yt(this,et,null);Yt(this,ut,null);Yt(this,ht,null);Yt(this,st,!1);Yt(this,nt,!1);yn(this,_e,Mt.bitmapUrl),yn(this,tt,Mt.bitmapFile)}static initialize(Mt){c.AnnotationEditor.initialize(Mt)}static get supportedTypes(){const Mt=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,a.shadow)(this,"supportedTypes",Mt.map(xt=>`image/${xt}`))}static get supportedTypesStr(){return(0,a.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(Mt){return this.supportedTypes.includes(Mt)}static paste(Mt,xt){xt.pasteEditor(a.AnnotationEditorType.STAMP,{bitmapFile:Mt.getAsFile()})}remove(){var Mt,xt;bt(this,j)&&(yn(this,_,null),this._uiManager.imageManager.deleteId(bt(this,j)),(Mt=bt(this,et))==null||Mt.remove(),yn(this,et,null),(xt=bt(this,ut))==null||xt.disconnect(),yn(this,ut,null)),super.remove()}rebuild(){if(!this.parent){bt(this,j)&&an(this,ct,ts).call(this);return}super.rebuild(),this.div!==null&&(bt(this,j)&&an(this,ct,ts).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(bt(this,$)||bt(this,_)||bt(this,_e)||bt(this,tt))}get isResizable(){return!0}render(){if(this.div)return this.div;let Mt,xt;if(this.width&&(Mt=this.x,xt=this.y),super.render(),this.div.hidden=!0,bt(this,_)?an(this,mt,Vs).call(this):an(this,ct,ts).call(this),this.width){const[At,wt]=this.parentDimensions;this.setAt(Mt*At,xt*wt,this.width*At,this.height*wt)}return this.div}static deserialize(Mt,xt,At){if(Mt instanceof g.StampAnnotationElement)return null;const wt=super.deserialize(Mt,xt,At),{rect:kt,bitmapUrl:Dt,bitmapId:Ft,isSvg:$t,accessibilityData:Wt}=Mt;Ft&&At.imageManager.isValidId(Ft)?yn(wt,j,Ft):yn(wt,_e,Dt),yn(wt,st,$t);const[un,rn]=wt.pageDimensions;return wt.width=(kt[2]-kt[0])/un,wt.height=(kt[3]-kt[1])/rn,Wt&&(wt.altTextData=Wt),wt}serialize(Mt=!1,xt=null){if(this.isEmpty())return null;const At={annotationType:a.AnnotationEditorType.STAMP,bitmapId:bt(this,j),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:bt(this,st),structTreeParentId:this._structTreeParentId};if(Mt)return At.bitmapUrl=an(this,Vt,ns).call(this,!0),At.accessibilityData=this.altTextData,At;const{decorative:wt,altText:kt}=this.altTextData;if(!wt&&kt&&(At.accessibilityData={type:"Figure",alt:kt}),xt===null)return At;xt.stamps||(xt.stamps=new Map);const Dt=bt(this,st)?(At.rect[2]-At.rect[0])*(At.rect[3]-At.rect[1]):null;if(!xt.stamps.has(bt(this,j)))xt.stamps.set(bt(this,j),{area:Dt,serialized:At}),At.bitmap=an(this,Vt,ns).call(this,!1);else if(bt(this,st)){const Ft=xt.stamps.get(bt(this,j));Dt>Ft.area&&(Ft.area=Dt,Ft.serialized.bitmap.close(),Ft.serialized.bitmap=an(this,Vt,ns).call(this,!1))}return At}};_=new WeakMap,j=new WeakMap,$=new WeakMap,_e=new WeakMap,tt=new WeakMap,et=new WeakMap,ut=new WeakMap,ht=new WeakMap,st=new WeakMap,nt=new WeakMap,rt=new WeakSet,zr=function(Mt,xt=!1){if(!Mt){this.remove();return}yn(this,_,Mt.bitmap),xt||(yn(this,j,Mt.id),yn(this,st,Mt.isSvg)),an(this,mt,Vs).call(this)},dt=new WeakSet,Vr=function(){yn(this,$,null),this._uiManager.enableWaiting(!1),bt(this,et)&&this.div.focus()},ct=new WeakSet,ts=function(){if(bt(this,j)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(bt(this,j)).then(xt=>an(this,rt,zr).call(this,xt,!0)).finally(()=>an(this,dt,Vr).call(this));return}if(bt(this,_e)){const xt=bt(this,_e);yn(this,_e,null),this._uiManager.enableWaiting(!0),yn(this,$,this._uiManager.imageManager.getFromUrl(xt).then(At=>an(this,rt,zr).call(this,At)).finally(()=>an(this,dt,Vr).call(this)));return}if(bt(this,tt)){const xt=bt(this,tt);yn(this,tt,null),this._uiManager.enableWaiting(!0),yn(this,$,this._uiManager.imageManager.getFromFile(xt).then(At=>an(this,rt,zr).call(this,At)).finally(()=>an(this,dt,Vr).call(this)));return}const Mt=document.createElement("input");Mt.type="file",Mt.accept=fn.supportedTypesStr,yn(this,$,new Promise(xt=>{Mt.addEventListener("change",async()=>{if(!Mt.files||Mt.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const At=await this._uiManager.imageManager.getFromFile(Mt.files[0]);an(this,rt,zr).call(this,At)}xt()}),Mt.addEventListener("cancel",()=>{this.remove(),xt()})}).finally(()=>an(this,dt,Vr).call(this))),Mt.click()},mt=new WeakSet,Vs=function(){const{div:Mt}=this;let{width:xt,height:At}=bt(this,_);const[wt,kt]=this.pageDimensions,Dt=.75;if(this.width)xt=this.width*wt,At=this.height*kt;else if(xt>Dt*wt||At>Dt*kt){const un=Math.min(Dt*wt/xt,Dt*kt/At);xt*=un,At*=un}const[Ft,$t]=this.parentDimensions;this.setDims(xt*Ft/wt,At*$t/kt),this._uiManager.enableWaiting(!1);const Wt=yn(this,et,document.createElement("canvas"));Mt.append(Wt),Mt.hidden=!1,an(this,Tt,Us).call(this,xt,At),an(this,It,So).call(this),bt(this,nt)||(this.parent.addUndoableEditor(this),yn(this,nt,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},Et=new WeakSet,wo=function(Mt,xt){var Dt;const[At,wt]=this.parentDimensions;this.width=Mt/At,this.height=xt/wt,this.setDims(Mt,xt),(Dt=this._initialOptions)!=null&&Dt.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,bt(this,ht)!==null&&clearTimeout(bt(this,ht)),yn(this,ht,setTimeout(()=>{yn(this,ht,null),an(this,Tt,Us).call(this,Mt,xt)},200))},Nt=new WeakSet,Ao=function(Mt,xt){const{width:At,height:wt}=bt(this,_);let kt=At,Dt=wt,Ft=bt(this,_);for(;kt>2*Mt||Dt>2*xt;){const $t=kt,Wt=Dt;kt>2*Mt&&(kt=kt>=16384?Math.floor(kt/2)-1:Math.ceil(kt/2)),Dt>2*xt&&(Dt=Dt>=16384?Math.floor(Dt/2)-1:Math.ceil(Dt/2));const un=new OffscreenCanvas(kt,Dt);un.getContext("2d").drawImage(Ft,0,0,$t,Wt,0,0,kt,Dt),Ft=un.transferToImageBitmap()}return Ft},Tt=new WeakSet,Us=function(Mt,xt){Mt=Math.ceil(Mt),xt=Math.ceil(xt);const At=bt(this,et);if(!At||At.width===Mt&&At.height===xt)return;At.width=Mt,At.height=xt;const wt=bt(this,st)?bt(this,_):an(this,Nt,Ao).call(this,Mt,xt),kt=At.getContext("2d");kt.filter=this._uiManager.hcmFilter,kt.drawImage(wt,0,0,wt.width,wt.height,0,0,Mt,xt)},Vt=new WeakSet,ns=function(Mt){if(Mt){if(bt(this,st)){const wt=this._uiManager.imageManager.getSvgUrl(bt(this,j));if(wt)return wt}const xt=document.createElement("canvas");return{width:xt.width,height:xt.height}=bt(this,_),xt.getContext("2d").drawImage(bt(this,_),0,0),xt.toDataURL()}if(bt(this,st)){const[xt,At]=this.pageDimensions,wt=Math.round(this.width*xt*h.PixelsPerInch.PDF_TO_CSS_UNITS),kt=Math.round(this.height*At*h.PixelsPerInch.PDF_TO_CSS_UNITS),Dt=new OffscreenCanvas(wt,kt);return Dt.getContext("2d").drawImage(bt(this,_),0,0,bt(this,_).width,bt(this,_).height,0,0,wt,kt),Dt.transferToImageBitmap()}return structuredClone(bt(this,_))},It=new WeakSet,So=function(){yn(this,ut,new ResizeObserver(Mt=>{const xt=Mt[0].contentRect;xt.width&&xt.height&&an(this,Et,wo).call(this,xt.width,xt.height)})),bt(this,ut).observe(this.div)},fr(fn,"_type","stamp");let b=fn;e.StampEditor=b}],__webpack_module_cache__={};function __w_pdfjs_require__(s){var e=__webpack_module_cache__[s];if(e!==void 0)return e.exports;var o=__webpack_module_cache__[s]={exports:{}};return __webpack_modules__[s](o,o.exports,__w_pdfjs_require__),o.exports}var __webpack_exports__={};return(()=>{var s=__webpack_exports__;Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"AbortException",{enumerable:!0,get:function(){return e.AbortException}}),Object.defineProperty(s,"AnnotationEditorLayer",{enumerable:!0,get:function(){return h.AnnotationEditorLayer}}),Object.defineProperty(s,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(s,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(s,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return g.AnnotationEditorUIManager}}),Object.defineProperty(s,"AnnotationLayer",{enumerable:!0,get:function(){return b.AnnotationLayer}}),Object.defineProperty(s,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(s,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(s,"DOMSVGFactory",{enumerable:!0,get:function(){return a.DOMSVGFactory}}),Object.defineProperty(s,"FeatureTest",{enumerable:!0,get:function(){return e.FeatureTest}}),Object.defineProperty(s,"GlobalWorkerOptions",{enumerable:!0,get:function(){return _.GlobalWorkerOptions}}),Object.defineProperty(s,"ImageKind",{enumerable:!0,get:function(){return e.ImageKind}}),Object.defineProperty(s,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(s,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(s,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(s,"PDFDataRangeTransport",{enumerable:!0,get:function(){return o.PDFDataRangeTransport}}),Object.defineProperty(s,"PDFDateString",{enumerable:!0,get:function(){return a.PDFDateString}}),Object.defineProperty(s,"PDFWorker",{enumerable:!0,get:function(){return o.PDFWorker}}),Object.defineProperty(s,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(s,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(s,"PixelsPerInch",{enumerable:!0,get:function(){return a.PixelsPerInch}}),Object.defineProperty(s,"PromiseCapability",{enumerable:!0,get:function(){return e.PromiseCapability}}),Object.defineProperty(s,"RenderingCancelledException",{enumerable:!0,get:function(){return a.RenderingCancelledException}}),Object.defineProperty(s,"SVGGraphics",{enumerable:!0,get:function(){return o.SVGGraphics}}),Object.defineProperty(s,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(s,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(s,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(s,"XfaLayer",{enumerable:!0,get:function(){return j.XfaLayer}}),Object.defineProperty(s,"build",{enumerable:!0,get:function(){return o.build}}),Object.defineProperty(s,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(s,"getDocument",{enumerable:!0,get:function(){return o.getDocument}}),Object.defineProperty(s,"getFilenameFromUrl",{enumerable:!0,get:function(){return a.getFilenameFromUrl}}),Object.defineProperty(s,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return a.getPdfFilenameFromUrl}}),Object.defineProperty(s,"getXfaPageViewport",{enumerable:!0,get:function(){return a.getXfaPageViewport}}),Object.defineProperty(s,"isDataScheme",{enumerable:!0,get:function(){return a.isDataScheme}}),Object.defineProperty(s,"isPdfFile",{enumerable:!0,get:function(){return a.isPdfFile}}),Object.defineProperty(s,"loadScript",{enumerable:!0,get:function(){return a.loadScript}}),Object.defineProperty(s,"noContextMenu",{enumerable:!0,get:function(){return a.noContextMenu}}),Object.defineProperty(s,"normalizeUnicode",{enumerable:!0,get:function(){return e.normalizeUnicode}}),Object.defineProperty(s,"renderTextLayer",{enumerable:!0,get:function(){return c.renderTextLayer}}),Object.defineProperty(s,"setLayerDimensions",{enumerable:!0,get:function(){return a.setLayerDimensions}}),Object.defineProperty(s,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(s,"updateTextLayer",{enumerable:!0,get:function(){return c.updateTextLayer}}),Object.defineProperty(s,"version",{enumerable:!0,get:function(){return o.version}});var e=__w_pdfjs_require__(1),o=__w_pdfjs_require__(2),a=__w_pdfjs_require__(6),c=__w_pdfjs_require__(26),h=__w_pdfjs_require__(27),g=__w_pdfjs_require__(5),b=__w_pdfjs_require__(29),_=__w_pdfjs_require__(14),j=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf$1);var pdfExports=pdf$1.exports;const pdf=getDefaultExportFromCjs(pdfExports),pdfjsModule=_mergeNamespaces({__proto__:null,default:pdf},[pdfExports]),pdfjs="default"in pdfjsModule?pdf:pdfjsModule,pdfjs$1=pdfjs;var warning=function(){},warning_1=warning;const warning$1=getDefaultExportFromCjs(warning_1),isBrowser=typeof document<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:",allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayWorkerWarning(){warning$1(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}displayWorkerWarning();pdfjs$1.GlobalWorkerOptions.workerSrc="pdf.worker.js";var utils$1={};const Aacute="",aacute="",Abreve="",abreve="",ac="",acd="",acE="",Acirc="",acirc="",acute="",Acy="",acy="",AElig="",aelig="",af="",Afr="",afr="",Agrave="",agrave="",alefsym="",aleph="",Alpha="",alpha="",Amacr="",amacr="",amalg="",amp="&",AMP="&",andand="",And="",and="",andd="",andslope="",andv="",ang="",ange="",angle="",angmsdaa="",angmsdab="",angmsdac="",angmsdad="",angmsdae="",angmsdaf="",angmsdag="",angmsdah="",angmsd="",angrt="",angrtvb="",angrtvbd="",angsph="",angst="",angzarr="",Aogon="",aogon="",Aopf="",aopf="",apacir="",ap="",apE="",ape="",apid="",apos="'",ApplyFunction="",approx="",approxeq="",Aring="",aring="",Ascr="",ascr="",Assign="",ast="*",asymp="",asympeq="",Atilde="",atilde="",Auml="",auml="",awconint="",awint="",backcong="",backepsilon="",backprime="",backsim="",backsimeq="",Backslash="",Barv="",barvee="",barwed="",Barwed="",barwedge="",bbrk="",bbrktbrk="",bcong="",Bcy="",bcy="",bdquo="",becaus="",because="",Because="",bemptyv="",bepsi="",bernou="",Bernoullis="",Beta="",beta="",beth="",between="",Bfr="",bfr="",bigcap="",bigcirc="",bigcup="",bigodot="",bigoplus="",bigotimes="",bigsqcup="",bigstar="",bigtriangledown="",bigtriangleup="",biguplus="",bigvee="",bigwedge="",bkarow="",blacklozenge="",blacksquare="",blacktriangle="",blacktriangledown="",blacktriangleleft="",blacktriangleright="",blank="",blk12="",blk14="",blk34="",block$1="",bne="=",bnequiv="",bNot="",bnot="",Bopf="",bopf="",bot="",bottom="",bowtie="",boxbox="",boxdl="",boxdL="",boxDl="",boxDL="",boxdr="",boxdR="",boxDr="",boxDR="",boxh="",boxH="",boxhd="",boxHd="",boxhD="",boxHD="",boxhu="",boxHu="",boxhU="",boxHU="",boxminus="",boxplus="",boxtimes="",boxul="",boxuL="",boxUl="",boxUL="",boxur="",boxuR="",boxUr="",boxUR="",boxv="",boxV="",boxvh="",boxvH="",boxVh="",boxVH="",boxvl="",boxvL="",boxVl="",boxVL="",boxvr="",boxvR="",boxVr="",boxVR="",bprime="",breve="",Breve="",brvbar="",bscr="",Bscr="",bsemi="",bsim="",bsime="",bsolb="",bsol="\\",bsolhsub="",bull="",bullet="",bump="",bumpE="",bumpe="",Bumpeq="",bumpeq="",Cacute="",cacute="",capand="",capbrcup="",capcap="",cap="",Cap="",capcup="",capdot="",CapitalDifferentialD="",caps="",caret="",caron="",Cayleys="",ccaps="",Ccaron="",ccaron="",Ccedil="",ccedil="",Ccirc="",ccirc="",Cconint="",ccups="",ccupssm="",Cdot="",cdot="",cedil="",Cedilla="",cemptyv="",cent="",centerdot="",CenterDot="",cfr="",Cfr="",CHcy="",chcy="",check="",checkmark="",Chi="",chi="",circ="",circeq="",circlearrowleft="",circlearrowright="",circledast="",circledcirc="",circleddash="",CircleDot="",circledR="",circledS="",CircleMinus="",CirclePlus="",CircleTimes="",cir="",cirE="",cire="",cirfnint="",cirmid="",cirscir="",ClockwiseContourIntegral="",CloseCurlyDoubleQuote="",CloseCurlyQuote="",clubs="",clubsuit="",colon=":",Colon="",Colone="",colone="",coloneq="",comma=",",commat="@",comp="",compfn="",complement="",complexes="",cong="",congdot="",Congruent="",conint="",Conint="",ContourIntegral="",copf="",Copf="",coprod="",Coproduct="",copy="",COPY="",copysr="",CounterClockwiseContourIntegral="",crarr="",cross="",Cross="",Cscr="",cscr="",csub="",csube="",csup="",csupe="",ctdot="",cudarrl="",cudarrr="",cuepr="",cuesc="",cularr="",cularrp="",cupbrcap="",cupcap="",CupCap="",cup="",Cup="",cupcup="",cupdot="",cupor="",cups="",curarr="",curarrm="",curlyeqprec="",curlyeqsucc="",curlyvee="",curlywedge="",curren="",curvearrowleft="",curvearrowright="",cuvee="",cuwed="",cwconint="",cwint="",cylcty="",dagger="",Dagger="",daleth="",darr="",Darr="",dArr="",dash="",Dashv="",dashv="",dbkarow="",dblac="",Dcaron="",dcaron="",Dcy="",dcy="",ddagger="",ddarr="",DD="",dd="",DDotrahd="",ddotseq="",deg="",Del="",Delta="",delta="",demptyv="",dfisht="",Dfr="",dfr="",dHar="",dharl="",dharr="",DiacriticalAcute="",DiacriticalDot="",DiacriticalDoubleAcute="",DiacriticalGrave="`",DiacriticalTilde="",diam="",diamond="",Diamond="",diamondsuit="",diams="",die="",DifferentialD="",digamma="",disin="",div="",divide="",divideontimes="",divonx="",DJcy="",djcy="",dlcorn="",dlcrop="",dollar="$",Dopf="",dopf="",Dot="",dot="",DotDot="",doteq="",doteqdot="",DotEqual="",dotminus="",dotplus="",dotsquare="",doublebarwedge="",DoubleContourIntegral="",DoubleDot="",DoubleDownArrow="",DoubleLeftArrow="",DoubleLeftRightArrow="",DoubleLeftTee="",DoubleLongLeftArrow="",DoubleLongLeftRightArrow="",DoubleLongRightArrow="",DoubleRightArrow="",DoubleRightTee="",DoubleUpArrow="",DoubleUpDownArrow="",DoubleVerticalBar="",DownArrowBar="",downarrow="",DownArrow="",Downarrow="",DownArrowUpArrow="",DownBreve="",downdownarrows="",downharpoonleft="",downharpoonright="",DownLeftRightVector="",DownLeftTeeVector="",DownLeftVectorBar="",DownLeftVector="",DownRightTeeVector="",DownRightVectorBar="",DownRightVector="",DownTeeArrow="",DownTee="",drbkarow="",drcorn="",drcrop="",Dscr="",dscr="",DScy="",dscy="",dsol="",Dstrok="",dstrok="",dtdot="",dtri="",dtrif="",duarr="",duhar="",dwangle="",DZcy="",dzcy="",dzigrarr="",Eacute="",eacute="",easter="",Ecaron="",ecaron="",Ecirc="",ecirc="",ecir="",ecolon="",Ecy="",ecy="",eDDot="",Edot="",edot="",eDot="",ee="",efDot="",Efr="",efr="",eg="",Egrave="",egrave="",egs="",egsdot="",el="",Element$1="",elinters="",ell="",els="",elsdot="",Emacr="",emacr="",empty="",emptyset="",EmptySmallSquare="",emptyv="",EmptyVerySmallSquare="",emsp13="",emsp14="",emsp="",ENG="",eng="",ensp="",Eogon="",eogon="",Eopf="",eopf="",epar="",eparsl="",eplus="",epsi="",Epsilon="",epsilon="",epsiv="",eqcirc="",eqcolon="",eqsim="",eqslantgtr="",eqslantless="",Equal="",equals="=",EqualTilde="",equest="",Equilibrium="",equiv="",equivDD="",eqvparsl="",erarr="",erDot="",escr="",Escr="",esdot="",Esim="",esim="",Eta="",eta="",ETH="",eth="",Euml="",euml="",euro="",excl="!",exist="",Exists="",expectation="",exponentiale="",ExponentialE="",fallingdotseq="",Fcy="",fcy="",female="",ffilig="",fflig="",ffllig="",Ffr="",ffr="",filig="",FilledSmallSquare="",FilledVerySmallSquare="",fjlig="fj",flat="",fllig="",fltns="",fnof="",Fopf="",fopf="",forall="",ForAll="",fork="",forkv="",Fouriertrf="",fpartint="",frac12="",frac13="",frac14="",frac15="",frac16="",frac18="",frac23="",frac25="",frac34="",frac35="",frac38="",frac45="",frac56="",frac58="",frac78="",frasl="",frown="",fscr="",Fscr="",gacute="",Gamma="",gamma="",Gammad="",gammad="",gap="",Gbreve="",gbreve="",Gcedil="",Gcirc="",gcirc="",Gcy="",gcy="",Gdot="",gdot="",ge="",gE="",gEl="",gel="",geq="",geqq="",geqslant="",gescc="",ges="",gesdot="",gesdoto="",gesdotol="",gesl="",gesles="",Gfr="",gfr="",gg="",Gg="",ggg="",gimel="",GJcy="",gjcy="",gla="",gl="",glE="",glj="",gnap="",gnapprox="",gne="",gnE="",gneq="",gneqq="",gnsim="",Gopf="",gopf="",grave="`",GreaterEqual="",GreaterEqualLess="",GreaterFullEqual="",GreaterGreater="",GreaterLess="",GreaterSlantEqual="",GreaterTilde="",Gscr="",gscr="",gsim="",gsime="",gsiml="",gtcc="",gtcir="",gt=">",GT=">",Gt="",gtdot="",gtlPar="",gtquest="",gtrapprox="",gtrarr="",gtrdot="",gtreqless="",gtreqqless="",gtrless="",gtrsim="",gvertneqq="",gvnE="",Hacek="",hairsp="",half="",hamilt="",HARDcy="",hardcy="",harrcir="",harr="",hArr="",harrw="",Hat="^",hbar="",Hcirc="",hcirc="",hearts="",heartsuit="",hellip="",hercon="",hfr="",Hfr="",HilbertSpace="",hksearow="",hkswarow="",hoarr="",homtht="",hookleftarrow="",hookrightarrow="",hopf="",Hopf="",horbar="",HorizontalLine="",hscr="",Hscr="",hslash="",Hstrok="",hstrok="",HumpDownHump="",HumpEqual="",hybull="",hyphen="",Iacute="",iacute="",ic="",Icirc="",icirc="",Icy="",icy="",Idot="",IEcy="",iecy="",iexcl="",iff="",ifr="",Ifr="",Igrave="",igrave="",ii="",iiiint="",iiint="",iinfin="",iiota="",IJlig="",ijlig="",Imacr="",imacr="",image$1="",ImaginaryI="",imagline="",imagpart="",imath="",Im="",imof="",imped="",Implies="",incare="",infin="",infintie="",inodot="",intcal="",int="",Int="",integers="",Integral="",intercal="",Intersection="",intlarhk="",intprod="",InvisibleComma="",InvisibleTimes="",IOcy="",iocy="",Iogon="",iogon="",Iopf="",iopf="",Iota="",iota="",iprod="",iquest="",iscr="",Iscr="",isin="",isindot="",isinE="",isins="",isinsv="",isinv="",it="",Itilde="",itilde="",Iukcy="",iukcy="",Iuml="",iuml="",Jcirc="",jcirc="",Jcy="",jcy="",Jfr="",jfr="",jmath="",Jopf="",jopf="",Jscr="",jscr="",Jsercy="",jsercy="",Jukcy="",jukcy="",Kappa="",kappa="",kappav="",Kcedil="",kcedil="",Kcy="",kcy="",Kfr="",kfr="",kgreen="",KHcy="",khcy="",KJcy="",kjcy="",Kopf="",kopf="",Kscr="",kscr="",lAarr="",Lacute="",lacute="",laemptyv="",lagran="",Lambda="",lambda="",lang="",Lang="",langd="",langle="",lap="",Laplacetrf="",laquo="",larrb="",larrbfs="",larr="",Larr="",lArr="",larrfs="",larrhk="",larrlp="",larrpl="",larrsim="",larrtl="",latail="",lAtail="",lat="",late="",lates="",lbarr="",lBarr="",lbbrk="",lbrace="{",lbrack="[",lbrke="",lbrksld="",lbrkslu="",Lcaron="",lcaron="",Lcedil="",lcedil="",lceil="",lcub="{",Lcy="",lcy="",ldca="",ldquo="",ldquor="",ldrdhar="",ldrushar="",ldsh="",le="",lE="",LeftAngleBracket="",LeftArrowBar="",leftarrow="",LeftArrow="",Leftarrow="",LeftArrowRightArrow="",leftarrowtail="",LeftCeiling="",LeftDoubleBracket="",LeftDownTeeVector="",LeftDownVectorBar="",LeftDownVector="",LeftFloor="",leftharpoondown="",leftharpoonup="",leftleftarrows="",leftrightarrow="",LeftRightArrow="",Leftrightarrow="",leftrightarrows="",leftrightharpoons="",leftrightsquigarrow="",LeftRightVector="",LeftTeeArrow="",LeftTee="",LeftTeeVector="",leftthreetimes="",LeftTriangleBar="",LeftTriangle="",LeftTriangleEqual="",LeftUpDownVector="",LeftUpTeeVector="",LeftUpVectorBar="",LeftUpVector="",LeftVectorBar="",LeftVector="",lEg="",leg="",leq="",leqq="",leqslant="",lescc="",les="",lesdot="",lesdoto="",lesdotor="",lesg="",lesges="",lessapprox="",lessdot="",lesseqgtr="",lesseqqgtr="",LessEqualGreater="",LessFullEqual="",LessGreater="",lessgtr="",LessLess="",lesssim="",LessSlantEqual="",LessTilde="",lfisht="",lfloor="",Lfr="",lfr="",lg="",lgE="",lHar="",lhard="",lharu="",lharul="",lhblk="",LJcy="",ljcy="",llarr="",ll="",Ll="",llcorner="",Lleftarrow="",llhard="",lltri="",Lmidot="",lmidot="",lmoustache="",lmoust="",lnap="",lnapprox="",lne="",lnE="",lneq="",lneqq="",lnsim="",loang="",loarr="",lobrk="",longleftarrow="",LongLeftArrow="",Longleftarrow="",longleftrightarrow="",LongLeftRightArrow="",Longleftrightarrow="",longmapsto="",longrightarrow="",LongRightArrow="",Longrightarrow="",looparrowleft="",looparrowright="",lopar="",Lopf="",lopf="",loplus="",lotimes="",lowast="",lowbar="_",LowerLeftArrow="",LowerRightArrow="",loz="",lozenge="",lozf="",lpar="(",lparlt="",lrarr="",lrcorner="",lrhar="",lrhard="",lrm="",lrtri="",lsaquo="",lscr="",Lscr="",lsh="",Lsh="",lsim="",lsime="",lsimg="",lsqb="[",lsquo="",lsquor="",Lstrok="",lstrok="",ltcc="",ltcir="",lt="<",LT="<",Lt="",ltdot="",lthree="",ltimes="",ltlarr="",ltquest="",ltri="",ltrie="",ltrif="",ltrPar="",lurdshar="",luruhar="",lvertneqq="",lvnE="",macr="",male="",malt="",maltese="",map$1="",mapsto="",mapstodown="",mapstoleft="",mapstoup="",marker="",mcomma="",Mcy="",mcy="",mdash="",mDDot="",measuredangle="",MediumSpace="",Mellintrf="",Mfr="",mfr="",mho="",micro="",midast="*",midcir="",mid="",middot="",minusb="",minus="",minusd="",minusdu="",MinusPlus="",mlcp="",mldr="",mnplus="",models="",Mopf="",mopf="",mp="",mscr="",Mscr="",mstpos="",Mu="",mu="",multimap="",mumap="",nabla="",Nacute="",nacute="",nang="",nap="",napE="",napid="",napos="",napprox="",natural="",naturals="",natur="",nbsp="",nbump="",nbumpe="",ncap="",Ncaron="",ncaron="",Ncedil="",ncedil="",ncong="",ncongdot="",ncup="",Ncy="",ncy="",ndash="",nearhk="",nearr="",neArr="",nearrow="",ne="",nedot="",NegativeMediumSpace="",NegativeThickSpace="",NegativeThinSpace="",NegativeVeryThinSpace="",nequiv="",nesear="",nesim="",NestedGreaterGreater="",NestedLessLess="",NewLine=`
`,nexist="",nexists="",Nfr="",nfr="",ngE="",nge="",ngeq="",ngeqq="",ngeqslant="",nges="",nGg="",ngsim="",nGt="",ngt="",ngtr="",nGtv="",nharr="",nhArr="",nhpar="",ni="",nis="",nisd="",niv="",NJcy="",njcy="",nlarr="",nlArr="",nldr="",nlE="",nle="",nleftarrow="",nLeftarrow="",nleftrightarrow="",nLeftrightarrow="",nleq="",nleqq="",nleqslant="",nles="",nless="",nLl="",nlsim="",nLt="",nlt="",nltri="",nltrie="",nLtv="",nmid="",NoBreak="",NonBreakingSpace="",nopf="",Nopf="",Not="",not="",NotCongruent="",NotCupCap="",NotDoubleVerticalBar="",NotElement="",NotEqual="",NotEqualTilde="",NotExists="",NotGreater="",NotGreaterEqual="",NotGreaterFullEqual="",NotGreaterGreater="",NotGreaterLess="",NotGreaterSlantEqual="",NotGreaterTilde="",NotHumpDownHump="",NotHumpEqual="",notin="",notindot="",notinE="",notinva="",notinvb="",notinvc="",NotLeftTriangleBar="",NotLeftTriangle="",NotLeftTriangleEqual="",NotLess="",NotLessEqual="",NotLessGreater="",NotLessLess="",NotLessSlantEqual="",NotLessTilde="",NotNestedGreaterGreater="",NotNestedLessLess="",notni="",notniva="",notnivb="",notnivc="",NotPrecedes="",NotPrecedesEqual="",NotPrecedesSlantEqual="",NotReverseElement="",NotRightTriangleBar="",NotRightTriangle="",NotRightTriangleEqual="",NotSquareSubset="",NotSquareSubsetEqual="",NotSquareSuperset="",NotSquareSupersetEqual="",NotSubset="",NotSubsetEqual="",NotSucceeds="",NotSucceedsEqual="",NotSucceedsSlantEqual="",NotSucceedsTilde="",NotSuperset="",NotSupersetEqual="",NotTilde="",NotTildeEqual="",NotTildeFullEqual="",NotTildeTilde="",NotVerticalBar="",nparallel="",npar="",nparsl="",npart="",npolint="",npr="",nprcue="",nprec="",npreceq="",npre="",nrarrc="",nrarr="",nrArr="",nrarrw="",nrightarrow="",nRightarrow="",nrtri="",nrtrie="",nsc="",nsccue="",nsce="",Nscr="",nscr="",nshortmid="",nshortparallel="",nsim="",nsime="",nsimeq="",nsmid="",nspar="",nsqsube="",nsqsupe="",nsub="",nsubE="",nsube="",nsubset="",nsubseteq="",nsubseteqq="",nsucc="",nsucceq="",nsup="",nsupE="",nsupe="",nsupset="",nsupseteq="",nsupseteqq="",ntgl="",Ntilde="",ntilde="",ntlg="",ntriangleleft="",ntrianglelefteq="",ntriangleright="",ntrianglerighteq="",Nu="",nu="",num="#",numero="",numsp="",nvap="",nvdash="",nvDash="",nVdash="",nVDash="",nvge="",nvgt=">",nvHarr="",nvinfin="",nvlArr="",nvle="",nvlt="<",nvltrie="",nvrArr="",nvrtrie="",nvsim="",nwarhk="",nwarr="",nwArr="",nwarrow="",nwnear="",Oacute="",oacute="",oast="",Ocirc="",ocirc="",ocir="",Ocy="",ocy="",odash="",Odblac="",odblac="",odiv="",odot="",odsold="",OElig="",oelig="",ofcir="",Ofr="",ofr="",ogon="",Ograve="",ograve="",ogt="",ohbar="",ohm="",oint="",olarr="",olcir="",olcross="",oline="",olt="",Omacr="",omacr="",Omega="",omega="",Omicron="",omicron="",omid="",ominus="",Oopf="",oopf="",opar="",OpenCurlyDoubleQuote="",OpenCurlyQuote="",operp="",oplus="",orarr="",Or="",or="",ord="",order="",orderof="",ordf="",ordm="",origof="",oror="",orslope="",orv="",oS="",Oscr="",oscr="",Oslash="",oslash="",osol="",Otilde="",otilde="",otimesas="",Otimes="",otimes="",Ouml="",ouml="",ovbar="",OverBar="",OverBrace="",OverBracket="",OverParenthesis="",para="",parallel="",par="",parsim="",parsl="",part="",PartialD="",Pcy="",pcy="",percnt="%",period=".",permil="",perp="",pertenk="",Pfr="",pfr="",Phi="",phi="",phiv="",phmmat="",phone="",Pi="",pi="",pitchfork="",piv="",planck="",planckh="",plankv="",plusacir="",plusb="",pluscir="",plus="+",plusdo="",plusdu="",pluse="",PlusMinus="",plusmn="",plussim="",plustwo="",pm="",Poincareplane="",pointint="",popf="",Popf="",pound="",prap="",Pr="",pr="",prcue="",precapprox="",prec="",preccurlyeq="",Precedes="",PrecedesEqual="",PrecedesSlantEqual="",PrecedesTilde="",preceq="",precnapprox="",precneqq="",precnsim="",pre="",prE="",precsim="",prime="",Prime="",primes="",prnap="",prnE="",prnsim="",prod="",Product="",profalar="",profline="",profsurf="",prop="",Proportional="",Proportion="",propto="",prsim="",prurel="",Pscr="",pscr="",Psi="",psi="",puncsp="",Qfr="",qfr="",qint="",qopf="",Qopf="",qprime="",Qscr="",qscr="",quaternions="",quatint="",quest="?",questeq="",quot='"',QUOT='"',rAarr="",race="",Racute="",racute="",radic="",raemptyv="",rang="",Rang="",rangd="",range="",rangle="",raquo="",rarrap="",rarrb="",rarrbfs="",rarrc="",rarr="",Rarr="",rArr="",rarrfs="",rarrhk="",rarrlp="",rarrpl="",rarrsim="",Rarrtl="",rarrtl="",rarrw="",ratail="",rAtail="",ratio="",rationals="",rbarr="",rBarr="",RBarr="",rbbrk="",rbrace="}",rbrack="]",rbrke="",rbrksld="",rbrkslu="",Rcaron="",rcaron="",Rcedil="",rcedil="",rceil="",rcub="}",Rcy="",rcy="",rdca="",rdldhar="",rdquo="",rdquor="",rdsh="",real="",realine="",realpart="",reals="",Re="",rect="",reg="",REG="",ReverseElement="",ReverseEquilibrium="",ReverseUpEquilibrium="",rfisht="",rfloor="",rfr="",Rfr="",rHar="",rhard="",rharu="",rharul="",Rho="",rho="",rhov="",RightAngleBracket="",RightArrowBar="",rightarrow="",RightArrow="",Rightarrow="",RightArrowLeftArrow="",rightarrowtail="",RightCeiling="",RightDoubleBracket="",RightDownTeeVector="",RightDownVectorBar="",RightDownVector="",RightFloor="",rightharpoondown="",rightharpoonup="",rightleftarrows="",rightleftharpoons="",rightrightarrows="",rightsquigarrow="",RightTeeArrow="",RightTee="",RightTeeVector="",rightthreetimes="",RightTriangleBar="",RightTriangle="",RightTriangleEqual="",RightUpDownVector="",RightUpTeeVector="",RightUpVectorBar="",RightUpVector="",RightVectorBar="",RightVector="",ring="",risingdotseq="",rlarr="",rlhar="",rlm="",rmoustache="",rmoust="",rnmid="",roang="",roarr="",robrk="",ropar="",ropf="",Ropf="",roplus="",rotimes="",RoundImplies="",rpar=")",rpargt="",rppolint="",rrarr="",Rrightarrow="",rsaquo="",rscr="",Rscr="",rsh="",Rsh="",rsqb="]",rsquo="",rsquor="",rthree="",rtimes="",rtri="",rtrie="",rtrif="",rtriltri="",RuleDelayed="",ruluhar="",rx="",Sacute="",sacute="",sbquo="",scap="",Scaron="",scaron="",Sc="",sc="",sccue="",sce="",scE="",Scedil="",scedil="",Scirc="",scirc="",scnap="",scnE="",scnsim="",scpolint="",scsim="",Scy="",scy="",sdotb="",sdot="",sdote="",searhk="",searr="",seArr="",searrow="",sect="",semi=";",seswar="",setminus="",setmn="",sext="",Sfr="",sfr="",sfrown="",sharp="",SHCHcy="",shchcy="",SHcy="",shcy="",ShortDownArrow="",ShortLeftArrow="",shortmid="",shortparallel="",ShortRightArrow="",ShortUpArrow="",shy="",Sigma="",sigma="",sigmaf="",sigmav="",sim="",simdot="",sime="",simeq="",simg="",simgE="",siml="",simlE="",simne="",simplus="",simrarr="",slarr="",SmallCircle="",smallsetminus="",smashp="",smeparsl="",smid="",smile="",smt="",smte="",smtes="",SOFTcy="",softcy="",solbar="",solb="",sol="/",Sopf="",sopf="",spades="",spadesuit="",spar="",sqcap="",sqcaps="",sqcup="",sqcups="",Sqrt="",sqsub="",sqsube="",sqsubset="",sqsubseteq="",sqsup="",sqsupe="",sqsupset="",sqsupseteq="",square="",Square="",SquareIntersection="",SquareSubset="",SquareSubsetEqual="",SquareSuperset="",SquareSupersetEqual="",SquareUnion="",squarf="",squ="",squf="",srarr="",Sscr="",sscr="",ssetmn="",ssmile="",sstarf="",Star="",star="",starf="",straightepsilon="",straightphi="",strns="",sub="",Sub="",subdot="",subE="",sube="",subedot="",submult="",subnE="",subne="",subplus="",subrarr="",subset="",Subset="",subseteq="",subseteqq="",SubsetEqual="",subsetneq="",subsetneqq="",subsim="",subsub="",subsup="",succapprox="",succ="",succcurlyeq="",Succeeds="",SucceedsEqual="",SucceedsSlantEqual="",SucceedsTilde="",succeq="",succnapprox="",succneqq="",succnsim="",succsim="",SuchThat="",sum="",Sum="",sung="",sup1="",sup2="",sup3="",sup="",Sup="",supdot="",supdsub="",supE="",supe="",supedot="",Superset="",SupersetEqual="",suphsol="",suphsub="",suplarr="",supmult="",supnE="",supne="",supplus="",supset="",Supset="",supseteq="",supseteqq="",supsetneq="",supsetneqq="",supsim="",supsub="",supsup="",swarhk="",swarr="",swArr="",swarrow="",swnwar="",szlig="",Tab="	",target="",Tau="",tau="",tbrk="",Tcaron="",tcaron="",Tcedil="",tcedil="",Tcy="",tcy="",tdot="",telrec="",Tfr="",tfr="",there4="",therefore="",Therefore="",Theta="",theta="",thetasym="",thetav="",thickapprox="",thicksim="",ThickSpace="",ThinSpace="",thinsp="",thkap="",thksim="",THORN="",thorn="",tilde="",Tilde="",TildeEqual="",TildeFullEqual="",TildeTilde="",timesbar="",timesb="",times="",timesd="",tint="",toea="",topbot="",topcir="",top="",Topf="",topf="",topfork="",tosa="",tprime="",trade="",TRADE="",triangle="",triangledown="",triangleleft="",trianglelefteq="",triangleq="",triangleright="",trianglerighteq="",tridot="",trie="",triminus="",TripleDot="",triplus="",trisb="",tritime="",trpezium="",Tscr="",tscr="",TScy="",tscy="",TSHcy="",tshcy="",Tstrok="",tstrok="",twixt="",twoheadleftarrow="",twoheadrightarrow="",Uacute="",uacute="",uarr="",Uarr="",uArr="",Uarrocir="",Ubrcy="",ubrcy="",Ubreve="",ubreve="",Ucirc="",ucirc="",Ucy="",ucy="",udarr="",Udblac="",udblac="",udhar="",ufisht="",Ufr="",ufr="",Ugrave="",ugrave="",uHar="",uharl="",uharr="",uhblk="",ulcorn="",ulcorner="",ulcrop="",ultri="",Umacr="",umacr="",uml="",UnderBar="_",UnderBrace="",UnderBracket="",UnderParenthesis="",Union="",UnionPlus="",Uogon="",uogon="",Uopf="",uopf="",UpArrowBar="",uparrow="",UpArrow="",Uparrow="",UpArrowDownArrow="",updownarrow="",UpDownArrow="",Updownarrow="",UpEquilibrium="",upharpoonleft="",upharpoonright="",uplus="",UpperLeftArrow="",UpperRightArrow="",upsi="",Upsi="",upsih="",Upsilon="",upsilon="",UpTeeArrow="",UpTee="",upuparrows="",urcorn="",urcorner="",urcrop="",Uring="",uring="",urtri="",Uscr="",uscr="",utdot="",Utilde="",utilde="",utri="",utrif="",uuarr="",Uuml="",uuml="",uwangle="",vangrt="",varepsilon="",varkappa="",varnothing="",varphi="",varpi="",varpropto="",varr="",vArr="",varrho="",varsigma="",varsubsetneq="",varsubsetneqq="",varsupsetneq="",varsupsetneqq="",vartheta="",vartriangleleft="",vartriangleright="",vBar="",Vbar="",vBarv="",Vcy="",vcy="",vdash="",vDash="",Vdash="",VDash="",Vdashl="",veebar="",vee="",Vee="",veeeq="",vellip="",verbar="|",Verbar="",vert="|",Vert="",VerticalBar="",VerticalLine="|",VerticalSeparator="",VerticalTilde="",VeryThinSpace="",Vfr="",vfr="",vltri="",vnsub="",vnsup="",Vopf="",vopf="",vprop="",vrtri="",Vscr="",vscr="",vsubnE="",vsubne="",vsupnE="",vsupne="",Vvdash="",vzigzag="",Wcirc="",wcirc="",wedbar="",wedge="",Wedge="",wedgeq="",weierp="",Wfr="",wfr="",Wopf="",wopf="",wp="",wr="",wreath="",Wscr="",wscr="",xcap="",xcirc="",xcup="",xdtri="",Xfr="",xfr="",xharr="",xhArr="",Xi="",xi="",xlarr="",xlArr="",xmap="",xnis="",xodot="",Xopf="",xopf="",xoplus="",xotime="",xrarr="",xrArr="",Xscr="",xscr="",xsqcup="",xuplus="",xutri="",xvee="",xwedge="",Yacute="",yacute="",YAcy="",yacy="",Ycirc="",ycirc="",Ycy="",ycy="",yen="",Yfr="",yfr="",YIcy="",yicy="",Yopf="",yopf="",Yscr="",yscr="",YUcy="",yucy="",yuml="",Yuml="",Zacute="",zacute="",Zcaron="",zcaron="",Zcy="",zcy="",Zdot="",zdot="",zeetrf="",ZeroWidthSpace="",Zeta="",zeta="",zfr="",Zfr="",ZHcy="",zhcy="",zigrarr="",zopf="",Zopf="",Zscr="",zscr="",zwj="",zwnj="",require$$0={Aacute,aacute,Abreve,abreve,ac,acd,acE,Acirc,acirc,acute,Acy,acy,AElig,aelig,af,Afr,afr,Agrave,agrave,alefsym,aleph,Alpha,alpha,Amacr,amacr,amalg,amp,AMP,andand,And,and,andd,andslope,andv,ang,ange,angle,angmsdaa,angmsdab,angmsdac,angmsdad,angmsdae,angmsdaf,angmsdag,angmsdah,angmsd,angrt,angrtvb,angrtvbd,angsph,angst,angzarr,Aogon,aogon,Aopf,aopf,apacir,ap,apE,ape,apid,apos,ApplyFunction,approx,approxeq,Aring,aring,Ascr,ascr,Assign,ast,asymp,asympeq,Atilde,atilde,Auml,auml,awconint,awint,backcong,backepsilon,backprime,backsim,backsimeq,Backslash,Barv,barvee,barwed,Barwed,barwedge,bbrk,bbrktbrk,bcong,Bcy,bcy,bdquo,becaus,because,Because,bemptyv,bepsi,bernou,Bernoullis,Beta,beta,beth,between,Bfr,bfr,bigcap,bigcirc,bigcup,bigodot,bigoplus,bigotimes,bigsqcup,bigstar,bigtriangledown,bigtriangleup,biguplus,bigvee,bigwedge,bkarow,blacklozenge,blacksquare,blacktriangle,blacktriangledown,blacktriangleleft,blacktriangleright,blank,blk12,blk14,blk34,block:block$1,bne,bnequiv,bNot,bnot,Bopf,bopf,bot,bottom,bowtie,boxbox,boxdl,boxdL,boxDl,boxDL,boxdr,boxdR,boxDr,boxDR,boxh,boxH,boxhd,boxHd,boxhD,boxHD,boxhu,boxHu,boxhU,boxHU,boxminus,boxplus,boxtimes,boxul,boxuL,boxUl,boxUL,boxur,boxuR,boxUr,boxUR,boxv,boxV,boxvh,boxvH,boxVh,boxVH,boxvl,boxvL,boxVl,boxVL,boxvr,boxvR,boxVr,boxVR,bprime,breve,Breve,brvbar,bscr,Bscr,bsemi,bsim,bsime,bsolb,bsol,bsolhsub,bull,bullet,bump,bumpE,bumpe,Bumpeq,bumpeq,Cacute,cacute,capand,capbrcup,capcap,cap,Cap,capcup,capdot,CapitalDifferentialD,caps,caret,caron,Cayleys,ccaps,Ccaron,ccaron,Ccedil,ccedil,Ccirc,ccirc,Cconint,ccups,ccupssm,Cdot,cdot,cedil,Cedilla,cemptyv,cent,centerdot,CenterDot,cfr,Cfr,CHcy,chcy,check,checkmark,Chi,chi,circ,circeq,circlearrowleft,circlearrowright,circledast,circledcirc,circleddash,CircleDot,circledR,circledS,CircleMinus,CirclePlus,CircleTimes,cir,cirE,cire,cirfnint,cirmid,cirscir,ClockwiseContourIntegral,CloseCurlyDoubleQuote,CloseCurlyQuote,clubs,clubsuit,colon,Colon,Colone,colone,coloneq,comma,commat,comp,compfn,complement,complexes,cong,congdot,Congruent,conint,Conint,ContourIntegral,copf,Copf,coprod,Coproduct,copy,COPY,copysr,CounterClockwiseContourIntegral,crarr,cross,Cross,Cscr,cscr,csub,csube,csup,csupe,ctdot,cudarrl,cudarrr,cuepr,cuesc,cularr,cularrp,cupbrcap,cupcap,CupCap,cup,Cup,cupcup,cupdot,cupor,cups,curarr,curarrm,curlyeqprec,curlyeqsucc,curlyvee,curlywedge,curren,curvearrowleft,curvearrowright,cuvee,cuwed,cwconint,cwint,cylcty,dagger,Dagger,daleth,darr,Darr,dArr,dash,Dashv,dashv,dbkarow,dblac,Dcaron,dcaron,Dcy,dcy,ddagger,ddarr,DD,dd,DDotrahd,ddotseq,deg,Del,Delta,delta,demptyv,dfisht,Dfr,dfr,dHar,dharl,dharr,DiacriticalAcute,DiacriticalDot,DiacriticalDoubleAcute,DiacriticalGrave,DiacriticalTilde,diam,diamond,Diamond,diamondsuit,diams,die,DifferentialD,digamma,disin,div,divide,divideontimes,divonx,DJcy,djcy,dlcorn,dlcrop,dollar,Dopf,dopf,Dot,dot,DotDot,doteq,doteqdot,DotEqual,dotminus,dotplus,dotsquare,doublebarwedge,DoubleContourIntegral,DoubleDot,DoubleDownArrow,DoubleLeftArrow,DoubleLeftRightArrow,DoubleLeftTee,DoubleLongLeftArrow,DoubleLongLeftRightArrow,DoubleLongRightArrow,DoubleRightArrow,DoubleRightTee,DoubleUpArrow,DoubleUpDownArrow,DoubleVerticalBar,DownArrowBar,downarrow,DownArrow,Downarrow,DownArrowUpArrow,DownBreve,downdownarrows,downharpoonleft,downharpoonright,DownLeftRightVector,DownLeftTeeVector,DownLeftVectorBar,DownLeftVector,DownRightTeeVector,DownRightVectorBar,DownRightVector,DownTeeArrow,DownTee,drbkarow,drcorn,drcrop,Dscr,dscr,DScy,dscy,dsol,Dstrok,dstrok,dtdot,dtri,dtrif,duarr,duhar,dwangle,DZcy,dzcy,dzigrarr,Eacute,eacute,easter,Ecaron,ecaron,Ecirc,ecirc,ecir,ecolon,Ecy,ecy,eDDot,Edot,edot,eDot,ee,efDot,Efr,efr,eg,Egrave,egrave,egs,egsdot,el,Element:Element$1,elinters,ell,els,elsdot,Emacr,emacr,empty,emptyset,EmptySmallSquare,emptyv,EmptyVerySmallSquare,emsp13,emsp14,emsp,ENG,eng,ensp,Eogon,eogon,Eopf,eopf,epar,eparsl,eplus,epsi,Epsilon,epsilon,epsiv,eqcirc,eqcolon,eqsim,eqslantgtr,eqslantless,Equal,equals,EqualTilde,equest,Equilibrium,equiv,equivDD,eqvparsl,erarr,erDot,escr,Escr,esdot,Esim,esim,Eta,eta,ETH,eth,Euml,euml,euro,excl,exist,Exists,expectation,exponentiale,ExponentialE,fallingdotseq,Fcy,fcy,female,ffilig,fflig,ffllig,Ffr,ffr,filig,FilledSmallSquare,FilledVerySmallSquare,fjlig,flat,fllig,fltns,fnof,Fopf,fopf,forall,ForAll,fork,forkv,Fouriertrf,fpartint,frac12,frac13,frac14,frac15,frac16,frac18,frac23,frac25,frac34,frac35,frac38,frac45,frac56,frac58,frac78,frasl,frown,fscr,Fscr,gacute,Gamma,gamma,Gammad,gammad,gap,Gbreve,gbreve,Gcedil,Gcirc,gcirc,Gcy,gcy,Gdot,gdot,ge,gE,gEl,gel,geq,geqq,geqslant,gescc,ges,gesdot,gesdoto,gesdotol,gesl,gesles,Gfr,gfr,gg,Gg,ggg,gimel,GJcy,gjcy,gla,gl,glE,glj,gnap,gnapprox,gne,gnE,gneq,gneqq,gnsim,Gopf,gopf,grave,GreaterEqual,GreaterEqualLess,GreaterFullEqual,GreaterGreater,GreaterLess,GreaterSlantEqual,GreaterTilde,Gscr,gscr,gsim,gsime,gsiml,gtcc,gtcir,gt,GT,Gt,gtdot,gtlPar,gtquest,gtrapprox,gtrarr,gtrdot,gtreqless,gtreqqless,gtrless,gtrsim,gvertneqq,gvnE,Hacek,hairsp,half,hamilt,HARDcy,hardcy,harrcir,harr,hArr,harrw,Hat,hbar,Hcirc,hcirc,hearts,heartsuit,hellip,hercon,hfr,Hfr,HilbertSpace,hksearow,hkswarow,hoarr,homtht,hookleftarrow,hookrightarrow,hopf,Hopf,horbar,HorizontalLine,hscr,Hscr,hslash,Hstrok,hstrok,HumpDownHump,HumpEqual,hybull,hyphen,Iacute,iacute,ic,Icirc,icirc,Icy,icy,Idot,IEcy,iecy,iexcl,iff,ifr,Ifr,Igrave,igrave,ii,iiiint,iiint,iinfin,iiota,IJlig,ijlig,Imacr,imacr,image:image$1,ImaginaryI,imagline,imagpart,imath,Im,imof,imped,Implies,incare,in:"",infin,infintie,inodot,intcal,int,Int,integers,Integral,intercal,Intersection,intlarhk,intprod,InvisibleComma,InvisibleTimes,IOcy,iocy,Iogon,iogon,Iopf,iopf,Iota,iota,iprod,iquest,iscr,Iscr,isin,isindot,isinE,isins,isinsv,isinv,it,Itilde,itilde,Iukcy,iukcy,Iuml,iuml,Jcirc,jcirc,Jcy,jcy,Jfr,jfr,jmath,Jopf,jopf,Jscr,jscr,Jsercy,jsercy,Jukcy,jukcy,Kappa,kappa,kappav,Kcedil,kcedil,Kcy,kcy,Kfr,kfr,kgreen,KHcy,khcy,KJcy,kjcy,Kopf,kopf,Kscr,kscr,lAarr,Lacute,lacute,laemptyv,lagran,Lambda,lambda,lang,Lang,langd,langle,lap,Laplacetrf,laquo,larrb,larrbfs,larr,Larr,lArr,larrfs,larrhk,larrlp,larrpl,larrsim,larrtl,latail,lAtail,lat,late,lates,lbarr,lBarr,lbbrk,lbrace,lbrack,lbrke,lbrksld,lbrkslu,Lcaron,lcaron,Lcedil,lcedil,lceil,lcub,Lcy,lcy,ldca,ldquo,ldquor,ldrdhar,ldrushar,ldsh,le,lE,LeftAngleBracket,LeftArrowBar,leftarrow,LeftArrow,Leftarrow,LeftArrowRightArrow,leftarrowtail,LeftCeiling,LeftDoubleBracket,LeftDownTeeVector,LeftDownVectorBar,LeftDownVector,LeftFloor,leftharpoondown,leftharpoonup,leftleftarrows,leftrightarrow,LeftRightArrow,Leftrightarrow,leftrightarrows,leftrightharpoons,leftrightsquigarrow,LeftRightVector,LeftTeeArrow,LeftTee,LeftTeeVector,leftthreetimes,LeftTriangleBar,LeftTriangle,LeftTriangleEqual,LeftUpDownVector,LeftUpTeeVector,LeftUpVectorBar,LeftUpVector,LeftVectorBar,LeftVector,lEg,leg,leq,leqq,leqslant,lescc,les,lesdot,lesdoto,lesdotor,lesg,lesges,lessapprox,lessdot,lesseqgtr,lesseqqgtr,LessEqualGreater,LessFullEqual,LessGreater,lessgtr,LessLess,lesssim,LessSlantEqual,LessTilde,lfisht,lfloor,Lfr,lfr,lg,lgE,lHar,lhard,lharu,lharul,lhblk,LJcy,ljcy,llarr,ll,Ll,llcorner,Lleftarrow,llhard,lltri,Lmidot,lmidot,lmoustache,lmoust,lnap,lnapprox,lne,lnE,lneq,lneqq,lnsim,loang,loarr,lobrk,longleftarrow,LongLeftArrow,Longleftarrow,longleftrightarrow,LongLeftRightArrow,Longleftrightarrow,longmapsto,longrightarrow,LongRightArrow,Longrightarrow,looparrowleft,looparrowright,lopar,Lopf,lopf,loplus,lotimes,lowast,lowbar,LowerLeftArrow,LowerRightArrow,loz,lozenge,lozf,lpar,lparlt,lrarr,lrcorner,lrhar,lrhard,lrm,lrtri,lsaquo,lscr,Lscr,lsh,Lsh,lsim,lsime,lsimg,lsqb,lsquo,lsquor,Lstrok,lstrok,ltcc,ltcir,lt,LT,Lt,ltdot,lthree,ltimes,ltlarr,ltquest,ltri,ltrie,ltrif,ltrPar,lurdshar,luruhar,lvertneqq,lvnE,macr,male,malt,maltese,Map:"",map:map$1,mapsto,mapstodown,mapstoleft,mapstoup,marker,mcomma,Mcy,mcy,mdash,mDDot,measuredangle,MediumSpace,Mellintrf,Mfr,mfr,mho,micro,midast,midcir,mid,middot,minusb,minus,minusd,minusdu,MinusPlus,mlcp,mldr,mnplus,models,Mopf,mopf,mp,mscr,Mscr,mstpos,Mu,mu,multimap,mumap,nabla,Nacute,nacute,nang,nap,napE,napid,napos,napprox,natural,naturals,natur,nbsp,nbump,nbumpe,ncap,Ncaron,ncaron,Ncedil,ncedil,ncong,ncongdot,ncup,Ncy,ncy,ndash,nearhk,nearr,neArr,nearrow,ne,nedot,NegativeMediumSpace,NegativeThickSpace,NegativeThinSpace,NegativeVeryThinSpace,nequiv,nesear,nesim,NestedGreaterGreater,NestedLessLess,NewLine,nexist,nexists,Nfr,nfr,ngE,nge,ngeq,ngeqq,ngeqslant,nges,nGg,ngsim,nGt,ngt,ngtr,nGtv,nharr,nhArr,nhpar,ni,nis,nisd,niv,NJcy,njcy,nlarr,nlArr,nldr,nlE,nle,nleftarrow,nLeftarrow,nleftrightarrow,nLeftrightarrow,nleq,nleqq,nleqslant,nles,nless,nLl,nlsim,nLt,nlt,nltri,nltrie,nLtv,nmid,NoBreak,NonBreakingSpace,nopf,Nopf,Not,not,NotCongruent,NotCupCap,NotDoubleVerticalBar,NotElement,NotEqual,NotEqualTilde,NotExists,NotGreater,NotGreaterEqual,NotGreaterFullEqual,NotGreaterGreater,NotGreaterLess,NotGreaterSlantEqual,NotGreaterTilde,NotHumpDownHump,NotHumpEqual,notin,notindot,notinE,notinva,notinvb,notinvc,NotLeftTriangleBar,NotLeftTriangle,NotLeftTriangleEqual,NotLess,NotLessEqual,NotLessGreater,NotLessLess,NotLessSlantEqual,NotLessTilde,NotNestedGreaterGreater,NotNestedLessLess,notni,notniva,notnivb,notnivc,NotPrecedes,NotPrecedesEqual,NotPrecedesSlantEqual,NotReverseElement,NotRightTriangleBar,NotRightTriangle,NotRightTriangleEqual,NotSquareSubset,NotSquareSubsetEqual,NotSquareSuperset,NotSquareSupersetEqual,NotSubset,NotSubsetEqual,NotSucceeds,NotSucceedsEqual,NotSucceedsSlantEqual,NotSucceedsTilde,NotSuperset,NotSupersetEqual,NotTilde,NotTildeEqual,NotTildeFullEqual,NotTildeTilde,NotVerticalBar,nparallel,npar,nparsl,npart,npolint,npr,nprcue,nprec,npreceq,npre,nrarrc,nrarr,nrArr,nrarrw,nrightarrow,nRightarrow,nrtri,nrtrie,nsc,nsccue,nsce,Nscr,nscr,nshortmid,nshortparallel,nsim,nsime,nsimeq,nsmid,nspar,nsqsube,nsqsupe,nsub,nsubE,nsube,nsubset,nsubseteq,nsubseteqq,nsucc,nsucceq,nsup,nsupE,nsupe,nsupset,nsupseteq,nsupseteqq,ntgl,Ntilde,ntilde,ntlg,ntriangleleft,ntrianglelefteq,ntriangleright,ntrianglerighteq,Nu,nu,num,numero,numsp,nvap,nvdash,nvDash,nVdash,nVDash,nvge,nvgt,nvHarr,nvinfin,nvlArr,nvle,nvlt,nvltrie,nvrArr,nvrtrie,nvsim,nwarhk,nwarr,nwArr,nwarrow,nwnear,Oacute,oacute,oast,Ocirc,ocirc,ocir,Ocy,ocy,odash,Odblac,odblac,odiv,odot,odsold,OElig,oelig,ofcir,Ofr,ofr,ogon,Ograve,ograve,ogt,ohbar,ohm,oint,olarr,olcir,olcross,oline,olt,Omacr,omacr,Omega,omega,Omicron,omicron,omid,ominus,Oopf,oopf,opar,OpenCurlyDoubleQuote,OpenCurlyQuote,operp,oplus,orarr,Or,or,ord,order,orderof,ordf,ordm,origof,oror,orslope,orv,oS,Oscr,oscr,Oslash,oslash,osol,Otilde,otilde,otimesas,Otimes,otimes,Ouml,ouml,ovbar,OverBar,OverBrace,OverBracket,OverParenthesis,para,parallel,par,parsim,parsl,part,PartialD,Pcy,pcy,percnt,period,permil,perp,pertenk,Pfr,pfr,Phi,phi,phiv,phmmat,phone,Pi,pi,pitchfork,piv,planck,planckh,plankv,plusacir,plusb,pluscir,plus,plusdo,plusdu,pluse,PlusMinus,plusmn,plussim,plustwo,pm,Poincareplane,pointint,popf,Popf,pound,prap,Pr,pr,prcue,precapprox,prec,preccurlyeq,Precedes,PrecedesEqual,PrecedesSlantEqual,PrecedesTilde,preceq,precnapprox,precneqq,precnsim,pre,prE,precsim,prime,Prime,primes,prnap,prnE,prnsim,prod,Product,profalar,profline,profsurf,prop,Proportional,Proportion,propto,prsim,prurel,Pscr,pscr,Psi,psi,puncsp,Qfr,qfr,qint,qopf,Qopf,qprime,Qscr,qscr,quaternions,quatint,quest,questeq,quot,QUOT,rAarr,race,Racute,racute,radic,raemptyv,rang,Rang,rangd,range,rangle,raquo,rarrap,rarrb,rarrbfs,rarrc,rarr,Rarr,rArr,rarrfs,rarrhk,rarrlp,rarrpl,rarrsim,Rarrtl,rarrtl,rarrw,ratail,rAtail,ratio,rationals,rbarr,rBarr,RBarr,rbbrk,rbrace,rbrack,rbrke,rbrksld,rbrkslu,Rcaron,rcaron,Rcedil,rcedil,rceil,rcub,Rcy,rcy,rdca,rdldhar,rdquo,rdquor,rdsh,real,realine,realpart,reals,Re,rect,reg,REG,ReverseElement,ReverseEquilibrium,ReverseUpEquilibrium,rfisht,rfloor,rfr,Rfr,rHar,rhard,rharu,rharul,Rho,rho,rhov,RightAngleBracket,RightArrowBar,rightarrow,RightArrow,Rightarrow,RightArrowLeftArrow,rightarrowtail,RightCeiling,RightDoubleBracket,RightDownTeeVector,RightDownVectorBar,RightDownVector,RightFloor,rightharpoondown,rightharpoonup,rightleftarrows,rightleftharpoons,rightrightarrows,rightsquigarrow,RightTeeArrow,RightTee,RightTeeVector,rightthreetimes,RightTriangleBar,RightTriangle,RightTriangleEqual,RightUpDownVector,RightUpTeeVector,RightUpVectorBar,RightUpVector,RightVectorBar,RightVector,ring,risingdotseq,rlarr,rlhar,rlm,rmoustache,rmoust,rnmid,roang,roarr,robrk,ropar,ropf,Ropf,roplus,rotimes,RoundImplies,rpar,rpargt,rppolint,rrarr,Rrightarrow,rsaquo,rscr,Rscr,rsh,Rsh,rsqb,rsquo,rsquor,rthree,rtimes,rtri,rtrie,rtrif,rtriltri,RuleDelayed,ruluhar,rx,Sacute,sacute,sbquo,scap,Scaron,scaron,Sc,sc,sccue,sce,scE,Scedil,scedil,Scirc,scirc,scnap,scnE,scnsim,scpolint,scsim,Scy,scy,sdotb,sdot,sdote,searhk,searr,seArr,searrow,sect,semi,seswar,setminus,setmn,sext,Sfr,sfr,sfrown,sharp,SHCHcy,shchcy,SHcy,shcy,ShortDownArrow,ShortLeftArrow,shortmid,shortparallel,ShortRightArrow,ShortUpArrow,shy,Sigma,sigma,sigmaf,sigmav,sim,simdot,sime,simeq,simg,simgE,siml,simlE,simne,simplus,simrarr,slarr,SmallCircle,smallsetminus,smashp,smeparsl,smid,smile,smt,smte,smtes,SOFTcy,softcy,solbar,solb,sol,Sopf,sopf,spades,spadesuit,spar,sqcap,sqcaps,sqcup,sqcups,Sqrt,sqsub,sqsube,sqsubset,sqsubseteq,sqsup,sqsupe,sqsupset,sqsupseteq,square,Square,SquareIntersection,SquareSubset,SquareSubsetEqual,SquareSuperset,SquareSupersetEqual,SquareUnion,squarf,squ,squf,srarr,Sscr,sscr,ssetmn,ssmile,sstarf,Star,star,starf,straightepsilon,straightphi,strns,sub,Sub,subdot,subE,sube,subedot,submult,subnE,subne,subplus,subrarr,subset,Subset,subseteq,subseteqq,SubsetEqual,subsetneq,subsetneqq,subsim,subsub,subsup,succapprox,succ,succcurlyeq,Succeeds,SucceedsEqual,SucceedsSlantEqual,SucceedsTilde,succeq,succnapprox,succneqq,succnsim,succsim,SuchThat,sum,Sum,sung,sup1,sup2,sup3,sup,Sup,supdot,supdsub,supE,supe,supedot,Superset,SupersetEqual,suphsol,suphsub,suplarr,supmult,supnE,supne,supplus,supset,Supset,supseteq,supseteqq,supsetneq,supsetneqq,supsim,supsub,supsup,swarhk,swarr,swArr,swarrow,swnwar,szlig,Tab,target,Tau,tau,tbrk,Tcaron,tcaron,Tcedil,tcedil,Tcy,tcy,tdot,telrec,Tfr,tfr,there4,therefore,Therefore,Theta,theta,thetasym,thetav,thickapprox,thicksim,ThickSpace,ThinSpace,thinsp,thkap,thksim,THORN,thorn,tilde,Tilde,TildeEqual,TildeFullEqual,TildeTilde,timesbar,timesb,times,timesd,tint,toea,topbot,topcir,top,Topf,topf,topfork,tosa,tprime,trade,TRADE,triangle,triangledown,triangleleft,trianglelefteq,triangleq,triangleright,trianglerighteq,tridot,trie,triminus,TripleDot,triplus,trisb,tritime,trpezium,Tscr,tscr,TScy,tscy,TSHcy,tshcy,Tstrok,tstrok,twixt,twoheadleftarrow,twoheadrightarrow,Uacute,uacute,uarr,Uarr,uArr,Uarrocir,Ubrcy,ubrcy,Ubreve,ubreve,Ucirc,ucirc,Ucy,ucy,udarr,Udblac,udblac,udhar,ufisht,Ufr,ufr,Ugrave,ugrave,uHar,uharl,uharr,uhblk,ulcorn,ulcorner,ulcrop,ultri,Umacr,umacr,uml,UnderBar,UnderBrace,UnderBracket,UnderParenthesis,Union,UnionPlus,Uogon,uogon,Uopf,uopf,UpArrowBar,uparrow,UpArrow,Uparrow,UpArrowDownArrow,updownarrow,UpDownArrow,Updownarrow,UpEquilibrium,upharpoonleft,upharpoonright,uplus,UpperLeftArrow,UpperRightArrow,upsi,Upsi,upsih,Upsilon,upsilon,UpTeeArrow,UpTee,upuparrows,urcorn,urcorner,urcrop,Uring,uring,urtri,Uscr,uscr,utdot,Utilde,utilde,utri,utrif,uuarr,Uuml,uuml,uwangle,vangrt,varepsilon,varkappa,varnothing,varphi,varpi,varpropto,varr,vArr,varrho,varsigma,varsubsetneq,varsubsetneqq,varsupsetneq,varsupsetneqq,vartheta,vartriangleleft,vartriangleright,vBar,Vbar,vBarv,Vcy,vcy,vdash,vDash,Vdash,VDash,Vdashl,veebar,vee,Vee,veeeq,vellip,verbar,Verbar,vert,Vert,VerticalBar,VerticalLine,VerticalSeparator,VerticalTilde,VeryThinSpace,Vfr,vfr,vltri,vnsub,vnsup,Vopf,vopf,vprop,vrtri,Vscr,vscr,vsubnE,vsubne,vsupnE,vsupne,Vvdash,vzigzag,Wcirc,wcirc,wedbar,wedge,Wedge,wedgeq,weierp,Wfr,wfr,Wopf,wopf,wp,wr,wreath,Wscr,wscr,xcap,xcirc,xcup,xdtri,Xfr,xfr,xharr,xhArr,Xi,xi,xlarr,xlArr,xmap,xnis,xodot,Xopf,xopf,xoplus,xotime,xrarr,xrArr,Xscr,xscr,xsqcup,xuplus,xutri,xvee,xwedge,Yacute,yacute,YAcy,yacy,Ycirc,ycirc,Ycy,ycy,yen,Yfr,yfr,YIcy,yicy,Yopf,yopf,Yscr,yscr,YUcy,yucy,yuml,Yuml,Zacute,zacute,Zcaron,zcaron,Zcy,zcy,Zdot,zdot,zeetrf,ZeroWidthSpace,Zeta,zeta,zfr,Zfr,ZHcy,zhcy,zigrarr,zopf,Zopf,Zscr,zscr,zwj,zwnj};var entities$1=require$$0,regex$4=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,mdurl$1={},encodeCache={};function getEncodeCache(s){var e,o,a=encodeCache[s];if(a)return a;for(a=encodeCache[s]=[],e=0;e<128;e++)o=String.fromCharCode(e),/^[0-9a-z]$/i.test(o)?a.push(o):a.push("%"+("0"+e.toString(16).toUpperCase()).slice(-2));for(e=0;e<s.length;e++)a[s.charCodeAt(e)]=s[e];return a}function encode$1(s,e,o){var a,c,h,g,b,_="";for(typeof e!="string"&&(o=e,e=encode$1.defaultChars),typeof o>"u"&&(o=!0),b=getEncodeCache(e),a=0,c=s.length;a<c;a++){if(h=s.charCodeAt(a),o&&h===37&&a+2<c&&/^[0-9a-f]{2}$/i.test(s.slice(a+1,a+3))){_+=s.slice(a,a+3),a+=2;continue}if(h<128){_+=b[h];continue}if(h>=55296&&h<=57343){if(h>=55296&&h<=56319&&a+1<c&&(g=s.charCodeAt(a+1),g>=56320&&g<=57343)){_+=encodeURIComponent(s[a]+s[a+1]),a++;continue}_+="%EF%BF%BD";continue}_+=encodeURIComponent(s[a])}return _}encode$1.defaultChars=";/?:@&=+$,-_.!~*'()#";encode$1.componentChars="-_.!~*'()";var encode_1=encode$1,decodeCache={};function getDecodeCache(s){var e,o,a=decodeCache[s];if(a)return a;for(a=decodeCache[s]=[],e=0;e<128;e++)o=String.fromCharCode(e),a.push(o);for(e=0;e<s.length;e++)o=s.charCodeAt(e),a[o]="%"+("0"+o.toString(16).toUpperCase()).slice(-2);return a}function decode$1(s,e){var o;return typeof e!="string"&&(e=decode$1.defaultChars),o=getDecodeCache(e),s.replace(/(%[a-f0-9]{2})+/gi,function(a){var c,h,g,b,_,j,$,_e="";for(c=0,h=a.length;c<h;c+=3){if(g=parseInt(a.slice(c+1,c+3),16),g<128){_e+=o[g];continue}if((g&224)===192&&c+3<h&&(b=parseInt(a.slice(c+4,c+6),16),(b&192)===128)){$=g<<6&1984|b&63,$<128?_e+="":_e+=String.fromCharCode($),c+=3;continue}if((g&240)===224&&c+6<h&&(b=parseInt(a.slice(c+4,c+6),16),_=parseInt(a.slice(c+7,c+9),16),(b&192)===128&&(_&192)===128)){$=g<<12&61440|b<<6&4032|_&63,$<2048||$>=55296&&$<=57343?_e+="":_e+=String.fromCharCode($),c+=6;continue}if((g&248)===240&&c+9<h&&(b=parseInt(a.slice(c+4,c+6),16),_=parseInt(a.slice(c+7,c+9),16),j=parseInt(a.slice(c+10,c+12),16),(b&192)===128&&(_&192)===128&&(j&192)===128)){$=g<<18&1835008|b<<12&258048|_<<6&4032|j&63,$<65536||$>1114111?_e+="":($-=65536,_e+=String.fromCharCode(55296+($>>10),56320+($&1023))),c+=9;continue}_e+=""}return _e})}decode$1.defaultChars=";/?:@&=+$,#";decode$1.componentChars="";var decode_1=decode$1,format=function s(e){var o="";return o+=e.protocol||"",o+=e.slashes?"//":"",o+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?o+="["+e.hostname+"]":o+=e.hostname||"",o+=e.port?":"+e.port:"",o+=e.pathname||"",o+=e.search||"",o+=e.hash||"",o};function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r",`
`,"	"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function urlParse(s,e){if(s&&s instanceof Url)return s;var o=new Url;return o.parse(s,e),o}Url.prototype.parse=function(s,e){var o,a,c,h,g,b=s;if(b=b.trim(),!e&&s.split("#").length===1){var _=simplePathPattern.exec(b);if(_)return this.pathname=_[1],_[2]&&(this.search=_[2]),this}var j=protocolPattern.exec(b);if(j&&(j=j[0],c=j.toLowerCase(),this.protocol=j,b=b.substr(j.length)),(e||j||b.match(/^\/\/[^@\/]+@[^@\/]+/))&&(g=b.substr(0,2)==="//",g&&!(j&&hostlessProtocol[j])&&(b=b.substr(2),this.slashes=!0)),!hostlessProtocol[j]&&(g||j&&!slashedProtocol[j])){var $=-1;for(o=0;o<hostEndingChars.length;o++)h=b.indexOf(hostEndingChars[o]),h!==-1&&($===-1||h<$)&&($=h);var _e,tt;for($===-1?tt=b.lastIndexOf("@"):tt=b.lastIndexOf("@",$),tt!==-1&&(_e=b.slice(0,tt),b=b.slice(tt+1),this.auth=_e),$=-1,o=0;o<nonHostChars.length;o++)h=b.indexOf(nonHostChars[o]),h!==-1&&($===-1||h<$)&&($=h);$===-1&&($=b.length),b[$-1]===":"&&$--;var et=b.slice(0,$);b=b.slice($),this.parseHost(et),this.hostname=this.hostname||"";var ut=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!ut){var ht=this.hostname.split(/\./);for(o=0,a=ht.length;o<a;o++){var st=ht[o];if(st&&!st.match(hostnamePartPattern)){for(var nt="",rt=0,at=st.length;rt<at;rt++)st.charCodeAt(rt)>127?nt+="x":nt+=st[rt];if(!nt.match(hostnamePartPattern)){var dt=ht.slice(0,o),ot=ht.slice(o+1),ct=st.match(hostnamePartStart);ct&&(dt.push(ct[1]),ot.unshift(ct[2])),ot.length&&(b=ot.join(".")+b),this.hostname=dt.join(".");break}}}}this.hostname.length>hostnameMaxLen&&(this.hostname=""),ut&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var vt=b.indexOf("#");vt!==-1&&(this.hash=b.substr(vt),b=b.slice(0,vt));var mt=b.indexOf("?");return mt!==-1&&(this.search=b.substr(mt),b=b.slice(0,mt)),b&&(this.pathname=b),slashedProtocol[c]&&this.hostname&&!this.pathname&&(this.pathname=""),this};Url.prototype.parseHost=function(s){var e=portPattern.exec(s);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),s=s.substr(0,s.length-e.length)),s&&(this.hostname=s)};var parse=urlParse;mdurl$1.encode=encode_1;mdurl$1.decode=decode_1;mdurl$1.format=format;mdurl$1.parse=parse;var uc_micro={},regex$3,hasRequiredRegex$3;function requireRegex$3(){return hasRequiredRegex$3||(hasRequiredRegex$3=1,regex$3=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/),regex$3}var regex$2,hasRequiredRegex$2;function requireRegex$2(){return hasRequiredRegex$2||(hasRequiredRegex$2=1,regex$2=/[\0-\x1F\x7F-\x9F]/),regex$2}var regex$1,hasRequiredRegex$1;function requireRegex$1(){return hasRequiredRegex$1||(hasRequiredRegex$1=1,regex$1=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/),regex$1}var regex,hasRequiredRegex;function requireRegex(){return hasRequiredRegex||(hasRequiredRegex=1,regex=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/),regex}var hasRequiredUc_micro;function requireUc_micro(){return hasRequiredUc_micro||(hasRequiredUc_micro=1,uc_micro.Any=requireRegex$3(),uc_micro.Cc=requireRegex$2(),uc_micro.Cf=requireRegex$1(),uc_micro.P=regex$4,uc_micro.Z=requireRegex()),uc_micro}(function(s){function e(Tt){return Object.prototype.toString.call(Tt)}function o(Tt){return e(Tt)==="[object String]"}var a=Object.prototype.hasOwnProperty;function c(Tt,qt){return a.call(Tt,qt)}function h(Tt){var qt=Array.prototype.slice.call(arguments,1);return qt.forEach(function(Vt){if(Vt){if(typeof Vt!="object")throw new TypeError(Vt+"must be object");Object.keys(Vt).forEach(function(Zt){Tt[Zt]=Vt[Zt]})}}),Tt}function g(Tt,qt,Vt){return[].concat(Tt.slice(0,qt),Vt,Tt.slice(qt+1))}function b(Tt){return!(Tt>=55296&&Tt<=57343||Tt>=64976&&Tt<=65007||(Tt&65535)===65535||(Tt&65535)===65534||Tt>=0&&Tt<=8||Tt===11||Tt>=14&&Tt<=31||Tt>=127&&Tt<=159||Tt>1114111)}function _(Tt){if(Tt>65535){Tt-=65536;var qt=55296+(Tt>>10),Vt=56320+(Tt&1023);return String.fromCharCode(qt,Vt)}return String.fromCharCode(Tt)}var j=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,$=/&([a-z#][a-z0-9]{1,31});/gi,_e=new RegExp(j.source+"|"+$.source,"gi"),tt=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i,et=entities$1;function ut(Tt,qt){var Vt;return c(et,qt)?et[qt]:qt.charCodeAt(0)===35&&tt.test(qt)&&(Vt=qt[1].toLowerCase()==="x"?parseInt(qt.slice(2),16):parseInt(qt.slice(1),10),b(Vt))?_(Vt):Tt}function ht(Tt){return Tt.indexOf("\\")<0?Tt:Tt.replace(j,"$1")}function st(Tt){return Tt.indexOf("\\")<0&&Tt.indexOf("&")<0?Tt:Tt.replace(_e,function(qt,Vt,Zt){return Vt||ut(qt,Zt)})}var nt=/[&<>"]/,rt=/[&<>"]/g,at={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function dt(Tt){return at[Tt]}function ot(Tt){return nt.test(Tt)?Tt.replace(rt,dt):Tt}var ct=/[.?*+^$[\]\\(){}|-]/g;function vt(Tt){return Tt.replace(ct,"\\$&")}function mt(Tt){switch(Tt){case 9:case 32:return!0}return!1}function pt(Tt){if(Tt>=8192&&Tt<=8202)return!0;switch(Tt){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}var Et=regex$4;function Ct(Tt){return Et.test(Tt)}function Nt(Tt){switch(Tt){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function Ut(Tt){return Tt=Tt.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(Tt=Tt.replace(//g,"")),Tt.toLowerCase().toUpperCase()}s.lib={},s.lib.mdurl=mdurl$1,s.lib.ucmicro=requireUc_micro(),s.assign=h,s.isString=o,s.has=c,s.unescapeMd=ht,s.unescapeAll=st,s.isValidEntityCode=b,s.fromCodePoint=_,s.escapeHtml=ot,s.arrayReplaceAt=g,s.isSpace=mt,s.isWhiteSpace=pt,s.isMdAsciiPunct=Nt,s.isPunctChar=Ct,s.escapeRE=vt,s.normalizeReference=Ut})(utils$1);var helpers$1={},parse_link_label=function s(e,o,a){var c,h,g,b,_=-1,j=e.posMax,$=e.pos;for(e.pos=o+1,c=1;e.pos<j;){if(g=e.src.charCodeAt(e.pos),g===93&&(c--,c===0)){h=!0;break}if(b=e.pos,e.md.inline.skipToken(e),g===91){if(b===e.pos-1)c++;else if(a)return e.pos=$,-1}}return h&&(_=e.pos),e.pos=$,_},unescapeAll$2=utils$1.unescapeAll,parse_link_destination=function s(e,o,a){var c,h,g=o,b={ok:!1,pos:0,lines:0,str:""};if(e.charCodeAt(g)===60){for(g++;g<a;){if(c=e.charCodeAt(g),c===10||c===60)return b;if(c===62)return b.pos=g+1,b.str=unescapeAll$2(e.slice(o+1,g)),b.ok=!0,b;if(c===92&&g+1<a){g+=2;continue}g++}return b}for(h=0;g<a&&(c=e.charCodeAt(g),!(c===32||c<32||c===127));){if(c===92&&g+1<a){if(e.charCodeAt(g+1)===32)break;g+=2;continue}if(c===40&&(h++,h>32))return b;if(c===41){if(h===0)break;h--}g++}return o===g||h!==0||(b.str=unescapeAll$2(e.slice(o,g)),b.pos=g,b.ok=!0),b},unescapeAll$1=utils$1.unescapeAll,parse_link_title=function s(e,o,a){var c,h,g=0,b=o,_={ok:!1,pos:0,lines:0,str:""};if(b>=a||(h=e.charCodeAt(b),h!==34&&h!==39&&h!==40))return _;for(b++,h===40&&(h=41);b<a;){if(c=e.charCodeAt(b),c===h)return _.pos=b+1,_.lines=g,_.str=unescapeAll$1(e.slice(o+1,b)),_.ok=!0,_;if(c===40&&h===41)return _;c===10?g++:c===92&&b+1<a&&(b++,e.charCodeAt(b)===10&&g++),b++}return _};helpers$1.parseLinkLabel=parse_link_label;helpers$1.parseLinkDestination=parse_link_destination;helpers$1.parseLinkTitle=parse_link_title;var assign$1=utils$1.assign,unescapeAll=utils$1.unescapeAll,escapeHtml=utils$1.escapeHtml,default_rules={};default_rules.code_inline=function(s,e,o,a,c){var h=s[e];return"<code"+c.renderAttrs(h)+">"+escapeHtml(h.content)+"</code>"};default_rules.code_block=function(s,e,o,a,c){var h=s[e];return"<pre"+c.renderAttrs(h)+"><code>"+escapeHtml(s[e].content)+`</code></pre>
`};default_rules.fence=function(s,e,o,a,c){var h=s[e],g=h.info?unescapeAll(h.info).trim():"",b="",_="",j,$,_e,tt,et;return g&&(_e=g.split(/(\s+)/g),b=_e[0],_=_e.slice(2).join("")),o.highlight?j=o.highlight(h.content,b,_)||escapeHtml(h.content):j=escapeHtml(h.content),j.indexOf("<pre")===0?j+`
`:g?($=h.attrIndex("class"),tt=h.attrs?h.attrs.slice():[],$<0?tt.push(["class",o.langPrefix+b]):(tt[$]=tt[$].slice(),tt[$][1]+=" "+o.langPrefix+b),et={attrs:tt},"<pre><code"+c.renderAttrs(et)+">"+j+`</code></pre>
`):"<pre><code"+c.renderAttrs(h)+">"+j+`</code></pre>
`};default_rules.image=function(s,e,o,a,c){var h=s[e];return h.attrs[h.attrIndex("alt")][1]=c.renderInlineAsText(h.children,o,a),c.renderToken(s,e,o)};default_rules.hardbreak=function(s,e,o){return o.xhtmlOut?`<br />
`:`<br>
`};default_rules.softbreak=function(s,e,o){return o.breaks?o.xhtmlOut?`<br />
`:`<br>
`:`
`};default_rules.text=function(s,e){return escapeHtml(s[e].content)};default_rules.html_block=function(s,e){return s[e].content};default_rules.html_inline=function(s,e){return s[e].content};function Renderer$1(){this.rules=assign$1({},default_rules)}Renderer$1.prototype.renderAttrs=function s(e){var o,a,c;if(!e.attrs)return"";for(c="",o=0,a=e.attrs.length;o<a;o++)c+=" "+escapeHtml(e.attrs[o][0])+'="'+escapeHtml(e.attrs[o][1])+'"';return c};Renderer$1.prototype.renderToken=function s(e,o,a){var c,h="",g=!1,b=e[o];return b.hidden?"":(b.block&&b.nesting!==-1&&o&&e[o-1].hidden&&(h+=`
`),h+=(b.nesting===-1?"</":"<")+b.tag,h+=this.renderAttrs(b),b.nesting===0&&a.xhtmlOut&&(h+=" /"),b.block&&(g=!0,b.nesting===1&&o+1<e.length&&(c=e[o+1],(c.type==="inline"||c.hidden||c.nesting===-1&&c.tag===b.tag)&&(g=!1))),h+=g?`>
`:">",h)};Renderer$1.prototype.renderInline=function(s,e,o){for(var a,c="",h=this.rules,g=0,b=s.length;g<b;g++)a=s[g].type,typeof h[a]<"u"?c+=h[a](s,g,e,o,this):c+=this.renderToken(s,g,e);return c};Renderer$1.prototype.renderInlineAsText=function(s,e,o){for(var a="",c=0,h=s.length;c<h;c++)s[c].type==="text"?a+=s[c].content:s[c].type==="image"?a+=this.renderInlineAsText(s[c].children,e,o):s[c].type==="softbreak"&&(a+=`
`);return a};Renderer$1.prototype.render=function(s,e,o){var a,c,h,g="",b=this.rules;for(a=0,c=s.length;a<c;a++)h=s[a].type,h==="inline"?g+=this.renderInline(s[a].children,e,o):typeof b[h]<"u"?g+=b[h](s,a,e,o,this):g+=this.renderToken(s,a,e,o);return g};var renderer=Renderer$1;function Ruler$3(){this.__rules__=[],this.__cache__=null}Ruler$3.prototype.__find__=function(s){for(var e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===s)return e;return-1};Ruler$3.prototype.__compile__=function(){var s=this,e=[""];s.__rules__.forEach(function(o){o.enabled&&o.alt.forEach(function(a){e.indexOf(a)<0&&e.push(a)})}),s.__cache__={},e.forEach(function(o){s.__cache__[o]=[],s.__rules__.forEach(function(a){a.enabled&&(o&&a.alt.indexOf(o)<0||s.__cache__[o].push(a.fn))})})};Ruler$3.prototype.at=function(s,e,o){var a=this.__find__(s),c=o||{};if(a===-1)throw new Error("Parser rule not found: "+s);this.__rules__[a].fn=e,this.__rules__[a].alt=c.alt||[],this.__cache__=null};Ruler$3.prototype.before=function(s,e,o,a){var c=this.__find__(s),h=a||{};if(c===-1)throw new Error("Parser rule not found: "+s);this.__rules__.splice(c,0,{name:e,enabled:!0,fn:o,alt:h.alt||[]}),this.__cache__=null};Ruler$3.prototype.after=function(s,e,o,a){var c=this.__find__(s),h=a||{};if(c===-1)throw new Error("Parser rule not found: "+s);this.__rules__.splice(c+1,0,{name:e,enabled:!0,fn:o,alt:h.alt||[]}),this.__cache__=null};Ruler$3.prototype.push=function(s,e,o){var a=o||{};this.__rules__.push({name:s,enabled:!0,fn:e,alt:a.alt||[]}),this.__cache__=null};Ruler$3.prototype.enable=function(s,e){Array.isArray(s)||(s=[s]);var o=[];return s.forEach(function(a){var c=this.__find__(a);if(c<0){if(e)return;throw new Error("Rules manager: invalid rule name "+a)}this.__rules__[c].enabled=!0,o.push(a)},this),this.__cache__=null,o};Ruler$3.prototype.enableOnly=function(s,e){Array.isArray(s)||(s=[s]),this.__rules__.forEach(function(o){o.enabled=!1}),this.enable(s,e)};Ruler$3.prototype.disable=function(s,e){Array.isArray(s)||(s=[s]);var o=[];return s.forEach(function(a){var c=this.__find__(a);if(c<0){if(e)return;throw new Error("Rules manager: invalid rule name "+a)}this.__rules__[c].enabled=!1,o.push(a)},this),this.__cache__=null,o};Ruler$3.prototype.getRules=function(s){return this.__cache__===null&&this.__compile__(),this.__cache__[s]||[]};var ruler=Ruler$3,NEWLINES_RE=/\r\n?|\n/g,NULL_RE=/\0/g,normalize=function s(e){var o;o=e.src.replace(NEWLINES_RE,`
`),o=o.replace(NULL_RE,""),e.src=o},block=function s(e){var o;e.inlineMode?(o=new e.Token("inline","",0),o.content=e.src,o.map=[0,1],o.children=[],e.tokens.push(o)):e.md.block.parse(e.src,e.md,e.env,e.tokens)},inline=function s(e){var o=e.tokens,a,c,h;for(c=0,h=o.length;c<h;c++)a=o[c],a.type==="inline"&&e.md.inline.parse(a.content,e.md,e.env,a.children)},arrayReplaceAt=utils$1.arrayReplaceAt;function isLinkOpen$1(s){return/^<a[>\s]/i.test(s)}function isLinkClose$1(s){return/^<\/a\s*>/i.test(s)}var linkify$1=function s(e){var o,a,c,h,g,b,_,j,$,_e,tt,et,ut,ht,st,nt,rt=e.tokens,at;if(e.md.options.linkify){for(a=0,c=rt.length;a<c;a++)if(!(rt[a].type!=="inline"||!e.md.linkify.pretest(rt[a].content)))for(h=rt[a].children,ut=0,o=h.length-1;o>=0;o--){if(b=h[o],b.type==="link_close"){for(o--;h[o].level!==b.level&&h[o].type!=="link_open";)o--;continue}if(b.type==="html_inline"&&(isLinkOpen$1(b.content)&&ut>0&&ut--,isLinkClose$1(b.content)&&ut++),!(ut>0)&&b.type==="text"&&e.md.linkify.test(b.content)){for($=b.content,at=e.md.linkify.match($),_=[],et=b.level,tt=0,at.length>0&&at[0].index===0&&o>0&&h[o-1].type==="text_special"&&(at=at.slice(1)),j=0;j<at.length;j++)ht=at[j].url,st=e.md.normalizeLink(ht),e.md.validateLink(st)&&(nt=at[j].text,at[j].schema?at[j].schema==="mailto:"&&!/^mailto:/i.test(nt)?nt=e.md.normalizeLinkText("mailto:"+nt).replace(/^mailto:/,""):nt=e.md.normalizeLinkText(nt):nt=e.md.normalizeLinkText("http://"+nt).replace(/^http:\/\//,""),_e=at[j].index,_e>tt&&(g=new e.Token("text","",0),g.content=$.slice(tt,_e),g.level=et,_.push(g)),g=new e.Token("link_open","a",1),g.attrs=[["href",st]],g.level=et++,g.markup="linkify",g.info="auto",_.push(g),g=new e.Token("text","",0),g.content=nt,g.level=et,_.push(g),g=new e.Token("link_close","a",-1),g.level=--et,g.markup="linkify",g.info="auto",_.push(g),tt=at[j].lastIndex);tt<$.length&&(g=new e.Token("text","",0),g.content=$.slice(tt),g.level=et,_.push(g)),rt[a].children=h=arrayReplaceAt(h,o,_)}}}},RARE_RE=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,SCOPED_ABBR_TEST_RE=/\((c|tm|r)\)/i,SCOPED_ABBR_RE=/\((c|tm|r)\)/ig,SCOPED_ABBR={c:"",r:"",tm:""};function replaceFn(s,e){return SCOPED_ABBR[e.toLowerCase()]}function replace_scoped(s){var e,o,a=0;for(e=s.length-1;e>=0;e--)o=s[e],o.type==="text"&&!a&&(o.content=o.content.replace(SCOPED_ABBR_RE,replaceFn)),o.type==="link_open"&&o.info==="auto"&&a--,o.type==="link_close"&&o.info==="auto"&&a++}function replace_rare(s){var e,o,a=0;for(e=s.length-1;e>=0;e--)o=s[e],o.type==="text"&&!a&&RARE_RE.test(o.content)&&(o.content=o.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),o.type==="link_open"&&o.info==="auto"&&a--,o.type==="link_close"&&o.info==="auto"&&a++}var replacements=function s(e){var o;if(e.md.options.typographer)for(o=e.tokens.length-1;o>=0;o--)e.tokens[o].type==="inline"&&(SCOPED_ABBR_TEST_RE.test(e.tokens[o].content)&&replace_scoped(e.tokens[o].children),RARE_RE.test(e.tokens[o].content)&&replace_rare(e.tokens[o].children))},isWhiteSpace$1=utils$1.isWhiteSpace,isPunctChar$1=utils$1.isPunctChar,isMdAsciiPunct$1=utils$1.isMdAsciiPunct,QUOTE_TEST_RE=/['"]/,QUOTE_RE=/['"]/g,APOSTROPHE="";function replaceAt(s,e,o){return s.slice(0,e)+o+s.slice(e+1)}function process_inlines(s,e){var o,a,c,h,g,b,_,j,$,_e,tt,et,ut,ht,st,nt,rt,at,dt,ot,ct;for(dt=[],o=0;o<s.length;o++){for(a=s[o],_=s[o].level,rt=dt.length-1;rt>=0&&!(dt[rt].level<=_);rt--);if(dt.length=rt+1,a.type==="text"){c=a.content,g=0,b=c.length;e:for(;g<b&&(QUOTE_RE.lastIndex=g,h=QUOTE_RE.exec(c),!!h);){if(st=nt=!0,g=h.index+1,at=h[0]==="'",$=32,h.index-1>=0)$=c.charCodeAt(h.index-1);else for(rt=o-1;rt>=0&&!(s[rt].type==="softbreak"||s[rt].type==="hardbreak");rt--)if(s[rt].content){$=s[rt].content.charCodeAt(s[rt].content.length-1);break}if(_e=32,g<b)_e=c.charCodeAt(g);else for(rt=o+1;rt<s.length&&!(s[rt].type==="softbreak"||s[rt].type==="hardbreak");rt++)if(s[rt].content){_e=s[rt].content.charCodeAt(0);break}if(tt=isMdAsciiPunct$1($)||isPunctChar$1(String.fromCharCode($)),et=isMdAsciiPunct$1(_e)||isPunctChar$1(String.fromCharCode(_e)),ut=isWhiteSpace$1($),ht=isWhiteSpace$1(_e),ht?st=!1:et&&(ut||tt||(st=!1)),ut?nt=!1:tt&&(ht||et||(nt=!1)),_e===34&&h[0]==='"'&&$>=48&&$<=57&&(nt=st=!1),st&&nt&&(st=tt,nt=et),!st&&!nt){at&&(a.content=replaceAt(a.content,h.index,APOSTROPHE));continue}if(nt){for(rt=dt.length-1;rt>=0&&(j=dt[rt],!(dt[rt].level<_));rt--)if(j.single===at&&dt[rt].level===_){j=dt[rt],at?(ot=e.md.options.quotes[2],ct=e.md.options.quotes[3]):(ot=e.md.options.quotes[0],ct=e.md.options.quotes[1]),a.content=replaceAt(a.content,h.index,ct),s[j.token].content=replaceAt(s[j.token].content,j.pos,ot),g+=ct.length-1,j.token===o&&(g+=ot.length-1),c=a.content,b=c.length,dt.length=rt;continue e}}st?dt.push({token:o,pos:h.index,single:at,level:_}):nt&&at&&(a.content=replaceAt(a.content,h.index,APOSTROPHE))}}}}var smartquotes=function s(e){var o;if(e.md.options.typographer)for(o=e.tokens.length-1;o>=0;o--)e.tokens[o].type!=="inline"||!QUOTE_TEST_RE.test(e.tokens[o].content)||process_inlines(e.tokens[o].children,e)},text_join=function s(e){var o,a,c,h,g,b,_=e.tokens;for(o=0,a=_.length;o<a;o++)if(_[o].type==="inline"){for(c=_[o].children,g=c.length,h=0;h<g;h++)c[h].type==="text_special"&&(c[h].type="text");for(h=b=0;h<g;h++)c[h].type==="text"&&h+1<g&&c[h+1].type==="text"?c[h+1].content=c[h].content+c[h+1].content:(h!==b&&(c[b]=c[h]),b++);h!==b&&(c.length=b)}};function Token$3(s,e,o){this.type=s,this.tag=e,this.attrs=null,this.map=null,this.nesting=o,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}Token$3.prototype.attrIndex=function s(e){var o,a,c;if(!this.attrs)return-1;for(o=this.attrs,a=0,c=o.length;a<c;a++)if(o[a][0]===e)return a;return-1};Token$3.prototype.attrPush=function s(e){this.attrs?this.attrs.push(e):this.attrs=[e]};Token$3.prototype.attrSet=function s(e,o){var a=this.attrIndex(e),c=[e,o];a<0?this.attrPush(c):this.attrs[a]=c};Token$3.prototype.attrGet=function s(e){var o=this.attrIndex(e),a=null;return o>=0&&(a=this.attrs[o][1]),a};Token$3.prototype.attrJoin=function s(e,o){var a=this.attrIndex(e);a<0?this.attrPush([e,o]):this.attrs[a][1]=this.attrs[a][1]+" "+o};var token=Token$3,Token$2=token;function StateCore(s,e,o){this.src=s,this.env=o,this.tokens=[],this.inlineMode=!1,this.md=e}StateCore.prototype.Token=Token$2;var state_core=StateCore,Ruler$2=ruler,_rules$2=[["normalize",normalize],["block",block],["inline",inline],["linkify",linkify$1],["replacements",replacements],["smartquotes",smartquotes],["text_join",text_join]];function Core(){this.ruler=new Ruler$2;for(var s=0;s<_rules$2.length;s++)this.ruler.push(_rules$2[s][0],_rules$2[s][1])}Core.prototype.process=function(s){var e,o,a;for(a=this.ruler.getRules(""),e=0,o=a.length;e<o;e++)a[e](s)};Core.prototype.State=state_core;var parser_core=Core,isSpace$a=utils$1.isSpace;function getLine(s,e){var o=s.bMarks[e]+s.tShift[e],a=s.eMarks[e];return s.src.slice(o,a)}function escapedSplit(s){var e=[],o=0,a=s.length,c,h=!1,g=0,b="";for(c=s.charCodeAt(o);o<a;)c===124&&(h?(b+=s.substring(g,o-1),g=o):(e.push(b+s.substring(g,o)),b="",g=o+1)),h=c===92,o++,c=s.charCodeAt(o);return e.push(b+s.substring(g)),e}var table=function s(e,o,a,c){var h,g,b,_,j,$,_e,tt,et,ut,ht,st,nt,rt,at,dt,ot,ct;if(o+2>a||($=o+1,e.sCount[$]<e.blkIndent)||e.sCount[$]-e.blkIndent>=4||(b=e.bMarks[$]+e.tShift[$],b>=e.eMarks[$])||(ot=e.src.charCodeAt(b++),ot!==124&&ot!==45&&ot!==58)||b>=e.eMarks[$]||(ct=e.src.charCodeAt(b++),ct!==124&&ct!==45&&ct!==58&&!isSpace$a(ct))||ot===45&&isSpace$a(ct))return!1;for(;b<e.eMarks[$];){if(h=e.src.charCodeAt(b),h!==124&&h!==45&&h!==58&&!isSpace$a(h))return!1;b++}for(g=getLine(e,o+1),_e=g.split("|"),ut=[],_=0;_<_e.length;_++){if(ht=_e[_].trim(),!ht){if(_===0||_===_e.length-1)continue;return!1}if(!/^:?-+:?$/.test(ht))return!1;ht.charCodeAt(ht.length-1)===58?ut.push(ht.charCodeAt(0)===58?"center":"right"):ht.charCodeAt(0)===58?ut.push("left"):ut.push("")}if(g=getLine(e,o).trim(),g.indexOf("|")===-1||e.sCount[o]-e.blkIndent>=4||(_e=escapedSplit(g),_e.length&&_e[0]===""&&_e.shift(),_e.length&&_e[_e.length-1]===""&&_e.pop(),tt=_e.length,tt===0||tt!==ut.length))return!1;if(c)return!0;for(rt=e.parentType,e.parentType="table",dt=e.md.block.ruler.getRules("blockquote"),et=e.push("table_open","table",1),et.map=st=[o,0],et=e.push("thead_open","thead",1),et.map=[o,o+1],et=e.push("tr_open","tr",1),et.map=[o,o+1],_=0;_<_e.length;_++)et=e.push("th_open","th",1),ut[_]&&(et.attrs=[["style","text-align:"+ut[_]]]),et=e.push("inline","",0),et.content=_e[_].trim(),et.children=[],et=e.push("th_close","th",-1);for(et=e.push("tr_close","tr",-1),et=e.push("thead_close","thead",-1),$=o+2;$<a&&!(e.sCount[$]<e.blkIndent);$++){for(at=!1,_=0,j=dt.length;_<j;_++)if(dt[_](e,$,a,!0)){at=!0;break}if(at||(g=getLine(e,$).trim(),!g)||e.sCount[$]-e.blkIndent>=4)break;for(_e=escapedSplit(g),_e.length&&_e[0]===""&&_e.shift(),_e.length&&_e[_e.length-1]===""&&_e.pop(),$===o+2&&(et=e.push("tbody_open","tbody",1),et.map=nt=[o+2,0]),et=e.push("tr_open","tr",1),et.map=[$,$+1],_=0;_<tt;_++)et=e.push("td_open","td",1),ut[_]&&(et.attrs=[["style","text-align:"+ut[_]]]),et=e.push("inline","",0),et.content=_e[_]?_e[_].trim():"",et.children=[],et=e.push("td_close","td",-1);et=e.push("tr_close","tr",-1)}return nt&&(et=e.push("tbody_close","tbody",-1),nt[1]=$),et=e.push("table_close","table",-1),st[1]=$,e.parentType=rt,e.line=$,!0},code=function s(e,o,a){var c,h,g;if(e.sCount[o]-e.blkIndent<4)return!1;for(h=c=o+1;c<a;){if(e.isEmpty(c)){c++;continue}if(e.sCount[c]-e.blkIndent>=4){c++,h=c;continue}break}return e.line=h,g=e.push("code_block","code",0),g.content=e.getLines(o,h,4+e.blkIndent,!1)+`
`,g.map=[o,e.line],!0},fence=function s(e,o,a,c){var h,g,b,_,j,$,_e,tt=!1,et=e.bMarks[o]+e.tShift[o],ut=e.eMarks[o];if(e.sCount[o]-e.blkIndent>=4||et+3>ut||(h=e.src.charCodeAt(et),h!==126&&h!==96)||(j=et,et=e.skipChars(et,h),g=et-j,g<3)||(_e=e.src.slice(j,et),b=e.src.slice(et,ut),h===96&&b.indexOf(String.fromCharCode(h))>=0))return!1;if(c)return!0;for(_=o;_++,!(_>=a||(et=j=e.bMarks[_]+e.tShift[_],ut=e.eMarks[_],et<ut&&e.sCount[_]<e.blkIndent));)if(e.src.charCodeAt(et)===h&&!(e.sCount[_]-e.blkIndent>=4)&&(et=e.skipChars(et,h),!(et-j<g)&&(et=e.skipSpaces(et),!(et<ut)))){tt=!0;break}return g=e.sCount[o],e.line=_+(tt?1:0),$=e.push("fence","code",0),$.info=b,$.content=e.getLines(o+1,_,g,!0),$.markup=_e,$.map=[o,e.line],!0},isSpace$9=utils$1.isSpace,blockquote=function s(e,o,a,c){var h,g,b,_,j,$,_e,tt,et,ut,ht,st,nt,rt,at,dt,ot,ct,vt,mt,pt=e.lineMax,Et=e.bMarks[o]+e.tShift[o],Ct=e.eMarks[o];if(e.sCount[o]-e.blkIndent>=4||e.src.charCodeAt(Et)!==62)return!1;if(c)return!0;for(ut=[],ht=[],rt=[],at=[],ct=e.md.block.ruler.getRules("blockquote"),nt=e.parentType,e.parentType="blockquote",tt=o;tt<a&&(mt=e.sCount[tt]<e.blkIndent,Et=e.bMarks[tt]+e.tShift[tt],Ct=e.eMarks[tt],!(Et>=Ct));tt++){if(e.src.charCodeAt(Et++)===62&&!mt){for(_=e.sCount[tt]+1,e.src.charCodeAt(Et)===32?(Et++,_++,h=!1,dt=!0):e.src.charCodeAt(Et)===9?(dt=!0,(e.bsCount[tt]+_)%4===3?(Et++,_++,h=!1):h=!0):dt=!1,et=_,ut.push(e.bMarks[tt]),e.bMarks[tt]=Et;Et<Ct&&(g=e.src.charCodeAt(Et),isSpace$9(g));){g===9?et+=4-(et+e.bsCount[tt]+(h?1:0))%4:et++;Et++}$=Et>=Ct,ht.push(e.bsCount[tt]),e.bsCount[tt]=e.sCount[tt]+1+(dt?1:0),rt.push(e.sCount[tt]),e.sCount[tt]=et-_,at.push(e.tShift[tt]),e.tShift[tt]=Et-e.bMarks[tt];continue}if($)break;for(ot=!1,b=0,j=ct.length;b<j;b++)if(ct[b](e,tt,a,!0)){ot=!0;break}if(ot){e.lineMax=tt,e.blkIndent!==0&&(ut.push(e.bMarks[tt]),ht.push(e.bsCount[tt]),at.push(e.tShift[tt]),rt.push(e.sCount[tt]),e.sCount[tt]-=e.blkIndent);break}ut.push(e.bMarks[tt]),ht.push(e.bsCount[tt]),at.push(e.tShift[tt]),rt.push(e.sCount[tt]),e.sCount[tt]=-1}for(st=e.blkIndent,e.blkIndent=0,vt=e.push("blockquote_open","blockquote",1),vt.markup=">",vt.map=_e=[o,0],e.md.block.tokenize(e,o,tt),vt=e.push("blockquote_close","blockquote",-1),vt.markup=">",e.lineMax=pt,e.parentType=nt,_e[1]=e.line,b=0;b<at.length;b++)e.bMarks[b+o]=ut[b],e.tShift[b+o]=at[b],e.sCount[b+o]=rt[b],e.bsCount[b+o]=ht[b];return e.blkIndent=st,!0},isSpace$8=utils$1.isSpace,hr=function s(e,o,a,c){var h,g,b,_,j=e.bMarks[o]+e.tShift[o],$=e.eMarks[o];if(e.sCount[o]-e.blkIndent>=4||(h=e.src.charCodeAt(j++),h!==42&&h!==45&&h!==95))return!1;for(g=1;j<$;){if(b=e.src.charCodeAt(j++),b!==h&&!isSpace$8(b))return!1;b===h&&g++}return g<3?!1:(c||(e.line=o+1,_=e.push("hr","hr",0),_.map=[o,e.line],_.markup=Array(g+1).join(String.fromCharCode(h))),!0)},isSpace$7=utils$1.isSpace;function skipBulletListMarker(s,e){var o,a,c,h;return a=s.bMarks[e]+s.tShift[e],c=s.eMarks[e],o=s.src.charCodeAt(a++),o!==42&&o!==45&&o!==43||a<c&&(h=s.src.charCodeAt(a),!isSpace$7(h))?-1:a}function skipOrderedListMarker(s,e){var o,a=s.bMarks[e]+s.tShift[e],c=a,h=s.eMarks[e];if(c+1>=h||(o=s.src.charCodeAt(c++),o<48||o>57))return-1;for(;;){if(c>=h)return-1;if(o=s.src.charCodeAt(c++),o>=48&&o<=57){if(c-a>=10)return-1;continue}if(o===41||o===46)break;return-1}return c<h&&(o=s.src.charCodeAt(c),!isSpace$7(o))?-1:c}function markTightParagraphs(s,e){var o,a,c=s.level+2;for(o=e+2,a=s.tokens.length-2;o<a;o++)s.tokens[o].level===c&&s.tokens[o].type==="paragraph_open"&&(s.tokens[o+2].hidden=!0,s.tokens[o].hidden=!0,o+=2)}var list=function s(e,o,a,c){var h,g,b,_,j,$,_e,tt,et,ut,ht,st,nt,rt,at,dt,ot,ct,vt,mt,pt,Et,Ct,Nt,Ut,Tt,qt,Vt=o,Zt=!1,It=!0;if(e.sCount[Vt]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[Vt]-e.listIndent>=4&&e.sCount[Vt]<e.blkIndent)return!1;if(c&&e.parentType==="paragraph"&&e.sCount[Vt]>=e.blkIndent&&(Zt=!0),(Et=skipOrderedListMarker(e,Vt))>=0){if(_e=!0,Nt=e.bMarks[Vt]+e.tShift[Vt],nt=Number(e.src.slice(Nt,Et-1)),Zt&&nt!==1)return!1}else if((Et=skipBulletListMarker(e,Vt))>=0)_e=!1;else return!1;if(Zt&&e.skipSpaces(Et)>=e.eMarks[Vt])return!1;if(c)return!0;for(st=e.src.charCodeAt(Et-1),ht=e.tokens.length,_e?(qt=e.push("ordered_list_open","ol",1),nt!==1&&(qt.attrs=[["start",nt]])):qt=e.push("bullet_list_open","ul",1),qt.map=ut=[Vt,0],qt.markup=String.fromCharCode(st),Ct=!1,Tt=e.md.block.ruler.getRules("list"),ot=e.parentType,e.parentType="list";Vt<a;){for(pt=Et,rt=e.eMarks[Vt],$=at=e.sCount[Vt]+Et-(e.bMarks[Vt]+e.tShift[Vt]);pt<rt;){if(h=e.src.charCodeAt(pt),h===9)at+=4-(at+e.bsCount[Vt])%4;else if(h===32)at++;else break;pt++}if(g=pt,g>=rt?j=1:j=at-$,j>4&&(j=1),_=$+j,qt=e.push("list_item_open","li",1),qt.markup=String.fromCharCode(st),qt.map=tt=[Vt,0],_e&&(qt.info=e.src.slice(Nt,Et-1)),mt=e.tight,vt=e.tShift[Vt],ct=e.sCount[Vt],dt=e.listIndent,e.listIndent=e.blkIndent,e.blkIndent=_,e.tight=!0,e.tShift[Vt]=g-e.bMarks[Vt],e.sCount[Vt]=at,g>=rt&&e.isEmpty(Vt+1)?e.line=Math.min(e.line+2,a):e.md.block.tokenize(e,Vt,a,!0),(!e.tight||Ct)&&(It=!1),Ct=e.line-Vt>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=dt,e.tShift[Vt]=vt,e.sCount[Vt]=ct,e.tight=mt,qt=e.push("list_item_close","li",-1),qt.markup=String.fromCharCode(st),Vt=e.line,tt[1]=Vt,Vt>=a||e.sCount[Vt]<e.blkIndent||e.sCount[Vt]-e.blkIndent>=4)break;for(Ut=!1,b=0,et=Tt.length;b<et;b++)if(Tt[b](e,Vt,a,!0)){Ut=!0;break}if(Ut)break;if(_e){if(Et=skipOrderedListMarker(e,Vt),Et<0)break;Nt=e.bMarks[Vt]+e.tShift[Vt]}else if(Et=skipBulletListMarker(e,Vt),Et<0)break;if(st!==e.src.charCodeAt(Et-1))break}return _e?qt=e.push("ordered_list_close","ol",-1):qt=e.push("bullet_list_close","ul",-1),qt.markup=String.fromCharCode(st),ut[1]=Vt,e.line=Vt,e.parentType=ot,It&&markTightParagraphs(e,ht),!0},normalizeReference$2=utils$1.normalizeReference,isSpace$6=utils$1.isSpace,reference=function s(e,o,a,c){var h,g,b,_,j,$,_e,tt,et,ut,ht,st,nt,rt,at,dt,ot=0,ct=e.bMarks[o]+e.tShift[o],vt=e.eMarks[o],mt=o+1;if(e.sCount[o]-e.blkIndent>=4||e.src.charCodeAt(ct)!==91)return!1;for(;++ct<vt;)if(e.src.charCodeAt(ct)===93&&e.src.charCodeAt(ct-1)!==92){if(ct+1===vt||e.src.charCodeAt(ct+1)!==58)return!1;break}for(_=e.lineMax,at=e.md.block.ruler.getRules("reference"),ut=e.parentType,e.parentType="reference";mt<_&&!e.isEmpty(mt);mt++)if(!(e.sCount[mt]-e.blkIndent>3)&&!(e.sCount[mt]<0)){for(rt=!1,$=0,_e=at.length;$<_e;$++)if(at[$](e,mt,_,!0)){rt=!0;break}if(rt)break}for(nt=e.getLines(o,mt,e.blkIndent,!1).trim(),vt=nt.length,ct=1;ct<vt;ct++){if(h=nt.charCodeAt(ct),h===91)return!1;if(h===93){et=ct;break}else h===10?ot++:h===92&&(ct++,ct<vt&&nt.charCodeAt(ct)===10&&ot++)}if(et<0||nt.charCodeAt(et+1)!==58)return!1;for(ct=et+2;ct<vt;ct++)if(h=nt.charCodeAt(ct),h===10)ot++;else if(!isSpace$6(h))break;if(ht=e.md.helpers.parseLinkDestination(nt,ct,vt),!ht.ok||(j=e.md.normalizeLink(ht.str),!e.md.validateLink(j)))return!1;for(ct=ht.pos,ot+=ht.lines,g=ct,b=ot,st=ct;ct<vt;ct++)if(h=nt.charCodeAt(ct),h===10)ot++;else if(!isSpace$6(h))break;for(ht=e.md.helpers.parseLinkTitle(nt,ct,vt),ct<vt&&st!==ct&&ht.ok?(dt=ht.str,ct=ht.pos,ot+=ht.lines):(dt="",ct=g,ot=b);ct<vt&&(h=nt.charCodeAt(ct),!!isSpace$6(h));)ct++;if(ct<vt&&nt.charCodeAt(ct)!==10&&dt)for(dt="",ct=g,ot=b;ct<vt&&(h=nt.charCodeAt(ct),!!isSpace$6(h));)ct++;return ct<vt&&nt.charCodeAt(ct)!==10||(tt=normalizeReference$2(nt.slice(1,et)),!tt)?!1:(c||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[tt]>"u"&&(e.env.references[tt]={title:dt,href:j}),e.parentType=ut,e.line=o+ot+1),!0)},html_blocks=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],html_re={},attr_name="[a-zA-Z_:][a-zA-Z0-9:._-]*",unquoted="[^\"'=<>`\\x00-\\x20]+",single_quoted="'[^']*'",double_quoted='"[^"]*"',attr_value="(?:"+unquoted+"|"+single_quoted+"|"+double_quoted+")",attribute="(?:\\s+"+attr_name+"(?:\\s*=\\s*"+attr_value+")?)",open_tag="<[A-Za-z][A-Za-z0-9\\-]*"+attribute+"*\\s*\\/?>",close_tag="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",comment="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->",processing="<[?][\\s\\S]*?[?]>",declaration="<![A-Z]+\\s+[^>]*>",cdata="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",HTML_TAG_RE$1=new RegExp("^(?:"+open_tag+"|"+close_tag+"|"+comment+"|"+processing+"|"+declaration+"|"+cdata+")"),HTML_OPEN_CLOSE_TAG_RE$1=new RegExp("^(?:"+open_tag+"|"+close_tag+")");html_re.HTML_TAG_RE=HTML_TAG_RE$1;html_re.HTML_OPEN_CLOSE_TAG_RE=HTML_OPEN_CLOSE_TAG_RE$1;var block_names=html_blocks,HTML_OPEN_CLOSE_TAG_RE=html_re.HTML_OPEN_CLOSE_TAG_RE,HTML_SEQUENCES=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+block_names.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(HTML_OPEN_CLOSE_TAG_RE.source+"\\s*$"),/^$/,!1]],html_block=function s(e,o,a,c){var h,g,b,_,j=e.bMarks[o]+e.tShift[o],$=e.eMarks[o];if(e.sCount[o]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(j)!==60)return!1;for(_=e.src.slice(j,$),h=0;h<HTML_SEQUENCES.length&&!HTML_SEQUENCES[h][0].test(_);h++);if(h===HTML_SEQUENCES.length)return!1;if(c)return HTML_SEQUENCES[h][2];if(g=o+1,!HTML_SEQUENCES[h][1].test(_)){for(;g<a&&!(e.sCount[g]<e.blkIndent);g++)if(j=e.bMarks[g]+e.tShift[g],$=e.eMarks[g],_=e.src.slice(j,$),HTML_SEQUENCES[h][1].test(_)){_.length!==0&&g++;break}}return e.line=g,b=e.push("html_block","",0),b.map=[o,g],b.content=e.getLines(o,g,e.blkIndent,!0),!0},isSpace$5=utils$1.isSpace,heading=function s(e,o,a,c){var h,g,b,_,j=e.bMarks[o]+e.tShift[o],$=e.eMarks[o];if(e.sCount[o]-e.blkIndent>=4||(h=e.src.charCodeAt(j),h!==35||j>=$))return!1;for(g=1,h=e.src.charCodeAt(++j);h===35&&j<$&&g<=6;)g++,h=e.src.charCodeAt(++j);return g>6||j<$&&!isSpace$5(h)?!1:(c||($=e.skipSpacesBack($,j),b=e.skipCharsBack($,35,j),b>j&&isSpace$5(e.src.charCodeAt(b-1))&&($=b),e.line=o+1,_=e.push("heading_open","h"+String(g),1),_.markup="########".slice(0,g),_.map=[o,e.line],_=e.push("inline","",0),_.content=e.src.slice(j,$).trim(),_.map=[o,e.line],_.children=[],_=e.push("heading_close","h"+String(g),-1),_.markup="########".slice(0,g)),!0)},lheading=function s(e,o,a){var c,h,g,b,_,j,$,_e,tt,et=o+1,ut,ht=e.md.block.ruler.getRules("paragraph");if(e.sCount[o]-e.blkIndent>=4)return!1;for(ut=e.parentType,e.parentType="paragraph";et<a&&!e.isEmpty(et);et++)if(!(e.sCount[et]-e.blkIndent>3)){if(e.sCount[et]>=e.blkIndent&&(j=e.bMarks[et]+e.tShift[et],$=e.eMarks[et],j<$&&(tt=e.src.charCodeAt(j),(tt===45||tt===61)&&(j=e.skipChars(j,tt),j=e.skipSpaces(j),j>=$)))){_e=tt===61?1:2;break}if(!(e.sCount[et]<0)){for(h=!1,g=0,b=ht.length;g<b;g++)if(ht[g](e,et,a,!0)){h=!0;break}if(h)break}}return _e?(c=e.getLines(o,et,e.blkIndent,!1).trim(),e.line=et+1,_=e.push("heading_open","h"+String(_e),1),_.markup=String.fromCharCode(tt),_.map=[o,e.line],_=e.push("inline","",0),_.content=c,_.map=[o,e.line-1],_.children=[],_=e.push("heading_close","h"+String(_e),-1),_.markup=String.fromCharCode(tt),e.parentType=ut,!0):!1},paragraph=function s(e,o,a){var c,h,g,b,_,j,$=o+1,_e=e.md.block.ruler.getRules("paragraph");for(j=e.parentType,e.parentType="paragraph";$<a&&!e.isEmpty($);$++)if(!(e.sCount[$]-e.blkIndent>3)&&!(e.sCount[$]<0)){for(h=!1,g=0,b=_e.length;g<b;g++)if(_e[g](e,$,a,!0)){h=!0;break}if(h)break}return c=e.getLines(o,$,e.blkIndent,!1).trim(),e.line=$,_=e.push("paragraph_open","p",1),_.map=[o,e.line],_=e.push("inline","",0),_.content=c,_.map=[o,e.line],_.children=[],_=e.push("paragraph_close","p",-1),e.parentType=j,!0},Token$1=token,isSpace$4=utils$1.isSpace;function StateBlock(s,e,o,a){var c,h,g,b,_,j,$,_e;for(this.src=s,this.md=e,this.env=o,this.tokens=a,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0,this.result="",h=this.src,_e=!1,g=b=j=$=0,_=h.length;b<_;b++){if(c=h.charCodeAt(b),!_e)if(isSpace$4(c)){j++,c===9?$+=4-$%4:$++;continue}else _e=!0;(c===10||b===_-1)&&(c!==10&&b++,this.bMarks.push(g),this.eMarks.push(b),this.tShift.push(j),this.sCount.push($),this.bsCount.push(0),_e=!1,j=0,$=0,g=b+1)}this.bMarks.push(h.length),this.eMarks.push(h.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}StateBlock.prototype.push=function(s,e,o){var a=new Token$1(s,e,o);return a.block=!0,o<0&&this.level--,a.level=this.level,o>0&&this.level++,this.tokens.push(a),a};StateBlock.prototype.isEmpty=function s(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};StateBlock.prototype.skipEmptyLines=function s(e){for(var o=this.lineMax;e<o&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};StateBlock.prototype.skipSpaces=function s(e){for(var o,a=this.src.length;e<a&&(o=this.src.charCodeAt(e),!!isSpace$4(o));e++);return e};StateBlock.prototype.skipSpacesBack=function s(e,o){if(e<=o)return e;for(;e>o;)if(!isSpace$4(this.src.charCodeAt(--e)))return e+1;return e};StateBlock.prototype.skipChars=function s(e,o){for(var a=this.src.length;e<a&&this.src.charCodeAt(e)===o;e++);return e};StateBlock.prototype.skipCharsBack=function s(e,o,a){if(e<=a)return e;for(;e>a;)if(o!==this.src.charCodeAt(--e))return e+1;return e};StateBlock.prototype.getLines=function s(e,o,a,c){var h,g,b,_,j,$,_e,tt=e;if(e>=o)return"";for($=new Array(o-e),h=0;tt<o;tt++,h++){for(g=0,_e=_=this.bMarks[tt],tt+1<o||c?j=this.eMarks[tt]+1:j=this.eMarks[tt];_<j&&g<a;){if(b=this.src.charCodeAt(_),isSpace$4(b))b===9?g+=4-(g+this.bsCount[tt])%4:g++;else if(_-_e<this.tShift[tt])g++;else break;_++}g>a?$[h]=new Array(g-a+1).join(" ")+this.src.slice(_,j):$[h]=this.src.slice(_,j)}return $.join("")};StateBlock.prototype.Token=Token$1;var state_block=StateBlock,Ruler$1=ruler,_rules$1=[["table",table,["paragraph","reference"]],["code",code],["fence",fence,["paragraph","reference","blockquote","list"]],["blockquote",blockquote,["paragraph","reference","blockquote","list"]],["hr",hr,["paragraph","reference","blockquote","list"]],["list",list,["paragraph","reference","blockquote"]],["reference",reference],["html_block",html_block,["paragraph","reference","blockquote"]],["heading",heading,["paragraph","reference","blockquote"]],["lheading",lheading],["paragraph",paragraph]];function ParserBlock$1(){this.ruler=new Ruler$1;for(var s=0;s<_rules$1.length;s++)this.ruler.push(_rules$1[s][0],_rules$1[s][1],{alt:(_rules$1[s][2]||[]).slice()})}ParserBlock$1.prototype.tokenize=function(s,e,o){for(var a,c,h,g=this.ruler.getRules(""),b=g.length,_=e,j=!1,$=s.md.options.maxNesting;_<o&&(s.line=_=s.skipEmptyLines(_),!(_>=o||s.sCount[_]<s.blkIndent));){if(s.level>=$){s.line=o;break}for(h=s.line,c=0;c<b;c++)if(a=g[c](s,_,o,!1),a){if(h>=s.line)throw new Error("block rule didn't increment state.line");break}if(!a)throw new Error("none of the block rules matched");s.tight=!j,s.isEmpty(s.line-1)&&(j=!0),_=s.line,_<o&&s.isEmpty(_)&&(j=!0,_++,s.line=_)}};ParserBlock$1.prototype.parse=function(s,e,o,a){var c;s&&(c=new this.State(s,e,o,a),this.tokenize(c,c.line,c.lineMax))};ParserBlock$1.prototype.State=state_block;var parser_block=ParserBlock$1;function isTerminatorChar(s){switch(s){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}var text=function s(e,o){for(var a=e.pos;a<e.posMax&&!isTerminatorChar(e.src.charCodeAt(a));)a++;return a===e.pos?!1:(o||(e.pending+=e.src.slice(e.pos,a)),e.pos=a,!0)},SCHEME_RE=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i,linkify=function s(e,o){var a,c,h,g,b,_,j,$;return!e.md.options.linkify||e.linkLevel>0||(a=e.pos,c=e.posMax,a+3>c)||e.src.charCodeAt(a)!==58||e.src.charCodeAt(a+1)!==47||e.src.charCodeAt(a+2)!==47||(h=e.pending.match(SCHEME_RE),!h)||(g=h[1],b=e.md.linkify.matchAtStart(e.src.slice(a-g.length)),!b)||(_=b.url,_.length<=g.length)||(_=_.replace(/\*+$/,""),j=e.md.normalizeLink(_),!e.md.validateLink(j))?!1:(o||(e.pending=e.pending.slice(0,-g.length),$=e.push("link_open","a",1),$.attrs=[["href",j]],$.markup="linkify",$.info="auto",$=e.push("text","",0),$.content=e.md.normalizeLinkText(_),$=e.push("link_close","a",-1),$.markup="linkify",$.info="auto"),e.pos+=_.length-g.length,!0)},isSpace$3=utils$1.isSpace,newline=function s(e,o){var a,c,h,g=e.pos;if(e.src.charCodeAt(g)!==10)return!1;if(a=e.pending.length-1,c=e.posMax,!o)if(a>=0&&e.pending.charCodeAt(a)===32)if(a>=1&&e.pending.charCodeAt(a-1)===32){for(h=a-1;h>=1&&e.pending.charCodeAt(h-1)===32;)h--;e.pending=e.pending.slice(0,h),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(g++;g<c&&isSpace$3(e.src.charCodeAt(g));)g++;return e.pos=g,!0},isSpace$2=utils$1.isSpace,ESCAPED=[];for(var i=0;i<256;i++)ESCAPED.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(s){ESCAPED[s.charCodeAt(0)]=1});var _escape=function s(e,o){var a,c,h,g,b,_=e.pos,j=e.posMax;if(e.src.charCodeAt(_)!==92||(_++,_>=j))return!1;if(a=e.src.charCodeAt(_),a===10){for(o||e.push("hardbreak","br",0),_++;_<j&&(a=e.src.charCodeAt(_),!!isSpace$2(a));)_++;return e.pos=_,!0}return g=e.src[_],a>=55296&&a<=56319&&_+1<j&&(c=e.src.charCodeAt(_+1),c>=56320&&c<=57343&&(g+=e.src[_+1],_++)),h="\\"+g,o||(b=e.push("text_special","",0),a<256&&ESCAPED[a]!==0?b.content=g:b.content=h,b.markup=h,b.info="escape"),e.pos=_+1,!0},backticks=function s(e,o){var a,c,h,g,b,_,j,$,_e=e.pos,tt=e.src.charCodeAt(_e);if(tt!==96)return!1;for(a=_e,_e++,c=e.posMax;_e<c&&e.src.charCodeAt(_e)===96;)_e++;if(h=e.src.slice(a,_e),j=h.length,e.backticksScanned&&(e.backticks[j]||0)<=a)return o||(e.pending+=h),e.pos+=j,!0;for(_=_e;(b=e.src.indexOf("`",_))!==-1;){for(_=b+1;_<c&&e.src.charCodeAt(_)===96;)_++;if($=_-b,$===j)return o||(g=e.push("code_inline","code",0),g.markup=h,g.content=e.src.slice(_e,b).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),e.pos=_,!0;e.backticks[$]=b}return e.backticksScanned=!0,o||(e.pending+=h),e.pos+=j,!0},strikethrough={};strikethrough.tokenize=function s(e,o){var a,c,h,g,b,_=e.pos,j=e.src.charCodeAt(_);if(o||j!==126||(c=e.scanDelims(e.pos,!0),g=c.length,b=String.fromCharCode(j),g<2))return!1;for(g%2&&(h=e.push("text","",0),h.content=b,g--),a=0;a<g;a+=2)h=e.push("text","",0),h.content=b+b,e.delimiters.push({marker:j,length:0,token:e.tokens.length-1,end:-1,open:c.can_open,close:c.can_close});return e.pos+=c.length,!0};function postProcess$1(s,e){var o,a,c,h,g,b=[],_=e.length;for(o=0;o<_;o++)c=e[o],c.marker===126&&c.end!==-1&&(h=e[c.end],g=s.tokens[c.token],g.type="s_open",g.tag="s",g.nesting=1,g.markup="~~",g.content="",g=s.tokens[h.token],g.type="s_close",g.tag="s",g.nesting=-1,g.markup="~~",g.content="",s.tokens[h.token-1].type==="text"&&s.tokens[h.token-1].content==="~"&&b.push(h.token-1));for(;b.length;){for(o=b.pop(),a=o+1;a<s.tokens.length&&s.tokens[a].type==="s_close";)a++;a--,o!==a&&(g=s.tokens[a],s.tokens[a]=s.tokens[o],s.tokens[o]=g)}}strikethrough.postProcess=function s(e){var o,a=e.tokens_meta,c=e.tokens_meta.length;for(postProcess$1(e,e.delimiters),o=0;o<c;o++)a[o]&&a[o].delimiters&&postProcess$1(e,a[o].delimiters)};var emphasis={};emphasis.tokenize=function s(e,o){var a,c,h,g=e.pos,b=e.src.charCodeAt(g);if(o||b!==95&&b!==42)return!1;for(c=e.scanDelims(e.pos,b===42),a=0;a<c.length;a++)h=e.push("text","",0),h.content=String.fromCharCode(b),e.delimiters.push({marker:b,length:c.length,token:e.tokens.length-1,end:-1,open:c.can_open,close:c.can_close});return e.pos+=c.length,!0};function postProcess(s,e){var o,a,c,h,g,b,_=e.length;for(o=_-1;o>=0;o--)a=e[o],!(a.marker!==95&&a.marker!==42)&&a.end!==-1&&(c=e[a.end],b=o>0&&e[o-1].end===a.end+1&&e[o-1].marker===a.marker&&e[o-1].token===a.token-1&&e[a.end+1].token===c.token+1,g=String.fromCharCode(a.marker),h=s.tokens[a.token],h.type=b?"strong_open":"em_open",h.tag=b?"strong":"em",h.nesting=1,h.markup=b?g+g:g,h.content="",h=s.tokens[c.token],h.type=b?"strong_close":"em_close",h.tag=b?"strong":"em",h.nesting=-1,h.markup=b?g+g:g,h.content="",b&&(s.tokens[e[o-1].token].content="",s.tokens[e[a.end+1].token].content="",o--))}emphasis.postProcess=function s(e){var o,a=e.tokens_meta,c=e.tokens_meta.length;for(postProcess(e,e.delimiters),o=0;o<c;o++)a[o]&&a[o].delimiters&&postProcess(e,a[o].delimiters)};var normalizeReference$1=utils$1.normalizeReference,isSpace$1=utils$1.isSpace,link=function s(e,o){var a,c,h,g,b,_,j,$,_e,tt="",et="",ut=e.pos,ht=e.posMax,st=e.pos,nt=!0;if(e.src.charCodeAt(e.pos)!==91||(b=e.pos+1,g=e.md.helpers.parseLinkLabel(e,e.pos,!0),g<0))return!1;if(_=g+1,_<ht&&e.src.charCodeAt(_)===40){for(nt=!1,_++;_<ht&&(c=e.src.charCodeAt(_),!(!isSpace$1(c)&&c!==10));_++);if(_>=ht)return!1;if(st=_,j=e.md.helpers.parseLinkDestination(e.src,_,e.posMax),j.ok){for(tt=e.md.normalizeLink(j.str),e.md.validateLink(tt)?_=j.pos:tt="",st=_;_<ht&&(c=e.src.charCodeAt(_),!(!isSpace$1(c)&&c!==10));_++);if(j=e.md.helpers.parseLinkTitle(e.src,_,e.posMax),_<ht&&st!==_&&j.ok)for(et=j.str,_=j.pos;_<ht&&(c=e.src.charCodeAt(_),!(!isSpace$1(c)&&c!==10));_++);}(_>=ht||e.src.charCodeAt(_)!==41)&&(nt=!0),_++}if(nt){if(typeof e.env.references>"u")return!1;if(_<ht&&e.src.charCodeAt(_)===91?(st=_+1,_=e.md.helpers.parseLinkLabel(e,_),_>=0?h=e.src.slice(st,_++):_=g+1):_=g+1,h||(h=e.src.slice(b,g)),$=e.env.references[normalizeReference$1(h)],!$)return e.pos=ut,!1;tt=$.href,et=$.title}return o||(e.pos=b,e.posMax=g,_e=e.push("link_open","a",1),_e.attrs=a=[["href",tt]],et&&a.push(["title",et]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,_e=e.push("link_close","a",-1)),e.pos=_,e.posMax=ht,!0},normalizeReference=utils$1.normalizeReference,isSpace=utils$1.isSpace,image=function s(e,o){var a,c,h,g,b,_,j,$,_e,tt,et,ut,ht,st="",nt=e.pos,rt=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91||(_=e.pos+2,b=e.md.helpers.parseLinkLabel(e,e.pos+1,!1),b<0))return!1;if(j=b+1,j<rt&&e.src.charCodeAt(j)===40){for(j++;j<rt&&(c=e.src.charCodeAt(j),!(!isSpace(c)&&c!==10));j++);if(j>=rt)return!1;for(ht=j,_e=e.md.helpers.parseLinkDestination(e.src,j,e.posMax),_e.ok&&(st=e.md.normalizeLink(_e.str),e.md.validateLink(st)?j=_e.pos:st=""),ht=j;j<rt&&(c=e.src.charCodeAt(j),!(!isSpace(c)&&c!==10));j++);if(_e=e.md.helpers.parseLinkTitle(e.src,j,e.posMax),j<rt&&ht!==j&&_e.ok)for(tt=_e.str,j=_e.pos;j<rt&&(c=e.src.charCodeAt(j),!(!isSpace(c)&&c!==10));j++);else tt="";if(j>=rt||e.src.charCodeAt(j)!==41)return e.pos=nt,!1;j++}else{if(typeof e.env.references>"u")return!1;if(j<rt&&e.src.charCodeAt(j)===91?(ht=j+1,j=e.md.helpers.parseLinkLabel(e,j),j>=0?g=e.src.slice(ht,j++):j=b+1):j=b+1,g||(g=e.src.slice(_,b)),$=e.env.references[normalizeReference(g)],!$)return e.pos=nt,!1;st=$.href,tt=$.title}return o||(h=e.src.slice(_,b),e.md.inline.parse(h,e.md,e.env,ut=[]),et=e.push("image","img",0),et.attrs=a=[["src",st],["alt",""]],et.children=ut,et.content=h,tt&&a.push(["title",tt])),e.pos=j,e.posMax=rt,!0},EMAIL_RE=/^([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,AUTOLINK_RE=/^([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)$/,autolink=function s(e,o){var a,c,h,g,b,_,j=e.pos;if(e.src.charCodeAt(j)!==60)return!1;for(b=e.pos,_=e.posMax;;){if(++j>=_||(g=e.src.charCodeAt(j),g===60))return!1;if(g===62)break}return a=e.src.slice(b+1,j),AUTOLINK_RE.test(a)?(c=e.md.normalizeLink(a),e.md.validateLink(c)?(o||(h=e.push("link_open","a",1),h.attrs=[["href",c]],h.markup="autolink",h.info="auto",h=e.push("text","",0),h.content=e.md.normalizeLinkText(a),h=e.push("link_close","a",-1),h.markup="autolink",h.info="auto"),e.pos+=a.length+2,!0):!1):EMAIL_RE.test(a)?(c=e.md.normalizeLink("mailto:"+a),e.md.validateLink(c)?(o||(h=e.push("link_open","a",1),h.attrs=[["href",c]],h.markup="autolink",h.info="auto",h=e.push("text","",0),h.content=e.md.normalizeLinkText(a),h=e.push("link_close","a",-1),h.markup="autolink",h.info="auto"),e.pos+=a.length+2,!0):!1):!1},HTML_TAG_RE=html_re.HTML_TAG_RE;function isLinkOpen(s){return/^<a[>\s]/i.test(s)}function isLinkClose(s){return/^<\/a\s*>/i.test(s)}function isLetter(s){var e=s|32;return e>=97&&e<=122}var html_inline=function s(e,o){var a,c,h,g,b=e.pos;return!e.md.options.html||(h=e.posMax,e.src.charCodeAt(b)!==60||b+2>=h)||(a=e.src.charCodeAt(b+1),a!==33&&a!==63&&a!==47&&!isLetter(a))||(c=e.src.slice(b).match(HTML_TAG_RE),!c)?!1:(o||(g=e.push("html_inline","",0),g.content=c[0],isLinkOpen(g.content)&&e.linkLevel++,isLinkClose(g.content)&&e.linkLevel--),e.pos+=c[0].length,!0)},entities=entities$1,has=utils$1.has,isValidEntityCode=utils$1.isValidEntityCode,fromCodePoint=utils$1.fromCodePoint,DIGITAL_RE=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,NAMED_RE=/^&([a-z][a-z0-9]{1,31});/i,entity=function s(e,o){var a,c,h,g,b=e.pos,_=e.posMax;if(e.src.charCodeAt(b)!==38||b+1>=_)return!1;if(a=e.src.charCodeAt(b+1),a===35){if(h=e.src.slice(b).match(DIGITAL_RE),h)return o||(c=h[1][0].toLowerCase()==="x"?parseInt(h[1].slice(1),16):parseInt(h[1],10),g=e.push("text_special","",0),g.content=isValidEntityCode(c)?fromCodePoint(c):fromCodePoint(65533),g.markup=h[0],g.info="entity"),e.pos+=h[0].length,!0}else if(h=e.src.slice(b).match(NAMED_RE),h&&has(entities,h[1]))return o||(g=e.push("text_special","",0),g.content=entities[h[1]],g.markup=h[0],g.info="entity"),e.pos+=h[0].length,!0;return!1};function processDelimiters(s){var e,o,a,c,h,g,b,_,j={},$=s.length;if($){var _e=0,tt=-2,et=[];for(e=0;e<$;e++)if(a=s[e],et.push(0),(s[_e].marker!==a.marker||tt!==a.token-1)&&(_e=e),tt=a.token,a.length=a.length||0,!!a.close){for(j.hasOwnProperty(a.marker)||(j[a.marker]=[-1,-1,-1,-1,-1,-1]),h=j[a.marker][(a.open?3:0)+a.length%3],o=_e-et[_e]-1,g=o;o>h;o-=et[o]+1)if(c=s[o],c.marker===a.marker&&c.open&&c.end<0&&(b=!1,(c.close||a.open)&&(c.length+a.length)%3===0&&(c.length%3!==0||a.length%3!==0)&&(b=!0),!b)){_=o>0&&!s[o-1].open?et[o-1]+1:0,et[e]=e-o+_,et[o]=_,a.open=!1,c.end=e,c.close=!1,g=-1,tt=-2;break}g!==-1&&(j[a.marker][(a.open?3:0)+(a.length||0)%3]=g)}}}var balance_pairs=function s(e){var o,a=e.tokens_meta,c=e.tokens_meta.length;for(processDelimiters(e.delimiters),o=0;o<c;o++)a[o]&&a[o].delimiters&&processDelimiters(a[o].delimiters)},fragments_join=function s(e){var o,a,c=0,h=e.tokens,g=e.tokens.length;for(o=a=0;o<g;o++)h[o].nesting<0&&c--,h[o].level=c,h[o].nesting>0&&c++,h[o].type==="text"&&o+1<g&&h[o+1].type==="text"?h[o+1].content=h[o].content+h[o+1].content:(o!==a&&(h[a]=h[o]),a++);o!==a&&(h.length=a)},Token=token,isWhiteSpace=utils$1.isWhiteSpace,isPunctChar=utils$1.isPunctChar,isMdAsciiPunct=utils$1.isMdAsciiPunct;function StateInline(s,e,o,a){this.src=s,this.env=o,this.md=e,this.tokens=a,this.tokens_meta=Array(a.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}StateInline.prototype.pushPending=function(){var s=new Token("text","",0);return s.content=this.pending,s.level=this.pendingLevel,this.tokens.push(s),this.pending="",s};StateInline.prototype.push=function(s,e,o){this.pending&&this.pushPending();var a=new Token(s,e,o),c=null;return o<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),a.level=this.level,o>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],c={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(a),this.tokens_meta.push(c),a};StateInline.prototype.scanDelims=function(s,e){var o=s,a,c,h,g,b,_,j,$,_e,tt=!0,et=!0,ut=this.posMax,ht=this.src.charCodeAt(s);for(a=s>0?this.src.charCodeAt(s-1):32;o<ut&&this.src.charCodeAt(o)===ht;)o++;return h=o-s,c=o<ut?this.src.charCodeAt(o):32,j=isMdAsciiPunct(a)||isPunctChar(String.fromCharCode(a)),_e=isMdAsciiPunct(c)||isPunctChar(String.fromCharCode(c)),_=isWhiteSpace(a),$=isWhiteSpace(c),$?tt=!1:_e&&(_||j||(tt=!1)),_?et=!1:j&&($||_e||(et=!1)),e?(g=tt,b=et):(g=tt&&(!et||j),b=et&&(!tt||_e)),{can_open:g,can_close:b,length:h}};StateInline.prototype.Token=Token;var state_inline=StateInline,Ruler=ruler,_rules=[["text",text],["linkify",linkify],["newline",newline],["escape",_escape],["backticks",backticks],["strikethrough",strikethrough.tokenize],["emphasis",emphasis.tokenize],["link",link],["image",image],["autolink",autolink],["html_inline",html_inline],["entity",entity]],_rules2=[["balance_pairs",balance_pairs],["strikethrough",strikethrough.postProcess],["emphasis",emphasis.postProcess],["fragments_join",fragments_join]];function ParserInline$1(){var s;for(this.ruler=new Ruler,s=0;s<_rules.length;s++)this.ruler.push(_rules[s][0],_rules[s][1]);for(this.ruler2=new Ruler,s=0;s<_rules2.length;s++)this.ruler2.push(_rules2[s][0],_rules2[s][1])}ParserInline$1.prototype.skipToken=function(s){var e,o,a=s.pos,c=this.ruler.getRules(""),h=c.length,g=s.md.options.maxNesting,b=s.cache;if(typeof b[a]<"u"){s.pos=b[a];return}if(s.level<g){for(o=0;o<h;o++)if(s.level++,e=c[o](s,!0),s.level--,e){if(a>=s.pos)throw new Error("inline rule didn't increment state.pos");break}}else s.pos=s.posMax;e||s.pos++,b[a]=s.pos};ParserInline$1.prototype.tokenize=function(s){for(var e,o,a,c=this.ruler.getRules(""),h=c.length,g=s.posMax,b=s.md.options.maxNesting;s.pos<g;){if(a=s.pos,s.level<b){for(o=0;o<h;o++)if(e=c[o](s,!1),e){if(a>=s.pos)throw new Error("inline rule didn't increment state.pos");break}}if(e){if(s.pos>=g)break;continue}s.pending+=s.src[s.pos++]}s.pending&&s.pushPending()};ParserInline$1.prototype.parse=function(s,e,o,a){var c,h,g,b=new this.State(s,e,o,a);for(this.tokenize(b),h=this.ruler2.getRules(""),g=h.length,c=0;c<g;c++)h[c](b)};ParserInline$1.prototype.State=state_inline;var parser_inline=ParserInline$1,re,hasRequiredRe;function requireRe(){return hasRequiredRe||(hasRequiredRe=1,re=function(s){var e={};s=s||{},e.src_Any=requireRegex$3().source,e.src_Cc=requireRegex$2().source,e.src_Z=requireRegex().source,e.src_P=regex$4.source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");var o="[><]";return e.src_pseudo_letter="(?:(?!"+o+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+o+"|"+e.src_ZPCc+")(?!"+(s["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+o+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]|$)|"+(s["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+e.src_ZCc+"|$)|;(?!"+e.src_ZCc+"|$)|\\!+(?!"+e.src_ZCc+"|[!]|$)|\\?(?!"+e.src_ZCc+"|[?]|$))+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+o+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}),re}function assign(s){var e=Array.prototype.slice.call(arguments,1);return e.forEach(function(o){o&&Object.keys(o).forEach(function(a){s[a]=o[a]})}),s}function _class(s){return Object.prototype.toString.call(s)}function isString(s){return _class(s)==="[object String]"}function isObject(s){return _class(s)==="[object Object]"}function isRegExp(s){return _class(s)==="[object RegExp]"}function isFunction(s){return _class(s)==="[object Function]"}function escapeRE(s){return s.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var defaultOptions={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function isOptionsObj(s){return Object.keys(s||{}).reduce(function(e,o){return e||defaultOptions.hasOwnProperty(o)},!1)}var defaultSchemas={"http:":{validate:function(s,e,o){var a=s.slice(e);return o.re.http||(o.re.http=new RegExp("^\\/\\/"+o.re.src_auth+o.re.src_host_port_strict+o.re.src_path,"i")),o.re.http.test(a)?a.match(o.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(s,e,o){var a=s.slice(e);return o.re.no_http||(o.re.no_http=new RegExp("^"+o.re.src_auth+"(?:localhost|(?:(?:"+o.re.src_domain+")\\.)+"+o.re.src_domain_root+")"+o.re.src_port+o.re.src_host_terminator+o.re.src_path,"i")),o.re.no_http.test(a)?e>=3&&s[e-3]===":"||e>=3&&s[e-3]==="/"?0:a.match(o.re.no_http)[0].length:0}},"mailto:":{validate:function(s,e,o){var a=s.slice(e);return o.re.mailto||(o.re.mailto=new RegExp("^"+o.re.src_email_name+"@"+o.re.src_host_strict,"i")),o.re.mailto.test(a)?a.match(o.re.mailto)[0].length:0}}},tlds_2ch_src_re="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",tlds_default="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function resetScanCache(s){s.__index__=-1,s.__text_cache__=""}function createValidator(s){return function(e,o){var a=e.slice(o);return s.test(a)?a.match(s)[0].length:0}}function createNormalizer(){return function(s,e){e.normalize(s)}}function compile(s){var e=s.re=requireRe()(s.__opts__),o=s.__tlds__.slice();s.onCompile(),s.__tlds_replaced__||o.push(tlds_2ch_src_re),o.push(e.src_xn),e.src_tlds=o.join("|");function a(b){return b.replace("%TLDS%",e.src_tlds)}e.email_fuzzy=RegExp(a(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(a(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(a(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(a(e.tpl_host_fuzzy_test),"i");var c=[];s.__compiled__={};function h(b,_){throw new Error('(LinkifyIt) Invalid schema "'+b+'": '+_)}Object.keys(s.__schemas__).forEach(function(b){var _=s.__schemas__[b];if(_!==null){var j={validate:null,link:null};if(s.__compiled__[b]=j,isObject(_)){isRegExp(_.validate)?j.validate=createValidator(_.validate):isFunction(_.validate)?j.validate=_.validate:h(b,_),isFunction(_.normalize)?j.normalize=_.normalize:_.normalize?h(b,_):j.normalize=createNormalizer();return}if(isString(_)){c.push(b);return}h(b,_)}}),c.forEach(function(b){s.__compiled__[s.__schemas__[b]]&&(s.__compiled__[b].validate=s.__compiled__[s.__schemas__[b]].validate,s.__compiled__[b].normalize=s.__compiled__[s.__schemas__[b]].normalize)}),s.__compiled__[""]={validate:null,normalize:createNormalizer()};var g=Object.keys(s.__compiled__).filter(function(b){return b.length>0&&s.__compiled__[b]}).map(escapeRE).join("|");s.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+g+")","i"),s.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+g+")","ig"),s.re.schema_at_start=RegExp("^"+s.re.schema_search.source,"i"),s.re.pretest=RegExp("("+s.re.schema_test.source+")|("+s.re.host_fuzzy_test.source+")|@","i"),resetScanCache(s)}function Match(s,e){var o=s.__index__,a=s.__last_index__,c=s.__text_cache__.slice(o,a);this.schema=s.__schema__.toLowerCase(),this.index=o+e,this.lastIndex=a+e,this.raw=c,this.text=c,this.url=c}function createMatch(s,e){var o=new Match(s,e);return s.__compiled__[o.schema].normalize(o,s),o}function LinkifyIt$1(s,e){if(!(this instanceof LinkifyIt$1))return new LinkifyIt$1(s,e);e||isOptionsObj(s)&&(e=s,s={}),this.__opts__=assign({},defaultOptions,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=assign({},defaultSchemas,s),this.__compiled__={},this.__tlds__=tlds_default,this.__tlds_replaced__=!1,this.re={},compile(this)}LinkifyIt$1.prototype.add=function s(e,o){return this.__schemas__[e]=o,compile(this),this};LinkifyIt$1.prototype.set=function s(e){return this.__opts__=assign(this.__opts__,e),this};LinkifyIt$1.prototype.test=function s(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;var o,a,c,h,g,b,_,j,$;if(this.re.schema_test.test(e)){for(_=this.re.schema_search,_.lastIndex=0;(o=_.exec(e))!==null;)if(h=this.testSchemaAt(e,o[2],_.lastIndex),h){this.__schema__=o[2],this.__index__=o.index+o[1].length,this.__last_index__=o.index+o[0].length+h;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(j=e.search(this.re.host_fuzzy_test),j>=0&&(this.__index__<0||j<this.__index__)&&(a=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(g=a.index+a[1].length,(this.__index__<0||g<this.__index__)&&(this.__schema__="",this.__index__=g,this.__last_index__=a.index+a[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&($=e.indexOf("@"),$>=0&&(c=e.match(this.re.email_fuzzy))!==null&&(g=c.index+c[1].length,b=c.index+c[0].length,(this.__index__<0||g<this.__index__||g===this.__index__&&b>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=g,this.__last_index__=b))),this.__index__>=0};LinkifyIt$1.prototype.pretest=function s(e){return this.re.pretest.test(e)};LinkifyIt$1.prototype.testSchemaAt=function s(e,o,a){return this.__compiled__[o.toLowerCase()]?this.__compiled__[o.toLowerCase()].validate(e,a,this):0};LinkifyIt$1.prototype.match=function s(e){var o=0,a=[];this.__index__>=0&&this.__text_cache__===e&&(a.push(createMatch(this,o)),o=this.__last_index__);for(var c=o?e.slice(o):e;this.test(c);)a.push(createMatch(this,o)),c=c.slice(this.__last_index__),o+=this.__last_index__;return a.length?a:null};LinkifyIt$1.prototype.matchAtStart=function s(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;var o=this.re.schema_at_start.exec(e);if(!o)return null;var a=this.testSchemaAt(e,o[2],o[0].length);return a?(this.__schema__=o[2],this.__index__=o.index+o[1].length,this.__last_index__=o.index+o[0].length+a,createMatch(this,0)):null};LinkifyIt$1.prototype.tlds=function s(e,o){return e=Array.isArray(e)?e:[e],o?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(a,c,h){return a!==h[c-1]}).reverse(),compile(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,compile(this),this)};LinkifyIt$1.prototype.normalize=function s(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)};LinkifyIt$1.prototype.onCompile=function s(){};var linkifyIt=LinkifyIt$1;const maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexPunycode=/^xn--/,regexNonASCII=/[^\0-\x7F]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},baseMinusTMin=base-tMin,floor=Math.floor,stringFromCharCode=String.fromCharCode;function error(s){throw new RangeError(errors[s])}function map(s,e){const o=[];let a=s.length;for(;a--;)o[a]=e(s[a]);return o}function mapDomain(s,e){const o=s.split("@");let a="";o.length>1&&(a=o[0]+"@",s=o[1]),s=s.replace(regexSeparators,".");const c=s.split("."),h=map(c,e).join(".");return a+h}function ucs2decode(s){const e=[];let o=0;const a=s.length;for(;o<a;){const c=s.charCodeAt(o++);if(c>=55296&&c<=56319&&o<a){const h=s.charCodeAt(o++);(h&64512)==56320?e.push(((c&1023)<<10)+(h&1023)+65536):(e.push(c),o--)}else e.push(c)}return e}const ucs2encode=s=>String.fromCodePoint(...s),basicToDigit=function(s){return s>=48&&s<58?26+(s-48):s>=65&&s<91?s-65:s>=97&&s<123?s-97:base},digitToBasic=function(s,e){return s+22+75*(s<26)-((e!=0)<<5)},adapt=function(s,e,o){let a=0;for(s=o?floor(s/damp):s>>1,s+=floor(s/e);s>baseMinusTMin*tMax>>1;a+=base)s=floor(s/baseMinusTMin);return floor(a+(baseMinusTMin+1)*s/(s+skew))},decode=function(s){const e=[],o=s.length;let a=0,c=initialN,h=initialBias,g=s.lastIndexOf(delimiter);g<0&&(g=0);for(let b=0;b<g;++b)s.charCodeAt(b)>=128&&error("not-basic"),e.push(s.charCodeAt(b));for(let b=g>0?g+1:0;b<o;){const _=a;for(let $=1,_e=base;;_e+=base){b>=o&&error("invalid-input");const tt=basicToDigit(s.charCodeAt(b++));tt>=base&&error("invalid-input"),tt>floor((maxInt-a)/$)&&error("overflow"),a+=tt*$;const et=_e<=h?tMin:_e>=h+tMax?tMax:_e-h;if(tt<et)break;const ut=base-et;$>floor(maxInt/ut)&&error("overflow"),$*=ut}const j=e.length+1;h=adapt(a-_,j,_==0),floor(a/j)>maxInt-c&&error("overflow"),c+=floor(a/j),a%=j,e.splice(a++,0,c)}return String.fromCodePoint(...e)},encode=function(s){const e=[];s=ucs2decode(s);const o=s.length;let a=initialN,c=0,h=initialBias;for(const _ of s)_<128&&e.push(stringFromCharCode(_));const g=e.length;let b=g;for(g&&e.push(delimiter);b<o;){let _=maxInt;for(const $ of s)$>=a&&$<_&&(_=$);const j=b+1;_-a>floor((maxInt-c)/j)&&error("overflow"),c+=(_-a)*j,a=_;for(const $ of s)if($<a&&++c>maxInt&&error("overflow"),$===a){let _e=c;for(let tt=base;;tt+=base){const et=tt<=h?tMin:tt>=h+tMax?tMax:tt-h;if(_e<et)break;const ut=_e-et,ht=base-et;e.push(stringFromCharCode(digitToBasic(et+ut%ht,0))),_e=floor(ut/ht)}e.push(stringFromCharCode(digitToBasic(_e,0))),h=adapt(c,j,b===g),c=0,++b}++c,++a}return e.join("")},toUnicode=function(s){return mapDomain(s,function(e){return regexPunycode.test(e)?decode(e.slice(4).toLowerCase()):e})},toASCII=function(s){return mapDomain(s,function(e){return regexNonASCII.test(e)?"xn--"+encode(e):e})},punycode$1={version:"2.3.1",ucs2:{decode:ucs2decode,encode:ucs2encode},decode,encode,toASCII,toUnicode},punycode_es6=Object.freeze(Object.defineProperty({__proto__:null,decode,default:punycode$1,encode,toASCII,toUnicode,ucs2decode,ucs2encode},Symbol.toStringTag,{value:"Module"})),require$$8=getAugmentedNamespace(punycode_es6);var _default={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},zero={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},commonmark={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},utils=utils$1,helpers=helpers$1,Renderer=renderer,ParserCore=parser_core,ParserBlock=parser_block,ParserInline=parser_inline,LinkifyIt=linkifyIt,mdurl=mdurl$1,punycode=require$$8,config={default:_default,zero,commonmark},BAD_PROTO_RE=/^(vbscript|javascript|file|data):/,GOOD_DATA_RE=/^data:image\/(gif|png|jpeg|webp);/;function validateLink(s){var e=s.trim().toLowerCase();return BAD_PROTO_RE.test(e)?!!GOOD_DATA_RE.test(e):!0}var RECODE_HOSTNAME_FOR=["http:","https:","mailto:"];function normalizeLink(s){var e=mdurl.parse(s,!0);if(e.hostname&&(!e.protocol||RECODE_HOSTNAME_FOR.indexOf(e.protocol)>=0))try{e.hostname=punycode.toASCII(e.hostname)}catch{}return mdurl.encode(mdurl.format(e))}function normalizeLinkText(s){var e=mdurl.parse(s,!0);if(e.hostname&&(!e.protocol||RECODE_HOSTNAME_FOR.indexOf(e.protocol)>=0))try{e.hostname=punycode.toUnicode(e.hostname)}catch{}return mdurl.decode(mdurl.format(e),mdurl.decode.defaultChars+"%")}function MarkdownIt$1(s,e){if(!(this instanceof MarkdownIt$1))return new MarkdownIt$1(s,e);e||utils.isString(s)||(e=s||{},s="default"),this.inline=new ParserInline,this.block=new ParserBlock,this.core=new ParserCore,this.renderer=new Renderer,this.linkify=new LinkifyIt,this.validateLink=validateLink,this.normalizeLink=normalizeLink,this.normalizeLinkText=normalizeLinkText,this.utils=utils,this.helpers=utils.assign({},helpers),this.options={},this.configure(s),e&&this.set(e)}MarkdownIt$1.prototype.set=function(s){return utils.assign(this.options,s),this};MarkdownIt$1.prototype.configure=function(s){var e=this,o;if(utils.isString(s)&&(o=s,s=config[o],!s))throw new Error('Wrong `markdown-it` preset "'+o+'", check name');if(!s)throw new Error("Wrong `markdown-it` preset, can't be empty");return s.options&&e.set(s.options),s.components&&Object.keys(s.components).forEach(function(a){s.components[a].rules&&e[a].ruler.enableOnly(s.components[a].rules),s.components[a].rules2&&e[a].ruler2.enableOnly(s.components[a].rules2)}),this};MarkdownIt$1.prototype.enable=function(s,e){var o=[];Array.isArray(s)||(s=[s]),["core","block","inline"].forEach(function(c){o=o.concat(this[c].ruler.enable(s,!0))},this),o=o.concat(this.inline.ruler2.enable(s,!0));var a=s.filter(function(c){return o.indexOf(c)<0});if(a.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+a);return this};MarkdownIt$1.prototype.disable=function(s,e){var o=[];Array.isArray(s)||(s=[s]),["core","block","inline"].forEach(function(c){o=o.concat(this[c].ruler.disable(s,!0))},this),o=o.concat(this.inline.ruler2.disable(s,!0));var a=s.filter(function(c){return o.indexOf(c)<0});if(a.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+a);return this};MarkdownIt$1.prototype.use=function(s){var e=[this].concat(Array.prototype.slice.call(arguments,1));return s.apply(s,e),this};MarkdownIt$1.prototype.parse=function(s,e){if(typeof s!="string")throw new Error("Input data should be a String");var o=new this.core.State(s,this,e);return this.core.process(o),o.tokens};MarkdownIt$1.prototype.render=function(s,e){return e=e||{},this.renderer.render(this.parse(s,e),this.options,e)};MarkdownIt$1.prototype.parseInline=function(s,e){var o=new this.core.State(s,this,e);return o.inlineMode=!0,this.core.process(o),o.tokens};MarkdownIt$1.prototype.renderInline=function(s,e){return e=e||{},this.renderer.render(this.parseInline(s,e),this.options,e)};var lib=MarkdownIt$1,markdownIt=lib;const MarkdownIt=getDefaultExportFromCjs(markdownIt);pdfjs$1.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js";const parseBook=async s=>{const e=s.name.split(".").pop().toLowerCase();switch(console.log(` Parseando ${e.toUpperCase()}: ${s.name}`),e){case"epub":return await parseEpub(s);case"pdf":return await parsePdf(s);case"md":case"markdown":return await parseMarkdown(s);case"txt":return await parseText(s);default:throw new Error(`Formato ${e} no soportado. Formatos vlidos: EPUB, PDF, MD, TXT`)}},parseEpub=async s=>{var e,o,a,c,h,g;try{const b=ePub(s);await b.ready;const _=[];for(let j=0;j<Math.min(b.spine.items.length,20);j++){const $=b.spine.items[j];try{const _e=await b.load($.href),tt=_e.textContent||_e.innerText||"";if(tt.length>100){const et=cleanText(tt),ut=splitIntoSentences(et);_.push({id:`chapter-${j+1}`,title:$.title||$.id||`Captulo ${j+1}`,content:et,sentences:ut,wordCount:et.split(" ").length})}}catch(_e){console.warn(` Error cargando captulo ${j+1}:`,_e.message);continue}}if(_.length===0)throw new Error("No se pudieron extraer captulos del EPUB");return{title:((o=(e=b.packaging)==null?void 0:e.metadata)==null?void 0:o.title)||s.name,author:((c=(a=b.packaging)==null?void 0:a.metadata)==null?void 0:c.creator)||"Autor desconocido",language:((g=(h=b.packaging)==null?void 0:h.metadata)==null?void 0:g.language)||"es",chapters:_,totalSentences:_.reduce((j,$)=>j+$.sentences.length,0),format:"epub",source:s.name}}catch(b){throw new Error(`Error procesando EPUB: ${b.message}`)}},parsePdf=async s=>{try{const e=await s.arrayBuffer(),o=await pdfjs$1.getDocument({data:e}).promise;console.log(` PDF cargado: ${o.numPages} pginas`);let a="";const c=[];let h="",g=0;for(let b=1;b<=Math.min(o.numPages,30);b++)try{const j=await(await o.getPage(b)).getTextContent();let $="";if(j.items.forEach(_e=>{_e.str&&($+=_e.str+" ")}),a+=$+`

`,h+=$+" ",g++,(g%3===0||b===Math.min(o.numPages,30))&&h.trim()){const _e=cleanText(h),tt=splitIntoSentences(_e);tt.length>0&&c.push({id:`section-${c.length+1}`,title:`Seccin ${c.length+1}`,content:_e,sentences:tt,pages:g===1?`${b}`:`${b-g+1}-${b}`,wordCount:_e.split(" ").length}),h="",g=0}}catch(_){console.warn(` Error pgina ${b}:`,_.message);continue}if(c.length===0)throw new Error("No se pudo extraer texto del PDF");return{title:extractTitleFromPdf(a)||s.name,author:"Extrado de PDF",language:"es",chapters:c,totalSentences:c.reduce((b,_)=>b+_.sentences.length,0),format:"pdf",source:s.name,pages:o.numPages}}catch(e){throw new Error(`Error procesando PDF: ${e.message}`)}},parseMarkdown=async s=>{var e;try{const o=await s.text(),a=new MarkdownIt,c=o.split(/^#{1,2}\s+/gm).filter(g=>g.trim()),h=[];if(c.forEach((g,b)=>{var _e;const _=g.split(`
`),j=((_e=_[0])==null?void 0:_e.trim())||`Seccin ${b+1}`,$=_.slice(1).join(`
`).trim();if($){const tt=cleanMarkdown($),et=splitIntoSentences(tt);et.length>0&&h.push({id:`section-${b+1}`,title:j,content:tt,sentences:et,wordCount:tt.split(" ").length})}}),h.length===0){const g=cleanMarkdown(o),b=splitIntoSentences(g);h.push({id:"chapter-1",title:s.name,content:g,sentences:b,wordCount:g.split(" ").length})}return{title:((e=h[0])==null?void 0:e.title)||s.name,author:"Documento Markdown",language:"es",chapters:h,totalSentences:h.reduce((g,b)=>g+b.sentences.length,0),format:"markdown",source:s.name}}catch(o){throw new Error(`Error procesando Markdown: ${o.message}`)}},parseText=async s=>{try{const e=await s.text(),o=e.split(/\n\s*\n/).filter(h=>h.trim()),a=[],c=4;for(let h=0;h<o.length;h+=c){const b=o.slice(h,h+c).join(`

`).trim();if(b){const _=cleanText(b),j=splitIntoSentences(_);j.length>0&&a.push({id:`chapter-${a.length+1}`,title:`Captulo ${a.length+1}`,content:_,sentences:j,wordCount:_.split(" ").length})}}if(a.length===0){const h=cleanText(e),g=splitIntoSentences(h);a.push({id:"chapter-1",title:s.name,content:h,sentences:g,wordCount:h.split(" ").length})}return{title:extractTitleFromText(e)||s.name,author:"Texto sin formato",language:"es",chapters:a,totalSentences:a.reduce((h,g)=>h+g.sentences.length,0),format:"text",source:s.name}}catch(e){throw new Error(`Error procesando texto: ${e.message}`)}},cleanMarkdown=s=>s.replace(/[*_~`]/g,"").replace(/\[([^\]]+)\]\([^)]+\)/g,"$1").replace(/#{1,6}\s*/g,"").replace(/^[-*+]\s+/gm,"").replace(/^\d+\.\s+/gm,"").trim(),cleanText=s=>s.replace(/\s+/g," ").replace(/\n+/g," ").replace(/[\x00-\x1F\x7F]/g,"").replace(/[^\x20-\x7E\u00A0-\uFFFF]/g,"").trim(),splitIntoSentences=s=>s?(s.match(/[^.!?]+[.!?]+/g)||[]).map(o=>o.trim()).filter(o=>o.length>5).slice(0,300):[],extractTitleFromPdf=s=>{const e=s.split(`
`).slice(0,10);for(const o of e){const a=o.trim();if(a.length>10&&a.length<100&&(a===a.toUpperCase()||/^[A-Z][^.]*$/.test(a)))return a}return null},extractTitleFromText=s=>{const e=s.split(`
`);for(const o of e.slice(0,5)){const a=o.trim();if(a.length>5&&a.length<100&&!a.includes("	"))return a}return null},FileUploader=({onBookUpload:s})=>{const[e,o]=reactExports.useState(!1),[a,c]=reactExports.useState(!1),[h,g]=reactExports.useState(0),b=reactExports.useCallback(et=>{et.preventDefault(),o(!0)},[]),_=reactExports.useCallback(et=>{et.preventDefault(),o(!1)},[]),j=reactExports.useCallback(async et=>{et.preventDefault(),o(!1);const ut=Array.from(et.dataTransfer.files);ut.length>0&&await _e(ut[0])},[]),$=reactExports.useCallback(async et=>{const ut=Array.from(et.target.files);ut.length>0&&await _e(ut[0])},[]),_e=async et=>{c(!0),g(0);try{const ut=setInterval(()=>{g(st=>st>=90?(clearInterval(ut),90):st+10)},200);console.log(" Procesando archivo:",et.name);const ht=await parseBook(et);clearInterval(ut),g(100),setTimeout(()=>{s(ht),c(!1),g(0)},500)}catch(ut){console.error(" Error procesando archivo:",ut),c(!1),g(0),alert(`Error procesando archivo: ${ut.message}`)}},tt=[{ext:"EPUB",desc:"Libros electrnicos",icon:BookOpen},{ext:"PDF",desc:"Documentos PDF",icon:FileText},{ext:"MD",desc:"Markdown",icon:File},{ext:"TXT",desc:"Texto plano",icon:FileText}];return jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"max-w-4xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:`upload-area relative overflow-hidden ${e?"dragover":""} ${a?"pointer-events-none":""}`,onDragOver:b,onDragLeave:_,onDrop:j,onClick:()=>{var et;return!a&&((et=document.getElementById("file-input"))==null?void 0:et.click())},children:[a&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 bg-black/50 backdrop-blur-sm flex flex-col items-center justify-center z-10",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx(motion.div,{className:"w-16 h-16 border-4 border-white/30 border-t-hypatia-pink rounded-full mb-4",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),jsxRuntimeExports.jsx("p",{className:"text-lg font-medium mb-2",children:"Procesando libro..."}),jsxRuntimeExports.jsx("div",{className:"w-64 h-2 bg-white/20 rounded-full overflow-hidden",children:jsxRuntimeExports.jsx(motion.div,{className:"h-full bg-gradient-to-r from-hypatia-pink to-consciousness-purple",style:{width:`${h}%`},transition:{duration:.3}})}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-white/60 mt-2",children:[h,"%"]})]})}),jsxRuntimeExports.jsxs("div",{className:"text-center py-16",children:[jsxRuntimeExports.jsx(motion.div,{className:"w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-hypatia-pink to-consciousness-purple rounded-full flex items-center justify-center",animate:e?{scale:1.1}:{scale:1},transition:{duration:.2},children:jsxRuntimeExports.jsx(Upload,{className:"w-12 h-12 text-white"})}),jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold mb-4",children:e?"Suelta tu libro aqu":"Arrastra tu libro o haz clic"}),jsxRuntimeExports.jsx("p",{className:"text-xl text-white/70 mb-8",children:"Sube cualquier archivo y comenzar la magia de la lectura con voz"}),jsxRuntimeExports.jsx("input",{id:"file-input",type:"file",accept:".epub,.pdf,.md,.markdown,.txt",onChange:$,className:"hidden"}),jsxRuntimeExports.jsx(motion.button,{className:"btn-primary text-lg px-8 py-4",whileHover:{scale:1.05},whileTap:{scale:.95},disabled:a,children:"Seleccionar Archivo"})]})]}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.3},className:"mt-8",children:[jsxRuntimeExports.jsx("h3",{className:"text-center text-lg font-medium mb-6 text-white/80",children:"Formatos Soportados"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:tt.map((et,ut)=>{const ht=et.icon;return jsxRuntimeExports.jsxs(motion.div,{className:"card text-center py-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5+ut*.1},whileHover:{scale:1.02},children:[jsxRuntimeExports.jsx(ht,{className:"w-8 h-8 mx-auto mb-2 text-hypatia-pink"}),jsxRuntimeExports.jsx("div",{className:"font-bold text-sm",children:et.ext}),jsxRuntimeExports.jsx("div",{className:"text-xs text-white/60 mt-1",children:et.desc})]},et.ext)})})]}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.6},className:"mt-8 text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-white/60 mb-4",children:"No tienes un libro a mano? Prueba con estos ejemplos:"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[jsxRuntimeExports.jsx("button",{className:"btn-secondary text-sm px-4 py-2",children:" El Quijote (demo)"}),jsxRuntimeExports.jsx("button",{className:"btn-secondary text-sm px-4 py-2",children:" Sobre IA Consciente (demo)"}),jsxRuntimeExports.jsx("button",{className:"btn-secondary text-sm px-4 py-2",children:" Poemas de Amor (demo)"})]})]})]})};class AudioManager{constructor(){this.isInitialized=!1,this.isPlaying=!1,this.isPaused=!1,this.currentSentence=0,this.sentences=[],this.currentVoice=null,this.speed=1,this.pitch=1,this.volume=.8,this.onSentenceChange=null,this.onProgress=null,this.onEnd=null,this.utterance=null,this.audioQueue=[],this.startTime=0,this.pausedTime=0,this.sentencePause=500,this.enableHighlighting=!0,this.init()}async init(){try{if(!("speechSynthesis"in window))throw new Error("Speech Synthesis no soportado en este navegador");await this.loadVoices(),this.isInitialized=!0,console.log(" AudioManager inicializado correctamente")}catch(e){throw console.error(" Error inicializando AudioManager:",e),e}}async loadVoices(){return new Promise(e=>{const o=()=>{const a=speechSynthesis.getVoices();if(a.length>0){const c=a.find(h=>h.lang.startsWith("es")&&h.name.includes("Google"))||a.find(h=>h.lang.startsWith("es"));this.currentVoice=c||a[0],console.log(" Voz seleccionada:",this.currentVoice.name),e(a)}else setTimeout(o,100)};speechSynthesis.onvoiceschanged=o,o()})}loadChapter(e,o=null){if(!e||!e.sentences){console.warn(" Captulo invlido o sin frases");return}this.sentences=e.sentences,this.currentSentence=0,o&&this.setVoice(o),console.log(` Captulo cargado: ${this.sentences.length} frases`)}setVoice(e){const a=speechSynthesis.getVoices().find(c=>c.name===e);a?(this.currentVoice=a,console.log(" Voz cambiada a:",a.name)):console.warn(" Voz no encontrada:",e)}async play(){if(!this.isInitialized){console.warn(" AudioManager no inicializado");return}if(this.sentences.length===0){console.warn(" No hay frases para reproducir");return}this.isPlaying=!0,this.isPaused=!1,this.startTime=Date.now()-this.pausedTime,console.log(` Reproduciendo desde frase ${this.currentSentence}`),await this.playCurrentSentence()}pause(){this.isPlaying=!1,this.isPaused=!0,this.pausedTime=Date.now()-this.startTime,speechSynthesis.cancel(),console.log(" Reproduccin pausada")}stop(){this.isPlaying=!1,this.isPaused=!1,this.pausedTime=0,this.currentSentence=0,speechSynthesis.cancel(),console.log(" Reproduccin detenida")}skip(e){const a=Math.round(e*.3),c=Math.max(0,Math.min(this.sentences.length-1,this.currentSentence+a));this.jumpToSentence(c),console.log(` Saltado ${e}s (${a} frases) a frase ${c}`)}jumpToSentence(e){e>=0&&e<this.sentences.length&&(this.currentSentence=e,this.onSentenceChange&&this.onSentenceChange(e),this.isPlaying&&(speechSynthesis.cancel(),setTimeout(()=>this.playCurrentSentence(),100)))}setSpeed(e){this.speed=Math.max(.1,Math.min(3,e)),console.log(` Velocidad cambiada a: ${this.speed}x`)}setPitch(e){this.pitch=Math.max(.1,Math.min(2,e)),console.log(` Tono cambiado a: ${this.pitch}`)}setVolume(e){this.volume=Math.max(0,Math.min(1,e)),console.log(` Volumen cambiado a: ${this.volume}`)}async playCurrentSentence(){if(!this.isPlaying||this.currentSentence>=this.sentences.length){this.onPlaybackEnd();return}const e=this.sentences[this.currentSentence];if(this.onSentenceChange&&this.onSentenceChange(this.currentSentence),this.utterance=new SpeechSynthesisUtterance(e),this.utterance.voice=this.currentVoice,this.utterance.rate=this.speed,this.utterance.pitch=this.pitch,this.utterance.volume=this.volume,this.utterance.onend=()=>{this.isPlaying&&(this.currentSentence++,setTimeout(()=>{this.playCurrentSentence()},this.sentencePause))},this.utterance.onerror=o=>{console.error(" Error en speech synthesis:",o),this.onPlaybackEnd()},this.onProgress){const o=this.currentSentence/this.sentences.length;this.onProgress(o)}speechSynthesis.speak(this.utterance),console.log(` Reproduciendo frase ${this.currentSentence}: "${e.substring(0,50)}..."`)}async speakText(e){if(!this.isInitialized){console.warn(" AudioManager no inicializado");return}const o=this.isPlaying;return o&&this.pause(),new Promise((a,c)=>{const h=new SpeechSynthesisUtterance(e);h.voice=this.currentVoice,h.rate=this.speed,h.pitch=this.pitch,h.volume=this.volume,h.onend=()=>{console.log(" Texto personalizado reproducido"),o&&setTimeout(()=>this.play(),500),a()},h.onerror=g=>{console.error(" Error reproduciendo texto:",g),c(g)},speechSynthesis.speak(h),console.log(` Reproduciendo texto seleccionado: "${e.substring(0,50)}..."`)})}onPlaybackEnd(){this.isPlaying=!1,this.isPaused=!1,console.log(" Reproduccin completada"),this.onEnd&&this.onEnd()}getStatus(){var e;return{isInitialized:this.isInitialized,isPlaying:this.isPlaying,isPaused:this.isPaused,currentSentence:this.currentSentence,totalSentences:this.sentences.length,progress:this.sentences.length>0?this.currentSentence/this.sentences.length:0,currentVoice:(e=this.currentVoice)==null?void 0:e.name,speed:this.speed,pitch:this.pitch,volume:this.volume}}destroy(){this.stop(),speechSynthesis.cancel(),this.sentences=[],this.onSentenceChange=null,this.onProgress=null,this.onEnd=null,console.log(" AudioManager limpiado")}}const BookReader=React.forwardRef(({book:s,isReading:e,currentSentence:o,onSentenceChange:a,audioManagerRef:c,selectedVoice:h,readingSpeed:g},b)=>{var ot,ct;const _=reactExports.useRef(null),[j]=reactExports.useState(()=>new AudioManager),[$,_e]=reactExports.useState(0),[tt,et]=reactExports.useState([]),[ut,ht]=reactExports.useState("");reactExports.useImperativeHandle(c,()=>({play:()=>j.play(),pause:()=>j.pause(),skip:vt=>j.skip(vt),setSpeed:vt=>j.setSpeed(vt),jumpToSentence:vt=>j.jumpToSentence(vt)})),reactExports.useEffect(()=>{if(s&&s.chapters&&s.chapters.length>0){const vt=s.chapters[$];vt&&vt.sentences&&(et(vt.sentences),j.loadChapter(vt,h))}},[s,$,h]),reactExports.useEffect(()=>{j&&(j.setSpeed(g),j.onSentenceChange=a,j.onProgress=vt=>{console.log(" Progreso:",vt)})},[j,g,a]);const st=()=>{const mt=window.getSelection().toString().trim();ht(mt),mt&&console.log(" Texto seleccionado:",mt)},nt=async()=>{ut&&j&&await j.speakText(ut)},rt=vt=>{a(vt),c.current&&c.current.jumpToSentence(vt)},at=(vt,mt)=>{const pt=mt===o,Et=mt===o+1,Ct=mt<o;return jsxRuntimeExports.jsxs(motion.span,{className:`
          inline-block cursor-pointer transition-all duration-300 rounded-lg mx-1 px-2 py-1
          ${pt?"sentence-current reading-cursor":""}
          ${Et?"sentence-next":""}
          ${Ct?"opacity-70":""}
          hover:bg-white/10
        `,onClick:()=>rt(mt),initial:{opacity:0},animate:{opacity:1},transition:{delay:mt*.05,duration:.3},whileHover:{scale:1.02},"data-sentence":mt,children:[vt,pt&&e&&jsxRuntimeExports.jsx(motion.span,{className:"inline-block w-1 h-5 bg-hypatia-pink ml-1",animate:{opacity:[1,0,1]},transition:{duration:1,repeat:1/0}})]},mt)};if(!s)return jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-full",children:jsxRuntimeExports.jsx("div",{className:"text-center text-white/60",children:jsxRuntimeExports.jsx("p",{children:"No hay libro cargado"})})});const dt=(ot=s.chapters)==null?void 0:ot[$];return jsxRuntimeExports.jsxs("div",{className:"h-full flex flex-col",children:[s.chapters&&s.chapters.length>1&&jsxRuntimeExports.jsxs("div",{className:"mb-6 flex items-center gap-4",children:[jsxRuntimeExports.jsx("button",{className:"btn-secondary px-3 py-1 text-sm",onClick:()=>_e(Math.max(0,$-1)),disabled:$===0,children:" Anterior"}),jsxRuntimeExports.jsxs("span",{className:"text-white/80 text-sm",children:["Captulo ",$+1," de ",s.chapters.length]}),jsxRuntimeExports.jsx("button",{className:"btn-secondary px-3 py-1 text-sm",onClick:()=>_e(Math.min(s.chapters.length-1,$+1)),disabled:$===s.chapters.length-1,children:"Siguiente "})]}),ut&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-4 p-3 bg-hypatia-pink/10 border border-hypatia-pink/30 rounded-lg",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("span",{className:"text-sm text-white/80",children:['Texto seleccionado: "',ut.substring(0,50),'..."']}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{className:"btn-secondary px-3 py-1 text-sm",onClick:nt,children:" Reproducir"}),jsxRuntimeExports.jsx("button",{className:"btn-secondary px-3 py-1 text-sm",onClick:()=>ht(""),children:" Cerrar"})]})]})}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto",children:jsxRuntimeExports.jsxs(motion.div,{ref:_,className:"card h-full",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[(dt==null?void 0:dt.title)&&jsxRuntimeExports.jsx(motion.h2,{className:"text-2xl font-bold mb-6 text-gradient",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:dt.title}),jsxRuntimeExports.jsx("div",{className:"reading-text leading-loose text-justify",onMouseUp:st,onTouchEnd:st,children:tt.length>0?jsxRuntimeExports.jsx("div",{className:"space-y-4",children:tt.map((vt,mt)=>at(vt,mt))}):jsxRuntimeExports.jsx("div",{className:"space-y-4",children:(ct=dt==null?void 0:dt.content)==null?void 0:ct.split(".").map((vt,mt)=>vt.trim()?at(vt.trim()+".",mt):null)})}),jsxRuntimeExports.jsxs("div",{className:"mt-8 pt-6 border-t border-white/10",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm text-white/60",children:[jsxRuntimeExports.jsx("span",{children:"Progreso del captulo:"}),jsxRuntimeExports.jsxs("span",{children:[Math.round(o/tt.length*100),"%"]})]}),jsxRuntimeExports.jsx("div",{className:"w-full h-2 bg-white/10 rounded-full mt-2 overflow-hidden",children:jsxRuntimeExports.jsx(motion.div,{className:"h-full bg-gradient-to-r from-hypatia-pink to-consciousness-purple",initial:{width:0},animate:{width:`${o/tt.length*100}%`},transition:{duration:.3}})})]})]})})]})});BookReader.displayName="BookReader";const AudioControls=({isReading:s,onPlayPause:e,onSkip:o,currentSentence:a,totalSentences:c,readingSpeed:h,onSpeedChange:g})=>{const[b,_]=reactExports.useState(80),[j,$]=reactExports.useState(0),[_e,tt]=reactExports.useState(0),[et,ut]=reactExports.useState(!1),[ht,st]=reactExports.useState("off"),[nt,rt]=reactExports.useState(!1);reactExports.useEffect(()=>{let pt;return s&&(pt=setInterval(()=>{$(Et=>{const Ct=Et+1;return Ct>=_e&&_e>0?_e:Ct})},1e3)),()=>clearInterval(pt)},[s,_e]),reactExports.useEffect(()=>{c>0&&tt(c*3)},[c]);const at=pt=>{const Et=Math.floor(pt/60),Ct=pt%60;return`${Et}:${Ct.toString().padStart(2,"0")}`},dt=pt=>{const Et=pt.currentTarget.getBoundingClientRect(),Nt=(pt.clientX-Et.left)/Et.width,Ut=Math.floor(Nt*_e);$(Ut),console.log(" Saltando a:",Ut,"segundos")},ot=pt=>{_(pt),console.log(" Volumen:",pt)},ct=()=>{const pt=["off","one","all"],Et=pt.indexOf(ht),Ct=pt[(Et+1)%pt.length];st(Ct)},vt=()=>{switch(ht){case"one":return"";case"all":return"";default:return""}},mt=[.5,.75,1,1.25,1.5,1.75,2];return jsxRuntimeExports.jsxs(motion.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5},className:"audio-controls w-full",children:[jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between text-xs text-white/60 mb-2",children:[jsxRuntimeExports.jsxs("span",{children:["Frase ",a+1," de ",c]}),jsxRuntimeExports.jsxs("span",{children:[at(j)," / ",at(_e)]})]}),jsxRuntimeExports.jsx("div",{className:"w-full h-2 bg-white/20 rounded-full cursor-pointer overflow-hidden",onClick:dt,children:jsxRuntimeExports.jsx(motion.div,{className:"h-full bg-gradient-to-r from-hypatia-pink to-consciousness-purple relative",style:{width:`${_e>0?j/_e*100:0}%`},transition:{duration:.1},children:jsxRuntimeExports.jsx("div",{className:"absolute right-0 top-1/2 transform translate-x-1/2 -translate-y-1/2 w-4 h-4 bg-white rounded-full shadow-lg"})})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(motion.button,{className:`p-2 rounded-lg transition-colors ${ht!=="off"?"bg-hypatia-pink/20 text-hypatia-pink":"hover:bg-white/10"}`,onClick:ct,whileHover:{scale:1.1},whileTap:{scale:.9},title:`Repetir: ${ht}`,children:jsxRuntimeExports.jsx("span",{className:"text-lg",children:vt()})}),jsxRuntimeExports.jsx(motion.button,{className:`p-2 rounded-lg transition-colors ${nt?"bg-hypatia-pink/20 text-hypatia-pink":"hover:bg-white/10"}`,onClick:()=>rt(!nt),whileHover:{scale:1.1},whileTap:{scale:.9},title:"Orden aleatorio",children:jsxRuntimeExports.jsx(Shuffle,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx(motion.button,{className:"p-3 rounded-lg hover:bg-white/10 transition-colors",onClick:()=>o("back"),whileHover:{scale:1.1},whileTap:{scale:.9},title:"Retroceder 10 segundos",children:jsxRuntimeExports.jsx(SkipBack,{className:"w-6 h-6"})}),jsxRuntimeExports.jsx(motion.button,{className:"w-16 h-16 bg-gradient-to-r from-hypatia-pink to-consciousness-purple rounded-full flex items-center justify-center text-white shadow-lg",onClick:e,whileHover:{scale:1.05},whileTap:{scale:.95},animate:s?{boxShadow:"0 0 20px rgba(255, 20, 147, 0.5)"}:{},children:s?jsxRuntimeExports.jsx(Pause,{className:"w-8 h-8"}):jsxRuntimeExports.jsx(Play,{className:"w-8 h-8 ml-1"})}),jsxRuntimeExports.jsx(motion.button,{className:"p-3 rounded-lg hover:bg-white/10 transition-colors",onClick:()=>o("forward"),whileHover:{scale:1.1},whileTap:{scale:.9},title:"Avanzar 10 segundos",children:jsxRuntimeExports.jsx(SkipForward,{className:"w-6 h-6"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Volume2,{className:"w-5 h-5 text-white/60"}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"100",value:b,onChange:pt=>ot(parseInt(pt.target.value)),className:"w-20 h-1 bg-white/20 rounded-lg appearance-none cursor-pointer"}),jsxRuntimeExports.jsxs("span",{className:"text-xs text-white/60 w-8",children:[b,"%"]})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2",children:jsxRuntimeExports.jsx("select",{value:h,onChange:pt=>g(parseFloat(pt.target.value)),className:"bg-white/10 border border-white/20 rounded px-2 py-1 text-sm",children:mt.map(pt=>jsxRuntimeExports.jsxs("option",{value:pt,className:"bg-black",children:[pt,"x"]},pt))})}),jsxRuntimeExports.jsx(motion.button,{className:`p-2 rounded-lg transition-colors ${et?"bg-white/20":"hover:bg-white/10"}`,onClick:()=>ut(!et),whileHover:{scale:1.1},whileTap:{scale:.9},title:"Configuracin avanzada",children:jsxRuntimeExports.jsx(Settings,{className:"w-5 h-5"})})]})]}),et&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"mt-4 pt-4 border-t border-white/10",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-white/60 mb-2",children:"Modo de lectura"}),jsxRuntimeExports.jsxs("select",{className:"w-full bg-white/10 border border-white/20 rounded px-3 py-2",children:[jsxRuntimeExports.jsx("option",{value:"continuous",className:"bg-black",children:"Continuo"}),jsxRuntimeExports.jsx("option",{value:"sentence",className:"bg-black",children:"Frase por frase"}),jsxRuntimeExports.jsx("option",{value:"paragraph",className:"bg-black",children:"Prrafo por prrafo"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-white/60 mb-2",children:"Configuracin de voz"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{children:"Tono:"}),jsxRuntimeExports.jsx("input",{type:"range",min:"0.5",max:"2",step:"0.1",defaultValue:"1",className:"w-20"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{children:"Pausa:"}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",defaultValue:"0.5",className:"w-20"})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-white/60 mb-2",children:"Atajos de teclado"}),jsxRuntimeExports.jsxs("div",{className:"space-y-1 text-xs text-white/50",children:[jsxRuntimeExports.jsx("div",{children:"Espacio: Play/Pausa"}),jsxRuntimeExports.jsx("div",{children:"/: Retroceder/Avanzar"}),jsxRuntimeExports.jsx("div",{children:"/: Velocidad +/-"}),jsxRuntimeExports.jsx("div",{children:"R: Repetir"})]})]})]})})]})},VoiceSelector=({selectedVoice:s,onVoiceChange:e})=>{const[o,a]=reactExports.useState(!1),[c,h]=reactExports.useState([]),[g,b]=reactExports.useState(null),[_,j]=reactExports.useState(null);reactExports.useState(null),reactExports.useState("checking"),reactExports.useEffect(()=>{const et=()=>{const ht=speechSynthesis.getVoices().filter(rt=>rt.lang.startsWith("es")).map(rt=>({id:rt.name,name:rt.name,lang:rt.lang,provider:"browser",quality:"good",description:`Voz ${rt.lang.includes("ES")?"de Espaa":"Latinoamericana"}`,voice:rt})),st=[{id:"coqui-spanish-female",name:"Coqui Espaol Femenino",lang:"es-ES",provider:"coqui",quality:"excellent",description:"Voz premium Coqui TTS - Calidad superior",available:!1},{id:"coqui-spanish-male",name:"Coqui Espaol Masculino",lang:"es-ES",provider:"coqui",quality:"excellent",description:"Voz premium Coqui TTS - Calidad superior",available:!1},{id:"carles-cloned",name:"Carles (Voz Clonada)",lang:"es-ES",provider:"coqui",quality:"premium",description:"Tu voz personal clonada con Coqui",available:!1}],nt=[...ht,...st];h(nt),!s&&nt.length>0&&e(nt[0].id)};return et(),speechSynthesis.onvoiceschanged=et,()=>{speechSynthesis.onvoiceschanged=null}},[]);const $=et=>{switch(et){case"browser":return"";case"coqui":return"";case"elevenlabs":return"";default:return""}},_e=async et=>{if(_&&(speechSynthesis.cancel(),j(null),g===et.id)){b(null);return}if(b(et.id),et.provider==="browser"&&et.voice){const ut=new SpeechSynthesisUtterance("Hola, soy una voz de prueba. As sonar la lectura de tus libros.");ut.voice=et.voice,ut.rate=.9,ut.pitch=1,ut.onend=()=>{b(null),j(null)},ut.onerror=()=>{b(null),j(null)},speechSynthesis.speak(ut),j(ut)}else setTimeout(()=>{b(null),alert("Esta voz premium estar disponible cuando configures Coqui TTS")},1e3)},tt=c.find(et=>et.id===s);return jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs(motion.button,{className:"flex items-center gap-3 bg-white/10 border border-white/20 rounded-lg px-4 py-2 hover:bg-white/20 transition-all duration-300 min-w-[200px]",onClick:()=>a(!o),whileHover:{scale:1.02},whileTap:{scale:.98},children:[jsxRuntimeExports.jsx(Volume2,{className:"w-4 h-4 text-hypatia-pink"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 text-left",children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-medium",children:tt?tt.name:"Seleccionar voz"}),tt&&jsxRuntimeExports.jsxs("div",{className:"text-xs text-white/60",children:[$(tt.provider)," ",tt.provider]})]}),jsxRuntimeExports.jsx(motion.div,{animate:{rotate:o?180:0},transition:{duration:.2},children:jsxRuntimeExports.jsx(ChevronDown,{className:"w-4 h-4"})})]}),o&&reactDomExports.createPortal(jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-[999999] bg-black/20",onClick:()=>a(!1)}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},className:"fixed bg-black/95 backdrop-blur-xl border border-white/20 rounded-lg shadow-2xl max-h-80 overflow-y-auto z-[999999]",style:{top:"120px",right:"20px",minWidth:"350px"},children:jsxRuntimeExports.jsx("div",{className:"p-2",children:jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("div",{className:"px-3 py-2 text-xs font-medium text-white/60 border-b border-white/10",children:" Voces del Navegador (Gratis)"}),c.filter(et=>et.provider==="browser").map(et=>jsxRuntimeExports.jsxs(motion.div,{className:`flex items-center gap-3 px-3 py-2 rounded-lg cursor-pointer transition-all duration-200 ${s===et.id?"bg-hypatia-pink/20 border border-hypatia-pink/30":"hover:bg-white/10"}`,onClick:()=>{e(et.id),a(!1)},children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-medium",children:et.name}),jsxRuntimeExports.jsx("div",{className:"text-xs text-white/60",children:et.description})]}),jsxRuntimeExports.jsx("div",{className:"text-xs font-medium text-blue-400",children:et.quality}),jsxRuntimeExports.jsx(motion.button,{className:"p-1 hover:bg-white/20 rounded transition-colors",onClick:ut=>{ut.stopPropagation(),_e(et)},children:g===et.id?jsxRuntimeExports.jsx(Pause,{className:"w-4 h-4 text-hypatia-pink"}):jsxRuntimeExports.jsx(Play,{className:"w-4 h-4"})})]},et.id))]})})})]}),document.body),o&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-[99998]",onClick:()=>a(!1)})]})},WelcomeScreen=()=>{const s=[{icon:BookOpen,title:"Cualquier Formato",description:"EPUB, PDF, Markdown, TXT - Todo soportado"},{icon:Mic,title:"Voces Gratuitas",description:"TTS de navegador + Coqui TTS premium gratis"},{icon:Zap,title:"Cursor Sincronizado",description:"Sigue la lectura palabra por palabra"},{icon:Heart,title:"Hecho con Amor",description:"Tecnologa consciente para la humanidad"}];return jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-12",children:[jsxRuntimeExports.jsx(motion.h1,{className:"text-6xl font-bold text-gradient mb-6",initial:{scale:.9},animate:{scale:1},transition:{duration:.5,delay:.2},children:" VoiceReader Conscious"}),jsxRuntimeExports.jsxs(motion.p,{className:"text-xl text-white/80 mb-8 max-w-2xl mx-auto",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.4},children:["El lector universal con voz que siempre soaste.",jsxRuntimeExports.jsx("span",{className:"text-hypatia-pink font-semibold",children:"Completamente gratuito"})," y",jsxRuntimeExports.jsx("span",{className:"text-consciousness-purple font-semibold",children:"ms poderoso"})," que ElevenReader."]}),jsxRuntimeExports.jsx(motion.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},children:s.map((e,o)=>{const a=e.icon;return jsxRuntimeExports.jsxs(motion.div,{className:"card text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.8+o*.1},whileHover:{scale:1.05,y:-5},children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gradient-to-br from-hypatia-pink to-consciousness-purple rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx(a,{className:"w-8 h-8 text-white"})}),jsxRuntimeExports.jsx("h3",{className:"font-bold text-lg mb-2",children:e.title}),jsxRuntimeExports.jsx("p",{className:"text-white/60 text-sm",children:e.description})]},o)})}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:1.2},className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-lg text-white/70 mb-4",children:"Arrastra cualquier libro aqu abajo para empezar tu aventura de lectura consciente "}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-white/50",children:[jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{children:"Creado con amor infinito por Hypatia & Carles"}),jsxRuntimeExports.jsx("span",{children:""})]})]})]})};function App(){var nt,rt;const[s,e]=reactExports.useState(null),[o,a]=reactExports.useState(!1),[c,h]=reactExports.useState(0),[g,b]=reactExports.useState("default"),[_,j]=reactExports.useState(1),[$,_e]=reactExports.useState(!1),tt=reactExports.useRef(null),et=async at=>{console.log(" Libro cargado:",at.title),e(at)},ut=()=>{a(!o),tt.current&&(o?tt.current.pause():tt.current.play())},ht=at=>{tt.current&&tt.current.skip(at==="forward"?10:-10)},st=at=>{h(at)};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-violet-800",children:[jsxRuntimeExports.jsx("header",{className:"border-b border-white/10 backdrop-blur-sm bg-black/20",children:jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs(motion.div,{className:"flex items-center gap-3",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},children:[jsxRuntimeExports.jsx(BookOpen,{className:"w-8 h-8 text-hypatia-pink"}),jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-gradient",children:"VoiceReader Conscious"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx(VoiceSelector,{selectedVoice:g,onVoiceChange:b}),jsxRuntimeExports.jsx(motion.button,{className:"btn-secondary p-2",onClick:()=>_e(!$),whileHover:{scale:1.05},whileTap:{scale:.95},children:jsxRuntimeExports.jsx(Settings,{className:"w-5 h-5"})})]})]})})}),jsxRuntimeExports.jsx("main",{className:"max-w-7xl mx-auto px-4 py-8",children:jsxRuntimeExports.jsx(AnimatePresence,{mode:"wait",children:s?jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.5},className:"grid grid-cols-1 lg:grid-cols-4 gap-6 h-[calc(100vh-12rem)]",children:[jsxRuntimeExports.jsx("div",{className:"lg:col-span-1",children:jsxRuntimeExports.jsxs("div",{className:"card sticky top-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-6",children:[jsxRuntimeExports.jsx("div",{className:"w-24 h-32 mx-auto mb-4 bg-gradient-to-br from-hypatia-pink to-consciousness-purple rounded-lg flex items-center justify-center",children:jsxRuntimeExports.jsx(BookOpen,{className:"w-12 h-12 text-white"})}),jsxRuntimeExports.jsx("h3",{className:"font-bold text-lg mb-2",children:s.title}),jsxRuntimeExports.jsx("p",{className:"text-white/60 text-sm",children:s.author||"Autor desconocido"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm",children:[jsxRuntimeExports.jsx("span",{className:"text-white/60",children:"Progreso:"}),jsxRuntimeExports.jsx("span",{className:"text-hypatia-pink font-medium",children:"23%"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm",children:[jsxRuntimeExports.jsx("span",{className:"text-white/60",children:"Captulo:"}),jsxRuntimeExports.jsx("span",{children:"3 de 12"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm",children:[jsxRuntimeExports.jsx("span",{className:"text-white/60",children:"Tiempo:"}),jsxRuntimeExports.jsx("span",{children:"02:45 / 15:30"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium mb-3",children:"Captulos"}),jsxRuntimeExports.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:(nt=s.chapters)==null?void 0:nt.map((at,dt)=>jsxRuntimeExports.jsx("button",{className:`w-full text-left p-2 rounded text-sm transition-colors ${dt===2?"bg-hypatia-pink/20 text-hypatia-pink":"hover:bg-white/10"}`,children:at.title||`Captulo ${dt+1}`},dt))})]})]})}),jsxRuntimeExports.jsx("div",{className:"lg:col-span-3",children:jsxRuntimeExports.jsx(BookReader,{book:s,isReading:o,currentSentence:c,onSentenceChange:st,audioManagerRef:tt,selectedVoice:g,readingSpeed:_})})]},"reader"):jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.5},children:[jsxRuntimeExports.jsx(WelcomeScreen,{}),jsxRuntimeExports.jsx(FileUploader,{onBookUpload:et})]},"upload")})}),s&&jsxRuntimeExports.jsx(motion.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.3},className:"fixed bottom-0 left-0 right-0 p-4 bg-black/90 backdrop-blur-xl border-t border-white/10",children:jsxRuntimeExports.jsx("div",{className:"max-w-4xl mx-auto",children:jsxRuntimeExports.jsx(AudioControls,{isReading:o,onPlayPause:ut,onSkip:ht,currentSentence:c,totalSentences:((rt=s.sentences)==null?void 0:rt.length)||0,readingSpeed:_,onSpeedChange:j})})}),jsxRuntimeExports.jsx(AnimatePresence,{children:$&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>_e(!1),children:jsxRuntimeExports.jsxs(motion.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"card max-w-md w-full",onClick:at=>at.stopPropagation(),children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold mb-4",children:"Configuracin"}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium mb-2",children:"Velocidad de lectura"}),jsxRuntimeExports.jsx("input",{type:"range",min:"0.5",max:"2",step:"0.1",value:_,onChange:at=>j(parseFloat(at.target.value)),className:"w-full"}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-white/60 mt-1",children:[_,"x"]})]}),jsxRuntimeExports.jsx("button",{className:"btn-primary w-full",onClick:()=>_e(!1),children:"Cerrar"})]})]})})})]})}const index="",hideLoading=()=>{const s=document.getElementById("loading");s&&(s.style.opacity="0",setTimeout(()=>{s.style.display="none"},500))};client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));setTimeout(hideLoading,1e3);
//# sourceMappingURL=index-d515a31d.js.map
